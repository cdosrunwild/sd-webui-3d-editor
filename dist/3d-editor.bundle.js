/*! For license information please see 3d-editor.bundle.js.LICENSE.txt */
!function(){var e,t,n,r,i={8166:function(e,t,n){!function(e,t){"use strict";function n(){}var r=function(e,r){if(void 0===r&&(r={}),this.toks=this.constructor.BaseParser.tokenizer(e,r),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:t.tokTypes.eof,start:0,end:0},this.tok.validateRegExpFlags=n,this.tok.validateRegExpPattern=n,this.options.locations){var i=this.toks.curPosition();this.tok.loc=new t.SourceLocation(this.toks,i,i)}this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1,this.inAsync=!1,this.inFunction=!1};r.prototype.startNode=function(){return new t.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)},r.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start},r.prototype.startNodeAt=function(e){return this.options.locations?new t.Node(this.toks,e[0],e[1]):new t.Node(this.toks,e)},r.prototype.finishNode=function(e,t){return e.type=t,e.end=this.last.end,this.options.locations&&(e.loc.end=this.last.loc.end),this.options.ranges&&(e.range[1]=this.last.end),e},r.prototype.dummyNode=function(e){var n=this.startNode();return n.type=e,n.end=n.start,this.options.locations&&(n.loc.end=n.loc.start),this.options.ranges&&(n.range[1]=n.start),this.last={type:t.tokTypes.name,start:n.start,end:n.start,loc:n.loc},n},r.prototype.dummyIdent=function(){var e=this.dummyNode("Identifier");return e.name="✖",e},r.prototype.dummyString=function(){var e=this.dummyNode("Literal");return e.value=e.raw="✖",e},r.prototype.eat=function(e){return this.tok.type===e&&(this.next(),!0)},r.prototype.isContextual=function(e){return this.tok.type===t.tokTypes.name&&this.tok.value===e},r.prototype.eatContextual=function(e){return this.tok.value===e&&this.eat(t.tokTypes.name)},r.prototype.canInsertSemicolon=function(){return this.tok.type===t.tokTypes.eof||this.tok.type===t.tokTypes.braceR||t.lineBreak.test(this.input.slice(this.last.end,this.tok.start))},r.prototype.semicolon=function(){return this.eat(t.tokTypes.semi)},r.prototype.expect=function(e){if(this.eat(e))return!0;for(var t=1;t<=2;t++)if(this.lookAhead(t).type===e){for(var n=0;n<t;n++)this.next();return!0}},r.prototype.pushCx=function(){this.context.push(this.curIndent)},r.prototype.popCx=function(){this.curIndent=this.context.pop()},r.prototype.lineEnd=function(e){for(;e<this.input.length&&!t.isNewLine(this.input.charCodeAt(e));)++e;return e},r.prototype.indentationAfter=function(e){for(var t=0;;++e){var n=this.input.charCodeAt(e);if(32===n)++t;else{if(9!==n)return t;t+=this.options.tabSize}}},r.prototype.closes=function(e,n,r,i){return this.tok.type===e||this.tok.type===t.tokTypes.eof||r!==this.curLineStart&&this.curIndent<n&&this.tokenStartsLine()&&(!i||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<n)},r.prototype.tokenStartsLine=function(){for(var e=this.tok.start-1;e>=this.curLineStart;--e){var t=this.input.charCodeAt(e);if(9!==t&&32!==t)return!1}return!0},r.prototype.extend=function(e,t){this[e]=t(this[e])},r.prototype.parse=function(){return this.next(),this.parseTopLevel()},r.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},r.parse=function(e,t){return new this(e,t).parse()},r.BaseParser=t.Parser;var i=r.prototype;function s(e){return e<14&&e>8||32===e||160===e||t.isNewLine(e)}function a(e){return"✖"===e.name}i.next=function(){if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}},i.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===t.tokTypes.dot&&"."===this.input.substr(this.toks.end,1)&&this.options.ecmaVersion>=6&&(this.toks.end++,this.toks.type=t.tokTypes.ellipsis),new t.Token(this.toks)}catch(o){if(!(o instanceof SyntaxError))throw o;var e=o.message,n=o.raisedAt,r=!0;if(/unterminated/i.test(e))if(n=this.lineEnd(o.pos+1),/string/.test(e))r={start:o.pos,end:n,type:t.tokTypes.string,value:this.input.slice(o.pos+1,n)};else if(/regular expr/i.test(e)){var i=this.input.slice(o.pos,n);try{i=new RegExp(i)}catch(e){}r={start:o.pos,end:n,type:t.tokTypes.regexp,value:i}}else r=!!/template/.test(e)&&{start:o.pos,end:n,type:t.tokTypes.template,value:this.input.slice(o.pos,n)};else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(e))for(;n<this.input.length&&!s(this.input.charCodeAt(n));)++n;else if(/character escape|expected hexadecimal/i.test(e))for(;n<this.input.length;){var a=this.input.charCodeAt(n++);if(34===a||39===a||t.isNewLine(a))break}else if(/unexpected character/i.test(e))n++,r=!1;else{if(!/regular expression/i.test(e))throw o;r=!0}if(this.resetTo(n),!0===r&&(r={start:n,end:n,type:t.tokTypes.name,value:"✖"}),r)return this.options.locations&&(r.loc=new t.SourceLocation(this.toks,t.getLineInfo(this.input,r.start),t.getLineInfo(this.input,r.end))),r}},i.resetTo=function(e){this.toks.pos=e;var n,r=this.input.charAt(e-1);if(this.toks.exprAllowed=!r||/[[{(,;:?/*=+\-~!|&%^<>]/.test(r)||/[enwfd]/.test(r)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(e-10,e)),this.options.locations)for(this.toks.curLine=1,this.toks.lineStart=t.lineBreakG.lastIndex=0;(n=t.lineBreakG.exec(this.input))&&n.index<e;)++this.toks.curLine,this.toks.lineStart=n.index+n[0].length},i.lookAhead=function(e){for(;e>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[e-1]};var o=r.prototype;o.parseTopLevel=function(){var e=this.startNodeAt(this.options.locations?[0,t.getLineInfo(this.input,0)]:0);for(e.body=[];this.tok.type!==t.tokTypes.eof;)e.body.push(this.parseStatement());return this.toks.adaptDirectivePrologue(e.body),this.last=this.tok,this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")},o.parseStatement=function(){var e,n=this.tok.type,r=this.startNode();switch(this.toks.isLet()&&(n=t.tokTypes._var,e="let"),n){case t.tokTypes._break:case t.tokTypes._continue:this.next();var i=n===t.tokTypes._break;return this.semicolon()||this.canInsertSemicolon()?r.label=null:(r.label=this.tok.type===t.tokTypes.name?this.parseIdent():null,this.semicolon()),this.finishNode(r,i?"BreakStatement":"ContinueStatement");case t.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(r,"DebuggerStatement");case t.tokTypes._do:return this.next(),r.body=this.parseStatement(),r.test=this.eat(t.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(r,"DoWhileStatement");case t.tokTypes._for:this.next();var s=this.options.ecmaVersion>=9&&this.inAsync&&this.eatContextual("await");if(this.pushCx(),this.expect(t.tokTypes.parenL),this.tok.type===t.tokTypes.semi)return this.parseFor(r,null);var o=this.toks.isLet();if(o||this.tok.type===t.tokTypes._var||this.tok.type===t.tokTypes._const){var l=this.parseVar(this.startNode(),!0,o?"let":this.tok.value);return 1!==l.declarations.length||this.tok.type!==t.tokTypes._in&&!this.isContextual("of")?this.parseFor(r,l):(this.options.ecmaVersion>=9&&this.tok.type!==t.tokTypes._in&&(r.await=s),this.parseForIn(r,l))}var c=this.parseExpression(!0);return this.tok.type===t.tokTypes._in||this.isContextual("of")?(this.options.ecmaVersion>=9&&this.tok.type!==t.tokTypes._in&&(r.await=s),this.parseForIn(r,this.toAssignable(c))):this.parseFor(r,c);case t.tokTypes._function:return this.next(),this.parseFunction(r,!0);case t.tokTypes._if:return this.next(),r.test=this.parseParenExpression(),r.consequent=this.parseStatement(),r.alternate=this.eat(t.tokTypes._else)?this.parseStatement():null,this.finishNode(r,"IfStatement");case t.tokTypes._return:return this.next(),this.eat(t.tokTypes.semi)||this.canInsertSemicolon()?r.argument=null:(r.argument=this.parseExpression(),this.semicolon()),this.finishNode(r,"ReturnStatement");case t.tokTypes._switch:var u,h=this.curIndent,p=this.curLineStart;for(this.next(),r.discriminant=this.parseParenExpression(),r.cases=[],this.pushCx(),this.expect(t.tokTypes.braceL);!this.closes(t.tokTypes.braceR,h,p,!0);)if(this.tok.type===t.tokTypes._case||this.tok.type===t.tokTypes._default){var d=this.tok.type===t.tokTypes._case;u&&this.finishNode(u,"SwitchCase"),r.cases.push(u=this.startNode()),u.consequent=[],this.next(),u.test=d?this.parseExpression():null,this.expect(t.tokTypes.colon)}else u||(r.cases.push(u=this.startNode()),u.consequent=[],u.test=null),u.consequent.push(this.parseStatement());return u&&this.finishNode(u,"SwitchCase"),this.popCx(),this.eat(t.tokTypes.braceR),this.finishNode(r,"SwitchStatement");case t.tokTypes._throw:return this.next(),r.argument=this.parseExpression(),this.semicolon(),this.finishNode(r,"ThrowStatement");case t.tokTypes._try:if(this.next(),r.block=this.parseBlock(),r.handler=null,this.tok.type===t.tokTypes._catch){var f=this.startNode();this.next(),this.eat(t.tokTypes.parenL)?(f.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(t.tokTypes.parenR)):f.param=null,f.body=this.parseBlock(),r.handler=this.finishNode(f,"CatchClause")}return r.finalizer=this.eat(t.tokTypes._finally)?this.parseBlock():null,r.handler||r.finalizer?this.finishNode(r,"TryStatement"):r.block;case t.tokTypes._var:case t.tokTypes._const:return this.parseVar(r,!1,e||this.tok.value);case t.tokTypes._while:return this.next(),r.test=this.parseParenExpression(),r.body=this.parseStatement(),this.finishNode(r,"WhileStatement");case t.tokTypes._with:return this.next(),r.object=this.parseParenExpression(),r.body=this.parseStatement(),this.finishNode(r,"WithStatement");case t.tokTypes.braceL:return this.parseBlock();case t.tokTypes.semi:return this.next(),this.finishNode(r,"EmptyStatement");case t.tokTypes._class:return this.parseClass(!0);case t.tokTypes._import:return this.options.ecmaVersion>10&&this.lookAhead(1).type===t.tokTypes.parenL?(r.expression=this.parseExpression(),this.semicolon(),this.finishNode(r,"ExpressionStatement")):this.parseImport();case t.tokTypes._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(r,!0,!0);var m=this.parseExpression();return a(m)?(this.next(),this.tok.type===t.tokTypes.eof?this.finishNode(r,"EmptyStatement"):this.parseStatement()):n===t.tokTypes.name&&"Identifier"===m.type&&this.eat(t.tokTypes.colon)?(r.body=this.parseStatement(),r.label=m,this.finishNode(r,"LabeledStatement")):(r.expression=m,this.semicolon(),this.finishNode(r,"ExpressionStatement"))}},o.parseBlock=function(){var e=this.startNode();this.pushCx(),this.expect(t.tokTypes.braceL);var n=this.curIndent,r=this.curLineStart;for(e.body=[];!this.closes(t.tokTypes.braceR,n,r,!0);)e.body.push(this.parseStatement());return this.popCx(),this.eat(t.tokTypes.braceR),this.finishNode(e,"BlockStatement")},o.parseFor=function(e,n){return e.init=n,e.test=e.update=null,this.eat(t.tokTypes.semi)&&this.tok.type!==t.tokTypes.semi&&(e.test=this.parseExpression()),this.eat(t.tokTypes.semi)&&this.tok.type!==t.tokTypes.parenR&&(e.update=this.parseExpression()),this.popCx(),this.expect(t.tokTypes.parenR),e.body=this.parseStatement(),this.finishNode(e,"ForStatement")},o.parseForIn=function(e,n){var r=this.tok.type===t.tokTypes._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=n,e.right=this.parseExpression(),this.popCx(),this.expect(t.tokTypes.parenR),e.body=this.parseStatement(),this.finishNode(e,r)},o.parseVar=function(e,n,r){e.kind=r,this.next(),e.declarations=[];do{var i=this.startNode();i.id=this.options.ecmaVersion>=6?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),i.init=this.eat(t.tokTypes.eq)?this.parseMaybeAssign(n):null,e.declarations.push(this.finishNode(i,"VariableDeclarator"))}while(this.eat(t.tokTypes.comma));if(!e.declarations.length){var s=this.startNode();s.id=this.dummyIdent(),e.declarations.push(this.finishNode(s,"VariableDeclarator"))}return n||this.semicolon(),this.finishNode(e,"VariableDeclaration")},o.parseClass=function(e){var n=this.startNode();this.next(),this.tok.type===t.tokTypes.name?n.id=this.parseIdent():n.id=!0===e?this.dummyIdent():null,n.superClass=this.eat(t.tokTypes._extends)?this.parseExpression():null,n.body=this.startNode(),n.body.body=[],this.pushCx();var r=this.curIndent+1,i=this.curLineStart;for(this.eat(t.tokTypes.braceL),this.curIndent+1<r&&(r=this.curIndent,i=this.curLineStart);!this.closes(t.tokTypes.braceR,r,i);)if(!this.semicolon()){var s=this.startNode(),o=void 0,l=void 0;this.options.ecmaVersion>=6&&(s.static=!1,o=this.eat(t.tokTypes.star)),this.parsePropertyName(s),a(s.key)?(a(this.parseMaybeAssign())&&this.next(),this.eat(t.tokTypes.comma)):("Identifier"!==s.key.type||s.computed||"static"!==s.key.name||this.tok.type===t.tokTypes.parenL||this.tok.type===t.tokTypes.braceL?s.static=!1:(s.static=!0,o=this.eat(t.tokTypes.star),this.parsePropertyName(s)),s.computed||"Identifier"!==s.key.type||"async"!==s.key.name||this.tok.type===t.tokTypes.parenL||this.canInsertSemicolon()?l=!1:(l=!0,o=this.options.ecmaVersion>=9&&this.eat(t.tokTypes.star),this.parsePropertyName(s)),this.options.ecmaVersion>=5&&"Identifier"===s.key.type&&!s.computed&&("get"===s.key.name||"set"===s.key.name)&&this.tok.type!==t.tokTypes.parenL&&this.tok.type!==t.tokTypes.braceL?(s.kind=s.key.name,this.parsePropertyName(s),s.value=this.parseMethod(!1)):(s.computed||s.static||o||l||!("Identifier"===s.key.type&&"constructor"===s.key.name||"Literal"===s.key.type&&"constructor"===s.key.value)?s.kind="method":s.kind="constructor",s.value=this.parseMethod(o,l)),n.body.body.push(this.finishNode(s,"MethodDefinition")))}return this.popCx(),this.eat(t.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(n.body,"ClassBody"),this.finishNode(n,e?"ClassDeclaration":"ClassExpression")},o.parseFunction=function(e,n,r){var i=this.inAsync,s=this.inFunction;return this.initFunction(e),this.options.ecmaVersion>=6&&(e.generator=this.eat(t.tokTypes.star)),this.options.ecmaVersion>=8&&(e.async=!!r),this.tok.type===t.tokTypes.name?e.id=this.parseIdent():!0===n&&(e.id=this.dummyIdent()),this.inAsync=e.async,this.inFunction=!0,e.params=this.parseFunctionParams(),e.body=this.parseBlock(),this.toks.adaptDirectivePrologue(e.body.body),this.inAsync=i,this.inFunction=s,this.finishNode(e,n?"FunctionDeclaration":"FunctionExpression")},o.parseExport=function(){var e=this.startNode();if(this.next(),this.eat(t.tokTypes.star))return e.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(t.tokTypes._default)){var n;if(this.tok.type===t.tokTypes._function||(n=this.toks.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,"nullableID",n)}else this.tok.type===t.tokTypes._class?e.declaration=this.parseClass("nullableID"):(e.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(e,"ExportDefaultDeclaration")}return this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(e.declaration=this.parseStatement(),e.specifiers=[],e.source=null):(e.declaration=null,e.specifiers=this.parseExportSpecifierList(),e.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(e,"ExportNamedDeclaration")},o.parseImport=function(){var e,n=this.startNode();return this.next(),this.tok.type===t.tokTypes.string?(n.specifiers=[],n.source=this.parseExprAtom()):(this.tok.type===t.tokTypes.name&&"from"!==this.tok.value&&((e=this.startNode()).local=this.parseIdent(),this.finishNode(e,"ImportDefaultSpecifier"),this.eat(t.tokTypes.comma)),n.specifiers=this.parseImportSpecifiers(),n.source=this.eatContextual("from")&&this.tok.type===t.tokTypes.string?this.parseExprAtom():this.dummyString(),e&&n.specifiers.unshift(e)),this.semicolon(),this.finishNode(n,"ImportDeclaration")},o.parseImportSpecifiers=function(){var e=[];if(this.tok.type===t.tokTypes.star){var n=this.startNode();this.next(),n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),e.push(this.finishNode(n,"ImportNamespaceSpecifier"))}else{var r=this.curIndent,i=this.curLineStart,s=this.nextLineStart;for(this.pushCx(),this.eat(t.tokTypes.braceL),this.curLineStart>s&&(s=this.curLineStart);!this.closes(t.tokTypes.braceR,r+(this.curLineStart<=s?1:0),i);){var o=this.startNode();if(this.eat(t.tokTypes.star))o.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(o,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;if(o.imported=this.parseIdent(),a(o.imported))break;o.local=this.eatContextual("as")?this.parseIdent():o.imported,this.finishNode(o,"ImportSpecifier")}e.push(o),this.eat(t.tokTypes.comma)}this.eat(t.tokTypes.braceR),this.popCx()}return e},o.parseExportSpecifierList=function(){var e=[],n=this.curIndent,r=this.curLineStart,i=this.nextLineStart;for(this.pushCx(),this.eat(t.tokTypes.braceL),this.curLineStart>i&&(i=this.curLineStart);!this.closes(t.tokTypes.braceR,n+(this.curLineStart<=i?1:0),r)&&!this.isContextual("from");){var s=this.startNode();if(s.local=this.parseIdent(),a(s.local))break;s.exported=this.eatContextual("as")?this.parseIdent():s.local,this.finishNode(s,"ExportSpecifier"),e.push(s),this.eat(t.tokTypes.comma)}return this.eat(t.tokTypes.braceR),this.popCx(),e};var l=r.prototype;l.checkLVal=function(e){if(!e)return e;switch(e.type){case"Identifier":case"MemberExpression":return e;case"ParenthesizedExpression":return e.expression=this.checkLVal(e.expression),e;default:return this.dummyIdent()}},l.parseExpression=function(e){var n=this.storeCurrentPos(),r=this.parseMaybeAssign(e);if(this.tok.type===t.tokTypes.comma){var i=this.startNodeAt(n);for(i.expressions=[r];this.eat(t.tokTypes.comma);)i.expressions.push(this.parseMaybeAssign(e));return this.finishNode(i,"SequenceExpression")}return r},l.parseParenExpression=function(){this.pushCx(),this.expect(t.tokTypes.parenL);var e=this.parseExpression();return this.popCx(),this.expect(t.tokTypes.parenR),e},l.parseMaybeAssign=function(e){if(this.toks.isContextual("yield")){var n=this.startNode();return this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==t.tokTypes.star&&!this.tok.type.startsExpr?(n.delegate=!1,n.argument=null):(n.delegate=this.eat(t.tokTypes.star),n.argument=this.parseMaybeAssign()),this.finishNode(n,"YieldExpression")}var r=this.storeCurrentPos(),i=this.parseMaybeConditional(e);if(this.tok.type.isAssign){var s=this.startNodeAt(r);return s.operator=this.tok.value,s.left=this.tok.type===t.tokTypes.eq?this.toAssignable(i):this.checkLVal(i),this.next(),s.right=this.parseMaybeAssign(e),this.finishNode(s,"AssignmentExpression")}return i},l.parseMaybeConditional=function(e){var n=this.storeCurrentPos(),r=this.parseExprOps(e);if(this.eat(t.tokTypes.question)){var i=this.startNodeAt(n);return i.test=r,i.consequent=this.parseMaybeAssign(),i.alternate=this.expect(t.tokTypes.colon)?this.parseMaybeAssign(e):this.dummyIdent(),this.finishNode(i,"ConditionalExpression")}return r},l.parseExprOps=function(e){var t=this.storeCurrentPos(),n=this.curIndent,r=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),t,-1,e,n,r)},l.parseExprOp=function(e,n,r,i,s,a){if(this.curLineStart!==a&&this.curIndent<s&&this.tokenStartsLine())return e;var o=this.tok.type.binop;if(null!=o&&(!i||this.tok.type!==t.tokTypes._in)&&o>r){var l=this.startNodeAt(n);if(l.left=e,l.operator=this.tok.value,this.next(),this.curLineStart!==a&&this.curIndent<s&&this.tokenStartsLine())l.right=this.dummyIdent();else{var c=this.storeCurrentPos();l.right=this.parseExprOp(this.parseMaybeUnary(!1),c,o,i,s,a)}return this.finishNode(l,/&&|\|\|/.test(l.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(l,n,r,i,s,a)}return e},l.parseMaybeUnary=function(e){var n,r=this.storeCurrentPos();if(this.options.ecmaVersion>=8&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),e=!0;else if(this.tok.type.prefix){var i=this.startNode(),s=this.tok.type===t.tokTypes.incDec;s||(e=!0),i.operator=this.tok.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(!0),s&&(i.argument=this.checkLVal(i.argument)),n=this.finishNode(i,s?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===t.tokTypes.ellipsis){var a=this.startNode();this.next(),a.argument=this.parseMaybeUnary(e),n=this.finishNode(a,"SpreadElement")}else for(n=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r);o.operator=this.tok.value,o.prefix=!1,o.argument=this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}if(!e&&this.eat(t.tokTypes.starstar)){var l=this.startNodeAt(r);return l.operator="**",l.left=n,l.right=this.parseMaybeUnary(!1),this.finishNode(l,"BinaryExpression")}return n},l.parseExprSubscripts=function(){var e=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),e,!1,this.curIndent,this.curLineStart)},l.parseSubscripts=function(e,n,r,i,s){for(;;){if(this.curLineStart!==s&&this.curIndent<=i&&this.tokenStartsLine()){if(this.tok.type!==t.tokTypes.dot||this.curIndent!==i)return e;--i}var a="Identifier"===e.type&&"async"===e.name&&!this.canInsertSemicolon();if(this.eat(t.tokTypes.dot)){var o=this.startNodeAt(n);o.object=e,this.curLineStart!==s&&this.curIndent<=i&&this.tokenStartsLine()?o.property=this.dummyIdent():o.property=this.parsePropertyAccessor()||this.dummyIdent(),o.computed=!1,e=this.finishNode(o,"MemberExpression")}else if(this.tok.type===t.tokTypes.bracketL){this.pushCx(),this.next();var l=this.startNodeAt(n);l.object=e,l.property=this.parseExpression(),l.computed=!0,this.popCx(),this.expect(t.tokTypes.bracketR),e=this.finishNode(l,"MemberExpression")}else if(r||this.tok.type!==t.tokTypes.parenL){if(this.tok.type!==t.tokTypes.backQuote)return e;var c=this.startNodeAt(n);c.tag=e,c.quasi=this.parseTemplate(),e=this.finishNode(c,"TaggedTemplateExpression")}else{var u=this.parseExprList(t.tokTypes.parenR);if(a&&this.eat(t.tokTypes.arrow))return this.parseArrowExpression(this.startNodeAt(n),u,!0);var h=this.startNodeAt(n);h.callee=e,h.arguments=u,e=this.finishNode(h,"CallExpression")}}},l.parseExprAtom=function(){var e;switch(this.tok.type){case t.tokTypes._this:case t.tokTypes._super:var n=this.tok.type===t.tokTypes._this?"ThisExpression":"Super";return e=this.startNode(),this.next(),this.finishNode(e,n);case t.tokTypes.name:var r=this.storeCurrentPos(),i=this.parseIdent(),s=!1;if("async"===i.name&&!this.canInsertSemicolon()){if(this.eat(t.tokTypes._function))return this.parseFunction(this.startNodeAt(r),!1,!0);this.tok.type===t.tokTypes.name&&(i=this.parseIdent(),s=!0)}return this.eat(t.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(r),[i],s):i;case t.tokTypes.regexp:e=this.startNode();var o=this.tok.value;return e.regex={pattern:o.pattern,flags:o.flags},e.value=o.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(e,"Literal");case t.tokTypes.num:case t.tokTypes.string:return(e=this.startNode()).value=this.tok.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===t.tokTypes.num&&110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal");case t.tokTypes._null:case t.tokTypes._true:case t.tokTypes._false:return(e=this.startNode()).value=this.tok.type===t.tokTypes._null?null:this.tok.type===t.tokTypes._true,e.raw=this.tok.type.keyword,this.next(),this.finishNode(e,"Literal");case t.tokTypes.parenL:var l=this.storeCurrentPos();this.next();var c=this.parseExpression();if(this.expect(t.tokTypes.parenR),this.eat(t.tokTypes.arrow)){var u=c.expressions||[c];return u.length&&a(u[u.length-1])&&u.pop(),this.parseArrowExpression(this.startNodeAt(l),u)}if(this.options.preserveParens){var h=this.startNodeAt(l);h.expression=c,c=this.finishNode(h,"ParenthesizedExpression")}return c;case t.tokTypes.bracketL:return(e=this.startNode()).elements=this.parseExprList(t.tokTypes.bracketR,!0),this.finishNode(e,"ArrayExpression");case t.tokTypes.braceL:return this.parseObj();case t.tokTypes._class:return this.parseClass(!1);case t.tokTypes._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case t.tokTypes._new:return this.parseNew();case t.tokTypes.backQuote:return this.parseTemplate();case t.tokTypes._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.dummyIdent();default:return this.dummyIdent()}},l.parseDynamicImport=function(){var e=this.startNode();return this.next(),this.finishNode(e,"Import")},l.parseNew=function(){var e=this.startNode(),n=this.curIndent,r=this.curLineStart,i=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(t.tokTypes.dot))return e.meta=i,e.property=this.parseIdent(!0),this.finishNode(e,"MetaProperty");var s=this.storeCurrentPos();return e.callee=this.parseSubscripts(this.parseExprAtom(),s,!0,n,r),this.tok.type===t.tokTypes.parenL?e.arguments=this.parseExprList(t.tokTypes.parenR):e.arguments=[],this.finishNode(e,"NewExpression")},l.parseTemplateElement=function(){var e=this.startNode();return this.tok.type===t.tokTypes.invalidTemplate?e.value={raw:this.tok.value,cooked:null}:e.value={raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value},this.next(),e.tail=this.tok.type===t.tokTypes.backQuote,this.finishNode(e,"TemplateElement")},l.parseTemplate=function(){var e=this.startNode();this.next(),e.expressions=[];var n=this.parseTemplateElement();for(e.quasis=[n];!n.tail;)this.next(),e.expressions.push(this.parseExpression()),this.expect(t.tokTypes.braceR)?n=this.parseTemplateElement():((n=this.startNode()).value={cooked:"",raw:""},n.tail=!0,this.finishNode(n,"TemplateElement")),e.quasis.push(n);return this.expect(t.tokTypes.backQuote),this.finishNode(e,"TemplateLiteral")},l.parseObj=function(){var e=this.startNode();e.properties=[],this.pushCx();var n=this.curIndent+1,r=this.curLineStart;for(this.eat(t.tokTypes.braceL),this.curIndent+1<n&&(n=this.curIndent,r=this.curLineStart);!this.closes(t.tokTypes.braceR,n,r);){var i=this.startNode(),s=void 0,o=void 0,l=void 0;if(this.options.ecmaVersion>=9&&this.eat(t.tokTypes.ellipsis))i.argument=this.parseMaybeAssign(),e.properties.push(this.finishNode(i,"SpreadElement")),this.eat(t.tokTypes.comma);else if(this.options.ecmaVersion>=6&&(l=this.storeCurrentPos(),i.method=!1,i.shorthand=!1,s=this.eat(t.tokTypes.star)),this.parsePropertyName(i),this.toks.isAsyncProp(i)?(o=!0,s=this.options.ecmaVersion>=9&&this.eat(t.tokTypes.star),this.parsePropertyName(i)):o=!1,a(i.key))a(this.parseMaybeAssign())&&this.next(),this.eat(t.tokTypes.comma);else{if(this.eat(t.tokTypes.colon))i.kind="init",i.value=this.parseMaybeAssign();else if(this.options.ecmaVersion>=6&&(this.tok.type===t.tokTypes.parenL||this.tok.type===t.tokTypes.braceL))i.kind="init",i.method=!0,i.value=this.parseMethod(s,o);else if(this.options.ecmaVersion>=5&&"Identifier"===i.key.type&&!i.computed&&("get"===i.key.name||"set"===i.key.name)&&this.tok.type!==t.tokTypes.comma&&this.tok.type!==t.tokTypes.braceR&&this.tok.type!==t.tokTypes.eq)i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);else{if(i.kind="init",this.options.ecmaVersion>=6)if(this.eat(t.tokTypes.eq)){var c=this.startNodeAt(l);c.operator="=",c.left=i.key,c.right=this.parseMaybeAssign(),i.value=this.finishNode(c,"AssignmentExpression")}else i.value=i.key;else i.value=this.dummyIdent();i.shorthand=!0}e.properties.push(this.finishNode(i,"Property")),this.eat(t.tokTypes.comma)}}return this.popCx(),this.eat(t.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(e,"ObjectExpression")},l.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(t.tokTypes.bracketL))return e.computed=!0,e.key=this.parseExpression(),void this.expect(t.tokTypes.bracketR);e.computed=!1}var n=this.tok.type===t.tokTypes.num||this.tok.type===t.tokTypes.string?this.parseExprAtom():this.parseIdent();e.key=n||this.dummyIdent()},l.parsePropertyAccessor=function(){if(this.tok.type===t.tokTypes.name||this.tok.type.keyword)return this.parseIdent()},l.parseIdent=function(){var e=this.tok.type===t.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!e)return this.dummyIdent();var n=this.startNode();return this.next(),n.name=e,this.finishNode(n,"Identifier")},l.initFunction=function(e){e.id=null,e.params=[],this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},l.toAssignable=function(e,t){if(!e||"Identifier"===e.type||"MemberExpression"===e.type&&!t);else if("ParenthesizedExpression"===e.type)this.toAssignable(e.expression,t);else{if(this.options.ecmaVersion<6)return this.dummyIdent();if("ObjectExpression"===e.type){e.type="ObjectPattern";for(var n=0,r=e.properties;n<r.length;n+=1){var i=r[n];this.toAssignable(i,t)}}else if("ArrayExpression"===e.type)e.type="ArrayPattern",this.toAssignableList(e.elements,t);else if("Property"===e.type)this.toAssignable(e.value,t);else if("SpreadElement"===e.type)e.type="RestElement",this.toAssignable(e.argument,t);else{if("AssignmentExpression"!==e.type)return this.dummyIdent();e.type="AssignmentPattern",delete e.operator}}return e},l.toAssignableList=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.toAssignable(i,t)}return e},l.parseFunctionParams=function(e){return e=this.parseExprList(t.tokTypes.parenR),this.toAssignableList(e,!0)},l.parseMethod=function(e,t){var n=this.startNode(),r=this.inAsync,i=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=!!e),this.options.ecmaVersion>=8&&(n.async=!!t),this.inAsync=n.async,this.inFunction=!0,n.params=this.parseFunctionParams(),n.body=this.parseBlock(),this.toks.adaptDirectivePrologue(n.body.body),this.inAsync=r,this.inFunction=i,this.finishNode(n,"FunctionExpression")},l.parseArrowExpression=function(e,n,r){var i=this.inAsync,s=this.inFunction;return this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!r),this.inAsync=e.async,this.inFunction=!0,e.params=this.toAssignableList(n,!0),e.expression=this.tok.type!==t.tokTypes.braceL,e.expression?e.body=this.parseMaybeAssign():(e.body=this.parseBlock(),this.toks.adaptDirectivePrologue(e.body.body)),this.inAsync=i,this.inFunction=s,this.finishNode(e,"ArrowFunctionExpression")},l.parseExprList=function(e,n){this.pushCx();var r=this.curIndent,i=this.curLineStart,s=[];for(this.next();!this.closes(e,r+1,i);)if(this.eat(t.tokTypes.comma))s.push(n?null:this.dummyIdent());else{var o=this.parseMaybeAssign();if(a(o)){if(this.closes(e,r,i))break;this.next()}else s.push(o);this.eat(t.tokTypes.comma)}return this.popCx(),this.eat(e)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),s},l.parseAwait=function(){var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(),this.finishNode(e,"AwaitExpression")},t.defaultOptions.tabSize=4,e.LooseParser=r,e.parse=function(e,t){return r.parse(e,t)},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1272))},5971:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(s)?s:String(s)),i)}var s}n.d(t,{m:function(){return s}});var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=-1,this.inMemory=!1,this.updatable=!1,this.type="",this.name="",this.editor=t}var t,n;return t=e,(n=[{key:"toJSON",value:function(){var e={};return e.type=this.type,e.id=this.id,e.name=this.name,e}},{key:"fromJSON",value:function(e){this.inMemory=!0,this.type=e.type,this.id=e.id,this.name=e.name}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},5972:function(e,t,n){"use strict";n.r(t),n.d(t,{SidebarGeometryBufferGeometry:function(){return i}});var r=n(49);function i(e){var t=e.strings,n=e.signals,i=new r.Bb;function s(e){if(null!=e){var n=e.geometry;if(n){i.clear(),i.setDisplay("block");var s=new r.Bb,a=new r.sm(t.getKey("sidebar/geometry/buffer_geometry/attributes")).setWidth("90px");s.add(a);var o=(new r.vF).setDisplay("inline-block").setVerticalAlign("middle").setWidth("160px");s.add(o);var l=n.index;null!==l&&(o.add(new r.sm(t.getKey("sidebar/geometry/buffer_geometry/index")).setWidth("80px")),o.add(new r.sm(l.count.toString()).setFontSize("12px")),o.add(new r.MH));var c=n.attributes;for(var u in c){var h=c[u];o.add(new r.sm(u).setWidth("80px")),o.add(new r.sm(h.count.toString()+" ("+h.itemSize+")").setFontSize("12px")),o.add(new r.MH)}i.add(s);var p=n.morphAttributes;if(!0==Object.keys(p).length>0){var d=new r.Bb,f=new r.sm(t.getKey("sidebar/geometry/buffer_geometry/morphAttributes")).setWidth("90px");d.add(f);var m=(new r.vF).setDisplay("inline-block").setVerticalAlign("middle").setWidth("160px");for(var g in d.add(m),p){var y=p[g];m.add(new r.sm(g).setWidth("80px")),m.add(new r.sm(y.length.toString()).setFontSize("12px")),m.add(new r.MH)}i.add(d);var v=new r.Bb,x=new r.sm(t.getKey("sidebar/geometry/buffer_geometry/morphRelative")).setWidth("90px");v.add(x);var b=(new r.mA).setValue(n.morphTargetsRelative).setDisabled(!0);v.add(b),i.add(v)}}else i.setDisplay("none")}}return n.objectSelected.add(s),n.geometryChanged.add(s),i}},7606:function(e,t,n){"use strict";n.r(t),n.d(t,{SidebarGeometryModifiers:function(){return i}});var r=n(49);function i(e,t){var n=e.strings,i=e.signals,s=(new r.po).setPaddingLeft("90px"),a=t.geometry,o=new r.y3(n.getKey("sidebar/geometry/compute_vertex_normals"));o.onClick((function(){a.computeVertexNormals(),i.geometryChanged.dispatch(t)}));var l=new r.Bb;l.add(o),s.add(l);var c=new r.y3(n.getKey("sidebar/geometry/center"));c.onClick((function(){a.center(),i.geometryChanged.dispatch(t)}));var u=new r.Bb;return u.add(c),s.add(u),s}},1171:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(s)?s:String(s)),i)}var s}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},s.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}n.d(t,{m:function(){return l}});var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(h,e);var t,n,l,c,u=(l=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=o(l);if(c){var n=o(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(i=u.call(this,e)).type="MoveObjectCommand",i.name="Move Object",i.object=t,i.oldParent=void 0!==t?t.parent:void 0,i.oldIndex=void 0!==i.oldParent?i.oldParent.children.indexOf(i.object):void 0,i.newParent=n,i.newIndex=void 0!==r?void 0!==n?n.children.indexOf(r):void 0:void 0!==n?n.children.length:void 0,i.oldParent===i.newParent&&i.newIndex>i.oldIndex&&i.newIndex--,i.newBefore=r,i}return t=h,(n=[{key:"execute",value:function(){this.oldParent.remove(this.object),this.newParent.children.splice(this.newIndex,0,this.object),this.object.parent=this.newParent,this.object.dispatchEvent({type:"added"}),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.newParent.remove(this.object),this.oldParent.children.splice(this.oldIndex,0,this.object),this.object.parent=this.oldParent,this.object.dispatchEvent({type:"added"}),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){var e=s(o(h.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.newParentUuid=this.newParent.uuid,e.oldParentUuid=this.oldParent.uuid,e.newIndex=this.newIndex,e.oldIndex=this.oldIndex,e}},{key:"fromJSON",value:function(e){s(o(h.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldParent=this.editor.objectByUuid(e.oldParentUuid),void 0===this.oldParent&&(this.oldParent=this.editor.scene),this.newParent=this.editor.objectByUuid(e.newParentUuid),void 0===this.newParent&&(this.newParent=this.editor.scene),this.newIndex=e.newIndex,this.oldIndex=e.oldIndex}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(n(5971).m)},7703:function(e,t,n){"use strict";n.d(t,{H:function(){return u}});var r=n(5971),i=n(9477);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(i)?i:String(i)),r)}var i}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},o.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(p,e);var t,n,r,u,h=(r=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(r);if(u){var n=c(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(r=h.call(this,e)).type="SetGeometryCommand",r.name="Set Geometry",r.updatable=!0,r.object=t,r.oldGeometry=void 0!==t?t.geometry:void 0,r.newGeometry=n,r}return t=p,(n=[{key:"execute",value:function(){this.object.geometry.dispose(),this.object.geometry=this.newGeometry,this.object.geometry.computeBoundingSphere(),this.editor.signals.geometryChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.object.geometry.dispose(),this.object.geometry=this.oldGeometry,this.object.geometry.computeBoundingSphere(),this.editor.signals.geometryChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"update",value:function(e){this.newGeometry=e.newGeometry}},{key:"toJSON",value:function(){var e=o(c(p.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldGeometry=this.object.geometry.toJSON(),e.newGeometry=this.newGeometry.toJSON(),e}},{key:"fromJSON",value:function(e){function t(e){return(new i.Gql).parseGeometries([e])[e.uuid]}o(c(p.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldGeometry=t(e.oldGeometry),this.newGeometry=t(e.newGeometry)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(r.m)},49:function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}(this,n)}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===l(i)?i:String(i)),r)}var i}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Bb:function(){return m},Cj:function(){return b},GJ:function(){return x},KP:function(){return _},MH:function(){return C},OS:function(){return T},Rg:function(){return k},Wo:function(){return S},mA:function(){return w},po:function(){return f},sN:function(){return E},sd:function(){return g},sm:function(){return y},u1:function(){return p},u3:function(){return v},ug:function(){return A},vF:function(){return d},y3:function(){return M}});var p=function(){function e(t){c(this,e),this.dom=t}return h(e,[{key:"add",value:function(){for(var t=0;t<arguments.length;t++){var n=arguments[t];n instanceof e?this.dom.appendChild(n.dom):console.error("UIElement:",n,"is not an instance of UIElement.")}return this}},{key:"remove",value:function(){for(var t=0;t<arguments.length;t++){var n=arguments[t];n instanceof e?this.dom.removeChild(n.dom):console.error("UIElement:",n,"is not an instance of UIElement.")}return this}},{key:"clear",value:function(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)}},{key:"setId",value:function(e){return this.dom.id=e,this}},{key:"getId",value:function(){return this.dom.id}},{key:"setClass",value:function(e){return this.dom.className=e,this}},{key:"addClass",value:function(e){return this.dom.classList.add(e),this}},{key:"removeClass",value:function(e){return this.dom.classList.remove(e),this}},{key:"setStyle",value:function(e,t){for(var n=0;n<t.length;n++)this.dom.style[e]=t[n];return this}},{key:"setDisabled",value:function(e){return this.dom.disabled=e,this}},{key:"setTextContent",value:function(e){return this.dom.textContent=e,this}},{key:"setInnerHTML",value:function(e){this.dom.innerHTML=e}},{key:"getIndexOfChild",value:function(e){return Array.prototype.indexOf.call(this.dom.children,e.dom)}}]),e}();["position","left","top","right","bottom","width","height","display","verticalAlign","overflow","color","background","backgroundColor","opacity","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach((function(e){var t="set"+e.substr(0,1).toUpperCase()+e.substr(1,e.length);p.prototype[t]=function(){return this.setStyle(e,arguments),this}})),["KeyUp","KeyDown","MouseOver","MouseOut","Click","DblClick","Change","Input"].forEach((function(e){var t="on"+e;p.prototype[t]=function(t){return this.dom.addEventListener(e.toLowerCase(),t.bind(this)),this}}));var d=function(e){r(n,e);var t=s(n);function n(){return c(this,n),t.call(this,document.createElement("span"))}return h(n)}(p),f=function(e){r(n,e);var t=s(n);function n(){return c(this,n),t.call(this,document.createElement("div"))}return h(n)}(p),m=function(e){r(n,e);var t=s(n);function n(){var e;return c(this,n),(e=t.call(this)).dom.className="Row",e}return h(n)}(f),g=function(e){r(n,e);var t=s(n);function n(){var e;return c(this,n),(e=t.call(this)).dom.className="Panel",e}return h(n)}(f),y=function(e){r(n,e);var t=s(n);function n(e){var r;return c(this,n),(r=t.call(this)).dom.className="Text",r.dom.style.cursor="default",r.dom.style.display="inline-block",r.setValue(e),r}return h(n,[{key:"getValue",value:function(){return this.dom.textContent}},{key:"setValue",value:function(e){return void 0!==e&&(this.dom.textContent=e),this}}]),n}(d),v=function(e){r(n,e);var t=s(n);function n(e){var r;return c(this,n),(r=t.call(this,document.createElement("input"))).dom.className="Input",r.dom.style.padding="2px",r.dom.style.border="1px solid transparent",r.dom.setAttribute("autocomplete","off"),r.dom.addEventListener("keydown",(function(e){e.stopPropagation()})),r.setValue(e),r}return h(n,[{key:"getValue",value:function(){return this.dom.value}},{key:"setValue",value:function(e){return this.dom.value=e,this}}]),n}(p),x=function(e){r(n,e);var t=s(n);function n(){var e;return c(this,n),(e=t.call(this,document.createElement("textarea"))).dom.className="TextArea",e.dom.style.padding="2px",e.dom.spellcheck=!1,e.dom.setAttribute("autocomplete","off"),e.dom.addEventListener("keydown",(function(e){if(e.stopPropagation(),9===e.keyCode){e.preventDefault();var t=this.selectionStart;this.value=this.value.substring(0,t)+"\t"+this.value.substring(t),this.selectionStart=t+1,this.selectionEnd=this.selectionStart}})),e}return h(n,[{key:"getValue",value:function(){return this.dom.value}},{key:"setValue",value:function(e){return this.dom.value=e,this}}]),n}(p),b=function(e){r(n,e);var t=s(n);function n(){var e;return c(this,n),(e=t.call(this,document.createElement("select"))).dom.className="Select",e.dom.style.padding="2px",e.dom.setAttribute("autocomplete","off"),e}return h(n,[{key:"setMultiple",value:function(e){return this.dom.multiple=e,this}},{key:"setOptions",value:function(e){for(var t=this.dom.value;this.dom.children.length>0;)this.dom.removeChild(this.dom.firstChild);for(var n in e){var r=document.createElement("option");r.value=n,r.innerHTML=e[n],this.dom.appendChild(r)}return this.dom.value=t,this}},{key:"getValue",value:function(){return this.dom.value}},{key:"setValue",value:function(e){return e=String(e),this.dom.value!==e&&(this.dom.value=e),this}}]),n}(p),w=function(e){r(n,e);var t=s(n);function n(e){var r;return c(this,n),(r=t.call(this,document.createElement("input"))).dom.className="Checkbox",r.dom.type="checkbox",r.setValue(e),r}return h(n,[{key:"getValue",value:function(){return this.dom.checked}},{key:"setValue",value:function(e){return void 0!==e&&(this.dom.checked=e),this}}]),n}(p),S=function(e){r(n,e);var t=s(n);function n(){var e;c(this,n),(e=t.call(this,document.createElement("input"))).dom.className="Color",e.dom.style.width="32px",e.dom.style.height="16px",e.dom.style.border="0px",e.dom.style.padding="2px",e.dom.style.backgroundColor="transparent",e.dom.setAttribute("autocomplete","off");try{e.dom.type="color",e.dom.value="#ffffff"}catch(e){}return e}return h(n,[{key:"getValue",value:function(){return this.dom.value}},{key:"getHexValue",value:function(){return parseInt(this.dom.value.substr(1),16)}},{key:"setValue",value:function(e){return this.dom.value=e,this}},{key:"setHexValue",value:function(e){return this.dom.value="#"+("000000"+e.toString(16)).slice(-6),this}}]),n}(p),_=function(e){r(n,e);var t=s(n);function n(e){var r;c(this,n),(r=t.call(this,document.createElement("input"))).dom.style.cursor="ns-resize",r.dom.className="Number",r.dom.value="0.00",r.dom.setAttribute("autocomplete","off"),r.value=0,r.min=-1/0,r.max=1/0,r.precision=2,r.step=1,r.unit="",r.nudge=.01,r.setValue(e);var i=a(r),s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!0);var o=0,l=0,u={x:0,y:0},h={x:0,y:0};function p(e){var t=i.value;u.x=e.clientX,u.y=e.clientY,o+=u.x-h.x-(u.y-h.y);var n=l+o/(e.shiftKey?5:50)*i.step;t!==(n=Math.min(i.max,Math.max(i.min,n)))&&(i.setValue(n),i.dom.dispatchEvent(s)),h.x=e.clientX,h.y=e.clientY}function d(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",d),Math.abs(o)<2&&(i.dom.focus(),i.dom.select())}function f(e){var t=i.value;u.x=e.touches[0].pageX,u.y=e.touches[0].pageY,o+=u.x-h.x-(u.y-h.y);var n=l+o/(e.shiftKey?5:50)*i.step;t!==(n=Math.min(i.max,Math.max(i.min,n)))&&(i.setValue(n),i.dom.dispatchEvent(s)),h.x=e.touches[0].pageX,h.y=e.touches[0].pageY}function m(e){0===e.touches.length&&(document.removeEventListener("touchmove",f),document.removeEventListener("touchend",m))}function g(){i.dom.style.backgroundColor="transparent",i.dom.style.cursor="ns-resize"}return g(),r.dom.addEventListener("keydown",(function(e){switch(e.stopPropagation(),e.keyCode){case 13:i.dom.blur();break;case 38:e.preventDefault(),i.setValue(i.getValue()+i.nudge),i.dom.dispatchEvent(s);break;case 40:e.preventDefault(),i.setValue(i.getValue()-i.nudge),i.dom.dispatchEvent(s)}})),r.dom.addEventListener("mousedown",(function(e){e.preventDefault(),o=0,l=i.value,h.x=e.clientX,h.y=e.clientY,document.addEventListener("mousemove",p),document.addEventListener("mouseup",d)})),r.dom.addEventListener("touchstart",(function(e){1===e.touches.length&&(o=0,l=i.value,h.x=e.touches[0].pageX,h.y=e.touches[0].pageY,document.addEventListener("touchmove",f),document.addEventListener("touchend",m))}),{passive:!1}),r.dom.addEventListener("change",(function(){i.setValue(i.dom.value)})),r.dom.addEventListener("focus",(function(){i.dom.style.backgroundColor="",i.dom.style.cursor=""})),r.dom.addEventListener("blur",g),r}return h(n,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){return void 0!==e&&((e=parseFloat(e))<this.min&&(e=this.min),e>this.max&&(e=this.max),this.value=e,this.dom.value=e.toFixed(this.precision),""!==this.unit&&(this.dom.value+=" "+this.unit)),this}},{key:"setPrecision",value:function(e){return this.precision=e,this}},{key:"setStep",value:function(e){return this.step=e,this}},{key:"setNudge",value:function(e){return this.nudge=e,this}},{key:"setRange",value:function(e,t){return this.min=e,this.max=t,this}},{key:"setUnit",value:function(e){return this.unit=e,this}}]),n}(p),E=function(e){r(n,e);var t=s(n);function n(e){var r;c(this,n),(r=t.call(this,document.createElement("input"))).dom.style.cursor="ns-resize",r.dom.className="Number",r.dom.value="0",r.dom.setAttribute("autocomplete","off"),r.value=0,r.min=-1/0,r.max=1/0,r.step=1,r.nudge=1,r.setValue(e);var i=a(r),s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!0);var o=0,l=0,u={x:0,y:0},h={x:0,y:0};function p(e){var t=i.value;u.x=e.clientX,u.y=e.clientY,o+=u.x-h.x-(u.y-h.y);var n=l+o/(e.shiftKey?5:50)*i.step;t!==(n=0|Math.min(i.max,Math.max(i.min,n)))&&(i.setValue(n),i.dom.dispatchEvent(s)),h.x=e.clientX,h.y=e.clientY}function d(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",d),Math.abs(o)<2&&(i.dom.focus(),i.dom.select())}function f(){i.dom.style.backgroundColor="transparent",i.dom.style.cursor="ns-resize"}return f(),r.dom.addEventListener("keydown",(function(e){switch(e.stopPropagation(),e.keyCode){case 13:i.dom.blur();break;case 38:e.preventDefault(),i.setValue(i.getValue()+i.nudge),i.dom.dispatchEvent(s);break;case 40:e.preventDefault(),i.setValue(i.getValue()-i.nudge),i.dom.dispatchEvent(s)}})),r.dom.addEventListener("mousedown",(function(e){e.preventDefault(),o=0,l=i.value,h.x=e.clientX,h.y=e.clientY,document.addEventListener("mousemove",p),document.addEventListener("mouseup",d)})),r.dom.addEventListener("change",(function(){i.setValue(i.dom.value)})),r.dom.addEventListener("focus",(function(){i.dom.style.backgroundColor="",i.dom.style.cursor=""})),r.dom.addEventListener("blur",f),r}return h(n,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){return void 0!==e&&(e=parseInt(e),this.value=e,this.dom.value=e),this}},{key:"setStep",value:function(e){return this.step=parseInt(e),this}},{key:"setNudge",value:function(e){return this.nudge=e,this}},{key:"setRange",value:function(e,t){return this.min=e,this.max=t,this}}]),n}(p),C=function(e){r(n,e);var t=s(n);function n(){var e;return c(this,n),(e=t.call(this,document.createElement("br"))).dom.className="Break",e}return h(n)}(p),T=function(e){r(n,e);var t=s(n);function n(){var e;return c(this,n),(e=t.call(this,document.createElement("hr"))).dom.className="HorizontalRule",e}return h(n)}(p),M=function(e){r(n,e);var t=s(n);function n(e){var r;return c(this,n),(r=t.call(this,document.createElement("button"))).dom.className="Button",r.dom.textContent=e,r}return h(n)}(p),A=function(e){r(n,e);var t=s(n);function n(e){var r;return c(this,n),(r=t.call(this,document.createElement("progress"))).dom.value=e,r}return h(n,[{key:"setValue",value:function(e){this.dom.value=e}}]),n}(p),k=function(e){r(n,e);var t=s(n);function n(){var e;return c(this,n),(e=t.call(this)).dom.className="TabbedPanel",e.tabs=[],e.panels=[],e.tabsDiv=new f,e.tabsDiv.setClass("Tabs"),e.panelsDiv=new f,e.panelsDiv.setClass("Panels"),e.add(e.tabsDiv),e.add(e.panelsDiv),e.selected="",e}return h(n,[{key:"select",value:function(e){var t,n,r=this;return this.selected&&this.selected.length&&(t=this.tabs.find((function(e){return e.dom.id===r.selected})),n=this.panels.find((function(e){return e.dom.id===r.selected})),t&&t.removeClass("selected"),n&&n.setDisplay("none")),t=this.tabs.find((function(t){return t.dom.id===e})),n=this.panels.find((function(t){return t.dom.id===e})),t&&t.addClass("selected"),n&&n.setDisplay(""),this.selected=e,this}},{key:"addTab",value:function(e,t,n){var r=new P(t,this);r.setId(e),this.tabs.push(r),this.tabsDiv.add(r);var i=new f;i.setId(e),i.add(n),i.setDisplay("none"),this.panels.push(i),this.panelsDiv.add(i),this.select(e)}}]),n}(f),P=function(e){r(n,e);var t=s(n);function n(e,r){var i;c(this,n),(i=t.call(this,e)).dom.className="Tab",i.parent=r;var s=a(i);return i.dom.addEventListener("click",(function(){s.parent.select(s.dom.id)})),i}return h(n)}(y)},1098:function(e,t,n){"use strict";n.d(t,{hO:function(){return _},gg:function(){return x},fC:function(){return w},qU:function(){return S},XM:function(){return v}});var r=n(9477);class i extends r.yxD{constructor(e){super(e),this.type=r.cLu}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,s=0,a="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=o.indexOf("\n"))&&s<t&&r<e.byteLength;)a+=o,s+=o.length,r+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=s+i+1),a+o.slice(0,i))},i=function(e,t,n,r){const i=e[t+3],s=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*s,n[r+1]=e[t+1]*s,n[r+2]=e[t+2]*s,n[r+3]=1},s=function(e,t,n,i){const s=e[t+3],a=Math.pow(2,s-128)/255;n[i+0]=r.A5E.toHalfFloat(Math.min(e[t+0]*a,65504)),n[i+1]=r.A5E.toHalfFloat(Math.min(e[t+1]*a,65504)),n[i+2]=r.A5E.toHalfFloat(Math.min(e[t+2]*a,65504)),n[i+3]=r.A5E.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;const o=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,o={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;if(e.pos>=e.byteLength||!(l=n(e)))return t(1,"no header found");if(!(c=l.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(o.valid|=1,o.programtype=c[1],o.string+=l+"\n";l=n(e),!1!==l;)if(o.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(o.gamma=parseFloat(c[1])),(c=l.match(i))&&(o.exposure=parseFloat(c[1])),(c=l.match(s))&&(o.valid|=2,o.format=c[1]),(c=l.match(a))&&(o.valid|=4,o.height=parseInt(c[1],10),o.width=parseInt(c[2],10)),2&o.valid&&4&o.valid)break}else o.comments+=l+"\n";return 2&o.valid?4&o.valid?o:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==o){const e=o.width,n=o.height,l=function(e,n,r){const i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const s=new Uint8Array(4*n*r);if(!s.length)return t(4,"unable to allocate buffer space");let a=0,o=0;const l=4*i,c=new Uint8Array(4),u=new Uint8Array(l);let h=r;for(;h>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1);if(c[0]=e[o++],c[1]=e[o++],c[2]=e[o++],c[3]=e[o++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=i)return t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&o<e.byteLength;){n=e[o++];const i=n>128;if(i&&(n-=128),0===n||r+n>l)return t(3,"bad scanline data");if(i){const t=e[o++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(o,o+n),r),r+=n,o+=n}const p=i;for(let e=0;e<p;e++){let t=0;s[a]=u[e+t],t+=i,s[a+1]=u[e+t],t+=i,s[a+2]=u[e+t],t+=i,s[a+3]=u[e+t],a+=4}h--}return s}(a.subarray(a.pos),e,n);if(-1!==l){let t,a,c;switch(this.type){case r.VzW:c=l.length/4;const e=new Float32Array(4*c);for(let t=0;t<c;t++)i(l,4*t,e,4*t);t=e,a=r.VzW;break;case r.cLu:c=l.length/4;const n=new Uint16Array(4*c);for(let e=0;e<c;e++)s(l,4*e,n,4*e);t=n,a=r.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:n,data:t,header:o.string,gamma:o.gamma,exposure:o.exposure,type:a}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,i){return super.load(e,(function(e,n){switch(e.type){case r.VzW:case r.cLu:e.colorSpace=r.GUF,e.minFilter=r.wem,e.magFilter=r.wem,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,i)}}var s=n(650),a=n(49),o=n(1171);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===l(i)?i:String(i)),r)}var i}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var y,v=function(e){p(n,e);var t=f(n);function n(e){var a;c(this,n);var o=m(a=t.call(this)),l=document.createElement("form"),u=document.createElement("input");u.type="file",u.addEventListener("change",(function(e){p(e.target.files[0])})),l.appendChild(u);var h=document.createElement("canvas");function p(t){var n=t.name.split(".").pop().toLowerCase(),a=new FileReader;"hdr"===n||"pic"===n?(a.addEventListener("load",(function(e){(new i).load(e.target.result,(function(e){e.sourceFile=t.name,e.isHDRTexture=!0,o.setValue(e),o.onChangeCallback&&o.onChangeCallback(e)}))})),a.readAsDataURL(t)):"tga"===n?(a.addEventListener("load",(function(n){var i=(new s.U).parse(n.target.result),a=new r.ROQ(i,e);a.sourceFile=t.name,o.setValue(a),o.onChangeCallback&&o.onChangeCallback(a)}),!1),a.readAsArrayBuffer(t)):t.type.match("image.*")&&(a.addEventListener("load",(function(n){var i=document.createElement("img");i.addEventListener("load",(function(){var n=new r.xEZ(this,e);n.sourceFile=t.name,n.needsUpdate=!0,o.setValue(n),o.onChangeCallback&&o.onChangeCallback(n)}),!1),i.src=n.target.result}),!1),a.readAsDataURL(t)),l.reset()}return h.width=32,h.height=16,h.style.cursor="pointer",h.style.marginRight="5px",h.style.border="1px solid #888",h.addEventListener("click",(function(){u.click()})),h.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation(),p(e.dataTransfer.files[0])})),a.dom.appendChild(h),a.texture=null,a.onChangeCallback=null,a}return h(n,[{key:"getValue",value:function(){return this.texture}},{key:"setValue",value:function(e){var t=this.dom.children[0],n=t.getContext("2d");if(n&&n.clearRect(0,0,t.width,t.height),null!==e){var i=e.image;if(null!=i&&i.width>0){t.title=e.sourceFile;var s=t.width/i.width;if(void 0===i.data)n.drawImage(i,0,0,i.width*s,i.height*s);else{var a=function(e){void 0===y&&(y=new r.CP7);var t=e.image;y.setSize(t.width,t.height,!1);var n=new r.xsS,i=new r.iKG(-1,1,1,-1,0,1),s=new r.vBJ({map:e}),a=new r._12(2,2),o=new r.Kj0(a,s);return n.add(o),y.render(n,i),y.domElement}(e);n.drawImage(a,0,0,i.width*s,i.height*s)}}else t.title=e.sourceFile+" (error)"}else t.title="empty";this.texture=e}},{key:"setColorSpace",value:function(e){var t=this.getValue();return null!==t&&(t.colorSpace=e),this}},{key:"onChange",value:function(e){return this.onChangeCallback=e,this}}]),n}(a.vF),x=function(e){p(n,e);var t=f(n);function n(e){var r;c(this,n),(r=t.call(this)).dom.className="Outliner",r.dom.tabIndex=0;var i=m(r);return r.scene=e.scene,r.dom.addEventListener("keydown",(function(e){switch(e.keyCode){case 38:case 40:e.preventDefault(),e.stopPropagation()}})),r.dom.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:i.selectIndex(i.selectedIndex-1);break;case 40:i.selectIndex(i.selectedIndex+1)}})),r.editor=e,r.options=[],r.selectedIndex=-1,r.selectedValue=null,r}return h(n,[{key:"selectIndex",value:function(e){if(e>=0&&e<this.options.length){this.setValue(this.options[e].value);var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.dom.dispatchEvent(t)}}},{key:"setOptions",value:function(e){for(var t,n=this;n.dom.children.length>0;)n.dom.removeChild(n.dom.firstChild);function r(){n.setValue(this.value);var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!0),n.dom.dispatchEvent(e)}function i(){t=this}function s(e){e.dataTransfer.setData("text","foo")}function a(e){if(this!==t){var n=e.offsetY/this.clientHeight;this.className=n<.25?"option dragTop":n>.75?"option dragBottom":"option drag"}}function l(){this!==t&&(this.className="option")}function c(e){if(this!==t&&void 0!==t){this.className="option";var r=n.scene,i=r.getObjectById(t.value),s=e.offsetY/this.clientHeight;if(s<.25){var a=r.getObjectById(this.value);u(i,a.parent,a)}else if(s>.75){var o,l;null!==this.nextSibling?l=(o=r.getObjectById(this.nextSibling.value)).parent:(o=null,l=r.getObjectById(this.value).parent),u(i,l,o)}else u(i,r.getObjectById(this.value))}}function u(e,t,r){null===r&&(r=void 0);var i=!1;if(e.traverse((function(e){e===t&&(i=!0)})),!i){var s=n.editor;s.execute(new o.m(s,e,t,r));var a=document.createEvent("HTMLEvents");a.initEvent("change",!0,!0),n.dom.dispatchEvent(a)}}n.options=[];for(var h=0;h<e.length;h++){var p=e[h];p.className="option",n.dom.appendChild(p),n.options.push(p),p.addEventListener("click",r),!0===p.draggable&&(p.addEventListener("drag",i),p.addEventListener("dragstart",s),p.addEventListener("dragover",a),p.addEventListener("dragleave",l),p.addEventListener("drop",c))}return n}},{key:"getValue",value:function(){return this.selectedValue}},{key:"setValue",value:function(e){for(var t=0;t<this.options.length;t++){var n=this.options[t];if(n.value===e){n.classList.add("active");var r=n.offsetTop-this.dom.offsetTop,i=r+n.offsetHeight-this.dom.offsetHeight;this.dom.scrollTop>r?this.dom.scrollTop=r:this.dom.scrollTop<i&&(this.dom.scrollTop=i),this.selectedIndex=t}else n.classList.remove("active")}return this.selectedValue=e,this}}]),n}(a.po),b=function(e){p(n,e);var t=f(n);function n(){var e;return c(this,n),(e=t.call(this)).dom.style.display="inline-block",e.pointsList=new a.po,e.add(e.pointsList),e.pointsUI=[],e.lastPointIdx=0,e.onChangeCallback=null,e.update=function(){null!==this.onChangeCallback&&this.onChangeCallback()}.bind(m(e)),e}return h(n,[{key:"onChange",value:function(e){return this.onChangeCallback=e,this}},{key:"clear",value:function(){for(var e=0;e<this.pointsUI.length;++e)this.pointsUI[e]&&this.deletePointRow(e,!0);this.lastPointIdx=0}},{key:"deletePointRow",value:function(e,t){this.pointsUI[e]&&(this.pointsList.remove(this.pointsUI[e].row),this.pointsUI.splice(e,1),!0!==t&&this.update(),this.lastPointIdx--)}}]),n}(a.vF),w=function(e){p(n,e);var t=f(n);function n(){var e;c(this,n),e=t.call(this);var r=new a.Bb;e.add(r);var i=new a.y3("+");return i.onClick((function(){if(0===e.pointsUI.length)e.pointsList.add(e.createPointRow(0,0));else{var t=e.pointsUI[e.pointsUI.length-1];e.pointsList.add(e.createPointRow(t.x.getValue(),t.y.getValue()))}e.update()})),r.add(i),e}return h(n,[{key:"getValue",value:function(){for(var e=[],t=0,n=0;n<this.pointsUI.length;n++){var i=this.pointsUI[n];i&&(e.push(new r.FM8(i.x.getValue(),i.y.getValue())),++t,i.lbl.setValue(t))}return e}},{key:"setValue",value:function(e){this.clear();for(var t=0;t<e.length;t++){var n=e[t];this.pointsList.add(this.createPointRow(n.x,n.y))}return this.update(),this}},{key:"createPointRow",value:function(e,t){var n=new a.po,r=new a.sm(this.lastPointIdx+1).setWidth("20px"),i=new a.KP(e).setWidth("30px").onChange(this.update),s=new a.KP(t).setWidth("30px").onChange(this.update),o=this,l=new a.y3("-").onClick((function(){if(!o.isEditing){var e=o.pointsList.getIndexOfChild(n);o.deletePointRow(e)}}));return this.pointsUI.push({row:n,lbl:r,x:i,y:s}),++this.lastPointIdx,n.add(r,i,s,l),n}}]),n}(b),S=function(e){p(n,e);var t=f(n);function n(){var e;c(this,n),e=t.call(this);var r=new a.Bb;e.add(r);var i=new a.y3("+");return i.onClick((function(){if(0===e.pointsUI.length)e.pointsList.add(e.createPointRow(0,0,0));else{var t=e.pointsUI[e.pointsUI.length-1];e.pointsList.add(e.createPointRow(t.x.getValue(),t.y.getValue(),t.z.getValue()))}e.update()})),r.add(i),e}return h(n,[{key:"getValue",value:function(){for(var e=[],t=0,n=0;n<this.pointsUI.length;n++){var i=this.pointsUI[n];i&&(e.push(new r.Pa4(i.x.getValue(),i.y.getValue(),i.z.getValue())),++t,i.lbl.setValue(t))}return e}},{key:"setValue",value:function(e){this.clear();for(var t=0;t<e.length;t++){var n=e[t];this.pointsList.add(this.createPointRow(n.x,n.y,n.z))}return this.update(),this}},{key:"createPointRow",value:function(e,t,n){var r=new a.po,i=new a.sm(this.lastPointIdx+1).setWidth("20px"),s=new a.KP(e).setWidth("30px").onChange(this.update),o=new a.KP(t).setWidth("30px").onChange(this.update),l=new a.KP(n).setWidth("30px").onChange(this.update),c=this,u=new a.y3("-").onClick((function(){if(!c.isEditing){var e=c.pointsList.getIndexOfChild(r);c.deletePointRow(e)}}));return this.pointsUI.push({row:r,lbl:i,x:s,y:o,z:l}),++this.lastPointIdx,r.add(i,s,o,l,u),r}}]),n}(b),_=function(e){p(n,e);var t=f(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).setMarginRight("4px"),i.checkbox=new a.mA(e),i.text=new a.sm(r).setMarginLeft("3px"),i.add(i.checkbox),i.add(i.text),i}return h(n,[{key:"getValue",value:function(){return this.checkbox.getValue()}},{key:"setValue",value:function(e){return this.checkbox.setValue(e)}}]),n}(a.vF)},2977:function(e,t,n){!function(e){"use strict";e.TernServer=function(a){var c=this;this.options=a||{};var u=this.options.plugins||(this.options.plugins={});u.doc_comment||(u.doc_comment=!0),this.docs=Object.create(null),this.options.useWorker?this.server=new C(this):this.server=new tern.Server({getFile:function(e,t){return i(c,e,t)},async:!0,defs:this.options.defs||[],plugins:u}),this.trackChange=function(e,t){!function(e,t,n){var i=s(e,t),a=e.cachedArgHints;a&&a.doc==t&&m(a.start,n.to)>=0&&(e.cachedArgHints=null);var l=i.changed;null==l&&(i.changed=l={from:n.from.line,to:n.from.line});var c=n.from.line+(n.text.length-1);n.from.line<l.to&&(l.to=l.to-(n.to.line-c)),c>=l.to&&(l.to=c+1),l.from>n.from.line&&(l.from=n.from.line),t.lineCount()>r&&n.to-l.from>100&&setTimeout((function(){i.changed&&i.changed.to-i.changed.from>100&&o(e,i)}),200)}(c,e,t)},this.cachedArgHints=null,this.activeArgHints=null,this.jumpStack=[],this.getHint=function(r,i){return function(r,i,s){r.request(i,{type:"completions",types:!0,docs:!0,urls:!0},(function(a,o){if(a)return S(r,i,a);var c=[],u="",h=o.start,p=o.end;'["'==i.getRange(t(h.line,h.ch-2),h)&&'"]'!=i.getRange(p,t(p.line,p.ch+2))&&(u='"]');for(var d=0;d<o.completions.length;++d){var f=o.completions[d],m=l(f.type);o.guess&&(m+=" "+n+"guess"),c.push({text:f.name+u,displayText:f.displayName||f.name,className:m,data:f})}var g={from:h,to:p,list:c},y=null;e.on(g,"close",(function(){w(y)})),e.on(g,"update",(function(){w(y)})),e.on(g,"select",(function(e,t){w(y);var s=r.options.completionTip?r.options.completionTip(e.data):e.data.doc;s&&(y=b(t.parentNode.getBoundingClientRect().right+window.pageXOffset,t.getBoundingClientRect().top+window.pageYOffset,s,i,n+"hint-doc"))})),s(g)}))}(c,r,i)},this.getHint.async=!0},e.TernServer.prototype={addDoc:function(t,n){var r={doc:n,name:t,changed:null};return this.server.addFile(t,E(this,r)),e.on(n,"change",this.trackChange),this.docs[t]=r},delDoc:function(t){var n=a(this,t);n&&(e.off(n.doc,"change",this.trackChange),delete this.docs[n.name],this.server.delFile(n.name))},hideDoc:function(e){_(this);var t=a(this,e);t&&t.changed&&o(this,t)},complete:function(e){e.showHint({hint:this.getHint})},showType:function(e,t,n){c(this,e,t,"type",n)},showDocs:function(e,t,n){c(this,e,t,"documentation",n)},updateArgHints:function(n){!function(n,r){if(_(n),!r.somethingSelected()){var i=r.getTokenAt(r.getCursor()).state,s=e.innerMode(r.getMode(),i);if("javascript"==s.mode.name){var a=s.state.lexical;if("call"==a.info){for(var o,l=a.pos||0,c=r.getOption("tabSize"),p=r.getCursor().line,d=Math.max(0,p-9),f=!1;p>=d;--p){for(var g=r.getLine(p),y=0,v=0;;){var x=g.indexOf("\t",v);if(-1==x)break;y+=c-(x+y)%c-1,v=x+1}if(o=a.column-y,"("==g.charAt(o)){f=!0;break}}if(f){var b=t(p,o),w=n.cachedArgHints;if(w&&w.doc==r.getDoc()&&0==m(b,w.start))return u(n,r,l);n.request(r,{type:"type",preferFunction:!0,end:b},(function(e,t){!e&&t.type&&/^fn\(/.test(t.type)&&(n.cachedArgHints={start:b,type:h(t.type),name:t.exprName||t.name||"fn",guess:t.guess,doc:r.getDoc()},u(n,r,l))}))}}}}}(this,n)},jumpToDef:function(e){!function(e,n){function r(r){var i={type:"definition",variable:r||null},a=s(e,n.getDoc());e.server.request(f(e,a,i),(function(r,i){if(r)return S(e,n,r);if(i.file||!i.url){if(i.file){var s,o=e.docs[i.file];if(o&&(s=function(e,n){for(var r=n.context.slice(0,n.contextOffset).split("\n"),i=n.start.line-(r.length-1),s=t(i,(1==r.length?n.start.ch:e.getLine(i).length)-r[0].length),a=e.getLine(i).slice(s.ch),o=i+1;o<e.lineCount()&&a.length<n.context.length;++o)a+="\n"+e.getLine(o);if(a.slice(0,n.context.length)==n.context)return n;for(var l,c=e.getSearchCursor(n.context,0,!1),u=1/0;c.findNext();){var h=c.from(),p=1e4*Math.abs(h.line-s.line);p||(p=Math.abs(h.ch-s.ch)),p<u&&(l=h,u=p)}if(!l)return null;if(1==r.length?l.ch+=r[0].length:l=t(l.line+(r.length-1),r[r.length-1].length),n.start.line==n.end.line)var d=t(l.line,l.ch+(n.end.ch-n.start.ch));else d=t(l.line+(n.end.line-n.start.line),n.end.ch);return{start:l,end:d}}(o.doc,i)))return e.jumpStack.push({file:a.name,start:n.getCursor("from"),end:n.getCursor("to")}),void p(e,a,o,s.start,s.end)}S(e,n,"Could not find a definition.")}else window.open(i.url)}))}!function(e){var t=e.getCursor("end"),n=e.getTokenAt(t);return!(n.start<t.ch&&"comment"==n.type)&&/[\w)\]]/.test(e.getLine(t.line).slice(Math.max(t.ch-1,0),t.ch+1))}(n)?y(n,"Jump to variable",(function(e){e&&r(e)})):r()}(this,e)},jumpBack:function(e){!function(e,t){var n=e.jumpStack.pop(),r=n&&e.docs[n.file];r&&p(e,s(e,t.getDoc()),r,n.start,n.end)}(this,e)},rename:function(e){!function(e,t){var n=t.getTokenAt(t.getCursor());if(!/\w/.test(n.string))return S(e,t,"Not at a variable");y(t,"New name for "+n.string,(function(n){e.request(t,{type:"rename",newName:n,fullDocs:!0},(function(n,r){if(n)return S(e,t,n);!function(e,t){for(var n=Object.create(null),r=0;r<t.length;++r)(n[(l=t[r]).file]||(n[l.file]=[])).push(l);for(var i in n){var s=e.docs[i],a=n[i];if(s){a.sort((function(e,t){return m(t.start,e.start)}));var o="*rename"+ ++d;for(r=0;r<a.length;++r){var l=a[r];s.doc.replaceRange(l.text,l.start,l.end,o)}}}}(e,r.changes)}))}))}(this,e)},selectName:function(e){!function(e,t){var n=s(e,t.doc).name;e.request(t,{type:"refs"},(function(r,i){if(r)return S(e,t,r);for(var s=[],a=0,o=t.getCursor(),l=0;l<i.refs.length;l++){var c=i.refs[l];c.file==n&&(s.push({anchor:c.start,head:c.end}),m(o,c.start)>=0&&m(o,c.end)<=0&&(a=s.length-1))}t.setSelections(s,a)}))}(this,e)},request:function(e,t,n,r){var i=this,a=s(this,e.getDoc()),o=f(this,a,t,r),l=o.query&&this.options.queryOptions&&this.options.queryOptions[o.query.type];if(l)for(var c in l)o.query[c]=l[c];this.server.request(o,(function(e,r){!e&&i.options.responseFilter&&(r=i.options.responseFilter(a,t,o,e,r)),n(e,r)}))},destroy:function(){_(this),this.worker&&(this.worker.terminate(),this.worker=null)}};var t=e.Pos,n="CodeMirror-Tern-",r=250;function i(e,t,n){var r=e.docs[t];r?n(E(e,r)):e.options.getFile?e.options.getFile(t,n):n(null)}function s(e,t,n){for(var r in e.docs){var i=e.docs[r];if(i.doc==t)return i}if(!n)for(var s=0;;++s)if(r="[doc"+(s||"")+"]",!e.docs[r]){n=r;break}return e.addDoc(n,t)}function a(t,n){return"string"==typeof n?t.docs[n]:(n instanceof e&&(n=n.getDoc()),n instanceof e.Doc?s(t,n):void 0)}function o(e,t){e.server.request({files:[{type:"full",name:t.name,text:E(e,t)}]},(function(e){e?window.console.error(e):t.changed=null}))}function l(e){var t;return t="?"==e?"unknown":"number"==e||"string"==e||"bool"==e?e:/^fn\(/.test(e)?"fn":/^\[/.test(e)?"array":"object",n+"completion "+n+"completion-"+t}function c(e,t,n,r,i){e.request(t,r,(function(n,r){if(n)return S(e,t,n);if(e.options.typeTip)var s=e.options.typeTip(r);else if(s=g("span",null,g("strong",null,r.type||"not found")),r.doc&&s.appendChild(document.createTextNode(" — "+r.doc)),r.url){s.appendChild(document.createTextNode(" "));var a=s.appendChild(g("a",null,"[docs]"));a.href=r.url,a.target="_blank"}v(t,s,e),i&&i()}),n)}function u(e,t,r){_(e);for(var i=e.cachedArgHints,s=i.type,a=g("span",i.guess?n+"fhint-guess":null,g("span",n+"fname",i.name),"("),o=0;o<s.args.length;++o){o&&a.appendChild(document.createTextNode(", "));var l=s.args[o];a.appendChild(g("span",n+"farg"+(o==r?" "+n+"farg-current":""),l.name||"?")),"?"!=l.type&&(a.appendChild(document.createTextNode(": ")),a.appendChild(g("span",n+"type",l.type)))}a.appendChild(document.createTextNode(s.rettype?") -> ":")")),s.rettype&&a.appendChild(g("span",n+"type",s.rettype));var c=t.cursorCoords(null,"page"),u=e.activeArgHints=b(c.right+1,c.bottom,a,t);setTimeout((function(){u.clear=x(t,(function(){e.activeArgHints==u&&_(e)}))}),20)}function h(e){var t=[],n=3;function r(t){for(var r=0,i=n;;){var s=e.charAt(n);if(t.test(s)&&!r)return e.slice(i,n);/[{\[\(]/.test(s)?++r:/[}\]\)]/.test(s)&&--r,++n}}if(")"!=e.charAt(n))for(;;){var i=e.slice(n).match(/^([^, \(\[\{]+): /);if(i&&(n+=i[0].length,i=i[1]),t.push({name:i,type:r(/[\),]/)}),")"==e.charAt(n))break;n+=2}var s=e.slice(n).match(/^\) -> (.*)$/);return{args:t,rettype:s&&s[1]}}function p(e,t,n,r,i){n.doc.setSelection(r,i),t!=n&&e.options.switchToDoc&&(_(e),e.options.switchToDoc(n.name,n.doc))}var d=0;function f(n,i,s,a){var o=[],l=0,c=!s.fullDocs;c||delete s.fullDocs,"string"==typeof s&&(s={type:s}),s.lineCharPositions=!0,null==s.end&&(s.end=a||i.doc.getCursor("end"),i.doc.somethingSelected()&&(s.start=i.doc.getCursor("start")));var u=s.start||s.end;for(var h in i.changed?i.doc.lineCount()>r&&!1!==c&&i.changed.to-i.changed.from<100&&i.changed.from<=u.line&&i.changed.to>s.end.line?(o.push(function(n,r,i){for(var s,a=n.doc,o=null,l=null,c=4,u=r.line-1,h=Math.max(0,u-50);u>=h;--u){var p=a.getLine(u);if(!(p.search(/\bfunction\b/)<0)){var d=e.countColumn(p,null,c);null!=o&&o<=d||(o=d,l=u)}}null==l&&(l=h);var f=Math.min(a.lastLine(),i.line+20);if(null==o||o==e.countColumn(a.getLine(r.line),null,c))s=f;else for(s=i.line+1;s<f&&!((d=e.countColumn(a.getLine(s),null,c))<=o);++s);var m=t(l,0);return{type:"part",name:n.name,offsetLines:m.line,text:a.getRange(m,t(s,i.line==s?null:0))}}(i,u,s.end)),s.file="#0",l=o[0].offsetLines,null!=s.start&&(s.start=t(s.start.line- -l,s.start.ch)),s.end=t(s.end.line-l,s.end.ch)):(o.push({type:"full",name:i.name,text:E(n,i)}),s.file=i.name,i.changed=null):s.file=i.name,n.docs){var p=n.docs[h];p.changed&&p!=i&&(o.push({type:"full",name:p.name,text:E(n,p)}),p.changed=null)}return{query:s,files:o}}var m=e.cmpPos;function g(e,t){var n=document.createElement(e);t&&(n.className=t);for(var r=2;r<arguments.length;++r){var i=arguments[r];"string"==typeof i&&(i=document.createTextNode(i)),n.appendChild(i)}return n}function y(e,t,n){if(e.openDialog){var r=document.createDocumentFragment();r.appendChild(document.createTextNode(t+": "));var i=document.createElement("input");i.type="text",r.appendChild(i),e.openDialog(r,n)}else n(prompt(t,""))}function v(t,n,r){t.state.ternTooltip&&w(t.state.ternTooltip);var i=t.cursorCoords(),s=t.state.ternTooltip=b(i.right+1,i.bottom,n,t);function a(){var e;t.state.ternTooltip=null,s.parentNode&&((e=s).style.opacity="0",setTimeout((function(){w(e)}),1100)),c()}var o=!1,l=!1;e.on(s,"mousemove",(function(){o=!0})),e.on(s,"mouseout",(function(t){var n=t.relatedTarget||t.toElement;n&&e.contains(s,n)||(l?a():o=!1)})),setTimeout((function(){l=!0,o||a()}),r.options.hintDelay?r.options.hintDelay:1700);var c=x(t,a)}function x(e,t){return e.on("cursorActivity",t),e.on("blur",t),e.on("scroll",t),e.on("setDoc",t),function(){e.off("cursorActivity",t),e.off("blur",t),e.off("scroll",t),e.off("setDoc",t)}}function b(e,t,r,i,s){var a=g("div",n+"tooltip "+(s||""),r);a.style.left=e+"px",a.style.top=t+"px",(((i.options||{}).hintOptions||{}).container||document.body).appendChild(a);var o=i.cursorCoords(),l=window.innerWidth,c=window.innerHeight,u=a.getBoundingClientRect(),h=document.querySelector(".CodeMirror-hints"),p=u.bottom-c,d=u.right-l;if(h&&d>0&&(a.style.left=0,u=a.getBoundingClientRect(),a.style.left=(e=e-h.offsetWidth-u.width)+"px",d=u.right-l),p>0){var f=u.bottom-u.top;o.top-(o.bottom-u.top)-f>0?a.style.top=o.top-f+"px":f>c&&(a.style.height=c-5+"px",a.style.top=o.bottom-u.top+"px")}return d>0&&(u.right-u.left>l&&(a.style.width=l-5+"px",d-=u.right-u.left-l),a.style.left=e-d+"px"),a}function w(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function S(e,t,n){e.options.showError?e.options.showError(t,n):v(t,String(n),e)}function _(e){e.activeArgHints&&(e.activeArgHints.clear&&e.activeArgHints.clear(),w(e.activeArgHints),e.activeArgHints=null)}function E(e,t){var n=t.doc.getValue();return e.options.fileFilter&&(n=e.options.fileFilter(n,t.name,t.doc)),n}function C(e){var t=e.worker=new Worker(e.options.workerScript);t.postMessage({type:"init",defs:e.options.defs,plugins:e.options.plugins,scripts:e.options.workerDeps});var n=0,r={};function s(e,i){i&&(e.id=++n,r[n]=i),t.postMessage(e)}t.onmessage=function(t){var n=t.data;"getFile"==n.type?i(e,n.name,(function(e,t){s({type:"getFile",err:String(e),text:t,id:n.id})})):"debug"==n.type?window.console.log(n.message):n.id&&r[n.id]&&(r[n.id](n.err,n.body),delete r[n.id])},t.onerror=function(e){for(var t in r)r[t](e);r={}},this.addFile=function(e,t){s({type:"add",name:e,text:t})},this.delFile=function(e){s({type:"del",name:e})},this.request=function(e,t){s({type:"req",body:e},t)}}}(n(4631))},4631:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),s=/Edge\/(\d+)/.exec(e),a=r||i||s,o=a&&(r?document.documentMode||6:+(s||i)[1]),l=!s&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!s&&/Chrome\/(\d+)/.exec(e),h=u&&+u[1],p=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),m=/PhantomJS/.test(e),g=d&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),y=/Android/.test(e),v=g||y||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),x=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),S=p&&e.match(/Version\/(\d*\.\d*)/);S&&(S=Number(S[1])),S&&S>=15&&(p=!1,l=!0);var _=x&&(c||p&&(null==S||S<12.11)),E=n||a&&o>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T,M=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function A(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function k(e,t){return A(e).appendChild(t)}function P(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function L(e,t,n,r){var i=P(e,t,n,r);return i.setAttribute("role","presentation"),i}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function N(e){var t;try{t=e.activeElement}catch(n){t=e.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function R(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function I(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}T=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var O=function(e){e.select()};function F(e){return e.display.wrapper.ownerDocument}function B(e){return F(e).defaultView}function U(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function V(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function j(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var s=r||0,a=i||0;;){var o=e.indexOf("\t",s);if(o<0||o>=t)return a+(t-s);a+=o-s,a+=n-a%n,s=o+1}}g?O=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(O=function(e){try{e.select()}catch(e){}});var z=function(){this.id=null,this.f=null,this.time=0,this.handler=U(this.onTimeout,this)};function H(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}z.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},z.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var W=50,G={toString:function(){return"CodeMirror.Pass"}},X={scroll:!1},K={origin:"*mouse"},q={origin:"+move"};function J(e,t,n){for(var r=0,i=0;;){var s=e.indexOf("\t",r);-1==s&&(s=e.length);var a=s-r;if(s==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=s-r,r=s+1,(i+=n-i%n)>=t)return r}}var Y=[""];function $(e){for(;Y.length<=e;)Y.push(Z(Y)+" ");return Y[e]}function Z(e){return e[e.length-1]}function Q(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function ee(){}function te(e,t){var n;return Object.create?n=Object.create(e):(ee.prototype=e,n=new ee),t&&V(t,n),n}var ne=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function re(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ne.test(e))}function ie(e,t){return t?!!(t.source.indexOf("\\w")>-1&&re(e))||t.test(e):re(e)}function se(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ae=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&ae.test(e)}function le(e,t,n){for(;(n<0?t>0:t<e.length)&&oe(e.charAt(t));)t+=n;return t}function ce(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,s=r<0?Math.ceil(i):Math.floor(i);if(s==t)return e(s)?t:n;e(s)?n=s:t=s+r}}var ue=null;function he(e,t,n){var r;ue=null;for(var i=0;i<e.length;++i){var s=e[i];if(s.from<t&&s.to>t)return i;s.to==t&&(s.from!=s.to&&"before"==n?r=i:ue=i),s.from==t&&(s.from!=s.to&&"before"!=n?r=i:ue=i)}return null!=r?r:ue}var pe=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function s(e,t,n){this.level=e,this.from=t,this.to=n}return function(a,o){var l,c="ltr"==o?"L":"R";if(0==a.length||"ltr"==o&&!e.test(a))return!1;for(var u=a.length,h=[],p=0;p<u;++p)h.push((l=a.charCodeAt(p))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var d=0,f=c;d<u;++d){var m=h[d];"m"==m?h[d]=f:f=m}for(var g=0,y=c;g<u;++g){var v=h[g];"1"==v&&"r"==y?h[g]="n":n.test(v)&&(y=v,"r"==v&&(h[g]="R"))}for(var x=1,b=h[0];x<u-1;++x){var w=h[x];"+"==w&&"1"==b&&"1"==h[x+1]?h[x]="1":","!=w||b!=h[x+1]||"1"!=b&&"n"!=b||(h[x]=b),b=w}for(var S=0;S<u;++S){var _=h[S];if(","==_)h[S]="N";else if("%"==_){var E=void 0;for(E=S+1;E<u&&"%"==h[E];++E);for(var C=S&&"!"==h[S-1]||E<u&&"1"==h[E]?"1":"N",T=S;T<E;++T)h[T]=C;S=E-1}}for(var M=0,A=c;M<u;++M){var k=h[M];"L"==A&&"1"==k?h[M]="L":n.test(k)&&(A=k)}for(var P=0;P<u;++P)if(t.test(h[P])){var L=void 0;for(L=P+1;L<u&&t.test(h[L]);++L);for(var D="L"==(P?h[P-1]:c),N=D==("L"==(L<u?h[L]:c))?D?"L":"R":c,R=P;R<L;++R)h[R]=N;P=L-1}for(var I,O=[],F=0;F<u;)if(r.test(h[F])){var B=F;for(++F;F<u&&r.test(h[F]);++F);O.push(new s(0,B,F))}else{var U=F,V=O.length,j="rtl"==o?1:0;for(++F;F<u&&"L"!=h[F];++F);for(var z=U;z<F;)if(i.test(h[z])){U<z&&(O.splice(V,0,new s(1,U,z)),V+=j);var H=z;for(++z;z<F&&i.test(h[z]);++z);O.splice(V,0,new s(2,H,z)),V+=j,U=z}else++z;U<F&&O.splice(V,0,new s(1,U,F))}return"ltr"==o&&(1==O[0].level&&(I=a.match(/^\s+/))&&(O[0].from=I[0].length,O.unshift(new s(0,0,I[0].length))),1==Z(O).level&&(I=a.match(/\s+$/))&&(Z(O).to-=I[0].length,O.push(new s(0,u-I[0].length,u)))),"rtl"==o?O.reverse():O}}();function de(e,t){var n=e.order;return null==n&&(n=e.order=pe(e.text,t)),n}var fe=[],me=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||fe).concat(n)}};function ge(e,t){return e._handlers&&e._handlers[t]||fe}function ye(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var s=H(i,n);s>-1&&(r[t]=i.slice(0,s).concat(i.slice(s+1)))}}}function ve(e,t){var n=ge(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function xe(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ve(e,n||t.type,e,t),Ce(t)||t.codemirrorIgnore}function be(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==H(n,t[r])&&n.push(t[r])}function we(e,t){return ge(e,t).length>0}function Se(e){e.prototype.on=function(e,t){me(this,e,t)},e.prototype.off=function(e,t){ye(this,e,t)}}function _e(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ee(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ce(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Te(e){_e(e),Ee(e)}function Me(e){return e.target||e.srcElement}function Ae(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),x&&e.ctrlKey&&1==t&&(t=3),t}var ke,Pe,Le=function(){if(a&&o<9)return!1;var e=P("div");return"draggable"in e||"dragDrop"in e}();function De(e){if(null==ke){var t=P("span","​");k(e,P("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(ke=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&o<8))}var n=ke?P("span","​"):P("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ne(e){if(null!=Pe)return Pe;var t=k(e,document.createTextNode("AخA")),n=T(t,0,1).getBoundingClientRect(),r=T(t,1,2).getBoundingClientRect();return A(e),!(!n||n.left==n.right)&&(Pe=r.right-n.right<3)}var Re,Ie=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var s=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=s.indexOf("\r");-1!=a?(n.push(s.slice(0,a)),t+=a+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Oe=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Fe="oncopy"in(Re=P("div"))||(Re.setAttribute("oncopy","return;"),"function"==typeof Re.oncopy),Be=null;var Ue={},Ve={};function je(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ue[e]=t}function ze(e){if("string"==typeof e&&Ve.hasOwnProperty(e))e=Ve[e];else if(e&&"string"==typeof e.name&&Ve.hasOwnProperty(e.name)){var t=Ve[e.name];"string"==typeof t&&(t={name:t}),(e=te(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return ze("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return ze("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function He(e,t){t=ze(t);var n=Ue[t.name];if(!n)return He(e,"text/plain");var r=n(e,t);if(We.hasOwnProperty(t.name)){var i=We[t.name];for(var s in i)i.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var We={};function Ge(e,t){V(t,We.hasOwnProperty(e)?We[e]:We[e]={})}function Xe(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ke(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function qe(e,t,n){return!e.startState||e.startState(t,n)}var Je=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ye(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],s=i.chunkSize();if(t<s){n=i;break}t-=s}return n.lines[t]}function $e(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,(function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i})),r}function Ze(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function Qe(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function et(e){if(null==e.parent)return null;for(var t=e.parent,n=H(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function tt(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],s=i.height;if(t<s){e=i;continue e}t-=s,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var o=e.lines[a].height;if(t<o)break;t-=o}return n+a}function nt(e,t){return t>=e.first&&t<e.first+e.size}function rt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function it(e,t,n){if(void 0===n&&(n=null),!(this instanceof it))return new it(e,t,n);this.line=e,this.ch=t,this.sticky=n}function st(e,t){return e.line-t.line||e.ch-t.ch}function at(e,t){return e.sticky==t.sticky&&0==st(e,t)}function ot(e){return it(e.line,e.ch)}function lt(e,t){return st(e,t)<0?t:e}function ct(e,t){return st(e,t)<0?e:t}function ut(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ht(e,t){if(t.line<e.first)return it(e.first,0);var n=e.first+e.size-1;return t.line>n?it(n,Ye(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?it(e.line,t):n<0?it(e.line,0):e}(t,Ye(e,t.line).text.length)}function pt(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=ht(e,t[r]);return n}Je.prototype.eol=function(){return this.pos>=this.string.length},Je.prototype.sol=function(){return this.pos==this.lineStart},Je.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Je.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Je.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Je.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Je.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Je.prototype.skipToEnd=function(){this.pos=this.string.length},Je.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Je.prototype.backUp=function(e){this.pos-=e},Je.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=j(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Je.prototype.indentation=function(){return j(this.string,null,this.tabSize)-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Je.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Je.prototype.current=function(){return this.string.slice(this.start,this.pos)},Je.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Je.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Je.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var dt=function(e,t){this.state=e,this.lookAhead=t},ft=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function mt(e,t,n,r){var i=[e.state.modeGen],s={};Et(e,t.text,e.doc.mode,n,(function(e,t){return i.push(e,t)}),s,r);for(var a=n.state,o=function(r){n.baseTokens=i;var o=e.state.overlays[r],l=1,c=0;n.state=!0,Et(e,t.text,o.mode,n,(function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(o.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var s=i[n+1];i[n+1]=(s?s+" ":"")+"overlay "+t}}),s),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)o(l);return{styles:i,classes:s.bgClass||s.textClass?s:null}}function gt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=yt(e,et(t)),i=t.text.length>e.options.maxHighlightLength&&Xe(e.doc.mode,r.state),s=mt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=s.styles,s.classes?t.styleClasses=s.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function yt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new ft(r,!0,t);var s=function(e,t,n){for(var r,i,s=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),o=t;o>a;--o){if(o<=s.first)return s.first;var l=Ye(s,o-1),c=l.stateAfter;if(c&&(!n||o+(c instanceof dt?c.lookAhead:0)<=s.modeFrontier))return o;var u=j(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=o-1,r=u)}return i}(e,t,n),a=s>r.first&&Ye(r,s-1).stateAfter,o=a?ft.fromSaved(r,a,s):new ft(r,qe(r.mode),s);return r.iter(s,t,(function(n){vt(e,n.text,o);var r=o.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?o.save():null,o.nextLine()})),n&&(r.modeFrontier=o.line),o}function vt(e,t,n,r){var i=e.doc.mode,s=new Je(t,e.options.tabSize,n);for(s.start=s.pos=r||0,""==t&&xt(i,n.state);!s.eol();)bt(i,s,n.state),s.start=s.pos}function xt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ke(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function bt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ke(e,n).mode);var s=e.token(t,n);if(t.pos>t.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}ft.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ft.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ft.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ft.fromSaved=function(e,t,n){return t instanceof dt?new ft(e,Xe(e.mode,t.state),n,t.lookAhead):new ft(e,Xe(e.mode,t),n)},ft.prototype.save=function(e){var t=!1!==e?Xe(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new dt(t,this.maxLookAhead):t};var wt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function St(e,t,n,r){var i,s,a=e.doc,o=a.mode,l=Ye(a,(t=ht(a,t)).line),c=yt(e,t.line,n),u=new Je(l.text,e.options.tabSize,c);for(r&&(s=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=bt(o,u,c.state),r&&s.push(new wt(u,i,Xe(a.mode,c.state)));return r?s:new wt(u,i,c.state)}function _t(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Et(e,t,n,r,i,s,a){var o=n.flattenSpans;null==o&&(o=e.options.flattenSpans);var l,c=0,u=null,h=new Je(t,e.options.tabSize,r),p=e.options.addModeClass&&[null];for(""==t&&_t(xt(n,r.state),s);!h.eol();){if(h.pos>e.options.maxHighlightLength?(o=!1,a&&vt(e,t,r,h.pos),h.pos=t.length,l=null):l=_t(bt(n,h,r.state,p),s),p){var d=p[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!o||u!=l){for(;c<h.start;)i(c=Math.min(h.start,c+5e3),u);u=l}h.start=h.pos}for(;c<h.pos;){var f=Math.min(h.pos,c+5e3);i(f,u),c=f}}var Ct=!1,Tt=!1;function Mt(e,t,n){this.marker=e,this.from=t,this.to=n}function At(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function kt(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Pt(e,t){if(t.full)return null;var n=nt(e,t.from.line)&&Ye(e,t.from.line).markedSpans,r=nt(e,t.to.line)&&Ye(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,a=0==st(t.from,t.to),o=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var s=e[i],a=s.marker;if(null==s.from||(a.inclusiveLeft?s.from<=t:s.from<t)||s.from==t&&"bookmark"==a.type&&(!n||!s.marker.insertLeft)){var o=null==s.to||(a.inclusiveRight?s.to>=t:s.to>t);(r||(r=[])).push(new Mt(a,s.from,o?null:s.to))}}return r}(n,i,a),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var s=e[i],a=s.marker;if(null==s.to||(a.inclusiveRight?s.to>=t:s.to>t)||s.from==t&&"bookmark"==a.type&&(!n||s.marker.insertLeft)){var o=null==s.from||(a.inclusiveLeft?s.from<=t:s.from<t);(r||(r=[])).push(new Mt(a,o?null:s.from-t,null==s.to?null:s.to-t))}}return r}(r,s,a),c=1==t.text.length,u=Z(t.text).length+(c?i:0);if(o)for(var h=0;h<o.length;++h){var p=o[h];if(null==p.to){var d=At(l,p.marker);d?c&&(p.to=null==d.to?null:d.to+u):p.to=i}}if(l)for(var f=0;f<l.length;++f){var m=l[f];null!=m.to&&(m.to+=u),null==m.from?At(o,m.marker)||(m.from=u,c&&(o||(o=[])).push(m)):(m.from+=u,c&&(o||(o=[])).push(m))}o&&(o=Lt(o)),l&&l!=o&&(l=Lt(l));var g=[o];if(!c){var y,v=t.text.length-2;if(v>0&&o)for(var x=0;x<o.length;++x)null==o[x].to&&(y||(y=[])).push(new Mt(o[x].marker,null,null));for(var b=0;b<v;++b)g.push(y);g.push(l)}return g}function Lt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Dt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Nt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Rt(e){return e.inclusiveLeft?-1:0}function It(e){return e.inclusiveRight?1:0}function Ot(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),s=st(r.from,i.from)||Rt(e)-Rt(t);return s?-s:st(r.to,i.to)||It(e)-It(t)||t.id-e.id}function Ft(e,t){var n,r=Tt&&e.markedSpans;if(r)for(var i=void 0,s=0;s<r.length;++s)(i=r[s]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Ot(n,i.marker)<0)&&(n=i.marker);return n}function Bt(e){return Ft(e,!0)}function Ut(e){return Ft(e,!1)}function Vt(e,t){var n,r=Tt&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var s=r[i];s.marker.collapsed&&(null==s.from||s.from<t)&&(null==s.to||s.to>t)&&(!n||Ot(n,s.marker)<0)&&(n=s.marker)}return n}function jt(e,t,n,r,i){var s=Ye(e,t),a=Tt&&s.markedSpans;if(a)for(var o=0;o<a.length;++o){var l=a[o];if(l.marker.collapsed){var c=l.marker.find(0),u=st(c.from,n)||Rt(l.marker)-Rt(i),h=st(c.to,r)||It(l.marker)-It(i);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?st(c.to,n)>=0:st(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?st(c.from,r)<=0:st(c.from,r)<0)))return!0}}}function zt(e){for(var t;t=Bt(e);)e=t.find(-1,!0).line;return e}function Ht(e,t){var n=Ye(e,t),r=zt(n);return n==r?t:et(r)}function Wt(e,t){if(t>e.lastLine())return t;var n,r=Ye(e,t);if(!Gt(e,r))return t;for(;n=Ut(r);)r=n.find(1,!0).line;return et(r)+1}function Gt(e,t){var n=Tt&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Xt(e,t,r))return!0}}function Xt(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Xt(e,r.line,At(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,s=0;s<t.markedSpans.length;++s)if((i=t.markedSpans[s]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Xt(e,t,i))return!0}function Kt(e){for(var t=0,n=(e=zt(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var s=n.parent;s;s=(n=s).parent)for(var a=0;a<s.children.length;++a){var o=s.children[a];if(o==n)break;t+=o.height}return t}function qt(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Bt(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Ut(r);){var s=t.find(0,!0);n-=r.text.length-s.from.ch,n+=(r=s.to.line).text.length-s.to.ch}return n}function Jt(e){var t=e.display,n=e.doc;t.maxLine=Ye(n,n.first),t.maxLineLength=qt(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=qt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var Yt=function(e,t,n){this.text=e,Nt(this,t),this.height=n?n(this):1};function $t(e){e.parent=null,Dt(e)}Yt.prototype.lineNo=function(){return et(this)},Se(Yt);var Zt={},Qt={};function en(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Qt:Zt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function tn(e,t){var n=L("span",null,null,l?"padding-right: .1px":null),r={pre:L("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var s=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=rn,Ne(e.display.measure)&&(a=de(s,e.doc.direction))&&(r.addToken=sn(r.addToken,a)),r.map=[],on(s,r,gt(e,s,t!=e.display.externalMeasured&&et(s))),s.styleClasses&&(s.styleClasses.bgClass&&(r.bgClass=I(s.styleClasses.bgClass,r.bgClass||"")),s.styleClasses.textClass&&(r.textClass=I(s.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(De(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var o=r.content.lastChild;(/\bcm-tab\b/.test(o.className)||o.querySelector&&o.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return ve(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=I(r.pre.className,r.textClass||"")),r}function nn(e){var t=P("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function rn(e,t,n,r,i,s,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var s=e.charAt(i);" "!=s||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(s=" "),r+=s,n=" "==s}return r}(t,e.trailingSpace):t,h=e.cm.state.specialChars,p=!1;if(h.test(t)){c=document.createDocumentFragment();for(var d=0;;){h.lastIndex=d;var f=h.exec(t),m=f?f.index-d:t.length-d;if(m){var g=document.createTextNode(u.slice(d,d+m));a&&o<9?c.appendChild(P("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;d+=m+1;var y=void 0;if("\t"==f[0]){var v=e.cm.options.tabSize,x=v-e.col%v;(y=c.appendChild(P("span",$(x),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),e.col+=x}else"\r"==f[0]||"\n"==f[0]?((y=c.appendChild(P("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((y=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),a&&o<9?c.appendChild(P("span",[y])):c.appendChild(y),e.col+=1);e.map.push(e.pos,e.pos+1,y),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),a&&o<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||p||s||l){var b=n||"";r&&(b+=r),i&&(b+=i);var w=P("span",[c],b,s);if(l)for(var S in l)l.hasOwnProperty(S)&&"style"!=S&&"class"!=S&&w.setAttribute(S,l[S]);return e.content.appendChild(w)}e.content.appendChild(c)}}function sn(e,t){return function(n,r,i,s,a,o,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var h=void 0,p=0;p<t.length&&!((h=t[p]).to>c&&h.from<=c);p++);if(h.to>=u)return e(n,r,i,s,a,o,l);e(n,r.slice(0,h.to-c),i,s,null,o,l),s=null,r=r.slice(h.to-c),c=h.to}}}function an(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function on(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(r)for(var a,o,l,c,u,h,p,d=i.length,f=0,m=1,g="",y=0;;){if(y==f){l=c=u=o="",p=null,h=null,y=1/0;for(var v=[],x=void 0,b=0;b<r.length;++b){var w=r[b],S=w.marker;if("bookmark"==S.type&&w.from==f&&S.widgetNode)v.push(S);else if(w.from<=f&&(null==w.to||w.to>f||S.collapsed&&w.to==f&&w.from==f)){if(null!=w.to&&w.to!=f&&y>w.to&&(y=w.to,c=""),S.className&&(l+=" "+S.className),S.css&&(o=(o?o+";":"")+S.css),S.startStyle&&w.from==f&&(u+=" "+S.startStyle),S.endStyle&&w.to==y&&(x||(x=[])).push(S.endStyle,w.to),S.title&&((p||(p={})).title=S.title),S.attributes)for(var _ in S.attributes)(p||(p={}))[_]=S.attributes[_];S.collapsed&&(!h||Ot(h.marker,S)<0)&&(h=w)}else w.from>f&&y>w.from&&(y=w.from)}if(x)for(var E=0;E<x.length;E+=2)x[E+1]==y&&(c+=" "+x[E]);if(!h||h.from==f)for(var C=0;C<v.length;++C)an(t,0,v[C]);if(h&&(h.from||0)==f){if(an(t,(null==h.to?d+1:h.to)-f,h.marker,null==h.from),null==h.to)return;h.to==f&&(h=!1)}}if(f>=d)break;for(var T=Math.min(d,y);;){if(g){var M=f+g.length;if(!h){var A=M>T?g.slice(0,T-f):g;t.addToken(t,A,a?a+l:l,u,f+A.length==y?c:"",o,p)}if(M>=T){g=g.slice(T-f),f=T;break}f=M,u=""}g=i.slice(s,s=n[m++]),a=en(n[m++],t.cm.options)}}else for(var k=1;k<n.length;k+=2)t.addToken(t,i.slice(s,s=n[k]),en(n[k+1],t.cm.options))}function ln(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Ut(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?et(Z(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Gt(e,t)}function cn(e,t,n){for(var r,i=[],s=t;s<n;s=r){var a=new ln(e.doc,Ye(e.doc,s),s);r=s+a.size,i.push(a)}return i}var un=null;var hn=null;function pn(e,t){var n=ge(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);un?r=un.delayedCallbacks:hn?r=hn:(r=hn=[],setTimeout(dn,0));for(var s=function(e){r.push((function(){return n[e].apply(null,i)}))},a=0;a<n.length;++a)s(a)}}function dn(){var e=hn;hn=null;for(var t=0;t<e.length;++t)e[t]()}function fn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var s=t.changes[i];"text"==s?yn(e,t):"gutter"==s?xn(e,t,n,r):"class"==s?vn(e,t):"widget"==s&&bn(e,t,r)}t.changes=null}function mn(e){return e.node==e.text&&(e.node=P("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&o<8&&(e.node.style.zIndex=2)),e.node}function gn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):tn(e,t)}function yn(e,t){var n=t.text.className,r=gn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,vn(e,t)):n&&(t.text.className=n)}function vn(e,t){(function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=mn(t);t.background=r.insertBefore(P("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?mn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function xn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=mn(t);t.gutterBackground=P("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var a=mn(t),o=t.gutter=P("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(o.setAttribute("aria-hidden","true"),e.display.input.setUneditable(o),a.insertBefore(o,t.text),t.line.gutterClass&&(o.className+=" "+t.line.gutterClass),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(t.lineNumber=o.appendChild(P("div",rt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=s.hasOwnProperty(c)&&s[c];u&&o.appendChild(P("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function bn(e,t,n){t.alignable&&(t.alignable=null);for(var r=C("CodeMirror-linewidget"),i=t.node.firstChild,s=void 0;i;i=s)s=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);Sn(e,t,n)}function wn(e,t,n,r){var i=gn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),vn(e,t),xn(e,t,n,r),Sn(e,t,r),t.node}function Sn(e,t,n){if(_n(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)_n(e,t.rest[r],t,n,!1)}function _n(e,t,n,r,i){if(t.widgets)for(var s=mn(n),a=0,o=t.widgets;a<o.length;++a){var l=o[a],c=P("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),En(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?s.insertBefore(c,n.gutter||n.text):s.appendChild(c),pn(l,"redraw")}}function En(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Cn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),k(t.display.measure,P("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Tn(e,t){for(var n=Me(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Mn(e){return e.lineSpace.offsetTop}function An(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function kn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=k(e.measure,P("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Pn(e){return W-e.display.nativeBarWidth}function Ln(e){return e.display.scroller.clientWidth-Pn(e)-e.display.barWidth}function Dn(e){return e.display.scroller.clientHeight-Pn(e)-e.display.barHeight}function Nn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(et(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function Rn(e,t,n,r){return Fn(e,On(e,t),n,r)}function In(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[fr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function On(e,t){var n=et(t),r=In(e,n);r&&!r.text?r=null:r&&r.changes&&(fn(e,r,n,cr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=et(t=zt(t)),r=e.display.externalMeasured=new ln(e.doc,t,n);r.lineN=n;var i=r.built=tn(e,r);return r.text=i.pre,k(e.display.lineMeasure,i.pre),r}(e,t));var i=Nn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Fn(e,t,n,r,i){t.before&&(n=-1);var s,l=n+(r||"");return t.cache.hasOwnProperty(l)?s=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Ln(e);if(!t.measure.heights||r&&t.measure.width!=i){var s=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),o=0;o<a.length-1;o++){var l=a[o],c=a[o+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-n.top)}}s.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(s=function(e,t,n,r){var i,s=Vn(t.map,n,r),l=s.node,c=s.start,u=s.end,h=s.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;c&&oe(t.line.text.charAt(s.coverStart+c));)--c;for(;s.coverStart+u<s.coverEnd&&oe(t.line.text.charAt(s.coverStart+u));)++u;if((i=a&&o<9&&0==c&&u==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():jn(T(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,h="right"}a&&o<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Be)return Be;var t=k(e,P("span","x")),n=t.getBoundingClientRect(),r=T(t,0,1).getBoundingClientRect();return Be=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var d;c>0&&(h=r="right"),i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==r?d.length-1:0]:l.getBoundingClientRect()}if(a&&o<9&&!c&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+lr(e.display),top:f.top,bottom:f.bottom}:Un}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,y=(m+g)/2,v=t.view.measure.heights,x=0;x<v.length-1&&!(y<v[x]);x++);var b=x?v[x-1]:0,w=v[x],S={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:b,bottom:w};return i.left||i.right||(S.bogus=!0),e.options.singleCursorHeightPerLine||(S.rtop=m,S.rbottom=g),S}(e,t,n,r)).bogus||(t.cache[l]=s)),{left:s.left,right:s.right,top:i?s.rtop:s.top,bottom:i?s.rbottom:s.bottom}}var Bn,Un={left:0,right:0,top:0,bottom:0};function Vn(e,t,n){for(var r,i,s,a,o,l,c=0;c<e.length;c+=3)if(o=e[c],l=e[c+1],t<o?(i=0,s=1,a="left"):t<l?s=1+(i=t-o):(c==e.length-3||t==l&&e[c+3]>t)&&(i=(s=l-o)-1,t>=l&&(a="right")),null!=i){if(r=e[c+2],o==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==n&&i==l-o)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:s,collapse:a,coverStart:o,coverEnd:l}}function jn(e,t){var n=Un;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function zn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Hn(e){e.display.externalMeasure=null,A(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)zn(e.display.view[t])}function Wn(e){Hn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Gn(e){return u&&y?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function Xn(e){return u&&y?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function Kn(e){var t=zt(e).widgets,n=0;if(t)for(var r=0;r<t.length;++r)t[r].above&&(n+=Cn(t[r]));return n}function qn(e,t,n,r,i){if(!i){var s=Kn(t);n.top+=s,n.bottom+=s}if("line"==r)return n;r||(r="local");var a=Kt(t);if("local"==r?a+=Mn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var o=e.display.lineSpace.getBoundingClientRect();a+=o.top+("window"==r?0:Xn(F(e)));var l=o.left+("window"==r?0:Gn(F(e)));n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function Jn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Gn(F(e)),i-=Xn(F(e));else if("local"==n||!n){var s=e.display.sizer.getBoundingClientRect();r+=s.left,i+=s.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Yn(e,t,n,r,i){return r||(r=Ye(e.doc,t.line)),qn(e,r,Rn(e,r,t.ch,i),n)}function $n(e,t,n,r,i,s){function a(t,a){var o=Fn(e,i,t,a?"right":"left",s);return a?o.left=o.right:o.right=o.left,qn(e,r,o,n)}r=r||Ye(e.doc,t.line),i||(i=On(e,r));var o=de(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!o)return a("before"==c?l-1:l,"before"==c);function u(e,t,n){return a(n?e-1:e,1==o[t].level!=n)}var h=he(o,l,c),p=ue,d=u(l,h,"before"==c);return null!=p&&(d.other=u(l,p,"before"!=c)),d}function Zn(e,t){var n=0;t=ht(e.doc,t),e.options.lineWrapping||(n=lr(e.display)*t.ch);var r=Ye(e.doc,t.line),i=Kt(r)+Mn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Qn(e,t,n,r,i){var s=it(e,t,n);return s.xRel=i,r&&(s.outside=r),s}function er(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Qn(r.first,0,null,-1,-1);var i=tt(r,n),s=r.first+r.size-1;if(i>s)return Qn(r.first+r.size-1,Ye(r,s).text.length,null,1,1);t<0&&(t=0);for(var a=Ye(r,i);;){var o=ir(e,a,i,t,n),l=Vt(a,o.ch+(o.xRel>0||o.outside>0?1:0));if(!l)return o;var c=l.find(1);if(c.line==i)return c;a=Ye(r,i=c.line)}}function tr(e,t,n,r){r-=Kn(t);var i=t.text.length,s=ce((function(t){return Fn(e,n,t-1).bottom<=r}),i,0);return{begin:s,end:i=ce((function(t){return Fn(e,n,t).top>r}),s,i)}}function nr(e,t,n,r){return n||(n=On(e,t)),tr(e,t,n,qn(e,t,Fn(e,n,r),"line").top)}function rr(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function ir(e,t,n,r,i){i-=Kt(t);var s=On(e,t),a=Kn(t),o=0,l=t.text.length,c=!0,u=de(t,e.doc.direction);if(u){var h=(e.options.lineWrapping?ar:sr)(e,t,n,s,u,r,i);o=(c=1!=h.level)?h.from:h.to-1,l=c?h.to:h.from-1}var p,d,f=null,m=null,g=ce((function(t){var n=Fn(e,s,t);return n.top+=a,n.bottom+=a,!!rr(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(f=t,m=n),!0)}),o,l),y=!1;if(m){var v=r-m.left<m.right-r,x=v==c;g=f+(x?0:1),d=x?"after":"before",p=v?m.left:m.right}else{c||g!=l&&g!=o||g++,d=0==g?"after":g==t.text.length?"before":Fn(e,s,g-(c?1:0)).bottom+a<=i==c?"after":"before";var b=$n(e,it(n,g,d),"line",t,s);p=b.left,y=i<b.top?-1:i>=b.bottom?1:0}return Qn(n,g=le(t.text,g,1),d,y,r-p)}function sr(e,t,n,r,i,s,a){var o=ce((function(o){var l=i[o],c=1!=l.level;return rr($n(e,it(n,c?l.to:l.from,c?"before":"after"),"line",t,r),s,a,!0)}),0,i.length-1),l=i[o];if(o>0){var c=1!=l.level,u=$n(e,it(n,c?l.from:l.to,c?"after":"before"),"line",t,r);rr(u,s,a,!0)&&u.top>a&&(l=i[o-1])}return l}function ar(e,t,n,r,i,s,a){var o=tr(e,t,r,a),l=o.begin,c=o.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,h=null,p=0;p<i.length;p++){var d=i[p];if(!(d.from>=c||d.to<=l)){var f=Fn(e,r,1!=d.level?Math.min(c,d.to)-1:Math.max(l,d.from)).right,m=f<s?s-f+1e9:f-s;(!u||h>m)&&(u=d,h=m)}}return u||(u=i[i.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function or(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Bn){Bn=P("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Bn.appendChild(document.createTextNode("x")),Bn.appendChild(P("br"));Bn.appendChild(document.createTextNode("x"))}k(e.measure,Bn);var n=Bn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),A(e.measure),n||1}function lr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=P("span","xxxxxxxxxx"),n=P("pre",[t],"CodeMirror-line-like");k(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function cr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,s=t.gutters.firstChild,a=0;s;s=s.nextSibling,++a){var o=e.display.gutterSpecs[a].className;n[o]=s.offsetLeft+s.clientLeft+i,r[o]=s.clientWidth}return{fixedPos:ur(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function ur(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function hr(e){var t=or(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/lr(e.display)-3);return function(i){if(Gt(e.doc,i))return 0;var s=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(s+=i.widgets[a].height);return n?s+(Math.ceil(i.text.length/r)||1)*t:s+t}}function pr(e){var t=e.doc,n=hr(e);t.iter((function(e){var t=n(e);t!=e.height&&Qe(e,t)}))}function dr(e,t,n,r){var i=e.display;if(!n&&"true"==Me(t).getAttribute("cm-not-content"))return null;var s,a,o=i.lineSpace.getBoundingClientRect();try{s=t.clientX-o.left,a=t.clientY-o.top}catch(e){return null}var l,c=er(e,s,a);if(r&&c.xRel>0&&(l=Ye(e.doc,c.line).text).length==c.ch){var u=j(l,l.length,e.options.tabSize)-l.length;c=it(c.line,Math.max(0,Math.round((s-kn(e.display).left)/lr(e.display))-u))}return c}function fr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function mr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Tt&&Ht(e.doc,t)<i.viewTo&&yr(e);else if(n<=i.viewFrom)Tt&&Wt(e.doc,n+r)>i.viewFrom?yr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)yr(e);else if(t<=i.viewFrom){var s=vr(e,n,n+r,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=r):yr(e)}else if(n>=i.viewTo){var a=vr(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):yr(e)}else{var o=vr(e,t,t,-1),l=vr(e,n,n+r,1);o&&l?(i.view=i.view.slice(0,o.index).concat(cn(e,o.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):yr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function gr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var s=r.view[fr(e,t)];if(null!=s.node){var a=s.changes||(s.changes=[]);-1==H(a,n)&&a.push(n)}}}function yr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vr(e,t,n,r){var i,s=fr(e,t),a=e.display.view;if(!Tt||n==e.doc.first+e.doc.size)return{index:s,lineN:n};for(var o=e.display.viewFrom,l=0;l<s;l++)o+=a[l].size;if(o!=t){if(r>0){if(s==a.length-1)return null;i=o+a[s].size-t,s++}else i=o-t;t+=i,n+=i}for(;Ht(e.doc,n)!=n;){if(s==(r<0?0:a.length-1))return null;n+=r*a[s-(r<0?1:0)].size,s+=r}return{index:s,lineN:n}}function xr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function br(e){e.display.input.showSelection(e.display.input.prepareSelection())}function wr(e,t){void 0===t&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),s=r.selection=document.createDocumentFragment(),a=e.options.$customCursor;a&&(t=!0);for(var o=0;o<n.sel.ranges.length;o++)if(t||o!=n.sel.primIndex){var l=n.sel.ranges[o];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var c=l.empty();if(a){var u=a(e,l);u&&Sr(e,u,i)}else(c||e.options.showCursorWhenSelecting)&&Sr(e,l.head,i);c||Er(e,l,s)}}return r}function Sr(e,t,n){var r=$n(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(P("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var s=Yn(e,t,"div",null,null),a=s.right-s.left;i.style.width=(a>0?a:e.defaultCharWidth())+"px"}if(r.other){var o=n.appendChild(P("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function _r(e,t){return e.top-t.top||e.left-t.left}function Er(e,t,n){var r=e.display,i=e.doc,s=document.createDocumentFragment(),a=kn(e.display),o=a.left,l=Math.max(r.sizerWidth,Ln(e)-r.sizer.offsetLeft)-a.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(P("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function h(t,n,r){var s,a,h=Ye(i,t),p=h.text.length;function d(n,r){return Yn(e,it(t,n),"div",h,r)}function f(t,n,r){var i=nr(e,h,null,t),s="ltr"==n==("after"==r)?"left":"right";return d("after"==r?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1),s)[s]}var m=de(h,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,s=0;s<e.length;++s){var a=e[s];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",s),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?p:r,(function(e,t,i,h){var g="ltr"==i,y=d(e,g?"left":"right"),v=d(t-1,g?"right":"left"),x=null==n&&0==e,b=null==r&&t==p,w=0==h,S=!m||h==m.length-1;if(v.top-y.top<=3){var _=(c?b:x)&&S,E=(c?x:b)&&w?o:(g?y:v).left,C=_?l:(g?v:y).right;u(E,y.top,C-E,y.bottom)}else{var T,M,A,k;g?(T=c&&x&&w?o:y.left,M=c?l:f(e,i,"before"),A=c?o:f(t,i,"after"),k=c&&b&&S?l:v.right):(T=c?f(e,i,"before"):o,M=!c&&x&&w?l:y.right,A=!c&&b&&S?o:v.left,k=c?f(t,i,"after"):l),u(T,y.top,M-T,y.bottom),y.bottom<v.top&&u(o,y.bottom,null,v.top),u(A,v.top,k-A,v.bottom)}(!s||_r(y,s)<0)&&(s=y),_r(v,s)<0&&(s=v),(!a||_r(y,a)<0)&&(a=y),_r(v,a)<0&&(a=v)})),{start:s,end:a}}var p=t.from(),d=t.to();if(p.line==d.line)h(p.line,p.ch,d.ch);else{var f=Ye(i,p.line),m=Ye(i,d.line),g=zt(f)==zt(m),y=h(p.line,p.ch,g?f.text.length+1:null).end,v=h(d.line,g?0:null,d.ch).start;g&&(y.top<v.top-2?(u(y.right,y.top,null,y.bottom),u(o,v.top,v.left,v.bottom)):u(y.right,y.top,v.left-y.right,y.bottom)),y.bottom<v.top&&u(o,y.bottom,null,v.top)}n.appendChild(s)}function Cr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||kr(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Tr(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ar(e))}function Mr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&kr(e))}),100)}function Ar(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ve(e,"focus",e,t),e.state.focused=!0,R(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Cr(e))}function kr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ve(e,"blur",e,t),e.state.focused=!1,M(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Pr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,s=0,l=0;l<t.view.length;l++){var c=t.view[l],u=e.options.lineWrapping,h=void 0,p=0;if(!c.hidden){if(i+=c.line.height,a&&o<8){var d=c.node.offsetTop+c.node.offsetHeight;h=d-n,n=d}else{var f=c.node.getBoundingClientRect();h=f.bottom-f.top,!u&&c.text.firstChild&&(p=c.text.firstChild.getBoundingClientRect().right-f.left-1)}var m=c.line.height-h;if((m>.005||m<-.005)&&(i<r&&(s-=m),Qe(c.line,h),Lr(c.line),c.rest))for(var g=0;g<c.rest.length;g++)Lr(c.rest[g]);if(p>e.display.sizerWidth){var y=Math.ceil(p/lr(e.display));y>e.display.maxLineLength&&(e.display.maxLineLength=y,e.display.maxLine=c.line,e.display.maxLineChanged=!0)}}}Math.abs(s)>2&&(t.scroller.scrollTop+=s)}function Lr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Dr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Mn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,s=tt(t,r),a=tt(t,i);if(n&&n.ensure){var o=n.ensure.from.line,l=n.ensure.to.line;o<s?(s=o,a=tt(t,Kt(Ye(t,o))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(s=tt(t,Kt(Ye(t,l))-e.wrapper.clientHeight),a=l)}return{from:s,to:Math.max(a,s+1)}}function Nr(e,t){var n=e.display,r=or(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,s=Dn(e),a={};t.bottom-t.top>s&&(t.bottom=t.top+s);var o=e.doc.height+An(n),l=t.top<r,c=t.bottom>o-r;if(t.top<i)a.scrollTop=l?0:t.top;else if(t.bottom>i+s){var u=Math.min(t.top,(c?o:t.bottom)-s);u!=i&&(a.scrollTop=u)}var h=e.options.fixedGutter?0:n.gutters.offsetWidth,p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-h,d=Ln(e)-n.gutters.offsetWidth,f=t.right-t.left>d;return f&&(t.right=t.left+d),t.left<10?a.scrollLeft=0:t.left<p?a.scrollLeft=Math.max(0,t.left+h-(f?0:10)):t.right>d+p-3&&(a.scrollLeft=t.right+(f?0:10)-d),a}function Rr(e,t){null!=t&&(Fr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ir(e){Fr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Or(e,t,n){null==t&&null==n||Fr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Fr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Br(e,Zn(e,t.from),Zn(e,t.to),t.margin))}function Br(e,t,n,r){var i=Nr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Or(e,i.scrollLeft,i.scrollTop)}function Ur(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||di(e,{top:t}),Vr(e,t,!0),n&&di(e),oi(e,100))}function Vr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function jr(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,gi(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function zr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+An(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Pn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Hr=function(e,t,n){this.cm=n;var r=this.vert=P("div",[P("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=P("div",[P("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),me(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),me(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&o<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Hr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+s)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Hr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Hr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Hr.prototype.zeroWidthHack=function(){var e=x&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new z,this.disableVert=new z},Hr.prototype.enableZeroWidthBar=function(e,t,n){e.style.visibility="",t.set(1e3,(function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.visibility="hidden":t.set(1e3,r)}))},Hr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Wr=function(){};function Gr(e,t){t||(t=zr(e));var n=e.display.barWidth,r=e.display.barHeight;Xr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&Pr(e),Xr(e,zr(e)),n=e.display.barWidth,r=e.display.barHeight}function Xr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Wr.prototype.update=function(){return{bottom:0,right:0}},Wr.prototype.setScrollLeft=function(){},Wr.prototype.setScrollTop=function(){},Wr.prototype.clear=function(){};var Kr={native:Hr,null:Wr};function qr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&M(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Kr[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),me(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?jr(e,t):Ur(e,t)}),e),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)}var Jr=0;function Yr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Jr,markArrays:null},t=e.curOp,un?un.ops.push(t):t.ownsGroup=un={ops:[t],delayedCallbacks:[]}}function $r(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{un=null,t(n)}}(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Zr(t[n]);for(var r=0;r<t.length;r++)Qr(t[r]);for(var i=0;i<t.length;i++)ei(t[i]);for(var s=0;s<t.length;s++)ti(t[s]);for(var a=0;a<t.length;a++)ni(t[a])}(e)}))}function Zr(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Pn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Pn(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Jt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ci(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Qr(e){e.updatedDisplay=e.mustUpdate&&hi(e.cm,e.update)}function ei(e){var t=e.cm,n=t.display;e.updatedDisplay&&Pr(t),e.barMeasure=zr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Rn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Pn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Ln(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ti(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&jr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==N(F(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Gr(t,e.barMeasure),e.updatedDisplay&&mi(t,e.barMeasure),e.selectionChanged&&Cr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Tr(e.cm)}function ni(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&pi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Vr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&jr(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!xe(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null,s=n.wrapper.ownerDocument;if(t.top+r.top<0?i=!0:t.bottom+r.top>(s.defaultView.innerHeight||s.documentElement.clientHeight)&&(i=!1),null!=i&&!m){var a=P("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Mn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Pn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==t.sticky?it(t.line,t.ch+1,"before"):t,t=t.ch?it(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var s=0;s<5;s++){var a=!1,o=$n(e,t),l=n&&n!=t?$n(e,n):o,c=Nr(e,i={left:Math.min(o.left,l.left),top:Math.min(o.top,l.top)-r,right:Math.max(o.left,l.left),bottom:Math.max(o.bottom,l.bottom)+r}),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Ur(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=c.scrollLeft&&(jr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(a=!0)),!a)break}return i}(t,ht(r,e.scrollToPos.from),ht(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||ve(i[a],"hide");if(s)for(var o=0;o<s.length;++o)s[o].lines.length&&ve(s[o],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ve(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function ri(e,t){if(e.curOp)return t();Yr(e);try{return t()}finally{$r(e)}}function ii(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Yr(e);try{return t.apply(e,arguments)}finally{$r(e)}}}function si(e){return function(){if(this.curOp)return e.apply(this,arguments);Yr(this);try{return e.apply(this,arguments)}finally{$r(this)}}}function ai(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Yr(t);try{return e.apply(this,arguments)}finally{$r(t)}}}function oi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,U(li,e))}function li(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=yt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(s){if(r.line>=e.display.viewFrom){var a=s.styles,o=s.text.length>e.options.maxHighlightLength?Xe(t.mode,r.state):null,l=mt(e,s,r,!0);o&&(r.state=o),s.styles=l.styles;var c=s.styleClasses,u=l.classes;u?s.styleClasses=u:c&&(s.styleClasses=null);for(var h=!a||a.length!=s.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),p=0;!h&&p<a.length;++p)h=a[p]!=s.styles[p];h&&i.push(r.line),s.stateAfter=r.save(),r.nextLine()}else s.text.length<=e.options.maxHighlightLength&&vt(e,s.text,r),s.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return oi(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&ri(e,(function(){for(var t=0;t<i.length;t++)gr(e,i[t],"text")}))}}var ci=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Dr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Ln(e),this.force=n,this.dims=cr(e),this.events=[]};function ui(e){if(e.hasFocus())return null;var t=N(F(e));if(!t||!D(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=B(e).getSelection();r.anchorNode&&r.extend&&D(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}function hi(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return yr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==xr(e))return!1;yi(e)&&(yr(e),t.dims=cr(e));var i=r.first+r.size,s=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<s&&s-n.viewFrom<20&&(s=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Tt&&(s=Ht(e.doc,s),a=Wt(e.doc,a));var o=s!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=cn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=cn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(fr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(cn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,fr(e,n)))),r.viewTo=n})(e,s,a),n.viewOffset=Kt(Ye(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=xr(e);if(!o&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=ui(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,s=r.lineDiv,a=s.firstChild;function o(t){var n=t.nextSibling;return l&&x&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var p=c[h];if(p.hidden);else if(p.node&&p.node.parentNode==s){for(;a!=p.node;)a=o(a);var d=i&&null!=t&&t<=u&&p.lineNumber;p.changes&&(H(p.changes,"gutter")>-1&&(d=!1),fn(e,p,u,n)),d&&(A(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(rt(e.options,u)))),a=p.node.nextSibling}else{var f=wn(e,p,u,n);s.insertBefore(f,a)}u+=p.size}for(;a;)a=o(a)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=N(e.activeElt.ownerDocument)&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,n=t.defaultView.getSelection(),r=t.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),n.removeAllRanges(),n.addRange(r),n.extend(e.focusNode,e.focusOffset)}}(u),A(n.cursorDiv),A(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,o&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,oi(e,400)),n.updateLineNumbers=null,!0}function pi(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Ln(e))r&&(t.visible=Dr(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+An(e.display)-Dn(e),n.top)}),t.visible=Dr(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!hi(e,t))break;Pr(e);var i=zr(e);br(e),Gr(e,i),mi(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function di(e,t){var n=new ci(e,t);if(hi(e,n)){Pr(e),pi(e,n);var r=zr(e);br(e),Gr(e,r),mi(e,r),n.finish()}}function fi(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",pn(e,"gutterChanged",e)}function mi(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Pn(e)+"px"}function gi(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=ur(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,s=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=s),n[a].gutterBackground&&(n[a].gutterBackground.style.left=s));var o=n[a].alignable;if(o)for(var l=0;l<o.length;l++)o[l].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function yi(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=rt(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(P("div",[P("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,a=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",fi(e.display),!0}return!1}function vi(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var s=e[i],a=null;if("string"!=typeof s&&(a=s.style,s=s.className),"CodeMirror-linenumbers"==s){if(!t)continue;r=!0}n.push({className:s,style:a})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function xi(e){var t=e.gutters,n=e.gutterSpecs;A(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],s=i.className,a=i.style,o=t.appendChild(P("div",null,"CodeMirror-gutter "+s));a&&(o.style.cssText=a),"CodeMirror-linenumbers"==s&&(e.lineGutter=o,o.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",fi(e)}function bi(e){xi(e.display),mr(e),gi(e)}function wi(e,t,r,i){var s=this;this.input=r,s.scrollbarFiller=P("div",null,"CodeMirror-scrollbar-filler"),s.scrollbarFiller.setAttribute("cm-not-content","true"),s.gutterFiller=P("div",null,"CodeMirror-gutter-filler"),s.gutterFiller.setAttribute("cm-not-content","true"),s.lineDiv=L("div",null,"CodeMirror-code"),s.selectionDiv=P("div",null,null,"position: relative; z-index: 1"),s.cursorDiv=P("div",null,"CodeMirror-cursors"),s.measure=P("div",null,"CodeMirror-measure"),s.lineMeasure=P("div",null,"CodeMirror-measure"),s.lineSpace=L("div",[s.measure,s.lineMeasure,s.selectionDiv,s.cursorDiv,s.lineDiv],null,"position: relative; outline: none");var c=L("div",[s.lineSpace],"CodeMirror-lines");s.mover=P("div",[c],null,"position: relative"),s.sizer=P("div",[s.mover],"CodeMirror-sizer"),s.sizerWidth=null,s.heightForcer=P("div",null,null,"position: absolute; height: "+W+"px; width: 1px;"),s.gutters=P("div",null,"CodeMirror-gutters"),s.lineGutter=null,s.scroller=P("div",[s.sizer,s.heightForcer,s.gutters],"CodeMirror-scroll"),s.scroller.setAttribute("tabIndex","-1"),s.wrapper=P("div",[s.scrollbarFiller,s.gutterFiller,s.scroller],"CodeMirror"),u&&h>=105&&(s.wrapper.style.clipPath="inset(0px)"),s.wrapper.setAttribute("translate","no"),a&&o<8&&(s.gutters.style.zIndex=-1,s.scroller.style.paddingRight=0),l||n&&v||(s.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(s.wrapper):e(s.wrapper)),s.viewFrom=s.viewTo=t.first,s.reportedViewFrom=s.reportedViewTo=t.first,s.view=[],s.renderedView=null,s.externalMeasured=null,s.viewOffset=0,s.lastWrapHeight=s.lastWrapWidth=0,s.updateLineNumbers=null,s.nativeBarWidth=s.barHeight=s.barWidth=0,s.scrollbarsClipped=!1,s.lineNumWidth=s.lineNumInnerWidth=s.lineNumChars=null,s.alignWidgets=!1,s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.maxLine=null,s.maxLineLength=0,s.maxLineChanged=!1,s.wheelDX=s.wheelDY=s.wheelStartX=s.wheelStartY=null,s.shift=!1,s.selForContextMenu=null,s.activeTouch=null,s.gutterSpecs=vi(i.gutters,i.lineNumbers),xi(s),r.init(s)}ci.prototype.signal=function(e,t){we(e,t)&&this.events.push(arguments)},ci.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ve.apply(null,this.events[e])};var Si=0,_i=null;function Ei(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Ci(e){var t=Ei(e);return t.x*=_i,t.y*=_i,t}function Ti(e,t){u&&102==h&&(null==e.display.chromeScrollHack?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout((function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""}),100));var r=Ei(t),i=r.x,s=r.y,a=_i;0===t.deltaMode&&(i=t.deltaX,s=t.deltaY,a=1);var o=e.display,c=o.scroller,d=c.scrollWidth>c.clientWidth,f=c.scrollHeight>c.clientHeight;if(i&&d||s&&f){if(s&&x&&l)e:for(var m=t.target,g=o.view;m!=c;m=m.parentNode)for(var y=0;y<g.length;y++)if(g[y].node==m){e.display.currentWheelTarget=m;break e}if(i&&!n&&!p&&null!=a)return s&&f&&Ur(e,Math.max(0,c.scrollTop+s*a)),jr(e,Math.max(0,c.scrollLeft+i*a)),(!s||s&&f)&&_e(t),void(o.wheelStartX=null);if(s&&null!=a){var v=s*a,b=e.doc.scrollTop,w=b+o.wrapper.clientHeight;v<0?b=Math.max(0,b+v-50):w=Math.min(e.doc.height,w+v+50),di(e,{top:b,bottom:w})}Si<20&&0!==t.deltaMode&&(null==o.wheelStartX?(o.wheelStartX=c.scrollLeft,o.wheelStartY=c.scrollTop,o.wheelDX=i,o.wheelDY=s,setTimeout((function(){if(null!=o.wheelStartX){var e=c.scrollLeft-o.wheelStartX,t=c.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(_i=(_i*Si+n)/(Si+1),++Si)}}),200)):(o.wheelDX+=i,o.wheelDY+=s))}}a?_i=-.53:n?_i=15:u?_i=-.7:d&&(_i=-1/3);var Mi=function(e,t){this.ranges=e,this.primIndex=t};Mi.prototype.primary=function(){return this.ranges[this.primIndex]},Mi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!at(n.anchor,r.anchor)||!at(n.head,r.head))return!1}return!0},Mi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ai(ot(this.ranges[t].anchor),ot(this.ranges[t].head));return new Mi(e,this.primIndex)},Mi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Mi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(st(t,r.from())>=0&&st(e,r.to())<=0)return n}return-1};var Ai=function(e,t){this.anchor=e,this.head=t};function ki(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort((function(e,t){return st(e.from(),t.from())})),n=H(t,i);for(var s=1;s<t.length;s++){var a=t[s],o=t[s-1],l=st(o.to(),a.from());if(r&&!a.empty()?l>0:l>=0){var c=ct(o.from(),a.from()),u=lt(o.to(),a.to()),h=o.empty()?a.from()==a.head:o.from()==o.head;s<=n&&--n,t.splice(--s,2,new Ai(h?u:c,h?c:u))}}return new Mi(t,n)}function Pi(e,t){return new Mi([new Ai(e,t||e)],0)}function Li(e){return e.text?it(e.from.line+e.text.length-1,Z(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Di(e,t){if(st(e,t.from)<0)return e;if(st(e,t.to)<=0)return Li(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Li(t).ch-t.to.ch),it(n,r)}function Ni(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Ai(Di(i.anchor,t),Di(i.head,t)))}return ki(e.cm,n,e.sel.primIndex)}function Ri(e,t,n){return e.line==t.line?it(n.line,e.ch-t.ch+n.ch):it(n.line+(e.line-t.line),e.ch)}function Ii(e){e.doc.mode=He(e.options,e.doc.modeOption),Oi(e)}function Oi(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,oi(e,100),e.state.modeGen++,e.curOp&&mr(e)}function Fi(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Z(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Bi(e,t,n,r){function i(e){return n?n[e]:null}function s(e,n,i){(function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Dt(e),Nt(e,n);var i=r?r(e):1;i!=e.height&&Qe(e,i)})(e,n,i,r),pn(e,"change",e,t)}function a(e,t){for(var n=[],s=e;s<t;++s)n.push(new Yt(c[s],i(s),r));return n}var o=t.from,l=t.to,c=t.text,u=Ye(e,o.line),h=Ye(e,l.line),p=Z(c),d=i(c.length-1),f=l.line-o.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Fi(e,t)){var m=a(0,c.length-1);s(h,h.text,d),f&&e.remove(o.line,f),m.length&&e.insert(o.line,m)}else if(u==h)if(1==c.length)s(u,u.text.slice(0,o.ch)+p+u.text.slice(l.ch),d);else{var g=a(1,c.length-1);g.push(new Yt(p+u.text.slice(l.ch),d,r)),s(u,u.text.slice(0,o.ch)+c[0],i(0)),e.insert(o.line+1,g)}else if(1==c.length)s(u,u.text.slice(0,o.ch)+c[0]+h.text.slice(l.ch),i(0)),e.remove(o.line+1,f);else{s(u,u.text.slice(0,o.ch)+c[0],i(0)),s(h,p+h.text.slice(l.ch),d);var y=a(1,c.length-1);f>1&&e.remove(o.line+1,f-1),e.insert(o.line+1,y)}pn(e,"change",e,t)}function Ui(e,t,n){!function e(r,i,s){if(r.linked)for(var a=0;a<r.linked.length;++a){var o=r.linked[a];if(o.doc!=i){var l=s&&o.sharedHist;n&&!l||(t(o.doc,l),e(o.doc,r,l))}}}(e,null,!0)}function Vi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,pr(e),Ii(e),ji(e),e.options.direction=t.direction,e.options.lineWrapping||Jt(e),e.options.mode=t.modeOption,mr(e)}function ji(e){("rtl"==e.doc.direction?R:M)(e.display.lineDiv,"CodeMirror-rtl")}function zi(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Hi(e,t){var n={from:ot(t.from),to:Li(t),text:$e(e,t.from,t.to)};return qi(e,n,t.from.line,t.to.line+1),Ui(e,(function(e){return qi(e,n,t.from.line,t.to.line+1)}),!0),n}function Wi(e){for(;e.length&&Z(e).ranges;)e.pop()}function Gi(e,t,n,r){var i=e.history;i.undone.length=0;var s,a,o=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>o-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(s=function(e,t){return t?(Wi(e.done),Z(e.done)):e.done.length&&!Z(e.done).ranges?Z(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Z(e.done)):void 0}(i,i.lastOp==r)))a=Z(s.changes),0==st(t.from,t.to)&&0==st(t.from,a.to)?a.to=Li(t):s.changes.push(Hi(e,t));else{var l=Z(i.done);for(l&&l.ranges||Ki(e.sel,i.done),s={changes:[Hi(e,t)],generation:i.generation},i.done.push(s);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=o,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||ve(e,"historyAdded")}function Xi(e,t,n,r){var i=e.history,s=r&&r.origin;n==i.lastSelOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,s,Z(i.done),t))?i.done[i.done.length-1]=t:Ki(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=s,i.lastSelOp=n,r&&!1!==r.clearRedo&&Wi(i.undone)}function Ki(e,t){var n=Z(t);n&&n.ranges&&n.equals(e)||t.push(e)}function qi(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s}))}function Ji(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Yi(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ji(n[i]));return r}(e,t),r=Pt(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],a=r[i];if(s&&a)e:for(var o=0;o<a.length;++o){for(var l=a[o],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue e;s.push(l)}else a&&(n[i]=a)}return n}function $i(e,t,n){for(var r=[],i=0;i<e.length;++i){var s=e[i];if(s.ranges)r.push(n?Mi.prototype.deepCopy.call(s):s);else{var a=s.changes,o=[];r.push({changes:o});for(var l=0;l<a.length;++l){var c=a[l],u=void 0;if(o.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&H(t,Number(u[1]))>-1&&(Z(o)[h]=c[h],delete c[h])}}}return r}function Zi(e,t,n,r){if(r){var i=e.anchor;if(n){var s=st(t,i)<0;s!=st(n,i)<0?(i=t,t=n):s!=st(t,n)<0&&(t=n)}return new Ai(i,t)}return new Ai(n||t,t)}function Qi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),is(e,new Mi([Zi(e.sel.primary(),t,n,i)],0),r)}function es(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),s=0;s<e.sel.ranges.length;s++)r[s]=Zi(e.sel.ranges[s],t[s],null,i);is(e,ki(e.cm,r,e.sel.primIndex),n)}function ts(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,is(e,ki(e.cm,i,e.sel.primIndex),r)}function ns(e,t,n,r){is(e,Pi(t,n),r)}function rs(e,t,n){var r=e.history.done,i=Z(r);i&&i.ranges?(r[r.length-1]=t,ss(e,t,n)):is(e,t,n)}function is(e,t,n){ss(e,t,n),Xi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ss(e,t,n){(we(e,"beforeSelectionChange")||e.cm&&we(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new Ai(ht(e,t[n].anchor),ht(e,t[n].head))},origin:n&&n.origin};return ve(e,"beforeSelectionChange",e,r),e.cm&&ve(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?ki(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(st(t.primary().head,e.sel.primary().head)<0?-1:1);as(e,ls(e,t,r,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||Ir(e.cm)}function as(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,be(e.cm)),pn(e,"cursorActivity",e))}function os(e){as(e,ls(e,e.sel,null,!1))}function ls(e,t,n,r){for(var i,s=0;s<t.ranges.length;s++){var a=t.ranges[s],o=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[s],l=us(e,a.anchor,o&&o.anchor,n,r),c=a.head==a.anchor?l:us(e,a.head,o&&o.head,n,r);(i||l!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,s)),i[s]=new Ai(l,c))}return i?ki(e.cm,i,t.primIndex):t}function cs(e,t,n,r,i){var s=Ye(e,t.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var o=s.markedSpans[a],l=o.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==o.from||(c?o.from<=t.ch:o.from<t.ch))&&(null==o.to||(u?o.to>=t.ch:o.to>t.ch))){if(i&&(ve(l,"beforeCursorEnter"),l.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var h=l.find(r<0?1:-1),p=void 0;if((r<0?u:c)&&(h=hs(e,h,-r,h&&h.line==t.line?s:null)),h&&h.line==t.line&&(p=st(h,n))&&(r<0?p<0:p>0))return cs(e,h,t,r,i)}var d=l.find(r<0?-1:1);return(r<0?c:u)&&(d=hs(e,d,r,d.line==t.line?s:null)),d?cs(e,d,t,r,i):null}}return t}function us(e,t,n,r,i){var s=r||1;return cs(e,t,n,s,i)||!i&&cs(e,t,n,s,!0)||cs(e,t,n,-s,i)||!i&&cs(e,t,n,-s,!0)||(e.cantEdit=!0,it(e.first,0))}function hs(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?ht(e,it(t.line-1)):null:n>0&&t.ch==(r||Ye(e,t.line)).text.length?t.line<e.first+e.size-1?it(t.line+1,0):null:new it(t.line,t.ch+n)}function ps(e){e.setSelection(it(e.firstLine(),0),it(e.lastLine()),X)}function ds(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,s){t&&(r.from=ht(e,t)),n&&(r.to=ht(e,n)),i&&(r.text=i),void 0!==s&&(r.origin=s)}),ve(e,"beforeChange",e,r),e.cm&&ve(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function fs(e,t,n){if(e.cm){if(!e.cm.curOp)return ii(e.cm,fs)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(we(e,"beforeChange")||e.cm&&we(e.cm,"beforeChange"))||(t=ds(e,t,!0))){var r=Ct&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=H(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],s=0;s<r.length;++s)for(var a=r[s],o=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(st(c.to,o.from)<0||st(c.from,o.to)>0)){var u=[l,1],h=st(c.from,o.from),p=st(c.to,o.to);(h<0||!a.inclusiveLeft&&!h)&&u.push({from:c.from,to:o.from}),(p>0||!a.inclusiveRight&&!p)&&u.push({from:o.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)ms(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else ms(e,t)}}function ms(e,t){if(1!=t.text.length||""!=t.text[0]||0!=st(t.from,t.to)){var n=Ni(e,t);Gi(e,t,n,e.cm?e.cm.curOp.id:NaN),vs(e,t,n,Pt(e,t));var r=[];Ui(e,(function(e,n){n||-1!=H(r,e.history)||(Ss(e.history,t),r.push(e.history)),vs(e,t,null,Pt(e,t))}))}}function gs(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,s=e.history,a=e.sel,o="undo"==t?s.done:s.undone,l="undo"==t?s.undone:s.done,c=0;c<o.length&&(i=o[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=o.length){for(s.lastOrigin=s.lastSelOrigin=null;;){if(!(i=o.pop()).ranges){if(r)return void o.push(i);break}if(Ki(i,l),n&&!i.equals(e.sel))return void is(e,i,{clearRedo:!1});a=i}var u=[];Ki(a,l),l.push({changes:u,generation:s.generation}),s.generation=i.generation||++s.maxGeneration;for(var h=we(e,"beforeChange")||e.cm&&we(e.cm,"beforeChange"),p=function(n){var r=i.changes[n];if(r.origin=t,h&&!ds(e,r,!1))return o.length=0,{};u.push(Hi(e,r));var s=n?Ni(e,r):Z(o);vs(e,r,s,Yi(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Li(r)});var a=[];Ui(e,(function(e,t){t||-1!=H(a,e.history)||(Ss(e.history,r),a.push(e.history)),vs(e,r,null,Yi(e,r))}))},d=i.changes.length-1;d>=0;--d){var f=p(d);if(f)return f.v}}}}function ys(e,t){if(0!=t&&(e.first+=t,e.sel=new Mi(Q(e.sel.ranges,(function(e){return new Ai(it(e.anchor.line+t,e.anchor.ch),it(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){mr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)gr(e.cm,r,"gutter")}}function vs(e,t,n,r){if(e.cm&&!e.cm.curOp)return ii(e.cm,vs)(e,t,n,r);if(t.to.line<e.first)ys(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ys(e,i),t={from:it(e.first,0),to:it(t.to.line+i,t.to.ch),text:[Z(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:it(s,Ye(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=$e(e,t.from,t.to),n||(n=Ni(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,s=t.from,a=t.to,o=!1,l=s.line;e.options.lineWrapping||(l=et(zt(Ye(r,s.line))),r.iter(l,a.line+1,(function(e){if(e==i.maxLine)return o=!0,!0}))),r.sel.contains(t.from,t.to)>-1&&be(e),Bi(r,t,n,hr(e)),e.options.lineWrapping||(r.iter(l,s.line+t.text.length,(function(e){var t=qt(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,o=!1)})),o&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=Ye(e,r).stateAfter;if(i&&(!(i instanceof dt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,s.line),oi(e,400);var c=t.text.length-(a.line-s.line)-1;t.full?mr(e):s.line!=a.line||1!=t.text.length||Fi(e.doc,t)?mr(e,s.line,a.line+1,c):gr(e,s.line,"text");var u=we(e,"changes"),h=we(e,"change");if(h||u){var p={from:s,to:a,text:t.text,removed:t.removed,origin:t.origin};h&&pn(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,r):Bi(e,t,r),ss(e,n,X),e.cantEdit&&us(e,it(e.firstLine(),0))&&(e.cantEdit=!1)}}function xs(e,t,n,r,i){var s;r||(r=n),st(r,n)<0&&(n=(s=[r,n])[0],r=s[1]),"string"==typeof t&&(t=e.splitLines(t)),fs(e,{from:n,to:r,text:t,origin:i})}function bs(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function ws(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],a=!0;if(s.ranges){s.copied||((s=e[i]=s.deepCopy()).copied=!0);for(var o=0;o<s.ranges.length;o++)bs(s.ranges[o].anchor,t,n,r),bs(s.ranges[o].head,t,n,r)}else{for(var l=0;l<s.changes.length;++l){var c=s.changes[l];if(n<c.from.line)c.from=it(c.from.line+r,c.from.ch),c.to=it(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function Ss(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;ws(e.done,n,r,i),ws(e.undone,n,r,i)}function _s(e,t,n,r){var i=t,s=t;return"number"==typeof t?s=Ye(e,ut(e,t)):i=et(t),null==i?null:(r(s,i)&&e.cm&&gr(e.cm,i,n),s)}function Es(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Cs(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}Ai.prototype.from=function(){return ct(this.anchor,this.head)},Ai.prototype.to=function(){return lt(this.anchor,this.head)},Ai.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Es.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,$t(i),pn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Cs.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),a=r.height;if(r.removeInner(e,s),this.height-=a-r.height,i==s&&(this.children.splice(n--,1),r.parent=null),0==(t-=s))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Es))){var o=[];this.collapse(o),this.children=[new Es(o)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<=s){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,o=a;o<i.lines.length;){var l=new Es(i.lines.slice(o,o+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Cs(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=H(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new Cs(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var a=Math.min(t,s-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=s}}};var Ts=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function Ms(e,t,n){Kt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Rr(e,n)}Ts.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=et(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var s=Cn(this);Qe(n,Math.max(0,n.height-s)),e&&(ri(e,(function(){Ms(e,n,-s),gr(e,r,"widget")})),pn(e,"lineWidgetCleared",e,this,r))}},Ts.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=Cn(this)-t;i&&(Gt(this.doc,r)||Qe(r,r.height+i),n&&ri(n,(function(){n.curOp.forceUpdate=!0,Ms(n,r,i),pn(n,"lineWidgetChanged",n,e,et(r))})))},Se(Ts);var As=0,ks=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++As};function Ps(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=V(r)).shared=!1;var s=[Ps(e,t,n,r,i)],a=s[0],o=r.widgetNode;return Ui(e,(function(e){o&&(r.widgetNode=o.cloneNode(!0)),s.push(Ps(e,ht(e,t),ht(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Z(s)})),new Ls(s,a)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return ii(e.cm,Ps)(e,t,n,r,i);var s=new ks(e,i),a=st(t,n);if(r&&V(r,s,!1),a>0||0==a&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=L("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(jt(e,t.line,t,n,s)||t.line!=n.line&&jt(e,n.line,t,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");Tt=!0}s.addToHistory&&Gi(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var o,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(r){c&&s.collapsed&&!c.options.lineWrapping&&zt(r)==c.display.maxLine&&(o=!0),s.collapsed&&l!=t.line&&Qe(r,0),function(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&e.markedSpans&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}(r,new Mt(s,l==t.line?t.ch:null,l==n.line?n.ch:null),e.cm&&e.cm.curOp),++l})),s.collapsed&&e.iter(t.line,n.line+1,(function(t){Gt(e,t)&&Qe(t,0)})),s.clearOnEnter&&me(s,"beforeCursorEnter",(function(){return s.clear()})),s.readOnly&&(Ct=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++As,s.atomic=!0),c){if(o&&(c.curOp.updateMaxLine=!0),s.collapsed)mr(c,t.line,n.line+1);else if(s.className||s.startStyle||s.endStyle||s.css||s.attributes||s.title)for(var u=t.line;u<=n.line;u++)gr(c,u,"text");s.atomic&&os(c.doc),pn(c,"markerAdded",c,s)}return s}ks.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Yr(e),we(this,"clear")){var n=this.find();n&&pn(this,"clear",n.from,n.to)}for(var r=null,i=null,s=0;s<this.lines.length;++s){var a=this.lines[s],o=At(a.markedSpans,this);e&&!this.collapsed?gr(e,et(a),"text"):e&&(null!=o.to&&(i=et(a)),null!=o.from&&(r=et(a))),a.markedSpans=kt(a.markedSpans,o),null==o.from&&this.collapsed&&!Gt(this.doc,a)&&e&&Qe(a,or(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=zt(this.lines[l]),u=qt(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&mr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&os(e.doc)),e&&pn(e,"markerCleared",e,this,r,i),t&&$r(e),this.parent&&this.parent.clear()}},ks.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var s=this.lines[i],a=At(s.markedSpans,this);if(null!=a.from&&(n=it(t?s:et(s),a.from),-1==e))return n;if(null!=a.to&&(r=it(t?s:et(s),a.to),1==e))return r}return n&&{from:n,to:r}},ks.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&ri(r,(function(){var i=t.line,s=et(t.line),a=In(r,s);if(a&&(zn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Gt(n.doc,i)&&null!=n.height){var o=n.height;n.height=null;var l=Cn(n)-o;l&&Qe(i,i.height+l)}pn(r,"markerChanged",r,e)}))},ks.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=H(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ks.prototype.detachLine=function(e){if(this.lines.splice(H(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Se(ks);var Ls=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function Ds(e){return e.findMarks(it(e.first,0),e.clipPos(it(e.lastLine())),(function(e){return e.parent}))}function Ns(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Ui(n.primary.doc,(function(e){return r.push(e)}));for(var i=0;i<n.markers.length;i++){var s=n.markers[i];-1==H(r,s.doc)&&(s.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}Ls.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();pn(this,"clear")}},Ls.prototype.find=function(e,t){return this.primary.find(e,t)},Se(Ls);var Rs=0,Is=function(e,t,n,r,i){if(!(this instanceof Is))return new Is(e,t,n,r,i);null==n&&(n=0),Cs.call(this,[new Es([new Yt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var s=it(n,0);this.sel=Pi(s),this.history=new zi(null),this.id=++Rs,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Bi(this,{from:s,to:s,text:e}),is(this,Pi(s),X)};Is.prototype=te(Cs.prototype,{constructor:Is,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ze(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:ai((function(e){var t=it(this.first,0),n=this.first+this.size-1;fs(this,{from:t,to:it(n,Ye(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Or(this.cm,0,0),is(this,Pi(t),X)})),replaceRange:function(e,t,n,r){xs(this,e,t=ht(this,t),n=n?ht(this,n):t,r)},getRange:function(e,t,n){var r=$e(this,ht(this,e),ht(this,t));return!1===n?r:""===n?r.join(""):r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(nt(this,e))return Ye(this,e)},getLineNumber:function(e){return et(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ye(this,e)),zt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ht(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ai((function(e,t,n){ns(this,ht(this,"number"==typeof e?it(e,t||0):e),null,n)})),setSelection:ai((function(e,t,n){ns(this,ht(this,e),ht(this,t||e),n)})),extendSelection:ai((function(e,t,n){Qi(this,ht(this,e),t&&ht(this,t),n)})),extendSelections:ai((function(e,t){es(this,pt(this,e),t)})),extendSelectionsBy:ai((function(e,t){es(this,pt(this,Q(this.sel.ranges,e)),t)})),setSelections:ai((function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new Ai(ht(this,e[i].anchor),ht(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),is(this,ki(this.cm,r,t),n)}})),addSelection:ai((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Ai(ht(this,e),ht(this,t||e))),is(this,ki(this.cm,r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=$e(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=$e(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:ai((function(e,t,n){for(var r=[],i=this.sel,s=0;s<i.ranges.length;s++){var a=i.ranges[s];r[s]={from:a.from(),to:a.to(),text:this.splitLines(e[s]),origin:n}}for(var o=t&&"end"!=t&&function(e,t,n){for(var r=[],i=it(e.first,0),s=i,a=0;a<t.length;a++){var o=t[a],l=Ri(o.from,i,s),c=Ri(Li(o),i,s);if(i=o.to,s=c,"around"==n){var u=e.sel.ranges[a],h=st(u.head,u.anchor)<0;r[a]=new Ai(h?c:l,h?l:c)}else r[a]=new Ai(l,l)}return new Mi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)fs(this,r[l]);o?rs(this,o):this.cm&&Ir(this.cm)})),undo:ai((function(){gs(this,"undo")})),redo:ai((function(){gs(this,"redo")})),undoSelection:ai((function(){gs(this,"undo",!0)})),redoSelection:ai((function(){gs(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new zi(this.history),Ui(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:$i(this.history.done),undone:$i(this.history.undone)}},setHistory:function(e){var t=this.history=new zi(this.history);t.done=$i(e.done.slice(0),null,!0),t.undone=$i(e.undone.slice(0),null,!0)},setGutterMarker:ai((function(e,t,n){return _s(this,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&se(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:ai((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&_s(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,se(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!nt(this,e))return null;if(t=e,!(e=Ye(this,e)))return null}else if(null==(t=et(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:ai((function(e,t,n){return _s(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(C(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:ai((function(e,t,n){return _s(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var s=i.match(C(n));if(!s)return!1;var a=s.index+s[0].length;e[r]=i.slice(0,s.index)+(s.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0}))})),addLineWidget:ai((function(e,t,n){return function(e,t,n,r){var i=new Ts(e,n,r),s=e.cm;return s&&i.noHScroll&&(s.display.alignWidgets=!0),_s(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=t,s&&!Gt(e,t)){var r=Kt(t)<e.scrollTop;Qe(t,t.height+Cn(i)),r&&Rr(s,i.height),s.curOp.forceUpdate=!0}return!0})),s&&pn(s,"lineWidgetAdded",s,i,"number"==typeof t?t:et(t)),i}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Ps(this,ht(this,e),ht(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Ps(this,e=ht(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Ye(this,(e=ht(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=ht(this,e),t=ht(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,(function(s){var a=s.markedSpans;if(a)for(var o=0;o<a.length;o++){var l=a[o];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)})),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var s=i.text.length+r;if(s>e)return t=e,!0;e-=s,++n})),ht(this,it(n,t))},indexFromPos:function(e){var t=(e=ht(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Is(Ze(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Is(Ze(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),s=e.clipPos(i.from),a=e.clipPos(i.to);if(st(s,a)){var o=Ps(e,s,a,r.primary,r.primary.type);r.markers.push(o),o.parent=r}}}(r,Ds(this)),r},unlinkDoc:function(e){if(e instanceof La&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ns(Ds(this));break}if(e.history==this.history){var n=[e.id];Ui(e,(function(e){return n.push(e.id)}),!0),e.history=new zi(null),e.history.done=$i(this.history.done,n),e.history.undone=$i(this.history.undone,n)}},iterLinkedDocs:function(e){Ui(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ie(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ai((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&ri(t=this.cm,(function(){ji(t),mr(t)})))}))}),Is.prototype.eachLine=Is.prototype.iter;var Os=0;function Fs(e){var t=this;if(Bs(t),!xe(t,e)&&!Tn(t.display,e)){_e(e),a&&(Os=+new Date);var n=dr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,s=Array(i),o=0,l=function(){++o==i&&ii(t,(function(){var e={from:n=ht(t.doc,n),to:n,text:t.doc.splitLines(s.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};fs(t.doc,e),rs(t.doc,Pi(ht(t.doc,n),ht(t.doc,Li(e))))}))()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==H(t.options.allowDropFileTypes,e.type))l();else{var r=new FileReader;r.onerror=function(){return l()},r.onload=function(){var e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(s[n]=e),l()},r.readAsText(e)}},u=0;u<r.length;u++)c(r[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var h=e.dataTransfer.getData("Text");if(h){var p;if(t.state.draggingText&&!t.state.draggingText.copy&&(p=t.listSelections()),ss(t.doc,Pi(n,n)),p)for(var d=0;d<p.length;++d)xs(t.doc,"",p[d].anchor,p[d].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Bs(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Us(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Vs=!1;function js(){var e;Vs||(me(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Us(zs)}),100))})),me(window,"blur",(function(){return Us(kr)})),Vs=!0)}function zs(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Hs={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ws=0;Ws<10;Ws++)Hs[Ws+48]=Hs[Ws+96]=String(Ws);for(var Gs=65;Gs<=90;Gs++)Hs[Gs]=String.fromCharCode(Gs);for(var Xs=1;Xs<=12;Xs++)Hs[Xs+111]=Hs[Xs+63235]="F"+Xs;var Ks={};function qs(e){var t,n,r,i,s=e.split(/-(?!$)/);e=s[s.length-1];for(var a=0;a<s.length-1;a++){var o=s[a];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else{if(!/^s(hift)?$/i.test(o))throw new Error("Unrecognized modifier name: "+o);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Js(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Q(n.split(" "),qs),s=0;s<i.length;s++){var a=void 0,o=void 0;s==i.length-1?(o=i.join(" "),a=r):(o=i.slice(0,s+1).join(" "),a="...");var l=t[o];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+o)}else t[o]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Ys(e,t,n,r){var i=(t=ea(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ys(e,t.fallthrough,n,r);for(var s=0;s<t.fallthrough.length;s++){var a=Ys(e,t.fallthrough[s],n,r);if(a)return a}}}function $s(e){var t="string"==typeof e?e:Hs[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Zs(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(_?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(_?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Qs(e,t){if(p&&34==e.keyCode&&e.char)return!1;var n=Hs[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Zs(n,e,t))}function ea(e){return"string"==typeof e?Ks[e]:e}function ta(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var s=t(n[i]);r.length&&st(s.from,Z(r).to)<=0;){var a=r.pop();if(st(a.from,s.from)<0){s.from=a.from;break}}r.push(s)}ri(e,(function(){for(var t=r.length-1;t>=0;t--)xs(e.doc,"",r[t].from,r[t].to,"+delete");Ir(e)}))}function na(e,t,n){var r=le(e.text,t+n,n);return r<0||r>e.text.length?null:r}function ra(e,t,n){var r=na(e,t.ch,n);return null==r?null:new it(t.line,r,n<0?"after":"before")}function ia(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var s=de(n,t.doc.direction);if(s){var a,o=i<0?Z(s):s[0],l=i<0==(1==o.level)?"after":"before";if(o.level>0||"rtl"==t.doc.direction){var c=On(t,n);a=i<0?n.text.length-1:0;var u=Fn(t,c,a).top;a=ce((function(e){return Fn(t,c,e).top==u}),i<0==(1==o.level)?o.from:o.to-1,a),"before"==l&&(a=na(n,a,1))}else a=i<0?o.to:o.from;return new it(r,a,l)}}return new it(r,i<0?n.text.length:0,i<0?"before":"after")}Ks.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ks.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ks.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ks.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ks.default=x?Ks.macDefault:Ks.pcDefault;var sa={selectAll:ps,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),X)},killLine:function(e){return ta(e,(function(t){if(t.empty()){var n=Ye(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:it(t.head.line+1,0)}:{from:t.head,to:it(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return ta(e,(function(t){return{from:it(t.from().line,0),to:ht(e.doc,it(t.to().line+1,0))}}))},delLineLeft:function(e){return ta(e,(function(e){return{from:it(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return ta(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return ta(e,(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(it(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(it(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return aa(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return oa(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=Ye(e.doc,t),r=function(e){for(var t;t=Ut(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=et(r)),ia(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?oa(e,t.head):r}),q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var s=n[i].from(),a=j(e.getLine(s.line),s.ch,r);t.push($(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return ri(e,(function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,s=Ye(e.doc,i.line).text;if(s)if(i.ch==s.length&&(i=new it(i.line,i.ch-1)),i.ch>0)i=new it(i.line,i.ch+1),e.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),it(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=Ye(e.doc,i.line-1).text;a&&(i=new it(i.line,1),e.replaceRange(s.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),it(i.line-1,a.length-1),i,"+transpose"))}n.push(new Ai(i,i))}e.setSelections(n)}))},newlineAndIndent:function(e){return ri(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Ir(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function aa(e,t){var n=Ye(e.doc,t),r=zt(n);return r!=n&&(t=et(r)),ia(!0,e,r,t,1)}function oa(e,t){var n=aa(e,t.line),r=Ye(e.doc,n.line),i=de(r,e.doc.direction);if(!i||0==i[0].level){var s=Math.max(n.ch,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=s&&t.ch;return it(n.line,a?0:s,n.sticky)}return n}function la(e,t,n){if("string"==typeof t&&!(t=sa[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=G}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var ca=new z;function ua(e,t,n,r){var i=e.state.keySeq;if(i){if($s(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ca.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),ha(e,i+" "+t,n,r))return!0}return ha(e,t,n,r)}function ha(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Ys(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Ys(t,e.options.extraKeys,n,e)||Ys(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&pn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(_e(n),Cr(e)),!!i}function pa(e,t){var n=Qs(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ua(e,"Shift-"+n,t,(function(t){return la(e,t,!0)}))||ua(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return la(e,t)})):ua(e,n,t,(function(t){return la(e,t)})))}var da=null;function fa(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=N(F(t)),xe(t,e)))){a&&o<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var i=pa(t,e);p&&(da=i?r:null,i||88!=r||Fe||!(x?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!x&&!i&&46==r&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(M(t,"CodeMirror-crosshair"),ye(document,"keyup",n),ye(document,"mouseover",n))}R(t,"CodeMirror-crosshair"),me(document,"keyup",n),me(document,"mouseover",n)}(t)}}function ma(e){16==e.keyCode&&(this.doc.sel.shift=!1),xe(this,e)}function ga(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Tn(t.display,e)||xe(t,e)||e.ctrlKey&&!e.altKey||x&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(p&&n==da)return da=null,void _e(e);if(!p||e.which&&!(e.which<10)||!pa(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return ua(e,"'"+n+"'",t,(function(t){return la(e,t,!0)}))}(t,e,i)||t.display.input.onKeyPress(e))}}}var ya,va,xa=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ba(e){var t=this,n=t.display;if(!(xe(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,Tn(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!_a(t,e)){var r=dr(t,e),i=Ae(e),s=r?function(e,t){var n=+new Date;return va&&va.compare(n,e,t)?(ya=va=null,"triple"):ya&&ya.compare(n,e,t)?(va=new xa(n,e,t),ya=null,"double"):(ya=new xa(n,e,t),va=null,"single")}(r,i):"single";B(t).focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var s="Click";return"double"==r?s="Double"+s:"triple"==r&&(s="Triple"+s),ua(e,Zs(s=(1==t?"Left":2==t?"Middle":"Right")+s,i),i,(function(t){if("string"==typeof t&&(t=sa[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=G}finally{e.state.suppressEdits=!1}return r}))}(t,i,r,s,e)||(1==i?r?function(e,t,n,r){a?setTimeout(U(Tr,e),0):e.curOp.focus=N(F(e));var i,s=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var s=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=s?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=x?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(x?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&Le&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(st((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(st(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,s=!1,c=ii(e,(function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Mr(e)),ye(i.wrapper.ownerDocument,"mouseup",c),ye(i.wrapper.ownerDocument,"mousemove",u),ye(i.scroller,"dragstart",h),ye(i.scroller,"drop",c),s||(_e(t),r.addNew||Qi(e.doc,n,null,null,r.extend),l&&!d||a&&9==o?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),u=function(e){s=s||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return s=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,me(i.wrapper.ownerDocument,"mouseup",c),me(i.wrapper.ownerDocument,"mousemove",u),me(i.scroller,"dragstart",h),me(i.scroller,"drop",c),e.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,s):function(e,t,n,r){a&&Mr(e);var i=e.display,s=e.doc;_e(t);var o,l,c=s.sel,u=c.ranges;if(r.addNew&&!r.extend?(l=s.sel.contains(n),o=l>-1?u[l]:new Ai(n,n)):(o=s.sel.primary(),l=s.sel.primIndex),"rectangle"==r.unit)r.addNew||(o=new Ai(n,n)),n=dr(e,t,!0,!0),l=-1;else{var h=wa(e,n,r.unit);o=r.extend?Zi(o,h.anchor,h.head,r.extend):h}r.addNew?-1==l?(l=u.length,is(s,ki(e,u.concat([o]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"char"==r.unit&&!r.extend?(is(s,ki(e,u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=s.sel):ts(s,l,o,K):(l=0,is(s,new Mi([o],0),K),c=s.sel);var p=n;function d(t){if(0!=st(p,t))if(p=t,"rectangle"==r.unit){for(var i=[],a=e.options.tabSize,u=j(Ye(s,n.line).text,n.ch,a),h=j(Ye(s,t.line).text,t.ch,a),d=Math.min(u,h),f=Math.max(u,h),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var y=Ye(s,m).text,v=J(y,d,a);d==f?i.push(new Ai(it(m,v),it(m,v))):y.length>v&&i.push(new Ai(it(m,v),it(m,J(y,f,a))))}i.length||i.push(new Ai(n,n)),is(s,ki(e,c.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var x,b=o,w=wa(e,t,r.unit),S=b.anchor;st(w.anchor,S)>0?(x=w.head,S=ct(b.from(),w.anchor)):(x=w.anchor,S=lt(b.to(),w.head));var _=c.ranges.slice(0);_[l]=function(e,t){var n=t.anchor,r=t.head,i=Ye(e.doc,n.line);if(0==st(n,r)&&n.sticky==r.sticky)return t;var s=de(i);if(!s)return t;var a=he(s,n.ch,n.sticky),o=s[a];if(o.from!=n.ch&&o.to!=n.ch)return t;var l,c=a+(o.from==n.ch==(1!=o.level)?0:1);if(0==c||c==s.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=he(s,r.ch,r.sticky),h=u-a||(r.ch-n.ch)*(1==o.level?-1:1);l=u==c-1||u==c?h<0:h>0}var p=s[c+(l?-1:0)],d=l==(1==p.level),f=d?p.from:p.to,m=d?"after":"before";return n.ch==f&&n.sticky==m?t:new Ai(new it(n.line,f,m),r)}(e,new Ai(ht(s,S),x)),is(s,ki(e,_,l),K)}}var f=i.wrapper.getBoundingClientRect(),m=0;function g(t){var n=++m,a=dr(e,t,!0,"rectangle"==r.unit);if(a)if(0!=st(a,p)){e.curOp.focus=N(F(e)),d(a);var o=Dr(i,s);(a.line>=o.to||a.line<o.from)&&setTimeout(ii(e,(function(){m==n&&g(t)})),150)}else{var l=t.clientY<f.top?-20:t.clientY>f.bottom?20:0;l&&setTimeout(ii(e,(function(){m==n&&(i.scroller.scrollTop+=l,g(t))})),50)}}function y(t){e.state.selectingText=!1,m=1/0,t&&(_e(t),i.input.focus()),ye(i.wrapper.ownerDocument,"mousemove",v),ye(i.wrapper.ownerDocument,"mouseup",x),s.history.lastSelOrigin=null}var v=ii(e,(function(e){0!==e.buttons&&Ae(e)?g(e):y(e)})),x=ii(e,y);e.state.selectingText=x,me(i.wrapper.ownerDocument,"mousemove",v),me(i.wrapper.ownerDocument,"mouseup",x)}(e,r,t,s)}(t,r,s,e):Me(e)==n.scroller&&_e(e):2==i?(r&&Qi(t.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(E?t.display.input.onContextMenu(e):Mr(t)))}}function wa(e,t,n){if("char"==n)return new Ai(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new Ai(it(t.line,0),ht(e.doc,it(t.line+1,0)));var r=n(e,t);return new Ai(r.from,r.to)}function Sa(e,t,n,r){var i,s;if(t.touches)i=t.touches[0].clientX,s=t.touches[0].clientY;else try{i=t.clientX,s=t.clientY}catch(e){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&_e(t);var a=e.display,o=a.lineDiv.getBoundingClientRect();if(s>o.bottom||!we(e,n))return Ce(t);s-=o.top-a.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i)return ve(e,n,e,tt(e.doc,s),e.display.gutterSpecs[l].className,t),Ce(t)}}function _a(e,t){return Sa(e,t,"gutterClick",!0)}function Ea(e,t){Tn(e.display,t)||function(e,t){return!!we(e,"gutterContextMenu")&&Sa(e,t,"gutterContextMenu",!1)}(e,t)||xe(e,t,"contextmenu")||E||e.display.input.onContextMenu(t)}function Ca(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Wn(e)}xa.prototype.compare=function(e,t,n){return this.time+400>e&&0==st(t,this.pos)&&n==this.button};var Ta={toString:function(){return"CodeMirror.Init"}},Ma={},Aa={};function ka(e,t,n){if(!t!=!(n&&n!=Ta)){var r=e.display.dragFunctions,i=t?me:ye;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function Pa(e){e.options.lineWrapping?(R(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(M(e.display.wrapper,"CodeMirror-wrap"),Jt(e)),pr(e),mr(e),Wn(e),setTimeout((function(){return Gr(e)}),100)}function La(e,t){var n=this;if(!(this instanceof La))return new La(e,t);this.options=t=t?V(t):{},V(Ma,t,!1);var r=t.value;"string"==typeof r?r=new Is(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new La.inputStyles[t.inputStyle](this),s=this.display=new wi(e,r,i,t);for(var c in s.wrapper.CodeMirror=this,Ca(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),qr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new z,keySeq:null,specialChars:null},t.autofocus&&!v&&s.input.focus(),a&&o<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;me(t.scroller,"mousedown",ii(e,ba)),me(t.scroller,"dblclick",a&&o<11?ii(e,(function(t){if(!xe(e,t)){var n=dr(e,t);if(n&&!_a(e,t)&&!Tn(e.display,t)){_e(t);var r=e.findWordAt(n);Qi(e.doc,r.anchor,r.head)}}})):function(t){return xe(e,t)||_e(t)}),me(t.scroller,"contextmenu",(function(t){return Ea(e,t)})),me(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||Ea(e,n)}));var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(r=t.activeTouch).end=+new Date)}function s(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function l(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}me(t.scroller,"touchstart",(function(i){if(!xe(e,i)&&!s(i)&&!_a(e,i)){t.input.ensurePolled(),clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),me(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),me(t.scroller,"touchend",(function(n){var r=t.activeTouch;if(r&&!Tn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!r.prev||l(r,r.prev)?new Ai(a,a):!r.prev.prev||l(r,r.prev.prev)?e.findWordAt(a):new Ai(it(a.line,0),ht(e.doc,it(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),_e(n)}i()})),me(t.scroller,"touchcancel",i),me(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Ur(e,t.scroller.scrollTop),jr(e,t.scroller.scrollLeft,!0),ve(e,"scroll",e))})),me(t.scroller,"mousewheel",(function(t){return Ti(e,t)})),me(t.scroller,"DOMMouseScroll",(function(t){return Ti(e,t)})),me(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){xe(e,t)||Te(t)},over:function(t){xe(e,t)||(function(e,t){var n=dr(e,t);if(n){var r=document.createDocumentFragment();Sr(e,n,r),e.display.dragCursor||(e.display.dragCursor=P("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),k(e.display.dragCursor,r)}}(e,t),Te(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-Os<100))Te(t);else if(!xe(e,t)&&!Tn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var n=P("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),p&&n.parentNode.removeChild(n)}}(e,t)},drop:ii(e,Fs),leave:function(t){xe(e,t)||Bs(e)}};var c=t.input.getField();me(c,"keyup",(function(t){return ma.call(e,t)})),me(c,"keydown",ii(e,fa)),me(c,"keypress",ii(e,ga)),me(c,"focus",(function(t){return Ar(e,t)})),me(c,"blur",(function(t){return kr(e,t)}))}(this),js(),Yr(this),this.curOp.forceUpdate=!0,Vi(this,r),t.autofocus&&!v||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Ar(n)}),20):kr(this),Aa)Aa.hasOwnProperty(c)&&Aa[c](this,t[c],Ta);yi(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Da.length;++u)Da[u](this);$r(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}La.defaults=Ma,La.optionHandlers=Aa;var Da=[];function Na(e,t,n,r){var i,s=e.doc;null==n&&(n="add"),"smart"==n&&(s.mode.indent?i=yt(e,t).state:n="prev");var a=e.options.tabSize,o=Ye(s,t),l=j(o.text,null,a);o.stateAfter&&(o.stateAfter=null);var c,u=o.text.match(/^\s*/)[0];if(r||/\S/.test(o.text)){if("smart"==n&&((c=s.mode.indent(i,o.text.slice(u.length),o.text))==G||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>s.first?j(Ye(s,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",p=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d)p+=a,h+="\t";if(p<c&&(h+=$(c-p)),h!=u)return xs(s,h,it(t,0),it(t,u.length),"+input"),o.stateAfter=null,!0;for(var f=0;f<s.sel.ranges.length;f++){var m=s.sel.ranges[f];if(m.head.line==t&&m.head.ch<u.length){var g=it(t,u.length);ts(s,f,new Ai(g,g));break}}}La.defineInitHook=function(e){return Da.push(e)};var Ra=null;function Ia(e){Ra=e}function Oa(e,t,n,r,i){var s=e.doc;e.display.shift=!1,r||(r=s.sel);var a=+new Date-200,o="paste"==i||e.state.pasteIncoming>a,l=Ie(t),c=null;if(o&&r.ranges.length>1)if(Ra&&Ra.text.join("\n")==t){if(r.ranges.length%Ra.text.length==0){c=[];for(var u=0;u<Ra.text.length;u++)c.push(s.splitLines(Ra.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Q(l,(function(e){return[e]})));for(var h=e.curOp.updateInput,p=r.ranges.length-1;p>=0;p--){var d=r.ranges[p],f=d.from(),m=d.to();d.empty()&&(n&&n>0?f=it(f.line,f.ch-n):e.state.overwrite&&!o?m=it(m.line,Math.min(Ye(s,m.line).text.length,m.ch+Z(l).length)):o&&Ra&&Ra.lineWise&&Ra.text.join("\n")==l.join("\n")&&(f=m=it(f.line,0)));var g={from:f,to:m,text:c?c[p%c.length]:l,origin:i||(o?"paste":e.state.cutIncoming>a?"cut":"+input")};fs(e.doc,g),pn(e,"inputRead",e,g)}t&&!o&&Ba(e,t),Ir(e),e.curOp.updateInput<2&&(e.curOp.updateInput=h),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Fa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||!t.hasFocus()||ri(t,(function(){return Oa(t,n,0,null,"paste")})),!0}function Ba(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var s=e.getModeAt(i.head),a=!1;if(s.electricChars){for(var o=0;o<s.electricChars.length;o++)if(t.indexOf(s.electricChars.charAt(o))>-1){a=Na(e,i.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(Ye(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Na(e,i.head.line,"smart"));a&&pn(e,"electricInput",e,i.head.line)}}}function Ua(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,s={anchor:it(i,0),head:it(i+1,0)};n.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:n}}function Va(e,t,n,r){e.setAttribute("autocorrect",n?"on":"off"),e.setAttribute("autocapitalize",r?"on":"off"),e.setAttribute("spellcheck",!!t)}function ja(){var e=P("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=P("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),t}function za(e,t,n,r,i){var s=t,a=n,o=Ye(e,t.line),l=i&&"rtl"==e.direction?-n:n;function c(s){var a,c;if("codepoint"==r){var u=o.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(u))a=null;else{var h=n>0?u>=55296&&u<56320:u>=56320&&u<57343;a=new it(t.line,Math.max(0,Math.min(o.text.length,t.ch+n*(h?2:1))),-n)}}else a=i?function(e,t,n,r){var i=de(t,e.doc.direction);if(!i)return ra(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var s=he(i,n.ch,n.sticky),a=i[s];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return ra(t,n,r);var o,l=function(e,n){return na(t,e instanceof it?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(o=o||On(e,t),nr(e,t,o,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var h=1==a.level==r<0,p=l(n,h?1:-1);if(null!=p&&(h?p<=a.to&&p<=u.end:p>=a.from&&p>=u.begin)){var d=h?"before":"after";return new it(n.line,p,d)}}var f=function(e,t,r){for(var s=function(e,t){return t?new it(n.line,l(e,1),"before"):new it(n.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],o=t>0==(1!=a.level),c=o?r.begin:l(r.end,-1);if(a.from<=c&&c<a.to)return s(c,o);if(c=o?a.from:l(a.to,-1),r.begin<=c&&c<r.end)return s(c,o)}},m=f(s+r,r,u);if(m)return m;var g=r>0?u.end:l(u.begin,-1);return null==g||r>0&&g==t.text.length||!(m=f(r>0?0:i.length-1,r,c(g)))?null:m}(e.cm,o,t,n):ra(o,t,n);if(null==a){if(s||((c=t.line+l)<e.first||c>=e.first+e.size||(t=new it(c,t.ch,t.sticky),!(o=Ye(e,c)))))return!1;t=ia(i,e.cm,o,t.line,l)}else t=a;return!0}if("char"==r||"codepoint"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var u=null,h="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(n<0)||c(!d);d=!1){var f=o.text.charAt(t.ch)||"\n",m=ie(f,p)?"w":h&&"\n"==f?"n":!h||/\s/.test(f)?null:"p";if(!h||d||m||(m="s"),u&&u!=m){n<0&&(n=1,c(),t.sticky="after");break}if(m&&(u=m),n>0&&!c(!d))break}var g=us(e,t,s,a,!0);return at(s,g)&&(g.hitSide=!0),g}function Ha(e,t,n,r){var i,s,a=e.doc,o=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,B(e).innerHeight||a(e).documentElement.clientHeight),c=Math.max(l-.5*or(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(s=er(e,o,i)).outside;){if(n<0?i<=0:i>=a.height){s.hitSide=!0;break}i+=5*n}return s}var Wa=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new z,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ga(e,t){var n=In(e,t.line);if(!n||n.hidden)return null;var r=Ye(e.doc,t.line),i=Nn(n,r,t.line),s=de(r,e.doc.direction),a="left";s&&(a=he(s,t.ch)%2?"right":"left");var o=Vn(i.map,t.ch,a);return o.offset="right"==o.collapse?o.end:o.start,o}function Xa(e,t){return t&&(e.bad=!0),e}function Ka(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return Xa(e.clipPos(it(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var s=e.display.view[i];if(s.node==r)return qa(s,t,n)}}function qa(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!D(r,t))return Xa(it(et(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var s=e.rest?Z(e.rest):e.line;return Xa(it(et(s),s.text.length),i)}var a=3==t.nodeType?t:null,o=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));o.parentNode!=r;)o=o.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var s=i<0?l.map:c[i],a=0;a<s.length;a+=3){var o=s[a+2];if(o==t||o==n){var u=et(i<0?e.line:e.rest[i]),h=s[a]+r;return(r<0||o!=t)&&(h=s[a+(r?1:0)]),it(u,h)}}}var h=u(a,o,n);if(h)return Xa(h,i);for(var p=o.nextSibling,d=a?a.nodeValue.length-n:0;p;p=p.nextSibling){if(h=u(p,p.firstChild,0))return Xa(it(h.line,h.ch-d),i);d+=p.textContent.length}for(var f=o.previousSibling,m=n;f;f=f.previousSibling){if(h=u(f,f.firstChild,-1))return Xa(it(h.line,h.ch+m),i);m+=f.textContent.length}}Wa.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function s(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function a(e){if(s(e)&&!xe(r,e)){if(r.somethingSelected())Ia({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Ua(r);Ia({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,X),r.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var a=Ra.text.join("\n");if(e.clipboardData.setData("Text",a),e.clipboardData.getData("Text")==a)return void e.preventDefault()}var o=ja(),l=o.firstChild;Va(l),r.display.lineSpace.insertBefore(o,r.display.lineSpace.firstChild),l.value=Ra.text.join("\n");var c=N(i.ownerDocument);O(l),setTimeout((function(){r.display.lineSpace.removeChild(o),c.focus(),c==i&&n.showPrimarySelection()}),50)}}i.contentEditable=!0,Va(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),me(i,"paste",(function(e){!s(e)||xe(r,e)||Fa(e,r)||o<=11&&setTimeout(ii(r,(function(){return t.updateFromDOM()})),20)})),me(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),me(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),me(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),me(i,"touchstart",(function(){return n.forceCompositionEnd()})),me(i,"input",(function(){t.composing||t.readFromDOMSoon()})),me(i,"copy",a),me(i,"cut",a)},Wa.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Wa.prototype.prepareSelection=function(){var e=wr(this.cm,!1);return e.focus=N(this.div.ownerDocument)==this.div,e},Wa.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Wa.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Wa.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),s=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||s.line<t.display.viewFrom)e.removeAllRanges();else{var a=Ka(t,e.anchorNode,e.anchorOffset),o=Ka(t,e.focusNode,e.focusOffset);if(!a||a.bad||!o||o.bad||0!=st(ct(a,o),i)||0!=st(lt(a,o),s)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Ga(t,i)||{node:l[0].measure.map[2],offset:0},u=s.line<t.display.viewTo&&Ga(t,s);if(!u){var h=l[l.length-1].measure,p=h.maps?h.maps[h.maps.length-1]:h.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(c&&u){var d,f=e.rangeCount&&e.getRangeAt(0);try{d=T(c.node,c.offset,u.offset,u.node)}catch(e){}d&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Wa.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Wa.prototype.showMultipleSelections=function(e){k(this.cm.display.cursorDiv,e.cursors),k(this.cm.display.selectionDiv,e.selection)},Wa.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Wa.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Wa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&N(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Wa.prototype.blur=function(){this.div.blur()},Wa.prototype.getField=function(){return this.div},Wa.prototype.supportsTouch=function(){return!0},Wa.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout((function(){return e.pollSelection()}),20):ri(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},Wa.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Wa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(y&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ka(t,e.anchorNode,e.anchorOffset),r=Ka(t,e.focusNode,e.focusOffset);n&&r&&ri(t,(function(){is(t.doc,Pi(n,r),X),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Wa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,s=r.doc.sel.primary(),a=s.from(),o=s.to();if(0==a.ch&&a.line>r.firstLine()&&(a=it(a.line-1,Ye(r.doc,a.line-1).length)),o.ch==Ye(r.doc,o.line).text.length&&o.line<r.lastLine()&&(o=it(o.line+1,0)),a.line<i.viewFrom||o.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=fr(r,a.line))?(t=et(i.view[0].line),n=i.view[0].node):(t=et(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=fr(r,o.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=et(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(e,t,n,r,i){var s="",a=!1,o=e.doc.lineSeparator(),l=!1;function c(){a&&(s+=o,l&&(s+=o),a=l=!1)}function u(e){e&&(c(),s+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var s,p=t.getAttribute("cm-marker");if(p){var d=e.findMarks(it(r,0),it(i+1,0),(g=+p,function(e){return e.id==g}));return void(d.length&&(s=d[0].find(0))&&u($e(e.doc,s.from,s.to).join(o)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&c();for(var m=0;m<t.childNodes.length;m++)h(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),f&&(a=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return s}(r,n,c,t,l)),p=$e(r.doc,it(t,0),it(l,Ye(r.doc,l).text.length));h.length>1&&p.length>1;)if(Z(h)==Z(p))h.pop(),p.pop(),l--;else{if(h[0]!=p[0])break;h.shift(),p.shift(),t++}for(var d=0,f=0,m=h[0],g=p[0],y=Math.min(m.length,g.length);d<y&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var v=Z(h),x=Z(p),b=Math.min(v.length-(1==h.length?d:0),x.length-(1==p.length?d:0));f<b&&v.charCodeAt(v.length-f-1)==x.charCodeAt(x.length-f-1);)++f;if(1==h.length&&1==p.length&&t==a.line)for(;d&&d>a.ch&&v.charCodeAt(v.length-f-1)==x.charCodeAt(x.length-f-1);)d--,f++;h[h.length-1]=v.slice(0,v.length-f).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var w=it(t,d),S=it(l,p.length?Z(p).length-f:0);return h.length>1||h[0]||st(w,S)?(xs(r.doc,h,w,S,"+input"),!0):void 0},Wa.prototype.ensurePolled=function(){this.forceCompositionEnd()},Wa.prototype.reset=function(){this.forceCompositionEnd()},Wa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Wa.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Wa.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||ri(this.cm,(function(){return mr(e.cm)}))},Wa.prototype.setUneditable=function(e){e.contentEditable="false"},Wa.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||ii(this.cm,Oa)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Wa.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Wa.prototype.onContextMenu=function(){},Wa.prototype.resetPosition=function(){},Wa.prototype.needsContentAttribute=!0;var Ja=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new z,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ja.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function s(e){if(!xe(r,e)){if(r.somethingSelected())Ia({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ua(r);Ia({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,X):(n.prevInput="",i.value=t.text.join("\n"),O(i))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(i.style.width="0px"),me(i,"input",(function(){a&&o>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),me(i,"paste",(function(e){xe(r,e)||Fa(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),me(i,"cut",s),me(i,"copy",s),me(e.scroller,"paste",(function(t){if(!Tn(e,t)&&!xe(r,t)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var s=new Event("paste");s.clipboardData=t.clipboardData,i.dispatchEvent(s)}})),me(e.lineSpace,"selectstart",(function(t){Tn(e,t)||_e(t)})),me(i,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),me(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Ja.prototype.createField=function(e){this.wrapper=ja(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;Va(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},Ja.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ja.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=wr(e);if(e.options.moveInputWithCursor){var i=$n(e,n.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-s.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-s.left))}return r},Ja.prototype.showSelection=function(e){var t=this.cm.display;k(t.cursorDiv,e.cursors),k(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ja.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&O(this.textarea),a&&o>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&o>=9&&(this.hasSelection=null));this.resetting=!1}},Ja.prototype.getField=function(){return this.textarea},Ja.prototype.supportsTouch=function(){return!1},Ja.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||N(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(e){}},Ja.prototype.blur=function(){this.textarea.blur()},Ja.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ja.prototype.receivedFocus=function(){this.slowPoll()},Ja.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Ja.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Ja.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||Oe(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(a&&o>=9&&this.hasSelection===i||x&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var s=i.charCodeAt(0);if(8203!=s||r||(r="​"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return ri(t,(function(){Oa(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Ja.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ja.prototype.onKeyPress=function(){a&&o>=9&&(this.hasSelection=null),this.fastPoll()},Ja.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var s=dr(n,e),c=r.scroller.scrollTop;if(s&&!p){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(s)&&ii(n,is)(n.doc,Pi(s),X);var u,h=i.style.cssText,d=t.wrapper.style.cssText,f=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(u=i.ownerDocument.defaultView.scrollY),r.input.focus(),l&&i.ownerDocument.defaultView.scrollTo(null,u),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=y,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&o>=9&&g(),E){Te(e);var m=function(){ye(window,"mouseup",m),setTimeout(y,20)};me(window,"mouseup",m)}else setTimeout(y,50)}function g(){if(null!=i.selectionStart){var e=n.somethingSelected(),s="​"+(e?i.value:"");i.value="⇚",i.value=s,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=s.length,r.selForContextMenu=n.doc.sel}}function y(){if(t.contextMenuPending==y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=h,a&&o<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart)){(!a||a&&o<9)&&g();var e=0,s=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?ii(n,ps)(n):e++<10?r.detectingSelectAll=setTimeout(s,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(s,200)}}},Ja.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Ja.prototype.setUneditable=function(){},Ja.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,s){e.defaults[n]=r,i&&(t[n]=s?function(e,t,n){n!=Ta&&i(e,t,n)}:i)}e.defineOption=n,e.Init=Ta,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Ii(e)}),!0),n("indentUnit",2,Ii,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Oi(e),Wn(e),mr(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var s=e.text.indexOf(t,i);if(-1==s)break;i=s+t.length,n.push(it(r,s))}r++}));for(var i=n.length-1;i>=0;i--)xs(e.doc,t,n[i],it(n[i].line,n[i].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Ta&&e.refresh()})),n("specialCharPlaceholder",nn,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){Ca(e),bi(e)}),!0),n("keyMap","default",(function(e,t,n){var r=ea(t),i=n!=Ta&&ea(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Pa,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=vi(t,e.options.lineNumbers),bi(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?ur(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Gr(e)}),!0),n("scrollbarStyle","native",(function(e){qr(e),Gr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=vi(e.options.gutters,t),bi(e)}),!0),n("firstLineNumber",1,bi,!0),n("lineNumberFormatter",(function(e){return e}),bi,!0),n("showCursorWhenSelecting",!1,br,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(kr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,ka),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,br,!0),n("singleCursorHeightPerLine",!0,br,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Oi,!0),n("addModeClass",!1,Oi,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Oi,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(La),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){B(this).focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&ii(this,t[e])(this,n,i),ve(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](ea(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:si((function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");(function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,mr(this)})),removeOverlay:si((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void mr(this)}})),indentLine:si((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),nt(this.doc,e)&&Na(this,e,t,n)})),indentSelection:si((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Na(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Ir(this));else{var s=i.from(),a=i.to(),o=Math.max(n,s.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=o;l<n;++l)Na(this,l,e);var c=this.doc.sel.ranges;0==s.ch&&t.length==c.length&&c[r].from().ch>0&&ts(this.doc,r,new Ai(s,c[r].to()),X)}}})),getTokenAt:function(e,t){return St(this,e,t)},getLineTokens:function(e,t){return St(this,it(e),t,!0)},getTokenTypeAt:function(e){e=ht(this.doc,e);var t,n=gt(this,Ye(this.doc,e.line)),r=0,i=(n.length-1)/2,s=e.ch;if(0==s)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=s)i=a;else{if(!(n[2*a+1]<s)){t=n[2*a+2];break}r=a+1}}var o=t?t.indexOf("overlay "):-1;return o<0?t:0==o?null:t.slice(0,o-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],s=this.getModeAt(e);if("string"==typeof s[t])i[s[t]]&&r.push(i[s[t]]);else if(s[t])for(var a=0;a<s[t].length;a++){var o=i[s[t][a]];o&&r.push(o)}else s.helperType&&i[s.helperType]?r.push(i[s.helperType]):i[s.name]&&r.push(i[s.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(s,this)&&-1==H(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return yt(this,(e=ut(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return $n(this,null==e?n.head:"object"==typeof e?ht(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Yn(this,ht(this.doc,e),t||"page")},coordsChar:function(e,t){return er(this,(e=Jn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Jn(this,{top:e,left:0},t||"page").top,tt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var s=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>s&&(e=s,i=!0),r=Ye(this.doc,e)}else r=e;return qn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Kt(r):0)},defaultTextHeight:function(){return or(this.display)},defaultCharWidth:function(){return lr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var s,a,o,l=this.display,c=(e=$n(this,ht(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var h=Math.max(l.wrapper.clientHeight,this.doc.height),p=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(c=e.bottom),u+t.offsetWidth>p&&(u=p-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(s=this,a={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(o=Nr(s,a)).scrollTop&&Ur(s,o.scrollTop),null!=o.scrollLeft&&jr(s,o.scrollLeft))},triggerOnKeyDown:si(fa),triggerOnKeyPress:si(ga),triggerOnKeyUp:ma,triggerOnMouseDown:si(ba),execCommand:function(e){if(sa.hasOwnProperty(e))return sa[e].call(null,this)},triggerElectric:si((function(e){Ba(this,e)})),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=ht(this.doc,e),a=0;a<t&&!(s=za(this.doc,s,i,n,r)).hitSide;++a);return s},moveH:si((function(e,t){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?za(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()}),q)})),deleteH:si((function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):ta(this,(function(n){var i=za(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var a=ht(this.doc,e),o=0;o<t;++o){var l=$n(this,a,"div");if(null==s?s=l.left:l.left=s,(a=Ha(this,l,i,n)).hitSide)break}return a},moveV:si((function(e,t){var n=this,r=this.doc,i=[],s=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(a){if(s)return e<0?a.from():a.to();var o=$n(n,a.head,"div");null!=a.goalColumn&&(o.left=a.goalColumn),i.push(o.left);var l=Ha(n,o,e,t);return"page"==t&&a==r.sel.primary()&&Rr(n,Yn(n,l,"div").top-o.top),l}),q),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]})),findWordAt:function(e){var t=Ye(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var s=t.charAt(n),a=ie(s,i)?function(e){return ie(e,i)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ie(e)};n>0&&a(t.charAt(n-1));)--n;for(;r<t.length&&a(t.charAt(r));)++r}return new Ai(it(e.line,n),it(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):M(this.display.cursorDiv,"CodeMirror-overwrite"),ve(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==N(F(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:si((function(e,t){Or(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Pn(this)-this.display.barHeight,width:e.scrollWidth-Pn(this)-this.display.barWidth,clientHeight:Dn(this),clientWidth:Ln(this)}},scrollIntoView:si((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:it(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Fr(e),e.curOp.scrollToPos=t}(this,e):Br(this,e.from,e.to,e.margin)})),setSize:si((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Hn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){gr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,ve(this,"refresh",this)})),operation:function(e){return ri(this,e)},startOperation:function(){return Yr(this)},endOperation:function(){return $r(this)},refresh:si((function(){var e=this.display.cachedTextHeight;mr(this),this.curOp.forceUpdate=!0,Wn(this),Or(this,this.doc.scrollLeft,this.doc.scrollTop),fi(this.display),(null==e||Math.abs(e-or(this.display))>.5||this.options.lineWrapping)&&pr(this),ve(this,"refresh",this)})),swapDoc:si((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Vi(this,e),Wn(this),this.display.input.reset(),Or(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,pn(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Se(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,s){e.registerHelper(t,r,s),n[t]._global.push({pred:i,val:s})}}(La);var Ya="iter insert remove copy getEditor constructor".split(" ");for(var $a in Is.prototype)Is.prototype.hasOwnProperty($a)&&H(Ya,$a)<0&&(La.prototype[$a]=function(e){return function(){return e.apply(this.doc,arguments)}}(Is.prototype[$a]));return Se(Is),La.inputStyles={textarea:Ja,contenteditable:Wa},La.defineMode=function(e){La.defaults.mode||"null"==e||(La.defaults.mode=e),je.apply(this,arguments)},La.defineMIME=function(e,t){Ve[e]=t},La.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),La.defineMIME("text/plain","null"),La.defineExtension=function(e,t){La.prototype[e]=t},La.defineDocExtension=function(e,t){Is.prototype[e]=t},La.fromTextArea=function(e,t){if((t=t?V(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=N(e.ownerDocument);t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=o.getValue()}var i;if(e.form&&(me(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var s=e.form;i=s.submit;try{var a=s.submit=function(){r(),s.submit=i,s.submit(),s.submit=a}}catch(e){}}t.finishInit=function(n){n.save=r,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,r(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(ye(e.form,"submit",r),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var o=La((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return o},function(e){e.off=ye,e.on=me,e.wheelEventPixels=Ci,e.Doc=Is,e.splitLines=Ie,e.countColumn=j,e.findColumn=J,e.isWordChar=re,e.Pass=G,e.signal=ve,e.Line=Yt,e.changeEnd=Li,e.scrollbarModel=Kr,e.Pos=it,e.cmpPos=st,e.modes=Ue,e.mimeModes=Ve,e.resolveMode=ze,e.getMode=He,e.modeExtensions=We,e.extendMode=Ge,e.copyState=Xe,e.startState=qe,e.innerMode=Ke,e.commands=sa,e.keyMap=Ks,e.keyName=Qs,e.isModifierKey=$s,e.lookupKey=Ys,e.normalizeKeyMap=Js,e.StringStream=Je,e.SharedTextMarker=Ls,e.TextMarker=ks,e.LineWidget=Ts,e.e_preventDefault=_e,e.e_stopPropagation=Ee,e.e_stop=Te,e.addClass=R,e.contains=D,e.rmClass=M,e.keyNames=Hs}(La),La.version="5.65.13",La}()},6876:function(e,t,n){!function(e){"use strict";e.defineMode("javascript",(function(t,n){var r,i,s=t.indentUnit,a=n.statementIndent,o=n.jsonld,l=n.json||o,c=!1!==n.trackScope,u=n.typescript,h=n.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("keyword d"),s=e("operator"),a={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:s,typeof:s,instanceof:s,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),d=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e,t,n){return r=e,i=n,t}function g(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){var r,i=!1;if(o&&"@"==e.peek()&&e.match(f))return t.tokenize=g,m("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=g),m("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==r&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return m(r);if("="==r&&e.eat(">"))return m("=>","operator");if("0"==r&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(r))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==r)return e.eat("*")?(t.tokenize=y,y(e,t)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):et(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(e.eat("="),m("operator","operator",e.current()));if("`"==r)return t.tokenize=v,v(e,t);if("#"==r&&"!"==e.peek())return e.skipToEnd(),m("meta","meta");if("#"==r&&e.eatWhile(h))return m("variable","property");if("<"==r&&e.match("!--")||"-"==r&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),m("comment","comment");if(d.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-|&?]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),"?"==r&&e.eat(".")?m("."):m("operator","operator",e.current());if(h.test(r)){e.eatWhile(h);var i=e.current();if("."!=t.lastType){if(p.propertyIsEnumerable(i)){var s=p[i];return m(s.type,s.style,i)}if("async"==i&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",i)}return m("variable","variable",i)}}function y(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=g;break}r="*"==n}return m("comment","comment")}function v(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}r=!r&&"\\"==n}return m("quasi","string-2",e.current())}var x="([{}])";function b(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(u){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,s=!1,a=n-1;a>=0;--a){var o=e.string.charAt(a),l=x.indexOf(o);if(l>=0&&l<3){if(!i){++a;break}if(0==--i){"("==o&&(s=!0);break}}else if(l>=3&&l<6)++i;else if(h.test(o))s=!0;else if(/["'\/`]/.test(o))for(;;--a){if(0==a)return;if(e.string.charAt(a-1)==o&&"\\"!=e.string.charAt(a-2)){a--;break}}else if(s&&!i){++a;break}}s&&!i&&(t.fatArrowAt=a)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function S(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,null!=r&&(this.align=r)}function _(e,t){if(!c)return!1;for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}function E(e,t,n,r,i){var s=e.cc;for(C.state=e,C.stream=i,C.marked=null,C.cc=s,C.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((s.length?s.pop():l?H:j)(n,r)){for(;s.length&&s[s.length-1].lex;)s.pop()();return C.marked?C.marked:"variable"==n&&_(e,r)?"variable-2":t}}var C={state:null,column:null,marked:null,cc:null};function T(){for(var e=arguments.length-1;e>=0;e--)C.cc.push(arguments[e])}function M(){return T.apply(null,arguments),!0}function A(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function k(e){var t=C.state;if(C.marked="def",c){if(t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var r=P(e,t.context);if(null!=r)return void(t.context=r)}else if(!A(e,t.localVars))return void(t.localVars=new N(e,t.localVars));n.globalVars&&!A(e,t.globalVars)&&(t.globalVars=new N(e,t.globalVars))}}function P(e,t){if(t){if(t.block){var n=P(e,t.prev);return n?n==t.prev?t:new D(n,t.vars,!0):null}return A(e,t.vars)?t:new D(t.prev,new N(e,t.vars),!1)}return null}function L(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function D(e,t,n){this.prev=e,this.vars=t,this.block=n}function N(e,t){this.name=e,this.next=t}var R=new N("this",new N("arguments",null));function I(){C.state.context=new D(C.state.context,C.state.localVars,!1),C.state.localVars=R}function O(){C.state.context=new D(C.state.context,C.state.localVars,!0),C.state.localVars=null}function F(){C.state.localVars=C.state.context.vars,C.state.context=C.state.context.prev}function B(e,t){var n=function(){var n=C.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new S(r,C.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function U(){var e=C.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function V(e){return function t(n){return n==e?M():";"==e||"}"==n||")"==n||"]"==n?T():M(t)}}function j(e,t){return"var"==e?M(B("vardef",t),Ce,V(";"),U):"keyword a"==e?M(B("form"),G,j,U):"keyword b"==e?M(B("form"),j,U):"keyword d"==e?C.stream.match(/^\s*$/,!1)?M():M(B("stat"),K,V(";"),U):"debugger"==e?M(V(";")):"{"==e?M(B("}"),O,ce,U,F):";"==e?M():"if"==e?("else"==C.state.lexical.info&&C.state.cc[C.state.cc.length-1]==U&&C.state.cc.pop()(),M(B("form"),G,j,U,Le)):"function"==e?M(Ie):"for"==e?M(B("form"),O,De,j,F,U):"class"==e||u&&"interface"==t?(C.marked="keyword",M(B("form","class"==e?e:t),Ve,U)):"variable"==e?u&&"declare"==t?(C.marked="keyword",M(j)):u&&("module"==t||"enum"==t||"type"==t)&&C.stream.match(/^\s*\w/,!1)?(C.marked="keyword","enum"==t?M(Ze):"type"==t?M(Fe,V("operator"),fe,V(";")):M(B("form"),Te,V("{"),B("}"),ce,U,U)):u&&"namespace"==t?(C.marked="keyword",M(B("form"),H,j,U)):u&&"abstract"==t?(C.marked="keyword",M(j)):M(B("stat"),ne):"switch"==e?M(B("form"),G,V("{"),B("}","switch"),O,ce,U,U,F):"case"==e?M(H,V(":")):"default"==e?M(V(":")):"catch"==e?M(B("form"),I,z,j,U,F):"export"==e?M(B("stat"),We,U):"import"==e?M(B("stat"),Xe,U):"async"==e?M(j):"@"==t?M(H,j):T(B("stat"),H,V(";"),U)}function z(e){if("("==e)return M(Be,V(")"))}function H(e,t){return X(e,t,!1)}function W(e,t){return X(e,t,!0)}function G(e){return"("!=e?T():M(B(")"),K,V(")"),U)}function X(e,t,n){if(C.state.fatArrowAt==C.stream.start){var r=n?Q:Z;if("("==e)return M(I,B(")"),oe(Be,")"),U,V("=>"),r,F);if("variable"==e)return T(I,Te,V("=>"),r,F)}var i=n?J:q;return w.hasOwnProperty(e)?M(i):"function"==e?M(Ie,i):"class"==e||u&&"interface"==t?(C.marked="keyword",M(B("form"),Ue,U)):"keyword c"==e||"async"==e?M(n?W:H):"("==e?M(B(")"),K,V(")"),U,i):"operator"==e||"spread"==e?M(n?W:H):"["==e?M(B("]"),$e,U,i):"{"==e?le(ie,"}",null,i):"quasi"==e?T(Y,i):"new"==e?M(function(e){return function(t){return"."==t?M(e?te:ee):"variable"==t&&u?M(Se,e?J:q):T(e?W:H)}}(n)):M()}function K(e){return e.match(/[;\}\)\],]/)?T():T(H)}function q(e,t){return","==e?M(K):J(e,t,!1)}function J(e,t,n){var r=0==n?q:J,i=0==n?H:W;return"=>"==e?M(I,n?Q:Z,F):"operator"==e?/\+\+|--/.test(t)||u&&"!"==t?M(r):u&&"<"==t&&C.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?M(B(">"),oe(fe,">"),U,r):"?"==t?M(H,V(":"),i):M(i):"quasi"==e?T(Y,r):";"!=e?"("==e?le(W,")","call",r):"."==e?M(re,r):"["==e?M(B("]"),K,V("]"),U,r):u&&"as"==t?(C.marked="keyword",M(fe,r)):"regexp"==e?(C.state.lastType=C.marked="operator",C.stream.backUp(C.stream.pos-C.stream.start-1),M(i)):void 0:void 0}function Y(e,t){return"quasi"!=e?T():"${"!=t.slice(t.length-2)?M(Y):M(K,$)}function $(e){if("}"==e)return C.marked="string-2",C.state.tokenize=v,M(Y)}function Z(e){return b(C.stream,C.state),T("{"==e?j:H)}function Q(e){return b(C.stream,C.state),T("{"==e?j:W)}function ee(e,t){if("target"==t)return C.marked="keyword",M(q)}function te(e,t){if("target"==t)return C.marked="keyword",M(J)}function ne(e){return":"==e?M(U,j):T(q,V(";"),U)}function re(e){if("variable"==e)return C.marked="property",M()}function ie(e,t){return"async"==e?(C.marked="property",M(ie)):"variable"==e||"keyword"==C.style?(C.marked="property","get"==t||"set"==t?M(se):(u&&C.state.fatArrowAt==C.stream.start&&(n=C.stream.match(/^\s*:\s*/,!1))&&(C.state.fatArrowAt=C.stream.pos+n[0].length),M(ae))):"number"==e||"string"==e?(C.marked=o?"property":C.style+" property",M(ae)):"jsonld-keyword"==e?M(ae):u&&L(t)?(C.marked="keyword",M(ie)):"["==e?M(H,ue,V("]"),ae):"spread"==e?M(W,ae):"*"==t?(C.marked="keyword",M(ie)):":"==e?T(ae):void 0;var n}function se(e){return"variable"!=e?T(ae):(C.marked="property",M(Ie))}function ae(e){return":"==e?M(W):"("==e?T(Ie):void 0}function oe(e,t,n){function r(i,s){if(n?n.indexOf(i)>-1:","==i){var a=C.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),M((function(n,r){return n==t||r==t?T():T(e)}),r)}return i==t||s==t?M():n&&n.indexOf(";")>-1?T(e):M(V(t))}return function(n,i){return n==t||i==t?M():T(e,r)}}function le(e,t,n){for(var r=3;r<arguments.length;r++)C.cc.push(arguments[r]);return M(B(t,n),oe(e,t),U)}function ce(e){return"}"==e?M():T(j,ce)}function ue(e,t){if(u){if(":"==e)return M(fe);if("?"==t)return M(ue)}}function he(e,t){if(u&&(":"==e||"in"==t))return M(fe)}function pe(e){if(u&&":"==e)return C.stream.match(/^\s*\w+\s+is\b/,!1)?M(H,de,fe):M(fe)}function de(e,t){if("is"==t)return C.marked="keyword",M()}function fe(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(C.marked="keyword",M("typeof"==t?W:fe)):"variable"==e||"void"==t?(C.marked="type",M(we)):"|"==t||"&"==t?M(fe):"string"==e||"number"==e||"atom"==e?M(we):"["==e?M(B("]"),oe(fe,"]",","),U,we):"{"==e?M(B("}"),ge,U,we):"("==e?M(oe(be,")"),me,we):"<"==e?M(oe(fe,">"),fe):"quasi"==e?T(ve,we):void 0}function me(e){if("=>"==e)return M(fe)}function ge(e){return e.match(/[\}\)\]]/)?M():","==e||";"==e?M(ge):T(ye,ge)}function ye(e,t){return"variable"==e||"keyword"==C.style?(C.marked="property",M(ye)):"?"==t||"number"==e||"string"==e?M(ye):":"==e?M(fe):"["==e?M(V("variable"),he,V("]"),ye):"("==e?T(Oe,ye):e.match(/[;\}\)\],]/)?void 0:M()}function ve(e,t){return"quasi"!=e?T():"${"!=t.slice(t.length-2)?M(ve):M(fe,xe)}function xe(e){if("}"==e)return C.marked="string-2",C.state.tokenize=v,M(ve)}function be(e,t){return"variable"==e&&C.stream.match(/^\s*[?:]/,!1)||"?"==t?M(be):":"==e?M(fe):"spread"==e?M(be):T(fe)}function we(e,t){return"<"==t?M(B(">"),oe(fe,">"),U,we):"|"==t||"."==e||"&"==t?M(fe):"["==e?M(fe,V("]"),we):"extends"==t||"implements"==t?(C.marked="keyword",M(fe)):"?"==t?M(fe,V(":"),fe):void 0}function Se(e,t){if("<"==t)return M(B(">"),oe(fe,">"),U,we)}function _e(){return T(fe,Ee)}function Ee(e,t){if("="==t)return M(fe)}function Ce(e,t){return"enum"==t?(C.marked="keyword",M(Ze)):T(Te,ue,ke,Pe)}function Te(e,t){return u&&L(t)?(C.marked="keyword",M(Te)):"variable"==e?(k(t),M()):"spread"==e?M(Te):"["==e?le(Ae,"]"):"{"==e?le(Me,"}"):void 0}function Me(e,t){return"variable"!=e||C.stream.match(/^\s*:/,!1)?("variable"==e&&(C.marked="property"),"spread"==e?M(Te):"}"==e?T():"["==e?M(H,V("]"),V(":"),Me):M(V(":"),Te,ke)):(k(t),M(ke))}function Ae(){return T(Te,ke)}function ke(e,t){if("="==t)return M(W)}function Pe(e){if(","==e)return M(Ce)}function Le(e,t){if("keyword b"==e&&"else"==t)return M(B("form","else"),j,U)}function De(e,t){return"await"==t?M(De):"("==e?M(B(")"),Ne,U):void 0}function Ne(e){return"var"==e?M(Ce,Re):"variable"==e?M(Re):T(Re)}function Re(e,t){return")"==e?M():";"==e?M(Re):"in"==t||"of"==t?(C.marked="keyword",M(H,Re)):T(H,Re)}function Ie(e,t){return"*"==t?(C.marked="keyword",M(Ie)):"variable"==e?(k(t),M(Ie)):"("==e?M(I,B(")"),oe(Be,")"),U,pe,j,F):u&&"<"==t?M(B(">"),oe(_e,">"),U,Ie):void 0}function Oe(e,t){return"*"==t?(C.marked="keyword",M(Oe)):"variable"==e?(k(t),M(Oe)):"("==e?M(I,B(")"),oe(Be,")"),U,pe,F):u&&"<"==t?M(B(">"),oe(_e,">"),U,Oe):void 0}function Fe(e,t){return"keyword"==e||"variable"==e?(C.marked="type",M(Fe)):"<"==t?M(B(">"),oe(_e,">"),U):void 0}function Be(e,t){return"@"==t&&M(H,Be),"spread"==e?M(Be):u&&L(t)?(C.marked="keyword",M(Be)):u&&"this"==e?M(ue,ke):T(Te,ue,ke)}function Ue(e,t){return"variable"==e?Ve(e,t):je(e,t)}function Ve(e,t){if("variable"==e)return k(t),M(je)}function je(e,t){return"<"==t?M(B(">"),oe(_e,">"),U,je):"extends"==t||"implements"==t||u&&","==e?("implements"==t&&(C.marked="keyword"),M(u?fe:H,je)):"{"==e?M(B("}"),ze,U):void 0}function ze(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||u&&L(t))&&C.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(C.marked="keyword",M(ze)):"variable"==e||"keyword"==C.style?(C.marked="property",M(He,ze)):"number"==e||"string"==e?M(He,ze):"["==e?M(H,ue,V("]"),He,ze):"*"==t?(C.marked="keyword",M(ze)):u&&"("==e?T(Oe,ze):";"==e||","==e?M(ze):"}"==e?M():"@"==t?M(H,ze):void 0}function He(e,t){if("!"==t)return M(He);if("?"==t)return M(He);if(":"==e)return M(fe,ke);if("="==t)return M(W);var n=C.state.lexical.prev;return T(n&&"interface"==n.info?Oe:Ie)}function We(e,t){return"*"==t?(C.marked="keyword",M(Ye,V(";"))):"default"==t?(C.marked="keyword",M(H,V(";"))):"{"==e?M(oe(Ge,"}"),Ye,V(";")):T(j)}function Ge(e,t){return"as"==t?(C.marked="keyword",M(V("variable"))):"variable"==e?T(W,Ge):void 0}function Xe(e){return"string"==e?M():"("==e?T(H):"."==e?T(q):T(Ke,qe,Ye)}function Ke(e,t){return"{"==e?le(Ke,"}"):("variable"==e&&k(t),"*"==t&&(C.marked="keyword"),M(Je))}function qe(e){if(","==e)return M(Ke,qe)}function Je(e,t){if("as"==t)return C.marked="keyword",M(Ke)}function Ye(e,t){if("from"==t)return C.marked="keyword",M(H)}function $e(e){return"]"==e?M():T(oe(W,"]"))}function Ze(){return T(B("form"),Te,V("{"),B("}"),oe(Qe,"}"),U,U)}function Qe(){return T(Te,ke)}function et(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return I.lex=O.lex=!0,F.lex=!0,U.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new S((e||0)-s,0,"block",!1),localVars:n.localVars,context:n.localVars&&new D(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),b(e,t)),t.tokenize!=y&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",E(t,n,r,i,e))},indent:function(t,r){if(t.tokenize==y||t.tokenize==v)return e.Pass;if(t.tokenize!=g)return 0;var i,o=r&&r.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(r))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==U)l=l.prev;else if(u!=Le&&u!=F)break}for(;("stat"==l.type||"form"==l.type)&&("}"==o||(i=t.cc[t.cc.length-1])&&(i==q||i==J)&&!/^[,\.=+\-*:?[\(]/.test(r));)l=l.prev;a&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var h=l.type,p=o==h;return"vardef"==h?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==h&&"{"==o?l.indented:"form"==h?l.indented+s:"stat"==h?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||d.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,r)?a||s:0):"switch"!=l.info||p||0==n.doubleIndentSwitch?l.align?l.column+(p?0:1):l.indented+(p?0:s):l.indented+(/^(?:case|default)\b/.test(r)?s:2*s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:o,jsonMode:l,expressionAllowed:et,skipExpression:function(t){E(t,"atom","atom","true",new e.StringStream("",2,null))}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(4631))},4834:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),s=n(3645),a=n.n(s)()(i());a.push([e.id,'.CodeMirror-Tern-completion {\n  padding-left: 22px;\n  position: relative;\n  line-height: 1.5;\n}\n.CodeMirror-Tern-completion:before {\n  position: absolute;\n  left: 2px;\n  bottom: 2px;\n  border-radius: 50%;\n  font-size: 12px;\n  font-weight: bold;\n  height: 15px;\n  width: 15px;\n  line-height: 16px;\n  text-align: center;\n  color: white;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.CodeMirror-Tern-completion-unknown:before {\n  content: "?";\n  background: #4bb;\n}\n.CodeMirror-Tern-completion-object:before {\n  content: "O";\n  background: #77c;\n}\n.CodeMirror-Tern-completion-fn:before {\n  content: "F";\n  background: #7c7;\n}\n.CodeMirror-Tern-completion-array:before {\n  content: "A";\n  background: #c66;\n}\n.CodeMirror-Tern-completion-number:before {\n  content: "1";\n  background: #999;\n}\n.CodeMirror-Tern-completion-string:before {\n  content: "S";\n  background: #999;\n}\n.CodeMirror-Tern-completion-bool:before {\n  content: "B";\n  background: #999;\n}\n\n.CodeMirror-Tern-completion-guess {\n  color: #999;\n}\n\n.CodeMirror-Tern-tooltip {\n  border: 1px solid silver;\n  border-radius: 3px;\n  color: #444;\n  padding: 2px 5px;\n  font-size: 90%;\n  font-family: monospace;\n  background-color: white;\n  white-space: pre-wrap;\n\n  max-width: 40em;\n  position: absolute;\n  z-index: 10;\n  -webkit-box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n  -moz-box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n  box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n\n  transition: opacity 1s;\n  -moz-transition: opacity 1s;\n  -webkit-transition: opacity 1s;\n  -o-transition: opacity 1s;\n  -ms-transition: opacity 1s;\n}\n\n.CodeMirror-Tern-hint-doc {\n  max-width: 25em;\n  margin-top: -3px;\n}\n\n.CodeMirror-Tern-fname { color: black; }\n.CodeMirror-Tern-farg { color: #70a; }\n.CodeMirror-Tern-farg-current { text-decoration: underline; }\n.CodeMirror-Tern-type { color: #07c; }\n.CodeMirror-Tern-fhint-guess { opacity: .7; }\n',""]),t.Z=a},1240:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),s=n(3645),a=n.n(s)()(i());a.push([e.id,"/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor .CodeMirror-line::selection,\n.cm-fat-cursor .CodeMirror-line > span::selection, \n.cm-fat-cursor .CodeMirror-line > span > span::selection { background: transparent; }\n.cm-fat-cursor .CodeMirror-line::-moz-selection,\n.cm-fat-cursor .CodeMirror-line > span::-moz-selection,\n.cm-fat-cursor .CodeMirror-line > span > span::-moz-selection { background: transparent; }\n.cm-fat-cursor { caret-color: transparent; }\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n  z-index: 0;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n",""]),t.Z=a},1642:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),s=n(3645),a=n.n(s)()(i());a.push([e.id,":root {\n    color-scheme: light dark;\n}\n\n#threeEditorContainer hr {\n\tborder: 0;\n\tborder-top: 1px solid #ccc;\n}\n\n#threeEditorContainer button {\n\tposition: relative;\n}\n\n#threeEditorContainer input {\n\tvertical-align: middle;\n    appearance: auto;\n}\n\n#threeEditorContainer input[type=\"color\"]::-webkit-color-swatch-wrapper {\n\t\tpadding: 0;\n\t}\n#threeEditorContainer input[type=\"color\"]::-webkit-color-swatch {\n\t\tborder: none;\n\t}\n\n#threeEditorContainer textarea {\n\ttab-size: 4;\n\twhite-space: pre;\n\tword-wrap: normal;\n}\n\n#threeEditorContainer textarea.success {\n\t\tborder-color: #8b8 !important;\n\t}\n\n#threeEditorContainer textarea.fail {\n\t\tborder-color: #f00 !important;\n\t\tbackground-color: rgba(255,0,0,0.05);\n\t}\n\n#threeEditorContainer textarea, #threeEditorContainer input { outline: none; } /* osx */\n\n/* osx */\n\n.Panel {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n\n    /* No support for these yet */\n    -o-user-select: none;\n    user-select: none;\n}\n\n.TabbedPanel {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n\n    /* No support for these yet */\n    -o-user-select: none;\n    user-select: none;\n    position: relative;\n    display: block;\n    width: 100%;\n    min-width: 260px;\n}\n\n.TabbedPanel .Tabs {\n    position: relative;\n    display: block;\n    width: 100%;\n}\n\n.TabbedPanel .Tabs .Tab {\n    padding: 10px;\n    text-transform: uppercase;\n}\n\n.TabbedPanel .Panels {\n    position: relative;\n    display: block;\n    width: 100%;\n}\n\n/* Listbox */\n.Listbox {\n    color: #444;\n    background-color: #fff;\n    padding: 0;\n    width: 100%;\n    min-height: 140px;\n    font-size: 12px;\n    cursor: default;\n    overflow: auto;\n}\n\n.Listbox .ListboxItem {\n    padding: 6px;\n    color: #666;\n    white-space: nowrap;\n}\n\n.Listbox .ListboxItem.active {\n    background-color: rgba(0, 0, 0, 0.04);\n}\n\n/* CodeMirror */\n\n.CodeMirror {\n\n    position: absolute !important;\n    top: 37px;\n    width: 100% !important;\n    height: calc(100% - 37px) !important;\n\n}\n\n.CodeMirror .errorLine {\n\n    background: rgba(255, 0, 0, 0.25);\n\n}\n\n.CodeMirror .esprima-error {\n\n    color: #f00;\n    text-align: right;\n    padding: 0 20px;\n\n}\n\n/* outliner */\n\n#outliner .opener {\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    margin: 0px 4px;\n    vertical-align: top;\n    text-align: center;\n}\n\n#outliner .opener.open:after {\n    content: '−';\n}\n\n#outliner .opener.closed:after {\n    content: '+';\n}\n\n#outliner .option {\n\n    border: 1px solid transparent;\n\n}\n\n#outliner .option.drag {\n\n    border: 1px dashed #999;\n\n}\n\n#outliner .option.dragTop {\n\n    border-top: 1px dashed #999;\n\n}\n\n#outliner .option.dragBottom {\n\n    border-bottom: 1px dashed #999;\n\n}\n\n#outliner .type {\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    color: #ddd;\n    text-align: center;\n}\n\n#outliner .type:after {\n    content: '●';\n}\n\n/* */\n\n#outliner .Scene {\n    color: #8888dd;\n}\n\n#outliner .Camera {\n    color: #dd8888;\n}\n\n#outliner .Light {\n    color: #dddd88;\n}\n\n/* */\n\n#outliner .Object3D {\n    color: #aaaaee;\n}\n\n#outliner .Mesh {\n    color: #8888ee;\n}\n\n#outliner .Line {\n    color: #88ee88;\n}\n\n#outliner .LineSegments {\n    color: #88ee88;\n}\n\n#outliner .Points {\n    color: #ee8888;\n}\n\n/* */\n\n#outliner .Geometry {\n    color: #aaeeaa;\n}\n\n#outliner .Material {\n    color: #eeaaee;\n}\n\n/* */\n\n#outliner .Script:after {\n    content: '◎'\n}\n\n/*  */\n\n#threeEditorContainer button {\n    color: #555;\n    background-color: #ddd;\n    border: 0px;\n    margin: 0px; /* GNOME Web */\n    padding: 5px 8px;\n    font-size: 12px;\n    text-transform: uppercase;\n    cursor: pointer;\n    outline: none;\n}\n\n#threeEditorContainer button:hover {\n    background-color: #fff;\n}\n\n#threeEditorContainer button.selected {\n    background-color: #fff;\n}\n\n#threeEditorContainer input, #threeEditorContainer textarea {\n    border: 1px solid transparent;\n    color: #444;\n}\n\n#threeEditorContainer input.Number {\n    color: #08f !important;\n    font-size: 12px;\n    border: 0px;\n    padding: 2px;\n}\n\n#threeEditorContainer select {\n    color: #666;\n    background-color: #ddd;\n    border: 0px;\n    text-transform: uppercase;\n    cursor: pointer;\n    outline: none;\n}\n\n#threeEditorContainer select:hover {\n    background-color: #fff;\n}\n\n/* UI */\n\n#resizer {\n    position: absolute;\n    top: 32px;\n    right: 295px;\n    width: 5px;\n    bottom: 0px;\n    /* background-color: rgba(255,0,0,0.5); */\n    cursor: col-resize;\n}\n\n#viewport {\n    position: absolute;\n    top: 32px;\n    left: 0;\n    right: 300px;\n    bottom: 0;\n}\n\n#viewport #info {\n    text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.25);\n    pointer-events: none;\n}\n\n#script {\n    position: absolute;\n    top: 32px;\n    left: 0;\n    right: 300px;\n    bottom: 0;\n    opacity: 0.9;\n}\n\n#player {\n    position: absolute;\n    top: 32px;\n    left: 0;\n    right: 300px;\n    bottom: 0;\n}\n\n#menubar {\n    position: absolute;\n    width: 100%;\n    height: 32px;\n    background: #eee;\n    padding: 0;\n    margin: 0;\n    right: 0;\n    top: 0;\n}\n\n#menubar .menu {\n    float: left;\n    cursor: pointer;\n    padding-right: 8px;\n}\n\n#menubar .menu.right {\n    float: right;\n    cursor: auto;\n    padding-right: 0;\n    text-align: right;\n}\n\n#menubar .menu .title {\n    display: inline-block;\n    color: #888;\n    margin: 0;\n    padding: 8px;\n    line-height: 16px;\n}\n\n#menubar .menu .options {\n    position: fixed;\n    display: none;\n    padding: 5px 0;\n    background: #eee;\n    width: 150px;\n    max-height: calc(100% - 80px);\n    overflow: auto;\n}\n\n#menubar .menu:hover .options {\n    display: block;\n}\n\n#menubar .menu .options hr {\n    border-color: #ddd;\n}\n\n#menubar .menu .options .option {\n    color: #666;\n    background-color: transparent;\n    padding: 5px 10px;\n    margin: 0 !important;\n}\n\n#menubar .menu .options .option:hover {\n    color: #fff;\n    background-color: #08f;\n}\n\n#menubar .menu .options .option:active {\n    color: #666;\n    background: transparent;\n}\n\n#menubar .menu .options .inactive {\n    color: #bbb;\n    background-color: transparent;\n    padding: 5px 10px;\n    margin: 0 !important;\n}\n\n#sidebar {\n    position: absolute;\n    right: 0;\n    top: 32px;\n    bottom: 0;\n    width: 300px;\n    background: #eee;\n    overflow: auto;\n}\n\n#sidebar .Panel {\n    color: #888;\n    padding: 10px;\n    border-top: 1px solid #ccc;\n}\n\n#sidebar .Panel.collapsed {\n    margin-bottom: 0;\n}\n\n#sidebar .Row {\n    display: flex;\n    align-items: center;\n    min-height: 24px;\n    margin-bottom: 10px;\n}\n\n#toolbar {\n    position: absolute;\n    left: 10px;\n    top: 42px;\n    width: 32px;\n    background: #eee;\n    text-align: center;\n}\n\n#toolbar button, #toolbar input {\n    height: 32px;\n}\n\n#toolbar button img {\n    width: 16px;\n    opacity: 0.5;\n}\n\n.Outliner {\n    color: #444;\n    background-color: #fff;\n    padding: 0;\n    width: 100%;\n    height: 140px;\n    font-size: 12px;\n    cursor: default;\n    overflow: auto;\n    resize: vertical;\n    outline: none !important;\n}\n\n.Outliner .option {\n    padding: 4px;\n    color: #666;\n    white-space: nowrap;\n}\n\n.Outliner .option:hover {\n    background-color: rgba(0, 0, 0, 0.02);\n}\n\n.Outliner .option.active {\n    background-color: rgba(0, 0, 0, 0.04);\n}\n\n\n.TabbedPanel .Tabs {\n    background-color: #ddd;\n    border-top: 1px solid #ccc;\n}\n\n.TabbedPanel .Tab {\n    color: #aaa;\n    border-right: 1px solid #ccc;\n}\n\n.TabbedPanel .Tab.selected {\n    color: #888;\n    background-color: #eee;\n}\n\n.Listbox {\n    color: #444;\n    background-color: #fff;\n}\n\n.Panel {\n    color: #888;\n}\n\n/* */\n\n@media all and ( max-width: 600px ) {\n\n    #resizer {\n        display: none;\n    }\n\n    #menubar .menu .options {\n        max-height: calc(100% - 372px);\n    }\n\n    #menubar .menu.right {\n        display: none;\n    }\n\n    #viewport {\n        left: 0;\n        right: 0;\n        top: 32px;\n        height: calc(100% - 352px);\n    }\n\n    #script {\n        left: 0;\n        right: 0;\n        top: 32px;\n        height: calc(100% - 352px);\n    }\n\n    #player {\n        left: 0;\n        right: 0;\n        top: 32px;\n        height: calc(100% - 352px);\n    }\n\n    #sidebar {\n        left: 0;\n        width: 100%;\n        top: calc(100% - 320px);\n        bottom: 0;\n    }\n\n}\n\n/* DARK MODE */\n\n@media ( prefers-color-scheme: dark ) {\n\n    #threeEditorContainer button {\n        color: #aaa;\n        background-color: #222;\n    }\n\n    #threeEditorContainer button:hover {\n        color: #ccc;\n        background-color: #444;\n    }\n\n    #threeEditorContainer button.selected {\n        color: #fff;\n        background-color: #08f;\n    }\n\n    #threeEditorContainer input, textarea {\n        background-color: #222;\n        border: 1px solid transparent;\n        color: #888;\n    }\n\n    #threeEditorContainer select {\n        color: #aaa;\n        background-color: #222;\n    }\n\n    #threeEditorContainer select:hover {\n        color: #ccc;\n        background-color: #444;\n    }\n\n    /* UI */\n    #menubar {\n        background: #111;\n    }\n\n    #menubar .menu .options {\n        background: #111;\n    }\n\n    #menubar .menu .options hr {\n        border-color: #222;\n    }\n\n    #menubar .menu .options .option {\n        color: #888;\n    }\n\n    #menubar .menu .options .inactive {\n        color: #444;\n    }\n\n    #sidebar {\n        background-color: #111;\n    }\n\n    #sidebar .Panel {\n        border-top: 1px solid #222;\n    }\n\n    #sidebar .Panel.Material canvas {\n        border: solid 1px #5A5A5A;\n    }\n\n    #toolbar {\n        background-color: #111;\n    }\n\n    #toolbar img {\n        filter: invert(1);\n    }\n\n    .Outliner {\n        color: #888;\n        background: #222;\n    }\n\n    .Outliner .option:hover {\n        background-color: rgba(21, 60, 94, 0.5);\n    }\n\n    .Outliner .option.active {\n        background-color: rgba(21, 60, 94, 1);\n    }\n\n    .TabbedPanel .Tabs {\n        background-color: #1b1b1b;\n        border-top: 1px solid #222;\n    }\n\n    .TabbedPanel .Tab {\n        color: #555;\n        border-right: 1px solid #222;\n    }\n\n    .TabbedPanel .Tab.selected {\n        color: #888;\n        background-color: #111;\n    }\n\n    .Listbox {\n        color: #888;\n        background: #222;\n    }\n\n    .Listbox .ListboxItem:hover {\n        background-color: rgba(21, 60, 94, 0.5);\n    }\n\n    .Listbox .ListboxItem.active {\n        background-color: rgba(21, 60, 94, 1);\n    }\n\n}\n\n/* Temporary Chrome fix (#24794) */\n\n[draggable=\"true\"] {\n    transform: translate(0, 0);\n    z-index: 0;\n}\n",""]),t.Z=a},1424:function(e,t,n){"use strict";var r=n(8081),i=n.n(r),s=n(3645),a=n.n(s)()(i());a.push([e.id,"body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n",""]),t.Z=a},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},8081:function(e){"use strict";e.exports=function(e){return e[1]}},1072:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(3),s=n(8),a=n(15);function o(e,t,n){var a=null,o=function(e,t){n&&n(e,t),a&&a.visit(e,t)},l="function"==typeof n?o:null,c=!1;if(t){c="boolean"==typeof t.comment&&t.comment;var u="boolean"==typeof t.attachComment&&t.attachComment;(c||u)&&((a=new r.CommentHandler).attach=u,t.comment=!0,l=o)}var h,p=!1;t&&"string"==typeof t.sourceType&&(p="module"===t.sourceType),h=t&&"boolean"==typeof t.jsx&&t.jsx?new i.JSXParser(e,t,l):new s.Parser(e,t,l);var d=p?h.parseModule():h.parseScript();return c&&a&&(d.comments=a.comments),h.config.tokens&&(d.tokens=h.tokens),h.config.tolerant&&(d.errors=h.errorHandler.errors),d}t.parse=o,t.parseModule=function(e,t,n){var r=t||{};return r.sourceType="module",o(e,r,n)},t.parseScript=function(e,t,n){var r=t||{};return r.sourceType="script",o(e,r,n)},t.tokenize=function(e,t,n){var r,i=new a.Tokenizer(e,t);r=[];try{for(;;){var s=i.getNextToken();if(!s)break;n&&(s=n(s)),r.push(s)}}catch(e){i.errorHandler.tolerate(e)}return i.errorHandler.tolerant&&(r.errors=i.errors()),r};var l=n(2);t.Syntax=l.Syntax,t.version="4.0.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===r.Syntax.BlockStatement&&0===e.body.length){for(var n=[],i=this.leading.length-1;i>=0;--i){var s=this.leading[i];t.end.offset>=s.start&&(n.unshift(s.comment),this.leading.splice(i,1),this.trailing.splice(i,1))}n.length&&(e.innerComments=n)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var n=this.trailing.length-1;n>=0;--n){var r=this.trailing[n];r.start>=e.end.offset&&t.unshift(r.comment)}return this.trailing.length=0,t}var i=this.stack[this.stack.length-1];if(i&&i.node.trailingComments){var s=i.node.trailingComments[0];s&&s.range[0]>=e.end.offset&&(t=i.node.trailingComments,delete i.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,n=[];this.stack.length>0&&(s=this.stack[this.stack.length-1])&&s.start>=e.start.offset;)t=s.node,this.stack.pop();if(t){for(var r=(t.leadingComments?t.leadingComments.length:0)-1;r>=0;--r){var i=t.leadingComments[r];i.range[1]<=e.start.offset&&(n.unshift(i),t.leadingComments.splice(r,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,n}for(r=this.leading.length-1;r>=0;--r){var s;(s=this.leading[r]).start<=e.start.offset&&(n.unshift(s.comment),this.leading.splice(r,1))}return n},e.prototype.visitNode=function(e,t){if(!(e.type===r.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var n=this.findTrailingComments(t),i=this.findLeadingComments(t);i.length>0&&(e.leadingComments=i),n.length>0&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var n="L"===e.type[0]?"Line":"Block",r={type:n,value:e.value};if(e.range&&(r.range=e.range),e.loc&&(r.loc=e.loc),this.comments.push(r),this.attach){var i={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(i.comment.loc=e.loc),e.type=n,this.leading.push(i),this.trailing.push(i)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),a=n(5),o=n(6),l=n(7),c=n(8),u=n(13),h=n(14);function p(e){var t;switch(e.type){case o.JSXSyntax.JSXIdentifier:t=e.name;break;case o.JSXSyntax.JSXNamespacedName:var n=e;t=p(n.namespace)+":"+p(n.name);break;case o.JSXSyntax.JSXMemberExpression:var r=e;t=p(r.object)+"."+p(r.property)}return t}u.TokenName[100]="JSXIdentifier",u.TokenName[101]="JSXText";var d=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",n=!0,r=!1,i=!1,a=!1;!this.scanner.eof()&&n&&!r;){var o=this.scanner.source[this.scanner.index];if(o===e)break;if(r=";"===o,t+=o,++this.scanner.index,!r)switch(t.length){case 2:i="#"===o;break;case 3:i&&(n=(a="x"===o)||s.Character.isDecimalDigit(o.charCodeAt(0)),i=i&&!a);break;default:n=(n=n&&!(i&&!s.Character.isDecimalDigit(o.charCodeAt(0))))&&!(a&&!s.Character.isHexDigit(o.charCodeAt(0)))}}if(n&&r&&t.length>2){var l=t.substr(1,t.length-2);i&&l.length>1?t=String.fromCharCode(parseInt(l.substr(1),10)):a&&l.length>2?t=String.fromCharCode(parseInt("0"+l.substr(1),16)):i||a||!h.XHTMLEntities[l]||(t=h.XHTMLEntities[l])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:o=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,n=this.scanner.source[this.scanner.index++],r="";!this.scanner.eof()&&(l=this.scanner.source[this.scanner.index++])!==n;)r+="&"===l?this.scanXHTMLEntity(n):l;return{type:8,value:r,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var i=this.scanner.source.charCodeAt(this.scanner.index+1),a=this.scanner.source.charCodeAt(this.scanner.index+2),o=46===i&&46===a?"...":".";return t=this.scanner.index,this.scanner.index+=o.length,{type:7,value:o,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(s.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var l=this.scanner.source.charCodeAt(this.scanner.index);if(s.Character.isIdentifierPart(l)&&92!==l)++this.scanner.index;else{if(45!==l)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var n=this.scanner.source[this.scanner.index];if("{"===n||"<"===n)break;++this.scanner.index,t+=n,s.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===n&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var r={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(r)),r},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new a.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=t;this.expectJSX(":");var r=this.parseJSXIdentifier();t=this.finalize(e,new a.JSXNamespacedName(n,r))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var i=t;this.expectJSX(".");var s=this.parseJSXIdentifier();t=this.finalize(e,new a.JSXMemberExpression(i,s))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),n=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=n;this.expectJSX(":");var i=this.parseJSXIdentifier();e=this.finalize(t,new a.JSXNamespacedName(r,i))}else e=n;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var n=this.getTokenRaw(t);return this.finalize(e,new l.Literal(t.value,n))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new a.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new a.JSXAttribute(t,n))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new a.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),n=this.parseJSXAttributes(),r=this.matchJSX("/");return r&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new a.JSXOpeningElement(t,r,n))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new a.JSXClosingElement(t))}var n=this.parseJSXElementName(),r=this.parseJSXAttributes(),i=this.matchJSX("/");return i&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new a.JSXOpeningElement(n,i,r))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new a.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new a.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end){var r=this.getTokenRaw(n),i=this.finalize(t,new a.JSXText(n.value,r));e.push(i)}if("{"!==this.scanner.source[this.scanner.index])break;var s=this.parseJSXExpressionContainer();e.push(s)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var n=this.createJSXChildNode(),r=this.parseJSXBoundaryElement();if(r.type===o.JSXSyntax.JSXOpeningElement){var i=r;if(i.selfClosing){var s=this.finalize(n,new a.JSXElement(i,[],null));e.children.push(s)}else t.push(e),e={node:n,opening:i,closing:null,children:[]}}if(r.type===o.JSXSyntax.JSXClosingElement){e.closing=r;var l=p(e.opening.name);if(l!==p(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",l),!(t.length>0))break;s=this.finalize(e.node,new a.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(s),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),n=[],r=null;if(!t.selfClosing){var i=this.parseComplexJSXElement({node:e,opening:t,closing:r,children:n});n=i.children,r=i.closing}return this.finalize(e,new a.JSXElement(t,n,r))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(c.Parser);t.JSXParser=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&n.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&n.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.JSXClosingElement=function(e){this.type=r.JSXSyntax.JSXClosingElement,this.name=e};t.JSXElement=function(e,t,n){this.type=r.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n};t.JSXEmptyExpression=function(){this.type=r.JSXSyntax.JSXEmptyExpression};t.JSXExpressionContainer=function(e){this.type=r.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXIdentifier=function(e){this.type=r.JSXSyntax.JSXIdentifier,this.name=e};t.JSXMemberExpression=function(e,t){this.type=r.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXAttribute=function(e,t){this.type=r.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXNamespacedName=function(e,t){this.type=r.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXOpeningElement=function(e,t,n){this.type=r.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n};t.JSXSpreadAttribute=function(e){this.type=r.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXText=function(e,t){this.type=r.JSXSyntax.JSXText,this.value=e,this.raw=t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.ArrayExpression=function(e){this.type=r.Syntax.ArrayExpression,this.elements=e};t.ArrayPattern=function(e){this.type=r.Syntax.ArrayPattern,this.elements=e};t.ArrowFunctionExpression=function(e,t,n){this.type=r.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!1};t.AssignmentExpression=function(e,t,n){this.type=r.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n};t.AssignmentPattern=function(e,t){this.type=r.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AsyncArrowFunctionExpression=function(e,t,n){this.type=r.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!0};t.AsyncFunctionDeclaration=function(e,t,n){this.type=r.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=function(e,t,n){this.type=r.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AwaitExpression=function(e){this.type=r.Syntax.AwaitExpression,this.argument=e};t.BinaryExpression=function(e,t,n){var i="||"===e||"&&"===e;this.type=i?r.Syntax.LogicalExpression:r.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n};t.BlockStatement=function(e){this.type=r.Syntax.BlockStatement,this.body=e};t.BreakStatement=function(e){this.type=r.Syntax.BreakStatement,this.label=e};t.CallExpression=function(e,t){this.type=r.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CatchClause=function(e,t){this.type=r.Syntax.CatchClause,this.param=e,this.body=t};t.ClassBody=function(e){this.type=r.Syntax.ClassBody,this.body=e};t.ClassDeclaration=function(e,t,n){this.type=r.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n};t.ClassExpression=function(e,t,n){this.type=r.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n};t.ComputedMemberExpression=function(e,t){this.type=r.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ConditionalExpression=function(e,t,n){this.type=r.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n};t.ContinueStatement=function(e){this.type=r.Syntax.ContinueStatement,this.label=e};t.DebuggerStatement=function(){this.type=r.Syntax.DebuggerStatement};t.Directive=function(e,t){this.type=r.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.DoWhileStatement=function(e,t){this.type=r.Syntax.DoWhileStatement,this.body=e,this.test=t};t.EmptyStatement=function(){this.type=r.Syntax.EmptyStatement};t.ExportAllDeclaration=function(e){this.type=r.Syntax.ExportAllDeclaration,this.source=e};t.ExportDefaultDeclaration=function(e){this.type=r.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportNamedDeclaration=function(e,t,n){this.type=r.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n};t.ExportSpecifier=function(e,t){this.type=r.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExpressionStatement=function(e){this.type=r.Syntax.ExpressionStatement,this.expression=e};t.ForInStatement=function(e,t,n){this.type=r.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1};t.ForOfStatement=function(e,t,n){this.type=r.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n};t.ForStatement=function(e,t,n,i){this.type=r.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=i};t.FunctionDeclaration=function(e,t,n,i){this.type=r.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1,this.async=!1};t.FunctionExpression=function(e,t,n,i){this.type=r.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1,this.async=!1};t.Identifier=function(e){this.type=r.Syntax.Identifier,this.name=e};t.IfStatement=function(e,t,n){this.type=r.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n};t.ImportDeclaration=function(e,t){this.type=r.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDefaultSpecifier=function(e){this.type=r.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportNamespaceSpecifier=function(e){this.type=r.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportSpecifier=function(e,t){this.type=r.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.LabeledStatement=function(e,t){this.type=r.Syntax.LabeledStatement,this.label=e,this.body=t};t.Literal=function(e,t){this.type=r.Syntax.Literal,this.value=e,this.raw=t};t.MetaProperty=function(e,t){this.type=r.Syntax.MetaProperty,this.meta=e,this.property=t};t.MethodDefinition=function(e,t,n,i,s){this.type=r.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=i,this.static=s};t.Module=function(e){this.type=r.Syntax.Program,this.body=e,this.sourceType="module"};t.NewExpression=function(e,t){this.type=r.Syntax.NewExpression,this.callee=e,this.arguments=t};t.ObjectExpression=function(e){this.type=r.Syntax.ObjectExpression,this.properties=e};t.ObjectPattern=function(e){this.type=r.Syntax.ObjectPattern,this.properties=e};t.Property=function(e,t,n,i,s,a){this.type=r.Syntax.Property,this.key=t,this.computed=n,this.value=i,this.kind=e,this.method=s,this.shorthand=a};t.RegexLiteral=function(e,t,n,i){this.type=r.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:n,flags:i}};t.RestElement=function(e){this.type=r.Syntax.RestElement,this.argument=e};t.ReturnStatement=function(e){this.type=r.Syntax.ReturnStatement,this.argument=e};t.Script=function(e){this.type=r.Syntax.Program,this.body=e,this.sourceType="script"};t.SequenceExpression=function(e){this.type=r.Syntax.SequenceExpression,this.expressions=e};t.SpreadElement=function(e){this.type=r.Syntax.SpreadElement,this.argument=e};t.StaticMemberExpression=function(e,t){this.type=r.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.Super=function(){this.type=r.Syntax.Super};t.SwitchCase=function(e,t){this.type=r.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchStatement=function(e,t){this.type=r.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.TaggedTemplateExpression=function(e,t){this.type=r.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TemplateElement=function(e,t){this.type=r.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateLiteral=function(e,t){this.type=r.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.ThisExpression=function(){this.type=r.Syntax.ThisExpression};t.ThrowStatement=function(e){this.type=r.Syntax.ThrowStatement,this.argument=e};t.TryStatement=function(e,t,n){this.type=r.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n};t.UnaryExpression=function(e,t){this.type=r.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UpdateExpression=function(e,t,n){this.type=r.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n};t.VariableDeclaration=function(e,t){this.type=r.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclarator=function(e,t){this.type=r.Syntax.VariableDeclarator,this.id=e,this.init=t};t.WhileStatement=function(e,t){this.type=r.Syntax.WhileStatement,this.test=e,this.body=t};t.WithStatement=function(e,t){this.type=r.Syntax.WithStatement,this.object=e,this.body=t};t.YieldExpression=function(e,t){this.type=r.Syntax.YieldExpression,this.argument=e,this.delegate=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(10),s=n(11),a=n(7),o=n(12),l=n(2),c=n(13),u="ArrowParameterPlaceHolder",h=function(){function e(e,t,n){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),s=e.replace(/%(\d)/g,(function(e,t){return r.assert(t<i.length,"Message reference must be in range"),i[t]})),a=this.lastMarker.index,o=this.lastMarker.line,l=this.lastMarker.column+1;throw this.errorHandler.createError(a,o,l,s)},e.prototype.tolerateError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),s=e.replace(/%(\d)/g,(function(e,t){return r.assert(t<i.length,"Message reference must be in range"),i[t]})),a=this.lastMarker.index,o=this.scanner.lineNumber,l=this.lastMarker.column+1;this.errorHandler.tolerateError(a,o,l,s)},e.prototype.unexpectedTokenError=function(e,t){var n,r=t||s.Messages.UnexpectedToken;if(e?(t||(r=2===e.type?s.Messages.UnexpectedEOS:3===e.type?s.Messages.UnexpectedIdentifier:6===e.type?s.Messages.UnexpectedNumber:8===e.type?s.Messages.UnexpectedString:10===e.type?s.Messages.UnexpectedTemplate:s.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?r=s.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(r=s.Messages.StrictReservedWord))),n=e.value):n="ILLEGAL",r=r.replace("%0",n),e&&"number"==typeof e.lineNumber){var i=e.start,a=e.lineNumber,o=this.lastMarker.index-this.lastMarker.column,l=e.start-o+1;return this.errorHandler.createError(i,a,l,r)}return i=this.lastMarker.index,a=this.lastMarker.line,l=this.lastMarker.column+1,this.errorHandler.createError(i,a,l,r)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],r=void 0;r={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},this.config.range&&(r.range=n.range),this.config.loc&&(r.loc=n.loc);var i={start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}};this.delegate(r,i)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:c.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var n=e.pattern,r=e.flags;t.regex={pattern:n,flags:r}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var n=e.start-e.lineStart,r=e.lineNumber;return n<0&&(n+=t,r--),{index:e.start,line:r,column:n}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var n={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,n)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,s.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=r,i},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError,i},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,n,r=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(r,new a.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,s.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new a.Literal(t.value,n));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new a.Literal("true"===t.value,n));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new a.Literal(null,n));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),n=this.getTokenRaw(t),e=this.finalize(r,new a.RegexLiteral(t.regex,n,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(r,new a.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(r,new a.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new a.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var n=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(n)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new a.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var r=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=n,r},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters(),r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,n.params,r,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=this.context.await;this.context.allowYield=!1,this.context.await=!0;var r=this.parseFormalParameters(),i=this.parsePropertyMethod(r);return this.context.allowYield=t,this.context.await=n,this.finalize(e,new a.AsyncFunctionExpression(null,r.params,i))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),n=this.nextToken();switch(n.type){case 8:case 6:this.context.strict&&n.octal&&this.tolerateUnexpectedToken(n,s.Messages.StrictOctalLiteral);var r=this.getTokenRaw(n);e=this.finalize(t,new a.Literal(n.value,r));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new a.Identifier(n.value));break;case 7:"["===n.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(n);break;default:e=this.throwUnexpectedToken(n)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===l.Syntax.Identifier&&e.name===t||e.type===l.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,n=this.createNode(),r=this.lookahead,i=null,o=null,l=!1,c=!1,u=!1,h=!1;if(3===r.type){var p=r.value;this.nextToken(),l=this.match("["),i=(h=!(this.hasLineTerminator||"async"!==p||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(n,new a.Identifier(p))}else this.match("*")?this.nextToken():(l=this.match("["),i=this.parseObjectPropertyKey());var d=this.qualifiedPropertyName(this.lookahead);if(3===r.type&&!h&&"get"===r.value&&d)t="get",l=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod();else if(3===r.type&&!h&&"set"===r.value&&d)t="set",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseSetterMethod();else if(7===r.type&&"*"===r.value&&d)t="init",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),c=!0;else if(i||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!h)!l&&this.isPropertyKey(i,"__proto__")&&(e.value&&this.tolerateError(s.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),o=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))o=h?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),c=!0;else if(3===r.type)if(p=this.finalize(n,new a.Identifier(r.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),u=!0;var f=this.isolateCoverGrammar(this.parseAssignmentExpression);o=this.finalize(n,new a.AssignmentPattern(p,f))}else u=!0,o=p;else this.throwUnexpectedToken(this.nextToken());return this.finalize(n,new a.Property(t,i,l,o,c,u))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],n={value:!1};!this.match("}");)t.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new a.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){r.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n=t.value,i=t.cooked;return this.finalize(e,new a.TemplateElement({raw:n,cooked:i},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n=t.value,r=t.cooked;return this.finalize(e,new a.TemplateElement({raw:n,cooked:r},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],r=this.parseTemplateHead();for(n.push(r);!r.tail;)t.push(this.parseExpression()),r=this.parseTemplateElement(),n.push(r);return this.finalize(e,new a.TemplateLiteral(n,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case l.Syntax.Identifier:case l.Syntax.MemberExpression:case l.Syntax.RestElement:case l.Syntax.AssignmentPattern:break;case l.Syntax.SpreadElement:e.type=l.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case l.Syntax.ArrayExpression:e.type=l.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case l.Syntax.ObjectExpression:for(e.type=l.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case l.Syntax.AssignmentExpression:e.type=l.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:u,params:[],async:!1};else{var t=this.lookahead,n=[];if(this.match("..."))e=this.parseRestElement(n),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:u,params:[e],async:!1};else{var r=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var i=[];for(this.context.isAssignmentTarget=!1,i.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var s=0;s<i.length;s++)this.reinterpretExpressionAsPattern(i[s]);r=!0,e={type:u,params:i,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),i.push(this.parseRestElement(n)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,s=0;s<i.length;s++)this.reinterpretExpressionAsPattern(i[s]);r=!0,e={type:u,params:i,async:!1}}else i.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(r)break}r||(e=this.finalize(this.startNode(t),new a.SequenceExpression(i)))}if(!r){if(this.expect(")"),this.match("=>")&&(e.type===l.Syntax.Identifier&&"yield"===e.name&&(r=!0,e={type:u,params:[e],async:!1}),!r)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===l.Syntax.SequenceExpression)for(s=0;s<e.expressions.length;s++)this.reinterpretExpressionAsPattern(e.expressions[s]);else this.reinterpretExpressionAsPattern(e);var o=e.type===l.Syntax.SequenceExpression?e.expressions:[e];e={type:u,params:o,async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new a.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),n=this.parseIdentifierName();if(r.assert("new"===n.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var i=this.parseIdentifierName();e=new a.MetaProperty(n,i)}else this.throwUnexpectedToken(this.lookahead);else{var s=this.isolateCoverGrammar(this.parseLeftHandSideExpression),o=this.match("(")?this.parseArguments():[];e=new a.NewExpression(s,o),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,n=this.matchContextualKeyword("async"),r=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new a.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var i=this.parseIdentifierName();e=this.finalize(this.startNode(t),new a.StaticMemberExpression(e,i))}else if(this.match("(")){var s=n&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var o=s?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new a.CallExpression(e,o)),s&&this.match("=>")){for(var l=0;l<o.length;++l)this.reinterpretExpressionAsPattern(o[l]);e={type:u,params:o,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),i=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new a.ComputedMemberExpression(e,i));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var c=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new a.TaggedTemplateExpression(e,c))}return this.context.allowIn=r,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new a.Super)},e.prototype.parseLeftHandSideExpression=function(){r.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new a.ComputedMemberExpression(t,n))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),t=this.finalize(e,new a.StaticMemberExpression(t,n));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var i=this.parseTemplateLiteral();t=this.finalize(e,new a.TaggedTemplateExpression(t,i))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var n=this.startNode(t),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(s.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(s.Messages.InvalidLHSInAssignment);var i=!0;e=this.finalize(n,new a.UpdateExpression(r.value,e,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(s.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(s.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=this.nextToken().value;i=!1,e=this.finalize(this.startNode(t),new a.UpdateExpression(o,e,i))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new a.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new a.UnaryExpression(n.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===l.Syntax.Identifier&&this.tolerateError(s.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==l.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=t,r=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new a.BinaryExpression("**",n,r))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,r=this.binaryPrecedence(n);if(r>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var i=[e,this.lookahead],s=t,o=this.isolateCoverGrammar(this.parseExponentiationExpression),l=[s,n.value,o],c=[r];!((r=this.binaryPrecedence(this.lookahead))<=0);){for(;l.length>2&&r<=c[c.length-1];){o=l.pop();var u=l.pop();c.pop(),s=l.pop(),i.pop();var h=this.startNode(i[i.length-1]);l.push(this.finalize(h,new a.BinaryExpression(u,s,o)))}l.push(this.nextToken().value),c.push(r),i.push(this.lookahead),l.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var p=l.length-1;t=l[p];for(var d=i.pop();p>1;){var f=i.pop(),m=d&&d.lineStart;h=this.startNode(f,m),u=l[p-1],t=this.finalize(h,new a.BinaryExpression(u,l[p-2],t)),p-=2,d=f}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=n,this.expect(":");var i=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new a.ConditionalExpression(t,r,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case l.Syntax.Identifier:this.validateParam(e,t,t.name);break;case l.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case l.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case l.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)null!==t.elements[n]&&this.checkPatternParam(e,t.elements[n]);break;case l.Syntax.ObjectPattern:for(n=0;n<t.properties.length;n++)this.checkPatternParam(e,t.properties[n].value)}e.simple=e.simple&&t instanceof a.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,n=[e],r=!1;switch(e.type){case l.Syntax.Identifier:break;case u:n=e.params,r=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var i=0;i<n.length;++i)(a=n[i]).type===l.Syntax.AssignmentPattern?a.right.type===l.Syntax.YieldExpression&&(a.right.argument&&this.throwUnexpectedToken(this.lookahead),a.right.type=l.Syntax.Identifier,a.right.name="yield",delete a.right.argument,delete a.right.delegate):r&&a.type===l.Syntax.Identifier&&"await"===a.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,a),n[i]=a;if(this.context.strict||!this.context.allowYield)for(i=0;i<n.length;++i){var a;(a=n[i]).type===l.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===s.Messages.StrictParamDupe){var o=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(o,t.message)}return{simple:t.simple,params:n,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,n=t;if(e=this.parseConditionalExpression(),3===n.type&&n.lineNumber===this.lookahead.lineNumber&&"async"===n.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var r=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(r),e={type:u,params:[r],async:!0}}if(e.type===u||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var i=e.async,o=this.reinterpretAsCoverFormalsList(e);if(o){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var c=this.context.strict,h=this.context.allowStrictDirective;this.context.allowStrictDirective=o.simple;var p=this.context.allowYield,d=this.context.await;this.context.allowYield=!0,this.context.await=i;var f=this.startNode(t);this.expect("=>");var m=void 0;if(this.match("{")){var g=this.context.allowIn;this.context.allowIn=!0,m=this.parseFunctionSourceElements(),this.context.allowIn=g}else m=this.isolateCoverGrammar(this.parseAssignmentExpression);var y=m.type!==l.Syntax.BlockStatement;this.context.strict&&o.firstRestricted&&this.throwUnexpectedToken(o.firstRestricted,o.message),this.context.strict&&o.stricted&&this.tolerateUnexpectedToken(o.stricted,o.message),e=i?this.finalize(f,new a.AsyncArrowFunctionExpression(o.params,m,y)):this.finalize(f,new a.ArrowFunctionExpression(o.params,m,y)),this.context.strict=c,this.context.allowStrictDirective=h,this.context.allowYield=p,this.context.await=d}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(s.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===l.Syntax.Identifier){var v=e;this.scanner.isRestrictedWord(v.name)&&this.tolerateUnexpectedToken(n,s.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(v.name)&&this.tolerateUnexpectedToken(n,s.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var x=(n=this.nextToken()).value,b=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new a.AssignmentExpression(x,e,b)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new a.SequenceExpression(n))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,s.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,s.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new a.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),r=this.parsePattern([],e);this.context.strict&&r.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(s.Messages.StrictVarName);var i=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(s.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&r.type!==l.Syntax.Identifier||this.match("="))&&(this.expect("="),i=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(n,new a.VariableDeclarator(r,i))},e.prototype.parseBindingList=function(e,t){for(var n=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value;r.assert("let"===n||"const"===n,"Lexical declaration must be either let or const");var i=this.parseBindingList(n,e);return this.consumeSemicolon(),this.finalize(t,new a.VariableDeclaration(i,n))},e.prototype.parseBindingRestElement=function(e,t){var n=this.createNode();this.expect("...");var r=this.parsePattern(e,t);return this.finalize(n,new a.RestElement(r))},e.prototype.parseArrayPattern=function(e,t){var n=this.createNode();this.expect("[");for(var r=[];!this.match("]");)if(this.match(","))this.nextToken(),r.push(null);else{if(this.match("...")){r.push(this.parseBindingRestElement(e,t));break}r.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new a.ArrayPattern(r))},e.prototype.parsePropertyPattern=function(e,t){var n,r,i=this.createNode(),s=!1,o=!1;if(3===this.lookahead.type){var l=this.lookahead;n=this.parseVariableIdentifier();var c=this.finalize(i,new a.Identifier(l.value));if(this.match("=")){e.push(l),o=!0,this.nextToken();var u=this.parseAssignmentExpression();r=this.finalize(this.startNode(l),new a.AssignmentPattern(c,u))}else this.match(":")?(this.expect(":"),r=this.parsePatternWithDefault(e,t)):(e.push(l),o=!0,r=c)}else s=this.match("["),n=this.parseObjectPropertyKey(),this.expect(":"),r=this.parsePatternWithDefault(e,t);return this.finalize(i,new a.Property("init",n,s,r,!1,o))},e.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),r=[];for(this.expect("{");!this.match("}");)r.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new a.ObjectPattern(r))},e.prototype.parsePattern=function(e,t){var n;return this.match("[")?n=this.parseArrayPattern(e,t):this.match("{")?n=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,s.Messages.LetInLexicalBinding),e.push(this.lookahead),n=this.parseVariableIdentifier(t)),n},e.prototype.parsePatternWithDefault=function(e,t){var n=this.lookahead,r=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var i=this.context.allowYield;this.context.allowYield=!0;var s=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=i,r=this.finalize(this.startNode(n),new a.AssignmentPattern(r,s))}return r},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return 4===n.type&&"yield"===n.value?this.context.strict?this.tolerateUnexpectedToken(n,s.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(n):3!==n.type?this.context.strict&&4===n.type&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,s.Messages.StrictReservedWord):(this.context.strict||"let"!==n.value||"var"!==e)&&this.throwUnexpectedToken(n):(this.context.isModule||this.context.await)&&3===n.type&&"await"===n.value&&this.tolerateUnexpectedToken(n),this.finalize(t,new a.Identifier(n.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=this.parsePattern([],"var");this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(s.Messages.StrictVarName);var r=null;return this.match("=")?(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===l.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new a.VariableDeclarator(n,r))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];for(n.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new a.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new a.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(s.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),n=null;this.expectKeyword("if"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseIfClause())),this.finalize(t,new a.IfStatement(r,e,n))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var n=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new a.DoWhileStatement(n,r))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement);else{this.expect(")");var r=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=r}return this.finalize(t,new a.WhileStatement(n,e))},e.prototype.parseForStatement=function(){var e,t,n,r=null,i=null,o=null,c=!0,u=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){r=this.createNode(),this.nextToken();var h=this.context.allowIn;this.context.allowIn=!1;var p=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=h,1===p.length&&this.matchKeyword("in")){var d=p[0];d.init&&(d.id.type===l.Syntax.ArrayPattern||d.id.type===l.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(s.Messages.ForInOfLoopInitializer,"for-in"),r=this.finalize(r,new a.VariableDeclaration(p,"var")),this.nextToken(),e=r,t=this.parseExpression(),r=null}else 1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new a.VariableDeclaration(p,"var")),this.nextToken(),e=r,t=this.parseAssignmentExpression(),r=null,c=!1):(r=this.finalize(r,new a.VariableDeclaration(p,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){r=this.createNode();var f=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(h=this.context.allowIn,this.context.allowIn=!1,p=this.parseBindingList(f,{inFor:!0}),this.context.allowIn=h,1===p.length&&null===p[0].init&&this.matchKeyword("in")?(r=this.finalize(r,new a.VariableDeclaration(p,f)),this.nextToken(),e=r,t=this.parseExpression(),r=null):1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new a.VariableDeclaration(p,f)),this.nextToken(),e=r,t=this.parseAssignmentExpression(),r=null,c=!1):(this.consumeSemicolon(),r=this.finalize(r,new a.VariableDeclaration(p,f)))):(r=this.finalize(r,new a.Identifier(f)),this.nextToken(),e=r,t=this.parseExpression(),r=null)}else{var m=this.lookahead;if(h=this.context.allowIn,this.context.allowIn=!1,r=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=h,this.matchKeyword("in"))this.context.isAssignmentTarget&&r.type!==l.Syntax.AssignmentExpression||this.tolerateError(s.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(r),e=r,t=this.parseExpression(),r=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&r.type!==l.Syntax.AssignmentExpression||this.tolerateError(s.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(r),e=r,t=this.parseAssignmentExpression(),r=null,c=!1;else{if(this.match(",")){for(var g=[r];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));r=this.finalize(this.startNode(m),new a.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(i=this.parseExpression()),this.expect(";"),this.match(")")||(o=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new a.EmptyStatement);else{this.expect(")");var y=this.context.inIteration;this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=y}return void 0===e?this.finalize(u,new a.ForStatement(r,i,o,n)):c?this.finalize(u,new a.ForInStatement(e,t,n)):this.finalize(u,new a.ForOfStatement(e,t,n))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier();t=n;var r="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(s.Messages.UnknownLabel,n.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(s.Messages.IllegalContinue),this.finalize(e,new a.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier(),r="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(s.Messages.UnknownLabel,n.name),t=n}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(s.Messages.IllegalBreak),this.finalize(e,new a.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(s.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(s.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new a.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new a.WithStatement(n,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var n=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)n.push(this.parseStatementListItem());return this.finalize(t,new a.SwitchCase(e,n))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.context.inSwitch;this.context.inSwitch=!0;var r=[],i=!1;for(this.expect("{");!this.match("}");){var o=this.parseSwitchCase();null===o.test&&(i&&this.throwError(s.Messages.MultipleDefaultsInSwitch),i=!0),r.push(o)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new a.SwitchStatement(t,r))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),n=this.parseExpression();if(n.type===l.Syntax.Identifier&&this.match(":")){this.nextToken();var r=n,i="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)&&this.throwError(s.Messages.Redeclaration,"Label",r.name),this.context.labelSet[i]=!0;var o=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),o=this.parseClassDeclaration();else if(this.matchKeyword("function")){var c=this.lookahead,u=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(c,s.Messages.StrictFunction):u.generator&&this.tolerateUnexpectedToken(c,s.Messages.GeneratorInLegacyContext),o=u}else o=this.parseStatement();delete this.context.labelSet[i],e=new a.LabeledStatement(r,o)}else this.consumeSemicolon(),e=new a.ExpressionStatement(n);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(s.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new a.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],n=this.parsePattern(t),r={},i=0;i<t.length;i++){var o="$"+t[i].value;Object.prototype.hasOwnProperty.call(r,o)&&this.tolerateError(s.Messages.DuplicateBinding,t[i].value),r[o]=!0}this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(s.Messages.StrictCatchVariable),this.expect(")");var c=this.parseBlock();return this.finalize(e,new a.CatchClause(n,c))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),n=this.matchKeyword("catch")?this.parseCatchClause():null,r=this.matchKeyword("finally")?this.parseFinallyClause():null;return n||r||this.throwError(s.Messages.NoCatchOrFinally),this.finalize(e,new a.TryStatement(t,n,r))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new a.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),n=this.context.labelSet,r=this.context.inIteration,i=this.context.inSwitch,s=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=n,this.context.inIteration=r,this.context.inSwitch=i,this.context.inFunctionBody=s,this.finalize(e,new a.BlockStatement(t))},e.prototype.validateParam=function(e,t,n){var r="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=s.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=s.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=s.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=s.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=s.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,r,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[r]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var n=this.parsePattern(e);return this.match("=")&&this.throwError(s.Messages.DefaultRestParameter),this.match(")")||this.throwError(s.Messages.ParameterAfterRestParameter),this.finalize(t,new a.RestElement(n))},e.prototype.parseFormalParameter=function(e){for(var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),r=0;r<t.length;r++)this.validateParam(e,t[r],t[r].value);e.simple=e.simple&&n instanceof a.Identifier,e.params.push(n)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var n=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===n.lineNumber&&4===n.type&&"function"===n.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),n=this.matchContextualKeyword("async");n&&this.nextToken(),this.expectKeyword("function");var r,i=!n&&this.match("*");i&&this.nextToken();var o=null,l=null;if(!e||!this.match("(")){var c=this.lookahead;o=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(c.value)&&this.tolerateUnexpectedToken(c,s.Messages.StrictFunctionName):this.scanner.isRestrictedWord(c.value)?(l=c,r=s.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(c.value)&&(l=c,r=s.Messages.StrictReservedWord)}var u=this.context.await,h=this.context.allowYield;this.context.await=n,this.context.allowYield=!i;var p=this.parseFormalParameters(l),d=p.params,f=p.stricted;l=p.firstRestricted,p.message&&(r=p.message);var m=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=p.simple;var y=this.parseFunctionSourceElements();return this.context.strict&&l&&this.throwUnexpectedToken(l,r),this.context.strict&&f&&this.tolerateUnexpectedToken(f,r),this.context.strict=m,this.context.allowStrictDirective=g,this.context.await=u,this.context.allowYield=h,n?this.finalize(t,new a.AsyncFunctionDeclaration(o,d,y)):this.finalize(t,new a.FunctionDeclaration(o,d,y,i))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var n,r=!t&&this.match("*");r&&this.nextToken();var i,o=null,l=this.context.await,c=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!r,!this.match("(")){var u=this.lookahead;o=this.context.strict||r||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(u.value)&&this.tolerateUnexpectedToken(u,s.Messages.StrictFunctionName):this.scanner.isRestrictedWord(u.value)?(i=u,n=s.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(u.value)&&(i=u,n=s.Messages.StrictReservedWord)}var h=this.parseFormalParameters(i),p=h.params,d=h.stricted;i=h.firstRestricted,h.message&&(n=h.message);var f=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=h.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&i&&this.throwUnexpectedToken(i,n),this.context.strict&&d&&this.tolerateUnexpectedToken(d,n),this.context.strict=f,this.context.allowStrictDirective=m,this.context.await=l,this.context.allowYield=c,t?this.finalize(e,new a.AsyncFunctionExpression(o,p,g)):this.finalize(e,new a.FunctionExpression(o,p,g,r))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),n=this.parseExpression(),r=n.type===l.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,r?new a.Directive(n,r):new a.ExpressionStatement(n))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var n=this.lookahead;if(8!==n.type)break;var r=this.parseDirective();t.push(r);var i=r.directive;if("string"!=typeof i)break;"use strict"===i?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,s.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(n,s.Messages.IllegalLanguageModeDirective)):!e&&n.octal&&(e=n)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();n.params.length>0&&this.tolerateError(s.Messages.BadGetterArity);var r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,n.params,r,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();1!==n.params.length?this.tolerateError(s.Messages.BadSetterArity):n.params[0]instanceof a.RestElement&&this.tolerateError(s.Messages.BadSetterRestParameter);var r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,n.params,r,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();this.context.allowYield=!1;var r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new a.FunctionExpression(null,n.params,r,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,n=!1;if(!this.hasLineTerminator){var r=this.context.allowYield;this.context.allowYield=!1,(n=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=r}return this.finalize(e,new a.YieldExpression(t,n))},e.prototype.parseClassElement=function(e){var t=this.lookahead,n=this.createNode(),r="",i=null,o=null,l=!1,c=!1,u=!1,h=!1;if(this.match("*"))this.nextToken();else if(l=this.match("["),"static"===(i=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,u=!0,l=this.match("["),this.match("*")?this.nextToken():i=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var p=this.lookahead.value;":"!==p&&"("!==p&&"*"!==p&&(h=!0,t=this.lookahead,i=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,s.Messages.ConstructorIsAsync))}var d=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&d?(r="get",l=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod()):"set"===t.value&&d&&(r="set",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseSetterMethod()):7===t.type&&"*"===t.value&&d&&(r="init",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),c=!0),!r&&i&&this.match("(")&&(r="init",o=h?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),c=!0),r||this.throwUnexpectedToken(this.lookahead),"init"===r&&(r="method"),l||(u&&this.isPropertyKey(i,"prototype")&&this.throwUnexpectedToken(t,s.Messages.StaticPrototype),!u&&this.isPropertyKey(i,"constructor")&&(("method"!==r||!c||o&&o.generator)&&this.throwUnexpectedToken(t,s.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,s.Messages.DuplicateConstructor):e.value=!0,r="constructor")),this.finalize(n,new a.MethodDefinition(i,l,o,r,u))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new a.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),i=null;this.matchKeyword("extends")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var s=this.parseClassBody();return this.context.strict=n,this.finalize(t,new a.ClassDeclaration(r,i,s))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=3===this.lookahead.type?this.parseVariableIdentifier():null,r=null;this.matchKeyword("extends")&&(this.nextToken(),r=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=t,this.finalize(e,new a.ClassExpression(n,r,i))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new a.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new a.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(s.Messages.InvalidModuleSpecifier);var t=this.nextToken(),n=this.getTokenRaw(t);return this.finalize(e,new a.Literal(t.value,n))},e.prototype.parseImportSpecifier=function(){var e,t,n=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new a.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new a.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(s.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new a.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(s.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var n=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?n=n.concat(this.parseNamedImports()):this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(n.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.match("{")?n=n.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var r=this.lookahead.value?s.Messages.UnexpectedToken:s.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new a.ImportDeclaration(n,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new a.ExportSpecifier(t,n))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(s.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var n=this.parseFunctionDeclaration(!0);e=this.finalize(t,new a.ExportDefaultDeclaration(n))}else this.matchKeyword("class")?(n=this.parseClassDeclaration(!0),e=this.finalize(t,new a.ExportDefaultDeclaration(n))):this.matchContextualKeyword("async")?(n=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new a.ExportDefaultDeclaration(n))):(this.matchContextualKeyword("from")&&this.throwError(s.Messages.UnexpectedToken,this.lookahead.value),n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new a.ExportDefaultDeclaration(n)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var r=this.lookahead.value?s.Messages.UnexpectedToken:s.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken();var i=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new a.ExportAllDeclaration(i))}else if(4===this.lookahead.type){switch(n=void 0,this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new a.ExportNamedDeclaration(n,[],null))}else if(this.matchAsyncFunction())n=this.parseFunctionDeclaration(),e=this.finalize(t,new a.ExportNamedDeclaration(n,[],null));else{var o=[],l=null,c=!1;for(this.expect("{");!this.match("}");)c=c||this.matchKeyword("default"),o.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),l=this.parseModuleSpecifier(),this.consumeSemicolon()):c?(r=this.lookahead.value?s.Messages.UnexpectedToken:s.Messages.MissingFromClause,this.throwError(r,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new a.ExportNamedDeclaration(null,o,l))}return e},e}();t.Parser=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var n=new Error(e);try{throw n}catch(e){Object.create&&Object.defineProperty&&(n=Object.create(e),Object.defineProperty(n,"column",{value:t}))}return n},e.prototype.createError=function(e,t,n,r){var i="Line "+t+": "+r,s=this.constructError(i,n);return s.index=e,s.lineNumber=t,s.description=r,s},e.prototype.throwError=function(e,t,n,r){throw this.createError(e,t,n,r)},e.prototype.tolerateError=function(e,t,n,r){var i=this.createError(e,t,n,r);if(!this.tolerant)throw i;this.recordError(i)},e}();t.ErrorHandler=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(4),s=n(11);function a(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function o(e){return"01234567".indexOf(e)}var l=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=s.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=s.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,n,r=[];for(this.trackComment&&(r=[],t=this.index-e,n={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var s=this.source.charCodeAt(this.index);if(++this.index,i.Character.isLineTerminator(s)){if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart-1};var a={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:n};r.push(a)}return 13===s&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,r}}return this.trackComment&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},a={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:n},r.push(a)),r},e.prototype.skipMultiLineComment=function(){var e,t,n=[];for(this.trackComment&&(n=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var r=this.source.charCodeAt(this.index);if(i.Character.isLineTerminator(r))13===r&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===r){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var s={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};n.push(s)}return n}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},s={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},n.push(s)),this.tolerateUnexpectedToken(),n},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(i.Character.isWhiteSpace(n))++this.index;else if(i.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===n)if(47===(n=this.source.charCodeAt(this.index+1))){this.index+=2;var r=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(r)),t=!0}else{if(42!==n)break;this.index+=2,r=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(r))}else if(t&&45===n){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,r=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(r))}else{if(60!==n||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,r=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(r))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var n=this.source.charCodeAt(e+1);n>=56320&&n<=57343&&(t=1024*(t-55296)+n-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,n=0,r=0;r<t;++r){if(this.eof()||!i.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;n=16*n+a(this.source[this.index++])}return String.fromCharCode(n)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],i.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+a(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),i.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!i.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),n=i.Character.fromCodePoint(t);for(this.index+=n.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&i.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),n=e);!this.eof()&&(t=this.codePointAt(this.index),i.Character.isIdentifierPart(t));)n+=e=i.Character.fromCodePoint(t),this.index+=e.length,92===t&&(n=n.substr(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&i.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),n+=e);return n},e.prototype.octalToDecimal=function(e){var t="0"!==e,n=o(e);return!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+o(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+o(this.source[this.index++]))),{code:n,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,n=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===n.length?3:this.isKeyword(n)?4:"null"===n?5:"true"===n||"false"===n?1:3)&&t+n.length!==this.index){var r=this.index;this.index=t,this.tolerateUnexpectedToken(s.Messages.InvalidEscapedReservedWord),this.index=r}return{type:e,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&i.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,n="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)n+=this.source[this.index++];return 0===n.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(i.Character.isIdentifierStart(t)||i.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var n="",r=!1;for(i.Character.isOctalDigit(e.charCodeAt(0))?(r=!0,n="0"+this.source[this.index++]):++this.index;!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];return r||0!==n.length||this.throwUnexpectedToken(),(i.Character.isIdentifierStart(this.source.charCodeAt(this.index))||i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,8),octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!i.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];r.assert(i.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==t){if(n=this.source[this.index++],t=this.source[this.index],"0"===n){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&i.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(n+=this.source[this.index++];i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(n+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(n+=this.source[this.index++]),i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken();return i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];r.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var n=!1,a="";!this.eof();){var o=this.source[this.index++];if(o===t){t="";break}if("\\"===o)if((o=this.source[this.index++])&&i.Character.isLineTerminator(o.charCodeAt(0)))++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(o){case"u":if("{"===this.source[this.index])++this.index,a+=this.scanUnicodeCodePointEscape();else{var l=this.scanHexEscape(o);null===l&&this.throwUnexpectedToken(),a+=l}break;case"x":var c=this.scanHexEscape(o);null===c&&this.throwUnexpectedToken(s.Messages.InvalidHexEscapeSequence),a+=c;break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;case"8":case"9":a+=o,this.tolerateUnexpectedToken();break;default:if(o&&i.Character.isOctalDigit(o.charCodeAt(0))){var u=this.octalToDecimal(o);n=u.octal||n,a+=String.fromCharCode(u.code)}else a+=o}else{if(i.Character.isLineTerminator(o.charCodeAt(0)))break;a+=o}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:a,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,r="`"===this.source[n],a=!1,o=2;for(++this.index;!this.eof();){var l=this.source[this.index++];if("`"===l){o=1,a=!0,t=!0;break}if("$"===l){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=l}else if("\\"===l)if(l=this.source[this.index++],i.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var c=this.index,u=this.scanHexEscape(l);null!==u?e+=u:(this.index=c,e+=l)}break;case"x":var h=this.scanHexEscape(l);null===h&&this.throwUnexpectedToken(s.Messages.InvalidHexEscapeSequence),e+=h;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===l?(i.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(s.Messages.TemplateOctalLiteral),e+="\0"):i.Character.isOctalDigit(l.charCodeAt(0))?this.throwUnexpectedToken(s.Messages.TemplateOctalLiteral):e+=l}else i.Character.isLineTerminator(l.charCodeAt(0))?(++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=l}return t||this.throwUnexpectedToken(),r||this.curlyStack.pop(),{type:10,value:this.source.slice(n+1,this.index-o),cooked:e,head:r,tail:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},e.prototype.testRegExp=function(e,t){var n=e,r=this;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,n){var i=parseInt(t||n,16);return i>1114111&&r.throwUnexpectedToken(s.Messages.InvalidRegExp),i<=65535?String.fromCharCode(i):"￿"})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(n)}catch(e){this.throwUnexpectedToken(s.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];r.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],n=!1,a=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],i.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(s.Messages.UnterminatedRegExp),t+=e;else if(i.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(s.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){a=!0;break}"["===e&&(n=!0)}return a||this.throwUnexpectedToken(s.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!i.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var n=this.index,r=this.scanHexEscape("u");if(null!==r)for(e+=r;n<this.index;++n)this.source[n];else this.index=n,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:n,regex:this.testRegExp(t,n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return i.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?i.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():i.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&i.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(12),s=n(13),a=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var n=this.values[this.paren-1];t="if"===n||"while"===n||"for"===n||"with"===n;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(r=this.values[this.curly-4])&&!this.beforeFunctionExpression(r);else if("function"===this.values[this.curly-4]){var r;t=!(r=this.values[this.curly-5])||!this.beforeFunctionExpression(r)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),o=function(){function e(e,t){this.errorHandler=new r.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new a}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var n=e[t],r=this.scanner.source.slice(n.slice[0],n.slice[1]),i={type:n.multiLine?"BlockComment":"LineComment",value:r};this.trackRange&&(i.range=n.range),this.trackLoc&&(i.loc=n.loc),this.buffer.push(i)}if(!this.scanner.eof()){var a=void 0;this.trackLoc&&(a={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var o="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(o);var l={type:s.TokenName[o.type],value:this.scanner.source.slice(o.start,o.end)};if(this.trackRange&&(l.range=[o.start,o.end]),this.trackLoc&&(a.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=a),9===o.type){var c=o.pattern,u=o.flags;l.regex={pattern:c,flags:u}}this.buffer.push(l)}}return this.buffer.shift()},e}();t.Tokenizer=o}])},e.exports=t()},9592:function(e){var t=function(){var e,t=!0,n={},r=function(){"use strict";var e,t,n,r,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},a=function(r){return r&&r!==t&&s("Expected '"+r+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},o=function(){var e,n="";for("-"===t&&(n="-",a("-"));t>="0"&&t<="9";)n+=t,a();if("."===t)for(n+=".";a()&&t>="0"&&t<="9";)n+=t;if("e"===t||"E"===t)for(n+=t,a(),"-"!==t&&"+"!==t||(n+=t,a());t>="0"&&t<="9";)n+=t,a();if(e=+n,isFinite(e))return e;s("Bad number")},l=function(){var e,n,r,o="";if('"'===t)for(;a();){if('"'===t)return a(),o;if("\\"===t)if(a(),"u"===t){for(r=0,n=0;n<4&&(e=parseInt(a(),16),isFinite(e));n+=1)r=16*r+e;o+=String.fromCharCode(r)}else{if("string"!=typeof i[t])break;o+=i[t]}else o+=t}s("Bad string")},c=function(){for(;t&&t<=" ";)a()};return r=function(){switch(c(),t){case"{":return function(){var e,n={};if("{"===t){if(a("{"),c(),"}"===t)return a("}"),n;for(;t;){if(e=l(),c(),a(":"),Object.hasOwnProperty.call(n,e)&&s("Duplicate key '"+e+"'"),n[e]=r(),c(),"}"===t)return a("}"),n;a(","),c()}}s("Bad object")}();case"[":return function(){var e=[];if("["===t){if(a("["),c(),"]"===t)return a("]"),e;for(;t;){if(e.push(r()),c(),"]"===t)return a("]"),e;a(","),c()}}s("Bad array")}();case'"':return l();case"-":return o();default:return t>="0"&&t<="9"?o():function(){switch(t){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}s("Unexpected '"+t+"'")}()}},function(i,a){var o;return n=i,e=0,t=" ",o=r(),c(),t&&s("Syntax error"),"function"==typeof a?function e(t,n){var r,i,s=t[n];if(s&&"object"==typeof s)for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(void 0!==(i=e(s,r))?s[r]=i:delete s[r]);return a.call(t,n,s)}({"":o},""):o}}(),i=((e={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,n,r,i,s,a){var o=s.length-1;switch(i){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=s[o-1];case 13:this.$={};break;case 14:case 19:this.$=s[o-1];break;case 15:this.$=[s[o-2],s[o]];break;case 16:this.$={},this.$[s[o][0]]=s[o][1];break;case 17:this.$=s[o-2],s[o-2][s[o][0]]=s[o][1];break;case 18:this.$=[];break;case 20:this.$=[s[o]];break;case 21:this.$=s[o-2],s[o-2].push(s[o])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],s=this.table,a="",o=0,l=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;function h(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}i.push(u),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,f,m,g,y,v,x,b,w={};;){if(f=n[n.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null==p&&(p=h()),m=s[f]&&s[f][p]),void 0===m||!m.length||!m[0]){if(!c){for(y in b=[],s[f])this.terminals_[y]&&y>2&&b.push("'"+this.terminals_[y]+"'");var S="";S=this.lexer.showPosition?"Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+this.terminals_[p]+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:b})}if(3==c){if(1==p)throw new Error(S||"Parsing halted.");l=this.lexer.yyleng,a=this.lexer.yytext,o=this.lexer.yylineno,u=this.lexer.yylloc,p=h()}for(;!(2..toString()in s[f]);){if(0==f)throw new Error(S||"Parsing halted.");1,n.length=n.length-2,r.length=r.length-1,i.length=i.length-1,f=n[n.length-1]}d=p,p=2,m=s[f=n[n.length-1]]&&s[f][2],c=3}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+p);switch(m[0]){case 1:n.push(p),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(m[1]),p=null,d?(p=d,d=null):(l=this.lexer.yyleng,a=this.lexer.yytext,o=this.lexer.yylineno,u=this.lexer.yylloc,c>0&&c--);break;case 2:if(v=this.productions_[m[1]][1],w.$=r[r.length-v],w._$={first_line:i[i.length-(v||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(v||1)].first_column,last_column:i[i.length-1].last_column},void 0!==(g=this.performAction.call(w,a,l,o,this.yy,m[1],r,i)))return g;v&&(n=n.slice(0,-1*v*2),r=r.slice(0,-1*v),i=i.slice(0,-1*v)),n.push(this.productions_[m[1]][0]),r.push(w.$),i.push(w._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(e,t){if(!this.yy.parseError)throw new Error(e);this.yy.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e,e.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},less:function(e){this._input=this.match.slice(e)+this._input},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;a<s.length&&(!(n=this._input.match(this.rules[s[a]]))||t&&!(n[0].length>t[0].length)||(t=n,r=a,this.options.flex));a++);return t?((i=t[0].match(/\n.*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},e),s=i.parse;return i.parse=function(e){var n=s.call(i,e),a=void 0===r?t("./doug-json-parse"):r;try{a(e)}catch(t){if(/Duplicate key|Bad string|Unexpected/.test(t.message)){var o=e.substring(0,t.at).split("\n"),l=o.length,c=o[l-1].length-1;throw this.parseError(t.message,{line:l,col:c,message:t.message.replace(/./,(function(e){return e.toLowerCase()}))}),SyntaxError(t.message+" on line "+l)}}return n},void 0!==n&&(n.parser=i,n.parse=function(){return i.parse.apply(i,arguments)},n.main=function(e){if(!e[1])throw new Error("Usage: "+e[0]+" FILE");if("undefined"!=typeof process)var r=t("fs").readFileSync(t("path").join(process.cwd(),e[1]),"utf8");else r=t("file").path(t("file").cwd()).join(e[1]).read({charset:"utf-8"});return n.parser.parse(r)},!1===t.main&&n.main("undefined"!=typeof process?process.argv.slice(1):t("system").args)),n}();e.exports&&(e.exports=t)},4448:function(e,t,n){"use strict";var r=n(7294),i=n(3840);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(d,e)&&(p.test(e)?f[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),M=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function I(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,F=Object.assign;function B(e){if(void 0===O)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function j(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return V(e.type,!1);case 11:return V(e.type.render,!1);case 1:return V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(e){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Z(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Ee=null;function Ce(e){if(e=xi(e)){if("function"!=typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Te(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Me(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function ke(){}var Pe=!1;function Le(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ae(e,t,n)}finally{Pe=!1,(null!==_e||null!==Ee)&&(ke(),Me())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Ne=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Ne=!1}function Ie(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Oe=!1,Fe=null,Be=!1,Ue=null,Ve={onError:function(e){Oe=!0,Fe=e}};function je(e,t,n,r,i,s,a,o,l){Oe=!1,Fe=null,Ie.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null,at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2,ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!=(s&=a)&&(r=ht(s))}else 0!=(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wt,St,_t,Et,Ct,Tt=!1,Mt=[],At=null,kt=null,Pt=null,Lt=new Map,Dt=new Map,Nt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ot(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=xi(t))&&St(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Bt(e)&&n.delete(t)}function Vt(){Tt=!1,null!==At&&Bt(At)&&(At=null),null!==kt&&Bt(kt)&&(kt=null),null!==Pt&&Bt(Pt)&&(Pt=null),Lt.forEach(Ut),Dt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return jt(t,e)}if(0<Mt.length){jt(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&jt(At,e),null!==kt&&jt(kt,e),null!==Pt&&jt(Pt,e),Lt.forEach(t),Dt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Nt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var i=xt,s=Ht.transition;Ht.transition=null;try{xt=1,Kt(e,t,n,r)}finally{xt=i,Ht.transition=s}}function Xt(e,t,n,r){var i=xt,s=Ht.transition;Ht.transition=null;try{xt=4,Kt(e,t,n,r)}finally{xt=i,Ht.transition=s}}function Kt(e,t,n,r){if(Wt){var i=Jt(e,t,n,r);if(null===i)Wr(e,t,r,qt,n),It(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Ot(At,e,t,n,r,i),!0;case"dragenter":return kt=Ot(kt,e,t,n,r,i),!0;case"mouseover":return Pt=Ot(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Lt.set(s,Ot(Lt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Ot(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&wt(s),null===(s=Jt(e,t,n,r))&&Wr(e,t,r,qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function Jt(e,t,n,r){if(qt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Zt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),pn=sn(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(dn),mn=sn(F({},dn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),bn=sn(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Cn(){return En}var Tn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=sn(Tn),An=sn(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Ln),Nn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,In=null;u&&"documentMode"in document&&(In=document.documentMode);var On=u&&"TextEvent"in window&&!In,Fn=u&&(!Rn||In&&8<In&&11>=In),Bn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1,Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Xr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Kn=null;function qn(e){Br(e,0)}function Jn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Zn;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"==typeof er.oninput}Zn=Qn}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),Kn=Xn=null)}function nr(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];Gn(t,Kn,e,we(e)),Le(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function sr(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(or(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==q(r)||(r="selectionStart"in(r=gr)&&dr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Xr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Cr(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Cr("animationend"),Mr=Cr("animationiteration"),Ar=Cr("animationstart"),kr=Cr("transitionend"),Pr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Lr.length;Nr++){var Rr=Lr[Nr];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Mr,"onAnimationIteration"),Dr(Ar,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(kr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(je.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Fe;Oe=!1,Fe=null,Be||(Be=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,c),s=l}}}if(Be)throw e=Ue,Be=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Vr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Xt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Le((function(){var r=s,i=we(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Tr:case Mr:case Ar:l=yn;break;case kr:l=Pn;break;case"scroll":l=pn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!=(4&t),h=!u&&"scroll"===e,p=u?null!==o?o+"Capture":null:o;u=[];for(var d,f=r;null!==f;){var m=(d=f).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==p&&null!=(m=De(f,p))&&u.push(Gr(f,m,d))),h)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==l?o:bi(l),d=null==c?o:bi(c),(o=new u(m,f+"leave",l,n,i)).target=h,o.relatedTarget=d,m=null,vi(i)===r&&((u=new u(p,f+"enter",c,n,i)).target=d,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(p=c,f=0,d=u=l;d;d=Kr(d))f++;for(d=0,m=p;m;m=Kr(m))d++;for(;0<f-d;)u=Kr(u),f--;for(;0<d-f;)p=Kr(p),d--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Kr(u),p=Kr(p)}u=null}else u=null;null!==l&&qr(a,o,l,u,!1),null!==c&&null!==h&&qr(a,h,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Wn(o))if($n)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else zn?Vn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==x?"onCompositionEnd"===x&&zn&&(v=en()):(Zt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Xr(r,x)).length&&(x=new bn(x,e,null,n,i),a.push({event:x,listeners:y}),(v||null!==(v=jn(n)))&&(x.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Qt=Zt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Xr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v)}Br(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=De(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=De(n,s))&&a.unshift(Gr(n,l,o)):i||null!=(l=De(n,s))&&a.push(Gr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"==typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,ai="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,di="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[pi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[pi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[di]||null}var Si=[],_i=-1;function Ei(e){return{current:e}}function Ci(e){0>_i||(e.current=Si[_i],Si[_i]=null,_i--)}function Ti(e,t){_i++,Si[_i]=e.current,e.current=t}var Mi={},Ai=Ei(Mi),ki=Ei(!1),Pi=Mi;function Li(e,t){var n=e.type.contextTypes;if(!n)return Mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!=e.childContextTypes}function Ni(){Ci(ki),Ci(Ai)}function Ri(e,t,n){if(Ai.current!==Mi)throw Error(s(168));Ti(Ai,t),Ti(ki,n)}function Ii(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return F({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,Pi=Ai.current,Ti(Ai,e),Ti(ki,ki.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ii(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ci(ki),Ci(Ai),Ti(Ai,e)):Ci(ki),Ti(ki,n)}var Bi=null,Ui=!1,Vi=!1;function ji(e){null===Bi?Bi=[e]:Bi.push(e)}function zi(){if(!Vi&&null!==Bi){Vi=!0;var e=0,t=xt;try{var n=Bi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Ui=!1}catch(t){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ke(Qe,zi),t}finally{xt=t,Vi=!1}}return null}var Hi=[],Wi=0,Gi=null,Xi=0,Ki=[],qi=0,Ji=null,Yi=1,$i="";function Zi(e,t){Hi[Wi++]=Xi,Hi[Wi++]=Gi,Gi=e,Xi=t}function Qi(e,t,n){Ki[qi++]=Yi,Ki[qi++]=$i,Ki[qi++]=Ji,Ji=e;var r=Yi;e=$i;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,$i=s+e}else Yi=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Zi(e,1),Qi(e,1,0))}function ts(e){for(;e===Gi;)Gi=Hi[--Wi],Hi[Wi]=null,Xi=Hi[--Wi],Hi[Wi]=null;for(;e===Ji;)Ji=Ki[--qi],Ki[qi]=null,$i=Ki[--qi],Ki[qi]=null,Yi=Ki[--qi],Ki[qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ps(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=rs;e;)e=ci(e.nextSibling)}function ds(){rs=ns=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ei(null),vs=null,xs=null,bs=null;function ws(){bs=xs=vs=null}function Ss(e){var t=ys.current;Ci(ys),e._currentValue=t}function _s(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){vs=e,bs=xs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===xs){if(null===vs)throw Error(s(308));xs=e,vs.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var Ts=null;function Ms(e){null===Ts?Ts=[e]:Ts.push(e)}function As(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ms(t)):(n.next=i.next,i.next=n),t.interleaved=n,ks(e,r)}function ks(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ns(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ks(e,n)}return null===(i=r.interleaved)?(t.next=t,Ms(r)):(t.next=i.next,i.next=t),r.interleaved=t,ks(e,n)}function Is(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Os(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ps=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&(o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var p=o.lane,d=o.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(p=t,d=n,m.tag){case 1:if("function"==typeof(f=m.payload)){h=f.call(d,h,p);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=m.payload)?f.call(d,h,p):f))break e;h=F({},h,p);break e;case 2:Ps=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[o]:p.push(o))}else d={eventTime:d,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=d,l=h):u=u.next=d,a|=p;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=h}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function Vs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var js={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ns(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(rc(t,e,i,r),Is(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ns(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Rs(e,s,i))&&(rc(t,e,i,r),Is(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ns(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Rs(e,i,r))&&(rc(t,e,r,n),Is(t,e,r))}};function zs(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,s))}function Hs(e,t,n){var r=!1,i=Mi,s=t.contextType;return"object"==typeof s&&null!==s?s=Cs(s):(i=Di(t)?Pi:Ai.current,s=(r=null!=(r=t.contextTypes))?Li(e,i):Mi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=js,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&js.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Ls(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Cs(s):(s=Di(t)?Pi:Ai.current,i.context=Li(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&js.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Xs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qs(e){return(0,e._init)(e._payload)}function Js(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===D&&qs(s)===t.type)?((r=i(t,n.props)).ref=Xs(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=Xs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=Xs(e,null,t),n.return=e,n;case S:return(t=Uc(t,e.mode,n)).return=e,t;case D:return p(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||I(n))return null!==i?null:h(e,t,n,r,null);Ks(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||I(r))return h(t,e=e.get(n)||null,r,i,null);Ks(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=d(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(i,h),is&&Zi(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=p(i,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Zi(i,m),c}for(h=r(i,h);m<o.length;m++)null!==(g=f(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Zi(i,m),c}function g(i,o,l,c){var u=I(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var x=d(i,m,v.value,c);if(null===x){null===m&&(m=y);break}e&&m&&null===x.alternate&&t(i,m),o=a(x,o,g),null===h?u=x:h.sibling=x,h=x,m=y}if(v.done)return n(i,m),is&&Zi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=p(i,v.value,c))&&(o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return is&&Zi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Zi(i,g),u}return function e(r,s,a,l){if("object"==typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===D&&qs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=Xs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===_?((s=Oc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Ic(a.type,a.key,a.props,null,r.mode,l)).ref=Xs(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(a,r.mode,l)).return=r,r=s}return o(r);case D:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(I(a))return g(r,s,a,l);Ks(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Bc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Ys=Js(!0),$s=Js(!1),Zs={},Qs=Ei(Zs),ea=Ei(Zs),ta=Ei(Zs);function na(e){if(e===Zs)throw Error(s(174));return e}function ra(e,t){switch(Ti(ta,t),Ti(ea,e),Ti(Qs,Zs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Qs),Ti(Qs,t)}function ia(){Ci(Qs),Ci(ea),Ci(ta)}function sa(e){na(ta.current);var t=na(Qs.current),n=le(t,e.type);t!==n&&(Ti(ea,e),Ti(Qs,n))}function aa(e){ea.current===e&&(Ci(Qs),Ci(ea))}var oa=Ei(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function ua(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var ha=b.ReactCurrentDispatcher,pa=b.ReactCurrentBatchConfig,da=0,fa=null,ma=null,ga=null,ya=!1,va=!1,xa=0,ba=0;function wa(){throw Error(s(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function _a(e,t,n,r,i,a){if(da=a,fa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ao:oo,e=n(r,i),va){a=0;do{if(va=!1,xa=0,25<=a)throw Error(s(301));a+=1,ga=ma=null,t.updateQueue=null,ha.current=lo,e=n(r,i)}while(va)}if(ha.current=so,t=null!==ma&&null!==ma.next,da=0,ga=ma=fa=null,ya=!1,t)throw Error(s(300));return e}function Ea(){var e=0!==xa;return xa=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?fa.memoizedState=ga=e:ga=ga.next=e,ga}function Ta(){if(null===ma){var e=fa.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?fa.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?fa.memoizedState=ga=e:ga=ga.next=e}return ga}function Ma(e,t){return"function"==typeof t?t(e):t}function Aa(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((da&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=p,o=r):c=c.next=p,fa.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,fa.lanes|=a,Fl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=Ta(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Pa(){}function La(e,t){var n=fa,r=Ta(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Ha(Ra.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Ba(9,Na.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!=(30&da)||Da(n,t,i)}return i}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Oa(e)}function Ra(e,t,n){return n((function(){Ia(t)&&Oa(e)}))}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(e){return!0}}function Oa(e){var t=ks(e,1);null!==t&&rc(t,e,1,-1)}function Fa(e){var t=Ca();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,fa,e),[t.memoizedState,e]}function Ba(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ua(){return Ta().memoizedState}function Va(e,t,n,r){var i=Ca();fa.flags|=e,i.memoizedState=Ba(1|t,n,void 0,void 0===r?null:r)}function ja(e,t,n,r){var i=Ta();r=void 0===r?null:r;var s=void 0;if(null!==ma){var a=ma.memoizedState;if(s=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=Ba(t,n,s,r))}fa.flags|=e,i.memoizedState=Ba(1|t,n,s,r)}function za(e,t){return Va(8390656,8,e,t)}function Ha(e,t){return ja(2048,8,e,t)}function Wa(e,t){return ja(4,2,e,t)}function Ga(e,t){return ja(4,4,e,t)}function Xa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ka(e,t,n){return n=null!=n?n.concat([e]):null,ja(4,4,Xa.bind(null,t,e),n)}function qa(){}function Ja(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ya(e,t){var n=Ta();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0==(21&da)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),fa.lanes|=n,Fl|=n,e.baseState=!0),t)}function Za(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{xt=n,pa.transition=r}}function Qa(){return Ta().memoizedState}function eo(e,t,n){var r=nc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e)?ro(t,n):null!==(n=As(e,t,n,r))&&(rc(n,e,r,tc()),io(n,t,r))}function to(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ms(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=As(e,t,i,r))&&(rc(n,e,r,i=tc()),io(n,t,r))}}function no(e){var t=e.alternate;return e===fa||null!==t&&t===fa}function ro(e,t){va=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var so={readContext:Cs,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ao={readContext:Cs,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:za,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Va(4194308,4,Xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,fa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:Fa,useDebugValue:qa,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=Za.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fa,i=Ca();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!=(30&da)||Da(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,za(Ra.bind(null,r,a,e),[e]),r.flags|=2048,Ba(9,Na.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Pl.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=xa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ba++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Cs,useCallback:Ja,useContext:Cs,useEffect:Ha,useImperativeHandle:Ka,useInsertionEffect:Wa,useLayoutEffect:Ga,useMemo:Ya,useReducer:Aa,useRef:Ua,useState:function(){return Aa(Ma)},useDebugValue:qa,useDeferredValue:function(e){return $a(Ta(),ma.memoizedState,e)},useTransition:function(){return[Aa(Ma)[0],Ta().memoizedState]},useMutableSource:Pa,useSyncExternalStore:La,useId:Qa,unstable_isNewReconciler:!1},lo={readContext:Cs,useCallback:Ja,useContext:Cs,useEffect:Ha,useImperativeHandle:Ka,useInsertionEffect:Wa,useLayoutEffect:Ga,useMemo:Ya,useReducer:ka,useRef:Ua,useState:function(){return ka(Ma)},useDebugValue:qa,useDeferredValue:function(e){var t=Ta();return null===ma?t.memoizedState=e:$a(t,ma.memoizedState,e)},useTransition:function(){return[ka(Ma)[0],Ta().memoizedState]},useMutableSource:Pa,useSyncExternalStore:La,useId:Qa,unstable_isNewReconciler:!1};function co(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var po="function"==typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Ns(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Xl=r),ho(0,t)},n}function mo(e,t,n){(n=Ns(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!=typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ns(-1,1)).tag=2,Rs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xo=b.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?$s(t,null,n,r):Ys(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=_a(e,t,n,r,s,i),n=Ea(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function _o(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Nc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Eo(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Go(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,Go(e,t,i);0!=(131072&e.flags)&&(bo=!0)}}return Mo(e,t,n,r,i)}function Co(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rl,Nl),Nl|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Rl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Rl,Nl),Nl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Rl,Nl),Nl|=r;return wo(e,t,i,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Mo(e,t,n,r,i){var s=Di(n)?Pi:Ai.current;return s=Li(t,s),Es(t,i),n=_a(e,t,n,r,s,i),r=Ea(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function Ao(e,t,n,r,i){if(Di(n)){var s=!0;Oi(t)}else s=!1;if(Es(t,i),null===t.stateNode)Wo(e,t),Hs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?Cs(c):Li(t,c=Di(n)?Pi:Ai.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&Ws(t,a,r,c),Ps=!1;var p=t.memoizedState;a.state=p,Fs(t,r,a,i),l=t.memoizedState,o!==r||p!==l||ki.current||Ps?("function"==typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(o=Ps||zs(t,n,o,r,p,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ds(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:gs(t.type,o),a.props=c,h=t.pendingProps,p=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Cs(l):Li(t,l=Di(n)?Pi:Ai.current);var d=n.getDerivedStateFromProps;(u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==h||p!==l)&&Ws(t,a,r,l),Ps=!1,p=t.memoizedState,a.state=p,Fs(t,r,a,i);var f=t.memoizedState;o!==h||p!==f||ki.current||Ps?("function"==typeof d&&(Vs(t,n,d,r),f=t.memoizedState),(c=Ps||zs(t,n,c,r,p,f,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return ko(e,t,n,r,s,i)}function ko(e,t,n,r,i,s){To(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Go(e,t,s);r=t.stateNode,xo.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ra(e,t.containerInfo)}function Lo(e,t,n,r,i){return ds(),fs(i),t.flags|=256,wo(e,t,n,r),t.child}var Do,No,Ro,Io,Oo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bo(e,t,n){var r,i=t.pendingProps,a=oa.current,o=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(oa,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Oo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!=(1&t.mode)&&Ys(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Oo,a);if(0==(1&t.mode))return Vo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=uo(a=Error(s(419)),r,void 0))}if(l=0!=(o&e.childLanes),bo||l){if(null!==(r=Pl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,ks(e,i),rc(r,e,i,-1))}return gc(),Vo(e,t,o,r=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[qi++]=Yi,Ki[qi++]=$i,Ki[qi++]=Ji,Yi=e.id,$i=e.overflow,Ji=t),(t=Uo(t,r.children)).flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Rc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Rc(o,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&fs(r),Ys(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_s(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ho(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!=(2&(r=oa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jo(e,n,t);else if(19===e.tag)jo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(oa,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Go(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Di(t.type)&&Ni(),Ko(t),null;case 3:return r=t.stateNode,ia(),Ci(ki),Ci(Ai),ua(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),No(e,t),Ko(t),null;case 5:aa(t);var i=na(ta.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=na(Qs.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[pi]=t,r[di]=a,e=0!=(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Ir.length;i++)Ur(Ir[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":X(r),Q(r,a,!0);break;case"textarea":X(r),ae(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[di]=r,Do(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)Ur(Ir[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"==typeof u?("textarea"!==n||""!==u)&&pe(e,u):"number"==typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":X(e),Q(e,r,!1);break;case"textarea":X(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=na(ta.current),na(Qs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!=(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ci(oa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!=(1&t.mode)&&0==(128&t.flags))ps(),ds(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[pi]=t}else ds(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(oc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&oa.current)?0===Il&&(Il=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return ia(),No(e,t),null===e&&zr(t.stateNode.containerInfo),Ko(t),null;case 10:return Ss(t.type._context),Ko(t),null;case 19:if(Ci(oa),null===(a=t.memoizedState))return Ko(t),null;if(r=0!=(128&t.flags),null===(l=a.rendering))if(r)Xo(a,!1);else{if(0!==Il||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=la(e))){for(t.flags|=128,Xo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Hl&&(t.flags|=128,r=!0,Xo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Ko(t),null}else 2*$e()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Xo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=oa.current,Ti(oa,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Nl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Jo(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),Ci(ki),Ci(Ai),ua(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return aa(t),null;case 13:if(Ci(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ds()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(oa),null;case 4:return ia(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},No=function(){},Ro=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,na(Qs.current);var s,a=null;switch(n){case"input":i=J(e,i),r=J(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Qr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Io=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,$o=!1,Zo="function"==typeof WeakSet?WeakSet:Set,Qo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Cc(e,t,n)}else n.current=null}function tl(e,t,n){try{n()}catch(n){Cc(e,t,n)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[pi],delete t[di],delete t[mi],delete t[gi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,pl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:$o||el(n,t);case 6:var r=hl,i=pl;hl=null,dl(e,t,n),pl=i,null!==(hl=r)&&(pl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(pl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=pl,hl=n.stateNode.containerInfo,pl=!0,dl(e,t,n),hl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!$o&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!=(2&s)||0!=(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!$o&&(el(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Cc(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,dl(e,t,n),$o=r):dl(e,t,n);break;default:dl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach((function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,pl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));fl(a,o,i),hl=null,pl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Cc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(t){Cc(e,e.return,t)}try{rl(5,e,e.return)}catch(t){Cc(e,e.return,t)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(t){Cc(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),xe(l,o);var u=xe(l,a);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];"style"===h?ge(i,p):"dangerouslySetInnerHTML"===h?he(i,p):"children"===h?pe(i,p):x(i,h,p,u)}switch(l){case"input":Z(i,a);break;case"textarea":se(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):d!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[di]=a}catch(t){Cc(e,e.return,t)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(t){Cc(e,e.return,t)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(t){Cc(e,e.return,t)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=$e())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||h,gl(t,e),$o=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!=(1&e.mode))for(Qo=e,h=e.child;null!==h;){for(p=Qo=h;null!==Qo;){switch(f=(d=Qo).child,d.tag){case 0:case 11:case 14:case 15:rl(4,d,d.return);break;case 1:el(d,d.return);var m=d.stateNode;if("function"==typeof m.componentWillUnmount){r=d,n=d.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Cc(r,n,e)}}break;case 5:el(d,d.return);break;case 22:if(null!==d.memoizedState){Sl(p);continue}}null!==f?(f.return=d,Qo=f):Sl(p)}h=h.sibling}e:for(h=null,p=e;;){if(5===p.tag){if(null===h){h=p;try{i=p.stateNode,u?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=p.stateNode,o=null!=(c=p.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(t){Cc(e,e.return,t)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(t){Cc(e,e.return,t)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pe(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(s(161))}}catch(t){Cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Qo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!=(1&e.mode);null!==Qo;){var i=Qo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Yo;var c=$o;if(Yo=a,($o=l)&&!c)for(Qo=i;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Qo=l):_l(i);for(;null!==s;)Qo=s,bl(s,t,n),s=s.sibling;Qo=i,Yo=o,$o=c}wl(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Qo=s):wl(e)}}function wl(e){for(;null!==Qo;){var t=Qo;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&zt(p)}}}break;default:throw Error(s(163))}$o||512&t.flags&&sl(t)}catch(e){Cc(t,t.return,e)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function Sl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(e){Cc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Cc(t,i,e)}}var s=t.return;try{sl(t)}catch(e){Cc(t,s,e)}break;case 5:var a=t.return;try{sl(t)}catch(e){Cc(t,a,e)}}}catch(e){Cc(t,t.return,e)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var El,Cl=Math.ceil,Tl=b.ReactCurrentDispatcher,Ml=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,kl=0,Pl=null,Ll=null,Dl=0,Nl=0,Rl=Ei(0),Il=0,Ol=null,Fl=0,Bl=0,Ul=0,Vl=null,jl=null,zl=0,Hl=1/0,Wl=null,Gl=!1,Xl=null,Kl=null,ql=!1,Jl=null,Yl=0,$l=0,Zl=null,Ql=-1,ec=0;function tc(){return 0!=(6&kl)?$e():-1!==Ql?Ql:Ql=$e()}function nc(e){return 0==(1&e.mode)?1:0!=(2&kl)&&0!==Dl?Dl&-Dl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(s(185));yt(e,n,r),0!=(2&kl)&&e===Pl||(e===Pl&&(0==(2&kl)&&(Bl|=n),4===Il&&lc(e,Dl)),ic(e,r),1===n&&0===kl&&0==(1&t.mode)&&(Hl=$e()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!=(o&n)&&0==(o&r)||(i[a]=dt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=pt(e,e===Pl?Dl:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),ai((function(){0==(6&kl)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Ql=-1,ec=0,0!=(6&kl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=pt(e,e===Pl?Dl:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=kl;kl|=2;var a=mc();for(Pl===e&&Dl===t||(Wl=null,Hl=$e()+500,dc(e,t));;)try{xc();break}catch(t){fc(e,t)}ws(),Tl.current=a,kl=i,null!==Ll?t=0:(Pl=null,Dl=0,t=Il)}if(0!==t){if(2===t&&0!==(i=ft(e))&&(r=i,t=ac(e,i)),1===t)throw n=Ol,dc(e,0),lc(e,r),ic(e,$e()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&0!==(a=ft(e))&&(r=a,t=ac(e,a)),1===t))throw n=Ol,dc(e,0),lc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,jl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,jl,Wl),t);break}Sc(e,jl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,jl,Wl),r);break}Sc(e,jl,Wl);break;default:throw Error(s(329))}}}return ic(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=jl,jl=n,null!==t&&oc(t)),e}function oc(e){null===jl?jl=e:jl.push.apply(jl,e)}function lc(e,t){for(t&=~Ul,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!=(6&kl))throw Error(s(327));_c();var t=pt(e,0);if(0==(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ol,dc(e,0),lc(e,t),ic(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,jl,Wl),ic(e,$e()),null}function uc(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(Hl=$e()+500,Ui&&zi())}}function hc(e){null!==Jl&&0===Jl.tag&&0==(6&kl)&&_c();var t=kl;kl|=1;var n=Al.transition,r=xt;try{if(Al.transition=null,xt=1,e)return e()}finally{xt=r,Al.transition=n,0==(6&(kl=t))&&zi()}}function pc(){Nl=Rl.current,Ci(Rl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ll)for(n=Ll.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ni();break;case 3:ia(),Ci(ki),Ci(Ai),ua();break;case 5:aa(r);break;case 4:ia();break;case 13:case 19:Ci(oa);break;case 10:Ss(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Pl=e,Ll=e=Rc(e.current,null),Dl=Nl=t,Il=0,Ol=null,Ul=Bl=Fl=0,jl=Vl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ts=null}return e}function fc(e,t){for(;;){var n=Ll;try{if(ws(),ha.current=so,ya){for(var r=fa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(da=0,ga=ma=fa=null,va=!1,xa=0,Ml.current=null,null===n||null===n.return){Il=1,Ol=t,Ll=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,p=h.tag;if(0==(1&h.mode)&&(0===p||11===p||15===p)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=yo(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&go(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=yo(o);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),fs(co(c,l));break e}}a=c=co(c,l),4!==Il&&(Il=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Os(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,x=a.stateNode;if(0==(128&a.flags)&&("function"==typeof v.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Os(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(e){t=e,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=so,null===e?so:e}function gc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Pl||0==(268435455&Fl)&&0==(268435455&Bl)||lc(Pl,Dl)}function yc(e,t){var n=kl;kl|=2;var r=mc();for(Pl===e&&Dl===t||(Wl=null,dc(e,t));;)try{vc();break}catch(t){fc(e,t)}if(ws(),kl=n,Tl.current=r,null!==Ll)throw Error(s(261));return Pl=null,Dl=0,Il}function vc(){for(;null!==Ll;)bc(Ll)}function xc(){for(;null!==Ll&&!Je();)bc(Ll)}function bc(e){var t=El(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?wc(e):Ll=t,Ml.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=qo(n,t,Nl)))return void(Ll=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return Il=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Il&&(Il=5)}function Sc(e,t,n){var r=xt,i=Al.transition;try{Al.transition=null,xt=1,function(e,t,n,r){do{_c()}while(null!==Jl);if(0!=(6&kl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Pl&&(Ll=Pl=null,Dl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||ql||(ql=!0,Pc(tt,(function(){return _c(),null}))),a=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=xt;xt=1;var l=kl;kl|=4,Ml.current=null,function(e,t){if(ei=Wt,dr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,p=e,d=null;t:for(;;){for(var f;p!==n||0!==i&&3!==p.nodeType||(l=o+i),p!==a||0!==r&&3!==p.nodeType||(c=o+r),3===p.nodeType&&(o+=p.nodeValue.length),null!==(f=p.firstChild);)d=p,p=f;for(;;){if(p===e)break t;if(d===n&&++u===i&&(l=o),d===a&&++h===r&&(c=o),null!==(f=p.nextSibling))break;d=(p=d).parentNode}p=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(e){Cc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}m=nl,nl=!1}(e,n),yl(n,e),fr(ti),Wt=!!ei,ti=ei=null,e.current=n,xl(n,e,i),Ye(),kl=l,xt=o,Al.transition=a}else e.current=n;if(ql&&(ql=!1,Jl=e,Yl=i),0===(a=e.pendingLanes)&&(Kl=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Xl,Xl=null,e;0!=(1&Yl)&&0!==e.tag&&_c(),0!=(1&(a=e.pendingLanes))?e===Zl?$l++:($l=0,Zl=e):$l=0,zi()}(e,t,n,r)}finally{Al.transition=i,xt=r}return null}function _c(){if(null!==Jl){var e=bt(Yl),t=Al.transition,n=xt;try{if(Al.transition=null,xt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Yl=0,0!=(6&kl))throw Error(s(331));var i=kl;for(kl|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!=(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var h=Qo;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var p=h.child;if(null!==p)p.return=h,Qo=p;else for(;null!==Qo;){var d=(h=Qo).sibling,f=h.return;if(al(h),h===u){Qo=null;break}if(null!==d){d.return=f,Qo=d;break}Qo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qo=a}}if(0!=(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!=(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qo=v;break e}Qo=a.return}}var x=e.current;for(Qo=x;null!==Qo;){var b=(o=Qo).child;if(0!=(2064&o.subtreeFlags)&&null!==b)b.return=o,Qo=b;else e:for(o=x;null!==Qo;){if(0!=(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(e){Cc(l,l.return,e)}if(l===o){Qo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qo=w;break e}Qo=l.return}}if(kl=i,zi(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{xt=n,Al.transition=t}}return!1}function Ec(e,t,n){e=Rs(e,t=fo(0,t=co(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Cc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Rs(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Dl&n)===n&&(4===Il||3===Il&&(130023424&Dl)===Dl&&500>$e()-zl?dc(e,0):Ul|=n),ic(e,t)}function Mc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=ks(e,t))&&(yt(e,t,n),ic(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Mc(e,n)}function Pc(e,t){return Ke(e,t)}function Lc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Lc(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,i,a){var o=2;if(r=e,"function"==typeof e)Nc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case _:return Oc(n.children,i,a,t);case E:o=8,i|=8;break;case C:return(e=Dc(12,n,t,2|i)).elementType=C,e.lanes=a,e;case k:return(e=Dc(13,n,t,i)).elementType=k,e.lanes=a,e;case P:return(e=Dc(19,n,t,i)).elementType=P,e.lanes=a,e;case N:return Fc(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case M:o=9;break e;case A:o=11;break e;case L:o=14;break e;case D:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,s,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Mi;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Ii(e,n,t)}return t}function Hc(e,t,n,r,i,s,a,o,l){return(e=jc(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Ns(r=tc(),i=nc(n))).callback=null!=t?t:null,Rs(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),a=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ns(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Rs(i,t,a))&&(rc(e,i,a,s),Is(e,i,a)),a}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ki.current)bo=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ds();break;case 5:sa(t);break;case 1:Di(t.type)&&Oi(t);break;case 4:ra(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(oa,1&oa.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Bo(e,t,n):(Ti(oa,1&oa.current),null!==(e=Go(e,t,n))?e.sibling:null);Ti(oa,1&oa.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(oa,oa.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Go(e,t,n)}(e,t,n);bo=0!=(131072&e.flags)}else bo=!1,is&&0!=(1048576&t.flags)&&Qi(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=Li(t,Ai.current);Es(t,n),i=_a(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,Oi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=js,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=ko(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Nc(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===L)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Mo(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=_o(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Mo(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ds(e,t),Fs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Lo(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=Lo(e,t,r,n,i=co(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=$s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ds(),r===i){t=Go(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return sa(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),To(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Bo(e,t,n);case 4:return ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ti(ys,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!ki.current){t=Go(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Ns(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),_s(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),_s(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Cs(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),_o(e,t,r,i=gs(r.type,i),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wo(e,t),t.tag=1,Di(r)?(e=!0,Oi(t)):e=!1,Es(t,n),Hs(t,r,i),Gs(t,r,i,n),ko(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var qc="function"==typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=Gc(a);o.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Gc(a);s.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[fi]=a.current,zr(8===e.nodeType?e.parentNode:e),hc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Gc(l);o.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fi]=l.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Gc(a)}Yc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,$e()),0==(6&kl)&&(Hl=$e()+500,zi()))}break;case 13:hc((function(){var t=ks(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},St=function(e){if(13===e.tag){var t=ks(e,134217728);null!==t&&rc(t,e,134217728,tc()),Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=ks(e,t);null!==n&&rc(n,e,t,tc()),Kc(e,t)}},Et=function(){return xt},Ct=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Se=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uc,ke=hc;var tu={usingClientEntryPoint:!1,Events:[xi,bi,wi,Te,Me,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=qc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=qc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,a,o),e[fi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:function(e,t,n){"use strict";var r=n(3935);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},3935:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},5251:function(e,t,n){"use strict";var r=n(7294),i=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,l={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!o.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:l,_owner:a.current}}},2408:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:_.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function A(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+A(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(M,"$&/")+"/"),k(a,t,i,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+A(o=e[c],c);l+=k(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=k(o=o.value,t,i,u=s+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},N={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:N,ReactCurrentOwner:_};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},7294:function(e,t,n){"use strict";e.exports=n(2408)},5893:function(e,t,n){"use strict";e.exports=n(5251)},53:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,p=null,d=3,f=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,N(S);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var s=d;try{for(b(n),p=r(c);null!==p&&(!(p.expirationTime>n)||e&&!k());){var a=p.callback;if("function"==typeof a){p.callback=null,d=p.priorityLevel;var o=a(p.expirationTime<=n);n=t.unstable_now(),"function"==typeof o?p.callback=o:p===r(c)&&i(c),b(n)}else i(c);p=r(c)}if(null!==p)var l=!0;else{var h=r(u);null!==h&&R(w,h.startTime-n),l=!1}return l}finally{p=null,d=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,C=null,T=-1,M=5,A=-1;function k(){return!(t.unstable_now()-A<M)}function P(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?_():(E=!1,C=null)}}else E=!1}if("function"==typeof x)_=function(){x(P)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,D=L.port2;L.port1.onmessage=P,_=function(){D.postMessage(null)}}else _=function(){y(P,0)};function N(e){C=e,E||(E=!0,_())}function R(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,N(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,R(w,s-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,N(S))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},3840:function(e,t,n){"use strict";e.exports=n(53)},3664:function(e,t,n){var r;!function(i){function s(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function a(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function o(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){o.prototype.dispatch.apply(e,arguments)}}s.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},o.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,t,n,r){var i,a=this._indexOfListener(e,n);if(-1!==a){if((i=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else i=new s(this,e,t,n,r),this._addBinding(i);return this.memorize&&this._prevParams&&i.execute(this._prevParams),i},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,r=this._bindings.length;r--;)if((n=this._bindings[r])._listener===e&&n.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,n){return a(e,"add"),this._registerListener(e,!1,t,n)},addOnce:function(e,t,n){return a(e,"addOnce"),this._registerListener(e,!0,t,n)},remove:function(e,t){a(e,"remove");var n=this._indexOfListener(e,t);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){t=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(t[r]&&this._shouldPropagate&&!1!==t[r].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var l=o;l.Signal=o,void 0===(r=function(){return l}.call(t,n,t,e))||(e.exports=r)}()},3379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},a=[],o=0;o<e.length;o++){var l=e[o],c=r.base?l[0]+r.base:l[0],u=s[c]||0,h="".concat(c," ").concat(u);s[c]=u+1;var p=n(h),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(d);else{var f=i(d,r);r.byIndex=o,t.splice(o,0,{identifier:h,updater:f,references:1})}a.push(h)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var o=n(s[a]);t[o].references--}for(var l=r(e,i),c=0;c<s.length;c++){var u=n(s[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},4692:function(e,t){var n;n=function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r=e.TypeParser=function(e,t,n,r){this.pos=t||0,this.spec=e,this.base=n,this.forceNew=r};function i(e,t,n){return e.call?e(t,n):e}function s(e,n){if("!ret"==n){if(e.retval)return e.retval;var r=new t.AVal;return e.propagate(new t.IsCallee(t.ANull,[],null,r)),r}return e.getProp(n)}function a(e){if(e instanceof t.Fn&&e.args)for(var n=0;n<e.args.length;++n){var r=e.args[n];r instanceof t.Fn&&r.args&&r.args.length&&o(e,n)}}function o(e,n){c(e,(function(r,i){i[n]&&i[n].propagate(new t.IsCallee(t.cx().topScope,e.args[n].args,null,t.ANull))}))}function l(e,n,i,s){var o=new r(e,null,i,s).parseType(!1,n,!0);return o instanceof t.AVal?o.types.forEach(a):a(o),o}function c(e,t,n){var r=e.computeRet,i=e.retval;e.computeRet=function(e,s,a){var o=t(e,s,a),l=r?r(e,s,a):i;return n?o:l}}r.prototype={eat:function(e){if(1==e.length?this.spec.charAt(this.pos)==e:this.spec.indexOf(e,this.pos)==this.pos)return this.pos+=e.length,!0},word:function(e){var t,n="";for(e=e||/[\w$]/;(t=this.spec.charAt(this.pos))&&e.test(t);)n+=t,++this.pos;return n},error:function(){throw new Error("Unrecognized type spec: "+this.spec+" (at "+this.pos+")")},parseFnType:function(e,n,r,s){var a,o,l,c,u=[],h=[],p=!1;if(!this.eat(")"))for(var d=0;;++d){var f,m=this.spec.indexOf(": ",this.pos);-1!=m&&(f=this.spec.slice(this.pos,m),/^(\.\.\.)?[$\w?]+$/.test(f)?this.pos=m+2:f=null),h.push(f);var g=this.parseType(e);if(g.call&&(p=!0),u.push(g),!this.eat(", ")){this.eat(")")||this.error();break}}if(this.eat(" -> ")){var y=this.pos;(a=this.parseType(!0)).call&&!p&&(o=a,a=t.ANull,l=y)}else a=t.ANull;return p?function(e,n,r,s){return function(a,o){for(var l=[],c=0;c<n.length;c++)l.push(i(n[c],a,o));return new t.Fn(e,t.ANull,l,i(r,a,o),s)}}(n,u,a,s):(r&&(c=this.base)?t.Fn.call(this.base,n,t.ANull,u,h,a,s):c=new t.Fn(n,t.ANull,u,h,a,s),o&&(c.computeRet=o),null!=l&&(c.computeRetSource=this.spec.slice(l,this.pos)),c)},parseType:function(e,n,r){var s=this.parseTypeMaybeProp(e,n,r);if(!this.eat("|"))return s;for(var a=[s],o=s.call;;){var l=this.parseTypeMaybeProp(e,n,r);if(a.push(l),l.call&&(o=!0),!this.eat("|"))break}if(o)return function(e){return function(n,r){for(var s=new t.AVal,a=0;a<e.length;a++)i(e[a],n,r).propagate(s);return s.maxWeight=1e5,s}}(a);for(var c=new t.AVal,u=0;u<a.length;u++)a[u].propagate(c);return c.maxWeight=1e5,c},parseTypeMaybeProp:function(e,t,n){for(var r=this.parseTypeInner(e,t,n);e&&this.eat(".");)r=this.extendWithProp(r);return r},extendWithProp:function(e){var t=this.word(/[\w<>$!:]/)||this.error();return e.apply?function(n,r){return s(e(n,r),t)}:s(e,t)},parseTypeInner:function(e,n,r){var s;if(this.eat("fn(")||(s=this.eat("fn*(")))return this.parseFnType(e,n,r,s);if(this.eat("[")){for(var a=this.parseType(e),o=a.call;this.eat(", ");){c||(c=[a]);var l=this.parseType(e);c.push(l),o=o||l.call}return this.eat("]")||this.error(),o?c?function(e){return function(n,r){return new t.Arr(e.map((function(e){return i(e,n,r)})))}}(c):function(e){return function(n,r){return new t.Arr(e(n,r))}}(a):r&&this.base?(t.Arr.call(this.base,c||a),this.base):new t.Arr(c||a)}if(this.eat("{")){var c=[],u=[];if(o=!1,!this.eat("}"))for(var h=0;;++h){var f,m=this.spec.indexOf(": ",this.pos);-1!=m&&(f=this.spec.slice(this.pos,m),/^[$\w?]+$/.test(f)?this.pos=m+2:f=null);var g=this.parseType(e);if(g.call&&(o=!0),u.push(f),c.push(g),!this.eat(", ")){this.eat("}")||this.error();break}}if(o)return function(e,n){return function(r,s){var a=new t.Obj;return e.forEach((function(e,t){a.defProp(e).addType(i(n[t],r,s))})),a}}(u,c);var y=new t.Obj;return u.forEach((function(e,t){y.defProp(e).addType(c[t])})),y}if(this.eat("+")){var x=this.word(/[\w$<>\.:!]/);if(!(b=t.cx().localDefs[x+".prototype"])){var b;if(!((b=p(x))instanceof t.Obj))return b;var w=d(b,["prototype"]);w&&(w=w.getObjType())&&(b=w)}return e&&this.eat("[")?this.parsePoly(b):r&&this.base?(this.base.proto=b,(n=b.hasCtor&&b.hasCtor.name||b.name)&&(this.base.name=n),this.base):r&&this.forceNew?new t.Obj(b):t.getInstance(b)}if(this.eat(":"))return n=this.word(/[\w$\.]/),t.getSymbol(n);if(e&&this.eat("!")){var S=this.word(/\d/);if(S)return S=Number(S),function(e,n){return n[S]||t.ANull};if(this.eat("this"))return function(e){return e};if(this.eat("custom:")){var _=this.word(/[\w$]/);return v[_]||function(){return t.ANull}}return this.fromWord("!"+this.word(/[\w$<>\.!:]/))}return this.eat("?")?t.ANull:this.fromWord(this.word(/[\w$<>\.!:`]/))},fromWord:function(e){var n=t.cx();switch(e){case"number":return n.num;case"string":return n.str;case"bool":return n.bool;case"<top>":return n.topScope}return n.localDefs&&e in n.localDefs?n.localDefs[e]:p(e)},parsePoly:function(e){var n,r="<i>";(n=this.spec.slice(this.pos).match(/^\s*([\w$:]+)\s*=\s*/))&&(r=n[1],this.pos+=n[0].length);var i=this.parseType(!0);if(this.eat("]")||this.error(),i.call)return function(n,s){var a=new t.Obj(e);return i(n,s).propagate(a.defProp(r)),a};var s=new t.Obj(e);return i.propagate(s.defProp(r)),s}};var u,h=e.parseEffect=function(e,n){var s;if(0==e.indexOf("propagate ")){var a=(f=new r(e,10)).parseType(!0);f.eat(" ")||f.error();var o=f.parseType(!0);c(n,(function(e,t){i(a,e,t).propagate(i(o,e,t))}))}else if(0==e.indexOf("call ")){var l=5==e.indexOf("and return ",5),u=(f=new r(e,l?16:5)).parseType(!0),h=null,p=[];for(f.eat(" this=")&&(h=f.parseType(!0));f.eat(" ");)p.push(f.parseType(!0));c(n,(function(e,n){for(var r=i(u,e,n),s=h?i(h,e,n):t.ANull,a=[],o=0;o<p.length;++o)a.push(i(p[o],e,n));var c=l?new t.AVal:t.ANull;return r.propagate(new t.IsCallee(s,a,null,c)),c}),l)}else if(s=e.match(/^custom (\S+)\s*(.*)/)){var d=v[s[1]];d&&c(n,s[2]?d(s[2]):d)}else{if(0!=e.indexOf("copy "))throw new Error("Unknown effect type: "+e);var f,m=(f=new r(e,5)).parseType(!0);f.eat(" ");var g=f.parseType(!0);c(n,(function(e,n){var r=i(m,e,n),s=i(g,e,n);r.forAllProps((function(e,n,r){r&&"<i>"!=e&&s.propagate(new t.DefProp(e,n))}))}))}},p=e.parsePath=function(e,n){var r=t.cx(),i=r.paths[e],s=e;if(null!=i)return i;r.paths[e]=t.ANull;var a=n||u||r.topScope;if(r.localDefs)for(var o in r.localDefs)if(0==e.indexOf(o)){if(e==o)return r.paths[e]=r.localDefs[e];if("."==e.charAt(o.length)){a=r.localDefs[o],e=e.slice(o.length+1);break}}var l=d(a,e.split("."));return r.paths[s]=l==t.ANull?null:l,l};function d(e,n){for(var r=0;r<n.length&&e!=t.ANull;++r){var i=n[r];if("!"==i.charAt(0))if("!proto"==i)e=e instanceof t.Obj&&e.proto||t.ANull;else{var s=e.getFunctionType();if(s)if("!ret"==i)e=s.retval&&s.retval.getType(!1)||t.ANull;else{var a=s.args&&s.args[Number(i.slice(1))];e=a&&a.getType(!1)||t.ANull}else e=t.ANull}else if(e instanceof t.Obj&&("prototype"==i&&e instanceof t.Fn||e.hasProp(i))){var o=e.getProp(i);e=!o||o.isEmpty()?t.ANull:o.types[0]}else e=t.ANull}return e}function f(e){var t=Object.create(e.prototype);return t.props=Object.create(null),t.isShell=!0,t}function m(e){if(!e["!type"]||/^(fn\(|\[|\+)/.test(e["!type"]))return!1;for(var t in e)if("!type"!=t&&"!doc"!=t&&"!url"!=t&&"!span"!=t&&"!data"!=t)return!1;return!0}function g(e,r,i){if(!e){var s=r["!type"];if(s)if(/^fn\(/.test(s))e=f(t.Fn);else if("["==s.charAt(0))e=f(t.Arr);else{if("+"!=s.charAt(0))throw new Error("Invalid !type spec: "+s);e=f(t.Obj)}else e=r["!stdProto"]?t.cx().protos[r["!stdProto"]]:f(t.Obj);e.name=i}for(var a in r)if(n(r,a)&&33!=a.charCodeAt(0)){var o=r[a];if("string"==typeof o||m(o))continue;var l=e.defProp(a);g(l.getObjType(),o,i?i+"."+a:a).propagate(l)}return e}function y(e,r,i){if(e.isShell){delete e.isShell;var s=r["!type"];if(s)l(s,i,e);else{var a=r["!proto"]&&l(r["!proto"]);t.Obj.call(e,!(a instanceof t.Obj)||a,i)}}var o=r["!effects"];if(o&&e instanceof t.Fn)for(var c=0;c<o.length;++c)h(o[c],e);for(var u in function(e,t){e["!doc"]&&(t.doc=e["!doc"]),e["!url"]&&(t.url=e["!url"]),e["!span"]&&(t.span=e["!span"]),e["!data"]&&(t.metaData=e["!data"])}(r,e),r)if(n(r,u)&&33!=u.charCodeAt(0)){var p=r[u],d=e.defProp(u),f=i?i+"."+u:u;if("string"==typeof p)d.isEmpty()&&l(p,f).propagate(d);else{if(m(p)){if(!d.isEmpty())continue;l(p["!type"],f,null,!0).propagate(d)}else y(d.getObjType(),p,f);p["!doc"]&&(d.doc=p["!doc"]),p["!url"]&&(d.url=p["!url"]),p["!span"]&&(d.span=p["!span"])}}return e}e.load=function(e,n){n||(n=t.cx().topScope);var r=u;u=n;try{!function(e,n){var r=t.cx(),i=r.parent;t.addOrigin(r.curOrigin=e["!name"]||"env#"+r.origins.length),r.localDefs=r.definitions[r.curOrigin]=Object.create(null),i&&i.signal("preLoadDef",e),g(n,e);var s=e["!define"];if(s){for(var a in s){var o=s[a];r.localDefs[a]="string"==typeof o?p(o):g(null,o,a)}for(var a in s)"string"!=typeof(o=s[a])&&y(r.localDefs[a],s[a],a)}y(n,e),i&&i.signal("postLoadDef",e),r.curOrigin=r.localDefs=null}(e,n)}finally{u=r}},e.parse=function(e,n,r){var i=t.cx();n&&(i.origin=n,i.localDefs=i.definitions[n]);try{return"string"==typeof e?l(e,r):y(g(null,e,r),e,r)}finally{n&&(i.origin=i.localDefs=null)}};var v=Object.create(null);t.registerFunction=function(e,t){v[e]=t};var x=t.constraint({construct:function(e,t,n){this.created=e,this.target=t,this.spec=n},addType:function(e){if(e instanceof t.Obj&&this.created++<5){var n=new t.Obj(e),r=this.spec;if(r instanceof t.AVal&&(r=r.getObjType(!1)),r instanceof t.Obj)for(var i in r.props){var s=r.props[i].types[0],a=n.defProp(i);if(s&&s instanceof t.Obj&&s.props.value){var o=s.props.value.getType(!1);o&&a.addType(o)}}this.target.addType(n)}}});t.registerFunction("Object_create",(function(e,n,r){if(r&&r.length&&"Literal"==r[0].type&&null==r[0].value)return new t.Obj;var i=new t.AVal;return n[0]&&n[0].propagate(new x(0,i,n[1])),i}));var b=t.constraint({construct:function(e){this.target=e},addType:function(e){e instanceof t.Obj&&(e.hasProp("value")?e.getProp("value").propagate(this.target):e.hasProp("get")&&e.getProp("get").propagate(new t.IsCallee(t.ANull,[],null,this.target)))}});t.registerFunction("Object_defineProperty",(function(e,n,r){if(r&&r.length>=3&&"Literal"==r[1].type&&"string"==typeof r[1].value){var i=n[0],s=new t.AVal;i.propagate(new t.DefProp(r[1].value,s,r[1])),n[2].propagate(new b(s))}return t.ANull})),t.registerFunction("Object_defineProperties",(function(e,n,r){if(n.length>=2){var i=n[0];n[1].forAllProps((function(e,n,s){if(s){var a=new t.AVal;i.propagate(new t.DefProp(e,a,r&&r[1])),n.propagate(new b(a))}}))}return t.ANull}));var w=t.constraint({construct:function(e,t,n){this.self=e,this.args=t,this.target=n},addType:function(e){if(e instanceof t.Fn){this.target.addType(new t.Fn(e.name,t.ANull,e.args.slice(this.args.length),e.argNames.slice(this.args.length),e.retval,e.generator)),this.self.propagate(e.self);for(var n=0;n<Math.min(e.args.length,this.args.length);++n)this.args[n].propagate(e.args[n])}}});function S(){var e=t.cx().definitions.ecmascript;return e&&new t.Obj(e["Promise.prototype"])}t.registerFunction("Function_bind",(function(e,n){if(!n.length)return t.ANull;var r=new t.AVal;return e.propagate(new w(n[0],n.slice(1),r)),r})),t.registerFunction("Array_ctor",(function(e,n){var r=new t.Arr;if(1!=n.length||!n[0].hasType(t.cx().num))for(var i=r.getProp("<i>"),s=0;s<n.length;++s)n[s].propagate(i);return r})),t.registerFunction("Promise_ctor",(function(e,n,r){var i=S();if(!i||n.length<1)return t.ANull;var s=i.defProp(":t",r&&r[0]),a=new t.AVal;a.propagate(s);var o=new t.Fn("execute",t.ANull,[a],["value"],t.ANull),l=t.cx().definitions.ecmascript.Promise_reject;return n[0].propagate(new t.IsCallee(t.ANull,[o,l],null,t.ANull)),i})),t.registerFunction("Promise_resolve",(function(e,n,r){var i=S();if(!i)return t.ANull;if(n.length){var s=i.defProp(":t",r&&r[0]),a=new t.AVal;a.propagate(s),n[0].propagate(new _(a))}return i}));var _=t.constraint({construct:function(e){this.output=e},addType:function(e){e.constructor==t.Obj&&"Promise"==e.name&&e.hasProp(":t")?e.getProp(":t").propagate(this.output):e.propagate(this.output)}});return t.registerFunction("Promise_then",(function(e,n,r){var i=n.length&&n[0].getFunctionType(),s=t.cx().definitions.ecmascript;if(!i||!s)return e;var a,o=new t.Obj(s["Promise.prototype"]),l=o.defProp(":t",r&&r[0]);return i.retval.isEmpty()&&(a=e.getType())instanceof t.Obj&&a.hasProp(":t")&&a.getProp(":t").propagate(l,50),i.retval.propagate(new _(l)),o})),t.registerFunction("getOwnPropertySymbols",(function(e,n){if(!n.length)return t.ANull;var r=new t.AVal;return n[0].forAllProps((function(e,n,i){i&&":"==e.charAt(0)&&r.addType(t.getSymbol(e.slice(1)))})),r})),t.registerFunction("getSymbol",(function(e,n,r){return r&&r.length&&"Literal"==r[0].type&&"string"==typeof r[0].value?t.getSymbol(r[0].value):t.ANull})),e},t.init=n},4460:function(e,t,n){var r;r=function(e,t,n,r,i,s){"use strict";var a=e.toString=function(e,t,n){return!e||e==n||t&&t<-3?"?":e.toString(t,n)},o=e.ANull=s.mixin({addType:function(){},propagate:function(){},getProp:function(){return o},forAllProps:function(){},hasType:function(){return!1},isEmpty:function(){return!0},getFunctionType:function(){},getObjType:function(){},getSymbolType:function(){},getType:function(){},gatherProperties:function(){},propagatesTo:function(){},typeHint:function(){},propHint:function(){},toString:function(){return"?"}});function l(e,t){var n=Object.create(e);if(t)for(var r in t)n[r]=t[r];return n}var c=e.AVal=function(){this.types=[],this.forward=null,this.maxWeight=0};function u(e,t,n){var r=e.getType(!1),i=t.getType(!1);return!r||!i||h(r,i,n)}function h(e,t,n){if(!e||n>=5)return t;if(!e||e==t)return e;if(!t)return e;if(e.constructor!=t.constructor)return!1;if(e.constructor!=O){if(e.constructor==D){var r=0,i=0,s=0;for(var a in e.props)r++,a in t.props&&u(e.props[a],t.props[a],n+1)&&s++;for(var a in t.props)i++;return!(r&&i&&s<Math.max(r,i)/2)&&(r>i?e:t)}return e.constructor==I&&!!(e.args.length==t.args.length&&e.args.every((function(e,r){return u(e,t.args[r],n+1)}))&&u(e.retval,t.retval,n+1)&&u(e.self,t.self,n+1))&&e}var o=e.getProp("<i>").getType(!1);if(!o)return t;var l=t.getProp("<i>").getType(!1);return!l||h(o,l,n+1)?t:void 0}c.prototype=l(o,{addType:function(e,t){if(t=t||100,this.maxWeight<t){if(this.maxWeight=t,1==this.types.length&&this.types[0]==e)return;this.types.length=0}else if(this.maxWeight>t||this.types.indexOf(e)>-1)return;this.signal("addType",e),this.types.push(e);var n=this.forward;n&&H((function(r){for(var i=0;i<n.length;++i)r(e,n[i],t)}))},propagate:function(e,t){if(!(e==o||e instanceof k&&this.forward&&this.forward.length>2)){t&&100!=t&&(e=new A(e,t)),(this.forward||(this.forward=[])).push(e);var n=this.types;n.length&&H((function(r){for(var i=0;i<n.length;++i)r(n[i],e,t)}))}},getProp:function(e){if(R(e))return o;var t=(this.props||(this.props=Object.create(null)))[e];return t||(t=this.props[e]=new c,this.propagate(new m(e,t))),t},forAllProps:function(e){this.propagate(new y(e))},hasType:function(e){return this.types.indexOf(e)>-1},isEmpty:function(){return 0===this.types.length},getFunctionType:function(){for(var e=this.types.length-1;e>=0;--e)if(this.types[e]instanceof I)return this.types[e]},getObjType:function(){for(var e=null,t=this.types.length-1;t>=0;--t){var n=this.types[t];if(n instanceof D){if(n.name)return n;e||(e=n)}}return e},getSymbolType:function(){for(var e=this.types.length-1;e>=0;--e)if(this.types[e]instanceof F)return this.types[e]},getType:function(e){return 0===this.types.length&&!1!==e?this.makeupType():1===this.types.length?this.types[0]:d(this.types)},toString:function(e,t){if(0==this.types.length)return a(this.makeupType(),e,t);if(1==this.types.length)return a(this.types[0],e,t);var n=p(this.types);return n.length>2?"?":n.map((function(n){return a(n,e,t)})).join("|")},makeupPropType:function(e){var t=this.propertyName,n=e.proto&&e.proto.hasProp(t);if(n){var r=n.getType();if(r)return r}if("<i>"!=t){var i=e.hasProp("<i>");if(i)return i.getType()}else if(e.props["<i>"]!=this)for(var s in e.props){var a=e.props[s];if(!a.isEmpty())return a.getType()}},makeupType:function(){var e=this.propertyOf&&this.makeupPropType(this.propertyOf);if(e)return e;if(!this.forward)return null;for(var t=this.forward.length-1;t>=0;--t){var n=this.forward[t].typeHint();if(n&&!n.isEmpty())return De=!0,n}var r=Object.create(null),i=null;for(t=0;t<this.forward.length;++t)(l=this.forward[t].propHint())&&"length"!=l&&"<i>"!=l&&"✖"!=l&&l!=V.completingProperty&&(r[l]=!0,i=l);if(!i)return null;var s=B(i);if(s){var a=[];e:for(t=0;t<s.length;++t){var o=s[t];for(var l in r)if(!o.hasProp(l))continue e;o.hasCtor&&(o=w(o)),a.push(o)}var c=d(a);if(c)return De=!0,c}},typeHint:function(){return this.types.length?this.getType():null},propagatesTo:function(){return this},gatherProperties:function(e,t){for(var n=0;n<this.types.length;++n)this.types[n].gatherProperties(e,t)},guessProperties:function(e){if(this.forward)for(var t=0;t<this.forward.length;++t){var n=this.forward[t].propHint();n&&e(n,null,0)}var r=this.makeupType();r&&r.gatherProperties(e)}});var p=e.simplifyTypes=function(e){var t=[];e:for(var n=0;n<e.length;++n){for(var r=e[n],i=0;i<t.length;i++){var s=h(r,t[i],0);if(s){t[i]=s;continue e}}t.push(r)}return t};function d(e){for(var t=0,n=0,r=0,i=null,s=0;s<e.length;++s)if((l=e[s])instanceof O)++t;else if(l instanceof I)++n;else if(l instanceof D)++r;else if(l instanceof P){if(i&&l.name!=i.name)return null;i=l}if((t&&1)+(n&&1)+(r&&1)+(i&&1)>1)return null;if(i)return i;var a=0,o=null;for(s=0;s<e.length;++s){var l=e[s],c=0;if(t)c=l.getProp("<i>").isEmpty()?1:2;else if(n){c=1;for(var u=0;u<l.args.length;++u)l.args[u].isEmpty()||++c;l.retval.isEmpty()||++c}else r&&(c=l.name?100:2);c>=a&&(a=c,o=l)}return o}var f=e.constraint=function(e){var t=function(){this.origin=V.curOrigin,this.construct.apply(this,arguments)};for(var n in t.prototype=Object.create(o),e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n]);return t},m=f({construct:function(e,t){this.prop=e,this.target=t},addType:function(e,t){e.getProp&&e.getProp(this.prop).propagate(this.target,t)},propHint:function(){return this.prop},propagatesTo:function(){if("<i>"==this.prop||!/[^\w_]/.test(this.prop))return{target:this.target,pathExt:"."+this.prop}}}),g=e.PropHasSubset=e.DefProp=f({construct:function(e,t,n){this.prop=e,this.type=t,this.originNode=n},addType:function(e,t){if(e instanceof D){var n=e.defProp(this.prop,this.originNode);n.origin||(n.origin=this.origin),this.type.propagate(n,t)}},propHint:function(){return this.prop}}),y=f({construct:function(e){this.c=e},addType:function(e){e instanceof D&&e.forAllProps(this.c)}}),v=e.IsCallee=f({construct:function(e,t,n,r){this.self=e,this.args=t,this.argNodes=n,this.retval=r,this.disabled=V.disabledComputing},addType:function(e,t){if(e instanceof I){for(var n=0;n<this.args.length;++n)n<e.args.length&&this.args[n].propagate(e.args[n],t),e.arguments&&this.args[n].propagate(e.arguments,t);e.isArrowFn()||this.self.propagate(e.self,this.self==V.topScope?90:t);var r=e.computeRet,i=e.retval;if(r)for(var s=this.disabled;s;s=s.prev)(s.fn==e||e.originNode&&s.fn.originNode==e.originNode)&&(r=null);if(r){var a=V.disabledComputing;V.disabledComputing=this.disabled,i=r(this.self,this.args,this.argNodes),V.disabledComputing=a}if(e.async&&!e.generator){var o=i.getType();if(!o||o.constructor!=D||"Promise"!=o.name){var l=V.definitions.ecmascript,c=l&&new D(l["Promise.prototype"]);c&&(c.getType().propagate(new g(":t",i)),i=c)}}Ce(e,i).propagate(this.retval,t)}},typeHint:function(){for(var e=[],t=0;t<this.args.length;++t)e.push("?");return new I(null,this.self,this.args,e,o)},propagatesTo:function(){return{target:this.retval,pathExt:".!ret"}}}),x=f({construct:function(e,t,n,r){this.propName=e,this.args=t,this.argNodes=n,this.retval=r,this.disabled=V.disabledComputing},addType:function(e,t){var n=new v(e,this.args,this.argNodes,this.retval);n.disabled=this.disabled,e.getProp(this.propName).propagate(n,t)},propHint:function(){return this.propName}}),b=e.IsCtor=f({construct:function(e,t){this.target=e,this.noReuse=t},addType:function(e,t){e instanceof I&&(V.parent&&!V.parent.options.reuseInstances&&(this.noReuse=!0),e.getProp("prototype").propagate(new S(!this.noReuse&&e,this.target),t))}}),w=e.getInstance=function(e,t){if(!1===t)return new D(e);t||(t=e.hasCtor),e.instances||(e.instances=[]);for(var n=0;n<e.instances.length;++n){var r=e.instances[n];if(r.ctor==t)return r.instance}var i=new D(e,t&&t.name);return i.origin=e.origin,e.instances.push({ctor:t,instance:i}),i},S=e.IsProto=f({construct:function(e,t){this.ctor=e,this.target=t},addType:function(e,t){e instanceof D&&((this.count=(this.count||0)+1)>8||(e==V.protos.Array?this.target.addType(new O):this.target.addType(w(e,this.ctor))))}}),_=f({construct:function(e){this.fn=e},addType:function(e,t){if(e instanceof D&&!e.hasCtor){e.hasCtor=this.fn;var n=new T(e,this.fn);n.addType(this.fn),e.forAllProps((function(e,t,r){r&&t.propagate(n)}))}}}),E=f({construct:function(e,t){this.other=e,this.target=t},addType:function(e,t){e==V.str?this.target.addType(V.str,t):e==V.num&&this.other.hasType(V.num)&&this.target.addType(V.num,t)},typeHint:function(){return this.other}}),C=e.IfObj=f({construct:function(e){this.target=e},addType:function(e,t){e instanceof D&&this.target.addType(e,t)},propagatesTo:function(){return this.target}}),T=f({construct:function(e,t){this.obj=e,this.ctor=t},addType:function(e){e instanceof I&&e.self&&e.self.addType(w(this.obj,this.ctor),4)}}),M=f({construct:function(e){this.obj=e},addType:function(e){e instanceof D&&this.obj.proto==V.protos.Object&&this.obj.replaceProto(e)}}),A=f({construct:function(e,t){this.inner=e,this.weight=t},addType:function(e,t){this.inner.addType(e,Math.min(t,this.weight))},propagatesTo:function(){return this.inner.propagatesTo()},typeHint:function(){return this.inner.typeHint()},propHint:function(){return this.inner.propHint()}}),k=e.Type=function(){};k.prototype=l(o,{constructor:k,propagate:function(e,t){e.addType(this,t)},hasType:function(e){return e==this},isEmpty:function(){return!1},typeHint:function(){return this},getType:function(){return this}});var P=e.Prim=function(e,t){this.name=t,this.proto=e};function L(e){var t=e.charCodeAt(0);return t>=48&&t<=57&&!/\D/.test(e)}P.prototype=l(k.prototype,{constructor:P,toString:function(){return this.name},getProp:function(e){return this.proto.hasProp(e)||o},gatherProperties:function(e,t){this.proto&&this.proto.gatherProperties(e,t)}});var D=e.Obj=function(e,t){if(this.props||(this.props=Object.create(null)),this.proto=!0===e?V.protos.Object:e,e&&e!=V.protos.Object&&!t&&e.name&&!(this instanceof I)){var n=/^(.*)\.prototype$/.exec(this.proto.name);n&&(t=n[1])}this.name=t,this.maybeProps=null,this.origin=V.curOrigin};D.prototype=l(k.prototype,{constructor:D,toString:function(e){if(null==e&&(e=0),e<=0&&this.name)return this.name;var t=[],n=!1;for(var r in this.props)if("<i>"!=r){if(t.length>5){n=!0;break}e?t.push(r+": "+a(this.props[r],e-1,this)):t.push(r)}return t.sort(),n&&t.push("..."),"{"+t.join(", ")+"}"},hasProp:function(e,t){L(e)&&(e=this.normalizeIntegerProp(e));var n=this.props[e];if(!1!==t)for(var r=this.proto;r&&!n;r=r.proto)n=r.props[e];return n},defProp:function(e,t){var n=this.hasProp(e,!1);if(n)return t&&!n.originNode&&(n.originNode=t),n;if(R(e))return o;L(e)&&(e=this.normalizeIntegerProp(e));var r=this.maybeProps&&this.maybeProps[e];return r?(delete this.maybeProps[e],this.maybeUnregProtoPropHandler()):((r=new c).propertyOf=this,r.propertyName=e),this.props[e]=r,r.originNode=t,r.origin=V.curOrigin,this.broadcastProp(e,r,!0),r},getProp:function(e){var t=this.hasProp(e,!0)||this.maybeProps&&this.maybeProps[e];if(t)return t;if(R(e))return o;L(e)&&(e=this.normalizeIntegerProp(e));var n=this.ensureMaybeProps()[e]=new c;return n.propertyOf=this,n.propertyName=e,n},normalizeIntegerProp:function(e){return"<i>"},broadcastProp:function(e,t,n){if(n&&(this.signal("addProp",e,t),this instanceof G||function(e,t){(V.props[e]||(V.props[e]=[])).push(t)}(e,this)),this.onNewProp)for(var r=0;r<this.onNewProp.length;++r){var i=this.onNewProp[r];i.onProtoProp?i.onProtoProp(e,t,n):i(e,t,n)}},onProtoProp:function(e,t,n){var r=this.maybeProps&&this.maybeProps[e];r&&(delete this.maybeProps[e],this.maybeUnregProtoPropHandler(),this.proto.getProp(e).propagate(r)),this.broadcastProp(e,t,!1)},replaceProto:function(e){for(var t=e;t;t=t.proto)if(t==this)return;this.proto&&this.maybeProps&&this.proto.unregPropHandler(this),this.proto=e,this.maybeProps&&this.proto.forAllProps(this)},ensureMaybeProps:function(){return this.maybeProps||(this.proto&&this.proto.forAllProps(this),this.maybeProps=Object.create(null)),this.maybeProps},removeProp:function(e){var t=this.props[e];delete this.props[e],this.ensureMaybeProps()[e]=t,t.types.length=0},forAllProps:function(e){this.onNewProp||(this.onNewProp=[],this.proto&&this.proto.forAllProps(this)),this.onNewProp.push(e);for(var t=this;t;t=t.proto)for(var n in t.props)e.onProtoProp?e.onProtoProp(n,t.props[n],t==this):e(n,t.props[n],t==this)},maybeUnregProtoPropHandler:function(){if(this.maybeProps){for(var e in this.maybeProps)return;this.maybeProps=null}!this.proto||this.onNewProp&&this.onNewProp.length||this.proto.unregPropHandler(this)},unregPropHandler:function(e){for(var t=0;t<this.onNewProp.length;++t)if(this.onNewProp[t]==e){this.onNewProp.splice(t,1);break}this.maybeUnregProtoPropHandler()},gatherProperties:function(e,t){for(var n in this.props)"<i>"!=n&&":"!=n.charAt(0)&&e(n,this,t);this.proto&&this.proto.gatherProperties(e,t+1)},getObjType:function(){return this}});var N="undefined"!=typeof StopIteration;function R(e){return"__proto__"==e||"✖"==e||N&&"__iterator__"==e}var I=e.Fn=function(e,t,n,r,i,s,a){D.call(this,V.protos.Function,e),this.self=t,this.args=n,this.argNames=r,this.retval=i,this.generator=s,this.async=a};I.prototype=l(D.prototype,{constructor:I,toString:function(e){null==e&&(e=0);for(var t=this.generator?"fn*(":"fn(",n=0;n<this.args.length;++n){n&&(t+=", ");var r=this.argNames[n];r&&"?"!=r&&(t+=r+": "),t+=e>-3?a(this.args[n],e-1,this):"?"}return t+=")",this.retval.isEmpty()||(t+=" -> "+(e>-3?a(this.retval,e-1,this):"?")),t},getProp:function(e){if("prototype"==e){var t=this.hasProp(e,!1);if(!t){t=this.defProp(e);var n=new D(!0,this.name&&this.name+".prototype");n.origin=this.origin,t.addType(n,10)}return t}return D.prototype.getProp.call(this,e)},defProp:function(e,t){if("prototype"==e){var n=this.hasProp(e,!1);return n||((n=D.prototype.defProp.call(this,e,t)).origin=this.origin,n.propagate(new _(this)),n)}return D.prototype.defProp.call(this,e,t)},getFunctionType:function(){return this},isArrowFn:function(){return this.originNode&&"ArrowFunctionExpression"==this.originNode.type}});var O=e.Arr=function(e){D.call(this,V.protos.Array);var t=this.defProp("<i>");if(Array.isArray(e)){this.tuple=e.length;for(var n=0;n<e.length;n++){var r=this.defProp(String(n));e[n].propagate(r),r.propagate(t)}}else e&&(this.tuple=0,e.propagate(t))};O.prototype=l(D.prototype,{constructor:O,toString:function(e){if(null==e&&(e=0),e<=-3)return"[?]";var t="";if(this.tuple){for(var n,r=0;r in this.props;r++){var i=a(this.getProp(String(r)),e-1,this);n=(null==n||n==i)&&i,t+=(t?", ":"")+i}n&&(t=n)}else t=a(this.getProp("<i>"),e-1,this);return"["+t+"]"},normalizeIntegerProp:function(e){return+e<this.tuple?e:"<i>"}});var F=e.Sym=function(e,t){P.call(this,V.protos.Symbol,"Symbol"),this.symName=e,this.originNode=t};function B(e){return V.props[e]}F.prototype=l(P.prototype,{constructor:F,asPropName:function(){return":"+this.symName},getSymbolType:function(){return this}}),e.getSymbol=function(e,t){var n=e.replace(/[^\w$\.]/g,"_"),r=V.symbols[n];return r?(t&&!r.originNode&&(r.originNode=t),r):V.symbols[n]=new F(n,t)},e.Context=function(t,n){this.parent=n,this.props=Object.create(null),this.protos=Object.create(null),this.origins=[],this.curOrigin="ecmascript",this.paths=Object.create(null),this.definitions=Object.create(null),this.purgeGen=0,this.workList=null,this.disabledComputing=null,this.curSuperCtor=this.curSuper=null,this.symbols=Object.create(null),e.withContext(this,(function(){if(V.protos.Object=new D(null,"Object.prototype"),V.topScope=new G,V.topScope.name="<top>",V.protos.Array=new D(!0,"Array.prototype"),V.protos.Function=new I("Function.prototype",o,[],[],o),V.protos.Function.proto=V.protos.Object,V.protos.RegExp=new D(!0,"RegExp.prototype"),V.protos.String=new D(!0,"String.prototype"),V.protos.Number=new D(!0,"Number.prototype"),V.protos.Boolean=new D(!0,"Boolean.prototype"),V.protos.Symbol=new D(!0,"Symbol.prototype"),V.str=new P(V.protos.String,"string"),V.bool=new P(V.protos.Boolean,"bool"),V.num=new P(V.protos.Number,"number"),V.curOrigin=null,t)for(var e=0;e<t.length;++e)i.load(t[e])}))},e.Context.prototype.startAnalysis=function(){this.disabledComputing=this.workList=this.curSuperCtor=this.curSuper=null};var U,V=null;e.cx=function(){return V},e.withContext=function(e,t){var n=V;V=e;try{return t()}finally{V=n}},e.TimedOut=function(){this.message="Timed out",this.stack=(new Error).stack},e.TimedOut.prototype=Object.create(Error.prototype),e.TimedOut.prototype.name="infer.TimedOut",e.withTimeout=function(e,t){var n=+new Date+e,r=U;if(r&&r<n)return t();U=n;try{return t()}finally{U=r}},e.addOrigin=function(e){V.origins.indexOf(e)<0&&V.origins.push(e)};var j=20,z=1e-4;function H(t){if(V.workList)return t(V.workList);for(var n=[],r=0,i=t(V.workList=function(e,t,i){r<j-z*n.length&&n.push(e,t,i,r)}),s=0;s<n.length;s+=4){if(U&&+new Date>=U)throw new e.TimedOut;r=n[s+3]+1,n[s+1].addType(n[s],n[s+2])}return V.workList=null,i}function W(e,t,n){var r=V.curSuperCtor,i=V.curSuper;V.curSuperCtor=e,V.curSuper=t;var s=n();return V.curSuperCtor=r,V.curSuper=i,s}var G=e.Scope=function(e,t,n,r){D.call(this,e||!0),this.prev=e,this.originNode=t,this.isBlock=!!n,this.isCatch=!!r};function X(e,t){for(;e.isBlock||e.isCatch||!1===t&&e.fnType&&e.fnType.isArrowFn();)e=e.prev;return e}function K(e,t){var n=X(e).fnType;n&&(n.instantiateScore=(n.instantiateScore||0)+t)}G.prototype=l(D.prototype,{constructor:G,defVar:function(e,t){for(var n=this;;n=n.proto){var r=n.props[e];if(r)return r;if(!n.prev)return n.defProp(e,t)}}});var q={};function J(e,t){var n=t.instantiateScore;if(!V.disabledComputing&&n&&t.args.length&&function(e,t){try{return r.simple(e,{Expression:function(){if(--t<=0)throw q}}),!0}catch(e){if(e==q)return!1;throw e}}(e,5*n))return K(X(t.originNode.scope.prev),n/2),function(e,t){for(var n=e.scope,i=0;i<t.args.length;++i)t.args[i]=new c;t.self=new c,t.computeRet=function(i,s){return function(e,t){V.disabledComputing={fn:e,prev:V.disabledComputing};var n=t();return V.disabledComputing=V.disabledComputing.prev,n}(t,(function(){var a=V.curOrigin;V.curOrigin=t.origin;var l=e.scope?e.scope:n,u=new G(l.prev,l.originNode);for(var h in l.props)for(var p=u.defProp(h,l.props[h].originNode),d=0;d<s.length;++d)t.argNames[d]==h&&d<s.length&&s[d].propagate(p);for(var f=t.argNames.length!=s.length?t.argNames.slice(0,s.length):t.argNames;f.length<s.length;)f.push("?");if(u.fnType=new I(t.name,i,s,f,o,t.generator,t.async),u.fnType.originNode=t.originNode,t.arguments){var m=u.fnType.arguments=new c;for(u.defProp("arguments").addType(new O(m)),d=0;d<s.length;++d)s[d].propagate(m)}return e.scope=u,r.recursive(e.body,u,null,te),r.recursive(e.body,u,null,Se),V.curOrigin=a,u.fnType.retval}))}}(e,t),!0;t.instantiateScore=null}function Y(e){var t=e.retval;if(t!=o&&!e.isArrowFn()){var n,r;!t.isEmpty()&&(n=t.getType())instanceof O&&(t=r=n.getProp("<i>"));for(var s=u(e.self,"!this",0),a=0;!s&&a<e.args.length;++a)s=u(e.args[a],"!"+a,0);if(s){r&&(s="["+s+"]");var l=new i.TypeParser(s).parseType(!0);return e.computeRet=l.apply?l:function(){return l},e.computeRetSource=s,!0}}function u(e,n,r){if(!(r>3)&&e.forward)for(var i=0;i<e.forward.length;++i){var s=e.forward[i].propagatesTo();if(s){var a,o=n;if(s instanceof c)a=s;else{if(!(s.target instanceof c))continue;o+=s.pathExt,a=s.target}if(a==t)return o;var l=u(a,o,r+1);if(l)return l}}}}function $(e,t){return e.defProp(t.name,t)}function Z(e){return"Identifier"==e.type?e.name:"AssignmentPattern"==e.type?Z(e.left):"ObjectPattern"==e.type?"{"+e.properties.map((function(e){return Z("RestElement"===e.type?e:e.value)})).join(", ")+"}":"ArrayPattern"==e.type?"["+e.elements.map((function(e){return e?Z(e):""})).join(", ")+"]":"RestElement"==e.type?"..."+Z(e.argument):"_"}function Q(e){return"VariableDeclaration"==e.type&&"var"!=e.kind||"FunctionDeclaration"==e.type||"ClassDeclaration"==e.type}function ee(e,t){return{inner:e,outer:t||e}}var te=e.scopeGatherer=r.make({VariablePattern:function(e,t){t.inner&&$(t.inner,e)},AssignmentPattern:function(e,t,n){n(e.left,t,"Pattern"),n(e.right,t.outer,"Expression")},AssignmentExpression:function(e,t,n){"MemberExpression"==e.left.type?n(e.left,t,"Expression"):n(e.left,ee(!1,t),"Pattern"),n(e.right,t,"Expression")},MemberPattern:function(e,t,n){n(e,t.outer)},Function:function(e,t,n){for(var r=e.scope=new G(t,e),i=[],s=[],a=0;a<e.params.length;++a){var l=e.params[a];if(s.push(Z(l)),"Identifier"==l.type)i.push($(r,l));else{var u=new c;i.push(u),u.originNode=l,n(l,ee(r),"Pattern")}}r.fnType=new I(e.id&&e.id.name,new c,i,s,o,e.generator,e.async),r.fnType.originNode=e,e.id&&$("FunctionDeclaration"==e.type?t:r,e.id),n(e.body,r,e.expression?"Expression":"Statement")},BlockStatement:function(e,t,n){!e.scope&&e.body.some(Q)&&(t=e.scope=new G(t,e,!0)),r.base.BlockStatement(e,t,n)},CatchClause:function(e,t,n){if(e.param)if(t=e.scope=new G(t,e,!1,!0),"Identifier"==e.param.type){var r=$(t,e.param);n(e.body,t,"Statement");var i=V.definitions.ecmascript;i&&r.isEmpty()&&w(i["Error.prototype"]).propagate(r,6)}else n(e.param,ee(t),"Pattern")},VariableDeclaration:function(e,t,n){for(var r="var"==e.kind?X(t):t,i=0;i<e.declarations.length;++i){var s=e.declarations[i];n(s.id,ee(r,t),"Pattern"),s.init&&n(s.init,t,"Expression")}},ClassDeclaration:function(e,t,n){e.id&&$(t,e.id),e.superClass&&n(e.superClass,t,"Expression");for(var r=0;r<e.body.body.length;r++)n(e.body.body[r],t)},ForInStatement:function(e,t,n){!e.scope&&Q(e.left)&&(t=e.scope=new G(t,e,!0)),r.base.ForInStatement(e,t,n)},ForStatement:function(e,t,n){!e.scope&&e.init&&Q(e.init)&&(t=e.scope=new G(t,e,!0)),r.base.ForStatement(e,t,n)},ImportDeclaration:function(e,t){for(var n=0;n<e.specifiers.length;n++)$(t,e.specifiers[n].local)}});function ne(e){e.scope&&(e.scope=null)}te.ForOfStatement=te.ForInStatement;var re={BlockStatement:ne,Function:ne,CatchClause:ne,ForInStateMent:ne,ForStatement:ne};e.clearScopes=function(e){r.simple(e,re)};var ie=e.propName=function(e,t){var n=e.property||e.key;if(!e.computed&&"Identifier"==n.type)return n.name;if("Literal"==n.type){if("string"==typeof n.value)return n.value;if("number"==typeof n.value)return String(n.value)}if(t){var r=se(be(n,t));if(r)return e.propName=r}else if(e.propName)return e.propName;return"<i>"};function se(e){var t=e.getSymbolType();if(t)return t.asPropName()}function ae(e){switch(e){case"+":case"-":case"~":return V.num;case"!":return V.bool;case"typeof":return V.str;case"void":case"delete":return o}}function oe(e){switch(e){case"==":case"!=":case"===":case"!==":case"<":case">":case">=":case"<=":case"in":case"instanceof":return!0}}function le(e){if(e.regex)return w(V.protos.RegExp);switch(typeof e.value){case"boolean":return V.bool;case"number":return V.num;case"string":return V.str;case"object":case"function":return e.value?w(V.protos.RegExp):o}}function ce(e,t){for(var n=0;n<e.params.length;n++){var r=e.params[n];"Identifier"!=r.type&&pe(r,t,e.scope.fnType.args[n])}}function ue(e,t){return t.hasProp(e.name)||V.topScope.defProp(e.name,e)}var he=e.inferPatternVisitor={Identifier:function(e,t,n){n.propagate(ue(e,t))},MemberExpression:function(e,t,n){var r=be(e.object,t),i=ie(e,t);r.propagate(new g(i,n,e.property))},RestElement:function(e,t,n){pe(e.argument,t,new O(n))},ObjectPattern:function(e,t,n){for(var r=0;r<e.properties.length;++r){var i=e.properties[r];"RestElement"!=i.type&&pe(i.value,t,n.getProp(ie(i)))}},ArrayPattern:function(e,t,n){for(var r=0;r<e.elements.length;r++)e.elements[r]&&pe(e.elements[r],t,n.getProp(String(r)))},AssignmentPattern:function(e,t,n){pe(e.left,t,function(e,t){if(e==t||t==o)return e;if(e==o)return t;var n=new c;return e.propagate(n),t.propagate(n),n}(n,be(e.right,t)))}};function pe(e,t,n){var r=he[e.type];r&&r(e,t,n)}function de(e){var t=X(e);return t.fnType?t.fnType.self:t}function fe(e){e.isEmpty()&&e.propertyOf&&(e.propertyOf.getProp(e.propertyName).addType(new D,1),fe(e.propertyOf))}function me(e,t,n){!n&&e.id&&(n=e.id.name);var r,i,s=V.protos.Object;if(e.superClass)if("Literal"==e.superClass.type&&null==e.superClass.value)s=null;else{var a,l=be(e.superClass,t);(r=l.getFunctionType())&&(a=r.getProp("prototype").getObjType())?s=a:(r=l,i=l.getProp("prototype"))}var c=new D(s,n&&n+".prototype");return i&&i.propagate(new M(c)),W(r,i||s,(function(){for(var r,i=e.body.body,s=0;s<i.length;s++)"constructor"==i[s].kind&&(r=i[s].value);var a=e.objType=r?be(r,t):new I(n,o,[],null,o);a.originNode=e.id||r||e;var l=w(c,a);for(a.self.addType(l),a.defProp("prototype",e).addType(c),s=0;s<i.length;s++){var u,h=i[s];if("constructor"!=h.kind){var p=ie(h,t);"<i>"==p||"set"==h.kind?u=o:((u=(h.static?a:c).defProp(p,h.key)).initializer=!0,"get"==h.kind&&(u=new v(l,[],null,u))),be(h.value,t,u);var d=u.getFunctionType();d&&d.self.addType(l)}}return a}))}function ge(e,t,n){var r=e.length>1&&e.length<6;if(r){for(var i,s=!0,a=0;a<e.length;a++){var o=e[a];o?"Literal"!=o.type||i&&i!=typeof o.value?s=!1:i=typeof o.value:r=!1}s&&(r=!1)}if(r){var l=[];for(a=0;a<e.length;++a)l.push(n(e[a],t));return new O(l)}if(e.length<2)return new O(e[0]&&n(e[0],t));var u=new c;for(a=0;a<e.length;a++)e[a]&&n(e[a],t).propagate(u);return new O(u)}function ye(e){return function(t,n,r,i){var s=e(t,n,i);return r&&s.propagate(r),s}}function ve(e){return function(t,n,r,i){return r||(r=new c),e(t,n,r,i),r}}var xe=e.inferExprVisitor={ArrayExpression:ye((function(e,t){return ge(e.elements,t,be)})),ObjectExpression:ye((function(e,t,n){for(var r,i=V.protos.Object,s=0;s<e.properties.length;++s){var a=e.properties[s];if("SpreadElement"!=a.type&&"__proto__"==a.key.name)if("Literal"==a.value.type&&null==a.value.value)i=null;else{var l=be(a.value,t),c=l.getObjType();c?i=c:r=l}}var u=e.objType=new D(i,n);return r&&r.propagate(new M(u)),u.originNode=e,W(null,r||i,(function(){for(var n=0;n<e.properties.length;++n){var r=e.properties[n],i=r.key;if("SpreadElement"!=r.type&&!R(r.key.name)){var s,a=ie(r,t);if("<i>"==a||"set"==r.kind)s=o;else{var l=s=u.defProp(a,i);l.initializer=!0,"get"==r.kind&&(s=new v(u,[],null,l))}be(r.value,t,s,a),"FunctionExpression"==r.value.type&&r.value.scope.fnType.self.addType(u,2)}}})),u})),FunctionExpression:ye((function(e,t,n){var i=e.scope,s=i.fnType;return n&&!s.name&&(s.name=n),ce(e,i),e.expression?be(e.body,i,i.fnType.retval=new c):r.recursive(e.body,i,null,Se,"Statement"),"ArrowFunctionExpression"==e.type&&de(t).propagate(s.self),J(e,s)||Y(s),e.id&&i.getProp(e.id.name).addType(s),s})),ClassExpression:ye(me),SequenceExpression:ye((function(e,t){for(var n=0,r=e.expressions.length-1;n<r;++n)be(e.expressions[n],t,o);return be(e.expressions[r],t)})),UnaryExpression:ye((function(e,t){return be(e.argument,t,o),ae(e.operator)})),UpdateExpression:ye((function(e,t){return be(e.argument,t,o),V.num})),BinaryExpression:ye((function(e,t){if("+"==e.operator){var n=be(e.left,t),r=be(e.right,t);if(n.hasType(V.str)||r.hasType(V.str))return V.str;if(n.hasType(V.num)&&r.hasType(V.num))return V.num;var i=new c;return n.propagate(new E(r,i)),r.propagate(new E(n,i)),i}return be(e.left,t,o),be(e.right,t,o),oe(e.operator)?V.bool:V.num})),AssignmentExpression:ye((function(e,t,n){var r,i;if("MemberExpression"==e.left.type?(i=ie(e.left,t),n||(n="Identifier"==e.left.object.type?e.left.object.name+"."+i:i)):n||"Identifier"!=e.left.type||(n=e.left.name),e.operator&&"="!=e.operator&&"+="!=e.operator?(be(e.right,t,o),r=V.num):r=be(e.right,t,null,n),"MemberExpression"==e.left.type){var s=be(e.left.object,t);if("prototype"==i&&K(t,20),"<i>"==i){var a=e.left.property.name,l=t.props[a],c=l&&l.iteratesOver;if(c){K(t,20);var u="MemberExpression"==e.right.type&&e.right.computed&&e.right.property.name==a;return c.forAllProps((function(e,t,n){n&&"prototype"!=e&&"<i>"!=e&&s.propagate(new g(e,u?t:o))})),r}}s.propagate(new g(i,r,e.left.property)),fe(s),"FunctionExpression"==e.right.type&&s.propagate(e.right.scope.fnType.self,2)}else pe(e.left,t,r);return r})),LogicalExpression:ve((function(e,t,n){be(e.left,t,n),be(e.right,t,n)})),ConditionalExpression:ve((function(e,t,n){be(e.test,t,o),be(e.consequent,t,n),be(e.alternate,t,n)})),NewExpression:ve((function(e,t,n,r){"Identifier"==e.callee.type&&e.callee.name in t.props&&K(t,20);for(var i=0,s=[];i<e.arguments.length;++i)s.push(be(e.arguments[i],t));var a=be(e.callee,t),o=new c;a.propagate(new b(o,r&&/\.prototype$/.test(r))),o.propagate(n,90),a.propagate(new v(o,s,e.arguments,new C(n)))})),CallExpression:ve((function(e,t,n){for(var r=0,i=[];r<e.arguments.length;++r)i.push(be(e.arguments[r],t));var s=X(t).fnType;if("MemberExpression"==e.callee.type){var a=be(e.callee.object,t),o=ie(e.callee,t);s&&("call"==o||"apply"==o)&&s.args.indexOf(a)>-1&&K(t,30),a.propagate(new x(o,i,e.arguments,n))}else if("Super"==e.callee.type&&V.curSuperCtor)e.callee.superType=V.curSuperCtor,V.curSuperCtor.propagate(new v(de(t),i,e.arguments,n)),de(t).propagate(n,90);else{var l=be(e.callee,t);s&&s.args.indexOf(l)>-1&&K(t,30);var c=l.getFunctionType();c&&c.instantiateScore&&s&&K(t,c.instantiateScore/5),l.propagate(new v(V.topScope,i,e.arguments,n))}})),AwaitExpression:ve((function(e,t,n,r){var i=be(e.argument,t,null,r),s=i.getType();s&&s.constructor==D&&"Promise"==s.name?s.hasProp(":t")&&s.getProp(":t").propagate(n):i.propagate(n)})),MemberExpression:ve((function(e,t,n){var r,i=ie(e);if("<i>"==i){var s=be(e.property,t),a=se(s);a?i=e.propName=a:s.hasType(V.num)||(r=6)}be(e.object,t).getProp(i).propagate(n,r)})),Identifier:ye((function(e,t){if("arguments"==e.name){var n=X(t,!1);n.fnType&&!(e.name in n.props)&&n.defProp(e.name,n.fnType.originNode).addType(new O(n.fnType.arguments=new c))}return t.getProp(e.name)})),ThisExpression:ye((function(e,t){return de(t)})),Super:ye((function(e){return e.superType=V.curSuper||o})),Literal:ye((function(e){return le(e)})),TemplateLiteral:ye((function(e,t){for(var n=0;n<e.expressions.length;++n)be(e.expressions[n],t,o);return V.str})),TaggedTemplateExpression:ve((function(e,t,n){for(var r=[new O(V.str)],i=0;i<e.quasi.expressions.length;++i)r.push(be(e.quasi.expressions[i],t));be(e.tag,t,new v(V.topScope,r,e.quasi.expressions,n))})),YieldExpression:ye((function(e,t){var n=o,r=X(t).fnType;return r&&(r.retval==o&&(r.retval=new c),r.yieldval||(r.yieldval=new c),n=r.retval),e.argument&&(e.delegate?be(e.argument,t,new x("next",[],null,new m("value",n))):be(e.argument,t,n)),r?r.yieldval:o}))};function be(e,t,n,r){var i=xe[e.type];return i?i(e,t,n,r):o}function we(e){return"VariableDeclaration"==e.type?e.declarations[0].id:e}xe.ArrowFunctionExpression=xe.FunctionExpression;var Se=e.inferWrapper=r.make({Expression:function(e,t){be(e,e.scope||t,o)},ObjectExpression:function(e,t){be(e,e.scope||t,o)},FunctionDeclaration:function(e,t,n){var r=e.scope,i=r.fnType;ce(e,r),n(e.body,r,"Statement"),J(e,i)||Y(i),e.id&&t.getProp(e.id.name).addType(i)},Statement:function(e,t,n){n(e,e.scope||t)},ExportDefaultDeclaration:function(e,t,n){n(e.declaration,e.scope||t)},VariableDeclaration:function(e,t){for(var n=0;n<e.declarations.length;++n){var r=e.declarations[n];if("Identifier"==r.id.type){var i=t.getProp(r.id.name);r.init&&be(r.init,t,i,r.id.name)}else r.init&&pe(r.id,t,be(r.init,t))}},ClassDeclaration:function(e,t){e.id?t.getProp(e.id.name).addType(me(e,t,e.id.name)):me(e,t)},ReturnStatement:function(e,t){if(e.argument){var n=o,r=X(t).fnType;r&&(r.retval==o&&(r.retval=new c),n=r.retval),be(e.argument,t,n)}},ForInStatement:function(e,t,n){var r=be(e.right,t);if("Identifier"==e.right.type&&e.right.name in t.props||"MemberExpression"==e.right.type&&"prototype"==e.right.property.name){K(t,5);var i=we(e.left);"Identifier"==i.type?(i.name in t.props&&(t.getProp(i.name).iteratesOver=r),r.getProp("<i>").propagate(ue(i,t))):pe(i,t,r.getProp("<i>"))}n(e.body,t,"Statement")},ForOfStatement:function(e,t,n){var r,i=we(e.left);"Identifier"==i.type?r=ue(i,t):pe(i,t,r=new c),e.await?be(e.right,t,new x(":Symbol.asyncIterator",[],null,new x("next",[],null,new m(":t",new m("value",r))))):be(e.right,t,new x(":Symbol.iterator",[],null,new x("next",[],null,new m("value",r)))),n(e.body,t,"Statement")}}),_e=e.parse=function(e,r,i){var s;r&&!Array.isArray(r)||(r=i);try{s=t.parse(e,r)}catch(t){s=n.parse(e,r)}return s};function Ee(e,t,n){var r=V.definitions.ecmascript,i=new D(!0);i.defProp("done").addType(V.bool),t.propagate(i.defProp("value"));var s=i;n&&r&&(s=new D(r["Promise.prototype"])).getType().propagate(new g(":t",i));var a=new I(null,o,e?[e]:[],e?["?"]:[],s),l=new D(!r||(n?r.async_generator_prototype:r.generator_prototype));return l.defProp("next").addType(a),l}function Ce(e,t){return e.generator?e.computeRet?Ee(e.yieldval,t,e.async):(!0===e.generator&&(e.generator=Ee(e.yieldval,t,e.async)),e.generator):t}function Te(e,t,n){var r=Ae(e,n).getFunctionType();if(!r)return o;var i=r.retval;if(r.computeRet){for(var s=0,a=[];s<t.length;++s)a.push(Ae(t[s],n));var l=o;"MemberExpression"==e.type&&(l=Ae(e.object,n)),i=r.computeRet(l,a,t)}return Ce(r,i)}e.analyze=function(t,n,i){"string"==typeof t&&(t=_e(t)),n||(n="file#"+V.origins.length),e.addOrigin(V.curOrigin=n),i||(i=V.topScope),V.startAnalysis(),r.recursive(t,i,null,te),V.parent&&V.parent.signal("preInfer",t,i),r.recursive(t,i,null,Se),V.parent&&V.parent.signal("postInfer",t,i),V.curOrigin=null},e.purge=function(e,t,n){var r=function(e,t,n){var r=Array.isArray(e);return r&&1==e.length&&(e=e[0],r=!1),r?null==n?function(t){return e.indexOf(t.origin)>-1}:function(r,i){return i&&i.start>=t&&i.end<=n&&e.indexOf(r.origin)>-1}:null==n?function(t){return t.origin==e}:function(r,i){return i&&i.start>=t&&i.end<=n&&r.origin==e}}(e,t,n);for(var i in++V.purgeGen,V.topScope.purge(r),V.props){for(var s=V.props[i],a=0;a<s.length;++a){var o=s[a].props[i];o&&!r(o,o.originNode)||s.splice(a--,1)}s.length||delete V.props[i]}},c.prototype.purge=function(e){if(this.purgeGen!=V.purgeGen){this.purgeGen=V.purgeGen;for(var t=0;t<this.types.length;++t){var n=this.types[t];e(n,n.originNode)?this.types.splice(t--,1):n.purge(e)}if(this.types.length||(this.maxWeight=0),this.forward)for(t=0;t<this.forward.length;++t){var r=this.forward[t];e(r)?(this.forward.splice(t--,1),this.props&&(this.props=null)):r.purge&&r.purge(e)}}},o.purge=function(){},D.prototype.purge=function(e){if(this.purgeGen==V.purgeGen)return!0;for(var t in this.purgeGen=V.purgeGen,this.props){var n=this.props[t];e(n,n.originNode)&&this.removeProp(t),n.purge(e)}},I.prototype.purge=function(e){if(!D.prototype.purge.call(this,e)){this.self.purge(e),this.retval.purge(e);for(var t=0;t<this.args.length;++t)this.args[t].purge(e)}};var Me=e.typeFinder={ArrayExpression:function(e,t){return ge(e.elements,t,Ae)},ObjectExpression:function(e){return e.objType},ClassDeclaration:function(e){return e.objType},ClassExpression:function(e){return e.objType},FunctionDeclaration:function(e){return e.scope.fnType},FunctionExpression:function(e){return e.scope.fnType},ArrowFunctionExpression:function(e){return e.scope.fnType},SequenceExpression:function(e,t){return Ae(e.expressions[e.expressions.length-1],t)},UnaryExpression:function(e){return ae(e.operator)},UpdateExpression:function(){return V.num},BinaryExpression:function(e,t){if(oe(e.operator))return V.bool;if("+"==e.operator){var n=Ae(e.left,t),r=Ae(e.right,t);if(n.hasType(V.str)||r.hasType(V.str))return V.str}return V.num},AssignmentExpression:function(e,t){return Ae(e.right,t)},LogicalExpression:function(e,t){var n=Ae(e.left,t);return n.isEmpty()?Ae(e.right,t):n},ConditionalExpression:function(e,t){var n=Ae(e.consequent,t);return n.isEmpty()?Ae(e.alternate,t):n},NewExpression:function(e,t){var n=Ae(e.callee,t).getFunctionType(),r=n&&n.getProp("prototype").getObjType();return r?w(r,n):o},CallExpression:function(e,t){return Te(e.callee,e.arguments,t)},MemberExpression:function(e,t){var n=ie(e),r=Ae(e.object,t).getType();return r?r.getProp(n):"<i>"==n?o:function(e){De=!0;var t=B(e);if(t)for(var n=0;n<t.length;++n){var r=t[n].getProp(e);if(!r.isEmpty())return r}return o}(n)},MethodDefinition:function(e){var t=ie(e),n=de(e.value.scope).getType();return n?n.getProp(t):o},Identifier:function(e,t){return t.hasProp(e.name)||o},ThisExpression:function(e,t){return de(t)},Literal:function(e){return le(e)},Super:ye((function(e){return e.superType})),TemplateLiteral:function(){return V.str},TaggedTemplateExpression:function(e,t){return Te(e.tag,e.quasi.expressions,t)},YieldExpression:function(e,t){var n=X(t).fnType;return n?n.yieldval:o}};function Ae(e,t){var n=Me[e.type];return n?n(e,t):o}var ke=e.searchVisitor=r.make({Function:function(e,t,n){r.base.Function(e,e.scope,n)},CatchClause:function(e,t,n){r.base.CatchClause(e,e.scope,n)},Property:function(e,t,n){e.computed&&n(e.key,t,"Expression"),e.key!=e.value&&n(e.value,t,"Expression")},Statement:function(e,t,n){n(e,e.scope||t)},ImportSpecifier:function(e,t,n){n(e.local,t)},ImportDefaultSpecifier:function(e,t,n){n(e.local,t)},ImportNamespaceSpecifier:function(e,t,n){n(e.local,t)}}),Pe=e.searchExprVisitor=r.make({MemberExpression:function(e,t,n){n(e.object,t,"Expression"),e.computed&&n(e.property,t,"Expression")},Property:function(e,t,n){e.computed&&n(e.key,t,"Expression"),n(e.value,t,"Expression")}},ke);e.fullVisitor=r.make({MemberExpression:function(e,t,n){n(e.object,t,"Expression"),n(e.property,t,e.computed?"Expression":null)},Property:function(e,t,n){e.computed&&n(e.key,t,"Expression"),n(e.value,t,"Expression")}},ke),e.findExpressionAt=function(e,t,n,i,s){var a=s||function(e,t){return("Identifier"!=t.type||"✖"!=t.name)&&Me.hasOwnProperty(t.type)};return r.findNodeAt(e,t,n,a,Pe,i||V.topScope)},e.findClosestExpression=function(e,t,n,i,s){var a=s||function(e,n){return!(null!=t&&n.start>t)&&("Identifier"!=n.type||"✖"!=n.name)&&Me.hasOwnProperty(n.type)};return r.findNodeAround(e,n,a,Pe,i||V.topScope)},e.findExpressionAround=function(e,t,n,i,s){var a=s||function(e,n){return!(null!=t&&n.start>t)&&("Identifier"!=n.type||"✖"!=n.name)&&Me.hasOwnProperty(n.type)};return r.findNodeAround(e,n,a,ke,i||V.topScope)},e.expressionType=function(e){return Ae(e.node,e.state)},e.parentNode=function(e,t){var n=[];try{!function t(i,s,a){if(i.start<=e.start&&i.end>=e.end){var o=n[n.length-1];if(i==e)throw{found:o};o!=i&&n.push(i),r.base[a||i.type](i,s,t),o!=i&&n.pop()}}(t,null)}catch(e){if(e.found)return e.found;throw e}};var Le=e.findTypeFromContext={ArrayExpression:function(e,t,n){return n(e,!0).getProp("<i>")},ObjectExpression:function(e,t,n){for(var r=0;r<e.properties.length;++r){var i=t.properties[r];if(i.value==t)return n(e,!0).getProp(ie(i))}},UnaryExpression:function(e){return ae(e.operator)},UpdateExpression:function(){return V.num},BinaryExpression:function(e){return oe(e.operator)?V.bool:V.num},AssignmentExpression:function(e,t,n){return n(e.left)},LogicalExpression:function(e,t,n){return n(e,!0)},ConditionalExpression:function(e,t,n){if(e.consequent==t||e.alternate==t)return n(e,!0)},CallExpression:function(e,t,n){for(var r=0;r<e.arguments.length;r++)if(e.arguments[r]==t){var i=n(e.callee).getFunctionType();if(i instanceof I)return i.args[r];break}},ReturnStatement:function(e,t,n){var i=r.findNodeAround(t.sourceFile.ast,t.start-1,"Function");if(i){var s="FunctionDeclaration"!=i.node.type?n(i.node,!0).getFunctionType():i.node.scope.fnType;if(s)return s.retval.getType()}},VariableDeclarator:function(e,t,n){if(e.init==t)return n(e.id)}};Le.NewExpression=Le.CallExpression,e.typeFromContext=function(t,n){var r=e.parentNode(n.node,t),i=null;if(Le.hasOwnProperty(r.type)){var s=Le[r.type];i=s&&s(r,n.node,(function(r,i){var s={node:r,state:n.state};return(i?e.typeFromContext(t,s):e.expressionType(s))||o}))}return i||e.expressionType(n)};var De=!1;e.resetGuessing=function(e){De=e},e.didGuess=function(){return De},e.forAllPropertiesOf=function(e,t){e.gatherProperties(t,0)},e.findRefs=function(t,n,i,s,a){function o(e,n,r){var o=r[r.length-2];if(("MemberExpression"!=o.type||o.computed||!e.object)&&e.name==i&&(e!=t.id||"FunctionDeclaration"!=t.type)&&o.property!==e)for(var l=n;l;l=l.prev)if(l==s&&a(e,n,r),i in l.props)return}r.ancestor(t,{Identifier:o,VariablePattern:o},e.fullVisitor,n)};var Ne=r.make({Function:function(e,t,n){n(e.body,e.scope,e.expression?"Expression":"Statement")},Statement:function(e,t,n){n(e,e.scope||t)}});e.findPropRefs=function(e,t,n,i,s){for(;n&&!n.props[i]&&(!n.maybeProps||!n.maybeProps[i]);)n=n.proto;if(!n)throw new Error("Couldn't locate property in the base object type.");function a(e){for(;e&&e!=n;){if(e.props[i]||e.maybeProps&&e.maybeProps[i])return!1;e=e.proto}return e}r.simple(e,{MemberExpression:function(e,t){e.computed||ie(e)!=i||a(Ae(e.object,t).getType())&&s(e.property,t)},ObjectExpression:function(e,t){if(Ae(e,t).getType()==n)for(var r=0;r<e.properties.length;++r)ie(e.properties[r])==i&&s(e.properties[r].key,t)},MethodDefinition:function(e){ie(e)==i&&e.value&&a(de(e.value.scope).getType())&&s(e.key,e.value.scope)}},Ne,t)};var Re=e.scopeAt=function(e,t,n){var i=r.findNodeAround(e,t,(function(e,t){return t.scope}));return i?i.node.scope:n||V.topScope};e.forAllLocalsAt=function(e,t,n,r){Re(e,t,n).gatherProperties(r,0)},i=e.def=i.init({},e)},r(t,n(5356),n(5331),n(1658),n(4692),n(8748))},8748:function(e,t){var n;n=function(e){function t(e,t){var n=this._handlers||(this._handlers=Object.create(null));(n[e]||(n[e]=[])).push(t)}function n(e,t){var n=this._handlers&&this._handlers[e];if(n)for(var r=0;r<n.length;++r)if(n[r]==t){n.splice(r,1);break}}var r=[];function i(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length?n.slice():r}function s(e,t,n,r,s){for(var a=i(this,e),o=0;o<a.length;++o)a[o].call(this,t,n,r,s)}function a(e,t,n,r,s){for(var a=i(this,e),o=0;o<a.length;++o){var l=a[o].call(this,t,n,r,s);if(l)return l}}function o(e){var t=this._handlers&&this._handlers[e];return t&&t.length>0&&t}e.mixin=function(e){return e.on=t,e.off=n,e.signal=s,e.signalReturnFirst=a,e.hasHandler=o,e}},n(t)},2274:function(e,t,n){var r;r=function(e,t,n,r,i){"use strict";var s=Object.create(null);e.registerPlugin=function(e,t){s[e]=t};var a=e.defaultOptions={debug:!1,async:!1,getFile:function(e,t){this.async&&t(null,null)},normalizeFilename:function(e){return e},defs:[],plugins:{},fetchTimeout:1e3,dependencyBudget:2e4,reuseInstances:!0,stripCRs:!1,ecmaVersion:9,projectDir:"/",parent:null},o={completions:{takesFile:!0,run:function(e,n,i){if(null==n.end)throw y("missing .query.end field");var s=e.signalReturnFirst("completion",i,n);if(s)return s;for(var a=_(i,n.end),o=a,l=i.text;a&&r.isIdentifierChar(l.charCodeAt(a-1));)--a;if(!1!==n.expandWordForward)for(;o<l.length&&r.isIdentifierChar(l.charCodeAt(o));)++o;var c,u,h,p,d=l.slice(a,o),f=[];function m(t,r,i,s){if((!v&&!1===n.omitObjectPrototype||r!=e.cx.protos.Object||d)&&!(!1!==n.filter&&d&&0!==(n.caseInsensitive?t.toLowerCase():t).indexOf(d)||c&&c.props[t])){var a=N(n,f,t,r&&r.props[t],i);s&&a&&"string"!=typeof a&&s(a)}}n.caseInsensitive&&(d=d.toLowerCase());var g,v,x,b,w,S=t.findExpressionAround(i.ast,null,a,i.scope);if(S){var E=S.node;if(!1===n.inLiteral&&"Literal"===E.type&&("string"==typeof E.value||E.regex))return{start:T(n,i,a),end:T(n,i,o),completions:[]};if("MemberExpression"==E.type&&E.object.end<a)g=S;else if(b=a,w=o,"Literal"==(x=E).type&&"string"==typeof x.value&&x.start==b-1&&x.end<=w+1){var C=t.parentNode(E,i.ast);"MemberExpression"==C.type&&C.property==E&&(g={node:C,state:S.state})}else if("ObjectExpression"==E.type){var M=P(E,o);M?(v=S,I=p=M.key.name||M.key.value):d||/:\s*$/.test(i.text.slice(0,a))||(v=S,I=p=!0)}}if(v)h=t.typeFromContext(i.ast,v),c=v.node.objType;else if(g)I="Literal"==(I=g.node.property).type?I.value.slice(1):I.name,g.node=g.node.object,h=t.expressionType(g);else if("."==l.charAt(a-1)){for(var A=a-1;A&&("."==l.charAt(A-1)||r.isIdentifierChar(l.charCodeAt(A-1)));)A--;var R=l.slice(A,a-1);R&&(h=t.def.parsePath(R,i.scope).getObjType(),I=d)}if(null!=I){if(e.cx.completingProperty=I,h&&t.forAllPropertiesOf(h,m),!f.length&&!1!==n.guess&&h&&h.guessProperties&&h.guessProperties((function(e,t,n){e!=I&&"✖"!=e&&"<i>"!=e&&m(e,t,n)})),!f.length&&d.length>=2&&!1!==n.guess)for(var I in e.cx.props)m(I,e.cx.props[I][0],0);u="memberCompletion"}else t.forAllLocalsAt(i.ast,a,i.scope,m),n.includeKeywords&&(e.options.ecmaVersion>=6?D:L).forEach((function(e){m(e,null,0,(function(e){e.isKeyword=!0}))})),u="variableCompletion";return e.signal(u,i,a,o,m),!1!==n.sort&&f.sort(k),e.cx.completingProperty=null,{start:T(n,i,a),end:T(n,i,o),isProperty:!!I,isObjectKey:!!p,completions:f}}},properties:{run:function(e,t){var n=t.prefix,r=[];for(var i in e.cx.props)"<i>"==i||n&&0!==i.indexOf(n)||r.push(i);return!1!==t.sort&&r.sort(k),{completions:r}}},type:{takesFile:!0,run:function(e,n,r){var i,s,a,o=I(r,n),l=V(e,n,r,o);(i=l[0])||(i=(l=V(e,n,r,o=O(r,n)))[0]),s=l[1],a=l[2];var c={guess:t.didGuess(),type:t.toString(a,n.depth),name:i&&i.name,exprName:s,doc:a.doc,url:a.url};return i&&z(n,i,c),M(c)}},documentation:{takesFile:!0,run:function(e,n,r){var i=I(r,n),s=U(e,n,r,i),a=s.getType();a||(a=(s=U(e,n,r,i=O(r,n))).getType());var o={url:s.url,doc:j(n,s.doc),type:t.toString(s)};return a&&z(n,a,o),M(o)}},definition:{takesFile:!0,run:function(e,n,r){var i=U(e,n,r,I(r,n));if(t.didGuess())return{};var s=H(i),a={url:i.url,doc:j(n,i.doc),origin:i.origin};if(i.types)for(var o=i.types.length-1;o>=0;--o){var l=i.types[o];z(n,l,a),s||(s=H(l))}if(s&&s.node){var c=s.node.sourceFile||e.fileMap[s.origin],u=T(n,c,s.node.start),h=T(n,c,s.node.end);a.start=u,a.end=h,a.file=s.origin;var p=Math.max(0,s.node.start-50);a.contextOffset=s.node.start-p,a.context=c.text.slice(p,p+50)}else s&&(a.file=s.origin,W(e,n,s,a));return M(a)}},refs:{takesFile:!0,fullFile:!0,run:function(e,t,n){var r=F(n,t,!0);if(r&&"Identifier"==r.node.type)return G(e,t,n,r);if(r&&"MemberExpression"==r.node.type&&!r.node.computed){var i=r.node.property;return r.node=r.node.object,X(e,t,n,r,i)}if(r&&"ObjectExpression"==r.node.type)for(var s=_(n,t.end),a=0;a<r.node.properties.length;++a){var o=r.node.properties[a].key;if(o.start<=s&&o.end>=s)return X(e,t,n,r,o)}else if(r&&"MethodDefinition"==r.node.type)return X(e,t,n,r,i=r.node.key);throw y("Not at a variable or property name.")}},rename:{takesFile:!0,fullFile:!0,run:function(e,t,n){if("string"!=typeof t.newName)throw y(".query.newName should be a string");var r=F(n,t);if(!r||"Identifier"!=r.node.type)throw y("Not at a variable.");var i=G(e,t,n,r,t.newName),s=i.refs;delete i.refs,i.files=e.files.map((function(e){return e.name}));for(var a=i.changes=[],o=0;o<s.length;++o){var l=s[o];l.isShorthand?l.text=r.node.name+": "+t.newName:l.text=t.newName,a.push(l)}return i}},files:{run:function(e){return{files:e.files.map((function(e){return e.name}))}}}};function l(e,t){this.name=e,this.parent=t,this.scope=this.text=this.ast=this.lineOffsets=null}function c(e,n){var r={directSourceFile:n,allowReturnOutsideFunction:!0,allowImportExportEverywhere:!0,ecmaVersion:e.options.ecmaVersion,allowHashBang:!0},i=e.signalReturnFirst("preParse",n.text,r)||n.text,s=t.parse(i,r);return e.signal("postParse",s,i),s}e.defineQueryType=function(e,t){o[e]=t},l.prototype.asLineChar=function(e){return C(this,e)};var u=/[\uD800-\uDBFF]/g;function h(e,n,r){e.text=r.options.stripCRs?n.replace(/\r\n/g,"\n"):n,e.hasAstral=u.test(e.text),t.withContext(r.cx,(function(){e.ast=c(r,e)})),e.lineOffsets=null}function p(e,n){return t.withContext(e.cx,(function(){n.scope=e.cx.topScope,e.signal("beforeLoad",n),t.analyze(n.ast,n.name,n.scope),e.signal("afterLoad",n)})),n}function d(e,n,r,i){var s=e.findFile(n);if(s)return null!=i&&(s.scope&&(e.needsPurge.push(n),t.clearScopes(s.ast),s.scope=null),h(s,i,e)),void(v(e,s.parent)>v(e,r)&&(s.parent=r,s.excluded&&(s.excluded=null)));var a=new l(n,r);e.files.push(a),e.fileMap[n]=a,null!=i?h(a,i,e):e.options.async?(e.startAsyncAction(),e.options.getFile(n,(function(t,n){h(a,n||"",e),e.finishAsyncAction(t)}))):h(a,e.options.getFile(n)||"",e)}function f(e,t,n){var r=function(){e.off("everythingFetched",r),clearTimeout(i),m(e,t,n)};e.on("everythingFetched",r);var i=setTimeout(r,e.options.fetchTimeout)}function m(e,n,r){if(e.pending)return f(e,n,r);var i=e.fetchError;if(i)return e.fetchError=null,r(i);e.needsPurge.length>0&&t.withContext(e.cx,(function(){t.purge(e.needsPurge),e.needsPurge.length=0}));for(var s=!0,a=0;a<e.files.length;){for(var o=[];a<e.files.length;++a)null==(c=e.files[a]).text?s=!1:null!=c.scope||c.excluded||o.push(c);o.sort((function(t,n){return v(e,t.parent)-v(e,n.parent)}));for(var l=0;l<o.length;l++){var c;if((c=o[l]).parent&&!x(e,c))c.excluded=!0;else if(n){var u=+new Date;try{t.withTimeout(n[0],(function(){p(e,c)}))}catch(i){if(i instanceof t.TimedOut)return r(i);throw i}n[0]-=+new Date-u}else p(e,c)}}s?r():f(e,n,r)}function g(e){for(var t=0;e;++t,e=e.prev);return t}function y(e){var t=new Error(e);return t.name="TernError",t}function v(e,t){for(var n=0;t;)t=e.fileMap[t].parent,++n;return n}function x(e,t){var n=function(e,t){for(;;){var n=e.fileMap[t.parent];if(!n.parent)break;t=n}return t.name}(e,t),r=function(e){var t=0;return i.simple(e,{Expression:function(){++t}}),t}(t.ast),s=e.budgets[n];return null==s&&(s=e.budgets[n]=e.options.dependencyBudget),!(s<r||(e.budgets[n]=s-r,0))}function b(e){return"number"==typeof e||"object"==typeof e&&"number"==typeof e.line&&"number"==typeof e.ch}(e.Server=function(e){for(var t in this.cx=null,this.options=e||{},a)e.hasOwnProperty(t)||(e[t]=a[t]);for(var n in this.projectDir=e.projectDir.replace(/\\/g,"/"),/\/$/.test(this.projectDir)||(this.projectDir+="/"),this.parent=e.parent,this.handlers=Object.create(null),this.files=[],this.fileMap=Object.create(null),this.needsPurge=[],this.budgets=Object.create(null),this.uses=0,this.pending=0,this.asyncError=null,this.mod={},this.defs=e.defs.slice(0),this.plugins=Object.create(null),e.plugins)e.plugins.hasOwnProperty(n)&&this.loadPlugin(n,e.plugins[n]);this.reset()}).prototype=n.mixin({addFile:function(e,t,n){n&&!(n in this.fileMap)&&(n=null),e in this.fileMap||(e=this.normalizeFilename(e)),d(this,e,n,t)},delFile:function(e){var t=this.findFile(e);if(t){this.needsPurge.push(t.name);for(var n=0;n<this.files.length;n++)this.files[n]==t?this.files.splice(n--,1):this.files[n].parent==e&&(this.files[n].parent=null);delete this.fileMap[t.name]}},reset:function(){this.signal("reset"),this.cx=new t.Context(this.defs,this),this.uses=0,this.budgets=Object.create(null);for(var e=0;e<this.files.length;++e){var n=this.files[e];n.scope&&(t.clearScopes(n.ast),n.scope=null)}this.signal("postReset")},request:function(e,n){var r=function(e){if(e.query){if("string"!=typeof e.query.type)return".query.type must be a string";if(e.query.start&&!b(e.query.start))return".query.start must be a position";if(e.query.end&&!b(e.query.end))return".query.end must be a position"}if(e.files){if(!Array.isArray(e.files))return"Files property must be an array";for(var t=0;t<e.files.length;++t){var n=e.files[t];if("object"!=typeof n)return".files[n] must be objects";if("string"!=typeof n.name)return".files[n].name must be a string";if("delete"!=n.type){if("string"!=typeof n.text)return".files[n].text must be a string";if("part"==n.type){if(!b(n.offset)&&"number"!=typeof n.offsetLines)return".files[n].offset must be a position"}else if("full"!=n.type)return'.files[n].type must be "full" or "part"'}}}}(e);if(r)return n(r);var s=this;!function(e,n,r){if(n.query&&!o.hasOwnProperty(n.query.type))return r("No query type '"+n.query.type+"' defined");var s=n.query;s||r(null,{});var a=n.files||[];a.length&&++e.uses;for(var l=0;l<a.length;++l){var u=a[l];u.name=e.normalizeFilename(u.name),"delete"==u.type?e.delFile(u.name):d(e,u.name,null,"full"==u.type?u.text:null)}var h="number"==typeof n.timeout?[n.timeout]:null;if(s){var p=o[s.type];if(p.takesFile){if("string"!=typeof s.file)return r(".query.file must be a string");/^#/.test(s.file)||d(e,s.file,null)}m(e,h,(function(n){if(n)return r(n);var o=p.takesFile&&function(e,n,r){var s=r.match(/^#(\d+)$/);if(!s)return e.findFile(r);var a=n[s[1]];if(!a||"delete"==a.type)throw y("Reference to unknown file "+r);if("full"==a.type)return e.fileMap[a.name];var o,l,u,h,p=a.backing=e.fileMap[a.name],d=_(p,null==a.offsetLines?a.offset:{line:a.offsetLines,ch:0},!0),f=(h=(u=a.text).indexOf("\n"))<0?u:u.slice(0,h),m=function(e,t,n){var r=Math.max(0,n-500),i=null;if(!/^\s*$/.test(e))for(;;){var s=t.indexOf(e,r);if(s<0||s>n+500)break;(null==i||Math.abs(i-n)>Math.abs(s-n))&&(i=s),r=s+e.length}return i}(f,p.text,d),v=null==m?Math.max(0,p.text.lastIndexOf("\n",d)):m;return t.withContext(e.cx,(function(){t.purge(a.name,v,v+a.text.length);var n,r=a.text;if(n=r.match(/(?:"([^"]*)"|([\w$]+))\s*:\s*function\b/)){var s=i.findNodeAround(a.backing.ast,v,"ObjectExpression");s&&s.node.objType&&(o={type:s.node.objType,prop:n[2]||n[1]})}if(m&&(n=f.match(/^(.*?)\bfunction\b/))){for(var u=n[1].length,h="",d=0;d<u;++d)h+=" ";a.text=h+r.slice(u),l=!0}var y=t.scopeAt(p.ast,v,p.scope),x=t.scopeAt(p.ast,v+r.length,p.scope),b=a.scope=g(y)<g(x)?x:y;a.ast=c(e,a),t.analyze(a.ast,a.name,b);e:if(o||l){var w=t.scopeAt(a.ast,f.length,y);if(!w.fnType)break e;if(o)o.type.getProp(o.prop).addType(w.fnType);else if(l){var S=t.scopeAt(p.ast,v+f.length,p.scope);if(S==y||!S.fnType)break e;var _=S.fnType,E=w.fnType;if(!E||E.name!=_.name&&_.name)break e;d=0;for(var C=Math.min(_.args.length,E.args.length);d<C;++d)_.args[d].propagate(E.args[d]);_.self.propagate(E.self),E.retval.propagate(_.retval)}}})),a}(e,a,s.file);if(p.fullFile&&"part"==o.type)return r("Can't run a "+s.type+" query on a file fragment");t.resetGuessing(),t.withContext(e.cx,(function(){var n,i=function(){n=p.run(e,s,o)};try{h?t.withTimeout(h[0],i):i()}catch(t){return e.options.debug&&"TernError"!=t.name&&console.error(t.stack),r(t)}r(null,n)}))}))}else m(e,h,(function(){}))}(this,e,(function(e,t){n(e,t),s.uses>40&&(s.reset(),m(s,null,(function(){})))}))},findFile:function(e){return this.fileMap[this.normalizeFilename(e)]},flush:function(e){var n=this.cx;m(this,null,(function(r){if(r)return e(r);t.withContext(n,e)}))},startAsyncAction:function(){++this.pending},finishAsyncAction:function(e){e&&(this.asyncError=e),0==--this.pending&&this.signal("everythingFetched")},addDefs:function(e,t){t?this.defs.unshift(e):this.defs.push(e),this.cx&&this.reset()},deleteDefs:function(e){for(var t=0;t<this.defs.length;t++)if(this.defs[t]["!name"]==e)return this.defs.splice(t,1),void(this.cx&&this.reset())},loadPlugin:function(e,t){if(1==arguments.length&&(t=this.options.plugins[e]||!0),!(e in this.plugins)&&e in s&&t){this.plugins[e]=!0;var n=s[e](this,t);if(n&&(n.defs&&this.addDefs(n.defs,n.loadFirst),n.passes))for(var r in n.passes)n.passes.hasOwnProperty(r)&&this.on(r,n.passes[r])}},normalizeFilename:function(e){var t=this.options.normalizeFilename(e).replace(/\\/g,"/");return 0==t.indexOf(this.projectDir)&&(t=t.slice(this.projectDir.length)),t}});var w=25;function S(e,t,n){var r,i=t+n;if(e.hasAstral)for(u.lastIndex=t;(r=u.exec(e.text))&&r.index<i;)i++;return i}var _=e.resolvePos=function(e,t,n){if("number"!=typeof t){var r=function(e,t){var n=e.text,r=e.lineOffsets||(e.lineOffsets=[0]),i=0,s=0,a=Math.min(Math.floor(t/w),r.length-1);for(i=r[a],s=a*w;s<t;){if(++s,0===(i=n.indexOf("\n",i)+1))return null;s%w==0&&r.push(i)}return i}(e,t.line);if(null==r){if(!n)throw y("File doesn't contain a line "+t.line);t=e.text.length}else t=S(e,r,t.ch)}else t=S(e,0,t);if(t>e.text.length){if(!n)throw y("Position "+t+" is outside of file.");t=e.text.length}return t};function E(e,t,n){var r,i=n-t;if(e.hasAstral)for(u.lastIndex=t;(r=u.exec(e.text))&&r.index<n;)i--;return i}function C(e,t){if(!e)return{line:0,ch:0};for(var n,r,i=e.lineOffsets||(e.lineOffsets=[0]),s=e.text,a=i.length-1;a>=0;--a)i[a]<=t&&(n=a*w,r=i[a]);for(;;){var o=s.indexOf("\n",r);if(o>=t||o<0)break;r=o+1,++n}return{line:n,ch:E(e,r,t)}}var T=e.outputPos=function(e,t,n){if(e.lineCharPositions){var r=C(t,n);return"part"==t.type&&(r.line+=null!=t.offsetLines?t.offsetLines:C(t.backing,t.offset).line),r}return E(t,0,n)+("part"==t.type?t.offset:0)};function M(e){for(var t in e)null==e[t]&&delete e[t];return e}function A(e,t,n){null!=n&&(e[t]=n)}function k(e,t){"string"!=typeof e&&(e=e.name,t=t.name);var n=/^[A-Z]/.test(e);return n==/^[A-Z]/.test(t)?e<t?-1:e==t?0:1:n?1:-1}function P(e,t){for(var n=0;n<e.properties.length;n++){var r=e.properties[n];if(r.key&&r.key.start<=t&&r.key.end>=t)return r}}var L="break do instanceof typeof case else new var catch finally return void continue for switch while debugger function this with default if throw delete in try".split(" "),D=L.concat("export class extends const super yield import let static".split(" ")),N=e.addCompletion=function(e,n,r,i,s){for(var a=e.types||e.docs||e.urls||e.origins,o=a||e.depths,l=0;l<n.length;++l){var c=n[l];if((o?c.name:c)==r)return}var u=o?{name:r}:r;if(n.push(u),i&&a){t.resetGuessing();var h=i.getType();u.guess=t.didGuess(),e.types&&(u.type=t.toString(i)),e.docs&&A(u,"doc",j(e,i.doc||h&&h.doc)),e.urls&&A(u,"url",i.url||h&&h.url),e.origins&&A(u,"origin",i.origin||h&&h.origin)}return e.depths&&(u.depth=s||0),u};function R(e,t){var n,r,i=e.body;return!!i&&(Array.isArray(i)?(n=i[0].start,r=i[i.length-1].end):(n=i.start,r=i.end),n<=t&&r>=t)}var I=e.findQueryExpr=function(e,n,r){if(null==n.end)throw y("missing .query.end field");if(n.variable){var i=t.scopeAt(e.ast,_(e,n.end),e.scope);return{node:{type:"Identifier",name:n.variable,start:n.end,end:n.end+1},state:i}}var s=n.start&&_(e,n.start),a=_(e,n.end),o=t.findExpressionAt(e.ast,s,a,e.scope);if(!o){var l=t.findClosestExpression(e.ast,s,a,e.scope);l&&!R(l.node,a)&&(r||(null==s?a:s)-l.node.start<20||l.node.end-a<20)&&(o=l)}if(!o){var c=t.findExpressionAround(e.ast,s,a,e.scope);c&&!R(c.node,a)&&("ObjectExpression"==c.node.type||r||(null==s?a:s)-c.node.start<20||c.node.end-a<20)&&(o=c)}return o};function O(e,n,r){var i=n.start&&_(e,n.start),s=_(e,n.end),a=null,o=t.findExpressionAround(e.ast,i,s,e.scope);return o&&!R(o.node,s)&&("ObjectExpression"==o.node.type||r||(null==i?s:i)-o.node.start<20||o.node.end-s<20)&&(a=o),a}function F(e,t,n){var r=I(e,t,n);if(r)return r;throw y("No expression at the given position.")}function B(e){return e&&(e=e.getType())&&e instanceof t.Obj?e:null}function U(e,n,r,i){var s;i&&(t.resetGuessing(),s=t.expressionType(i));var a,o=e.hasHandler("typeAt");if(o)for(var l=_(r,n.end),c=0;c<o.length;c++)s=o[c](r,l,i,s);if(!s)throw y("No type found at the given position.");if("ObjectExpression"==i.node.type&&null!=n.end&&(a=P(i.node,_(r,n.end)))){var u=a.key.name,h=B(t.typeFromContext(r.ast,i));if(h&&h.hasProp(u))s=h.hasProp(u);else{var p=B(s);p&&p.hasProp(u)&&(s=p.hasProp(u))}}return s}function V(e,t,n,r){var i,s=U(e,t,n,r),a=s;if(s=t.preferFunction&&s.getFunctionType()||s.getType(),r&&("Identifier"==r.node.type?i=r.node.name:"MemberExpression"!=r.node.type||r.node.computed?"MethodDefinition"!=r.node.type||r.node.computed||(i=r.node.key.name):i=r.node.property.name),null!=t.depth&&"number"!=typeof t.depth)throw y(".query.depth must be a number");return[s,i,a]}function j(e,t){if(!t)return null;if("full"==e.docFormat)return t;var n=/.\n[\s@\n]/.exec(t);if(n&&(t=t.slice(0,n.index+1)),(t=t.replace(/\n\s*/g," ")).length<100)return t;var r=/[\.!?] [A-Z]/g;r.lastIndex=80;var i=r.exec(t);return i&&(t=t.slice(0,i.index+1)),t}function z(e,n,r){r.url||(r.url=n.url),r.doc||(r.doc=j(e,n.doc)),r.origin||(r.origin=n.origin);var i,s=t.cx().protos;!r.url&&!r.doc&&n.proto&&(i=n.proto.hasCtor)&&n.proto!=s.Object&&n.proto!=s.Function&&n.proto!=s.Array&&(r.url=i.url,r.doc=j(e,i.doc))}var H=e.getSpan=function(e){if(e.origin){if(e.originNode){var t=e.originNode;return/^Function/.test(t.type)&&t.id&&(t=t.id),{origin:e.origin,node:t}}return e.span?{origin:e.origin,span:e.span}:void 0}},W=e.storeSpan=function(e,t,n,r){if(r.origin=n.origin,n.span){var i=/^(\d+)\[(\d+):(\d+)\]-(\d+)\[(\d+):(\d+)\]$/.exec(n.span);r.start=t.lineCharPositions?{line:Number(i[2]),ch:Number(i[3])}:Number(i[1]),r.end=t.lineCharPositions?{line:Number(i[5]),ch:Number(i[6])}:Number(i[4])}else{var s=e.fileMap[n.origin];r.start=T(t,s,n.node.start),r.end=T(t,s,n.node.end)}};function G(e,n,r,i,s){for(var a=i.node.name,o=i.state;o&&!(a in o.props);o=o.prev);if(!o)throw y("Could not find a definition for "+a);var l,c=[];function u(e){return function(t,r,i){var l={file:e.name,start:T(n,e,t.start),end:T(n,e,t.end)};if(s){for(var u=r;u!=o;u=u.prev){var h=u.hasProp(s);if(h)throw y("Renaming `"+a+"` to `"+s+"` would make a variable at line "+(C(e,t.start).line+1)+" point to the definition at line "+(C(e,h.name.start).line+1))}var p=i[i.length-2];p&&"Property"==p.type&&p.key==p.value&&(l.isShorthand=!0)}c.push(l)}}if(o.originNode){if(l="local",s){for(var h=o.prev;h&&!(s in h.props);h=h.prev);h&&t.findRefs(o.originNode,o,s,h,(function(e){throw y("Renaming `"+a+"` to `"+s+"` would shadow the definition used at line "+(C(r,e.start).line+1))}))}t.findRefs(o.originNode,o,a,o,u(r))}else if(l="global",n.onlySourceFile)t.findRefs(r.ast,r.scope,a,o,u(r));else for(var p=0;p<e.files.length;++p){var d=e.files[p];t.findRefs(d.ast,d.scope,a,o,u(d))}return{refs:c,type:l,name:a}}function X(e,n,r,i,s){var a=t.expressionType(i);"MethodDefinition"==i.node.type&&(a=a.propertyOf);var o=a.getObjType();if(!o)throw y("Couldn't determine type of base object.");var l=[];function c(e){return function(t){l.push({file:e.name,start:T(n,e,t.start),end:T(n,e,t.end)})}}if(n.onlySourceFile)t.findPropRefs(r.ast,r.scope,o,s.name,c(r));else for(var u=0;u<e.files.length;++u){var h=e.files[u];t.findPropRefs(h.ast,h.scope,o,s.name,c(h))}return{refs:l,name:s.name}}e.version="0.24.3"},r(t,n(4460),n(8748),n(5356),n(1658))},9026:function(e,t){!function(e){"use strict";function t(e){return"string"==typeof e?function(t){return t===e}:e||function(){return!0}}var n=function(e,t){this.node=e,this.state=t};var r=Object.create||function(e){function t(){}return t.prototype=e,new t};function i(e,t){var n=r(t||o);for(var i in e)n[i]=e[i];return n}function s(e,t,n){n(e,t)}function a(e,t,n){}var o={};o.Program=o.BlockStatement=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1)n(i[r],t,"Statement")},o.Statement=s,o.EmptyStatement=a,o.ExpressionStatement=o.ParenthesizedExpression=function(e,t,n){return n(e.expression,t,"Expression")},o.IfStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Statement"),e.alternate&&n(e.alternate,t,"Statement")},o.LabeledStatement=function(e,t,n){return n(e.body,t,"Statement")},o.BreakStatement=o.ContinueStatement=a,o.WithStatement=function(e,t,n){n(e.object,t,"Expression"),n(e.body,t,"Statement")},o.SwitchStatement=function(e,t,n){n(e.discriminant,t,"Expression");for(var r=0,i=e.cases;r<i.length;r+=1){var s=i[r];s.test&&n(s.test,t,"Expression");for(var a=0,o=s.consequent;a<o.length;a+=1)n(o[a],t,"Statement")}},o.SwitchCase=function(e,t,n){e.test&&n(e.test,t,"Expression");for(var r=0,i=e.consequent;r<i.length;r+=1)n(i[r],t,"Statement")},o.ReturnStatement=o.YieldExpression=o.AwaitExpression=function(e,t,n){e.argument&&n(e.argument,t,"Expression")},o.ThrowStatement=o.SpreadElement=function(e,t,n){return n(e.argument,t,"Expression")},o.TryStatement=function(e,t,n){n(e.block,t,"Statement"),e.handler&&n(e.handler,t),e.finalizer&&n(e.finalizer,t,"Statement")},o.CatchClause=function(e,t,n){e.param&&n(e.param,t,"Pattern"),n(e.body,t,"Statement")},o.WhileStatement=o.DoWhileStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.body,t,"Statement")},o.ForStatement=function(e,t,n){e.init&&n(e.init,t,"ForInit"),e.test&&n(e.test,t,"Expression"),e.update&&n(e.update,t,"Expression"),n(e.body,t,"Statement")},o.ForInStatement=o.ForOfStatement=function(e,t,n){n(e.left,t,"ForInit"),n(e.right,t,"Expression"),n(e.body,t,"Statement")},o.ForInit=function(e,t,n){"VariableDeclaration"===e.type?n(e,t):n(e,t,"Expression")},o.DebuggerStatement=a,o.FunctionDeclaration=function(e,t,n){return n(e,t,"Function")},o.VariableDeclaration=function(e,t,n){for(var r=0,i=e.declarations;r<i.length;r+=1)n(i[r],t)},o.VariableDeclarator=function(e,t,n){n(e.id,t,"Pattern"),e.init&&n(e.init,t,"Expression")},o.Function=function(e,t,n){e.id&&n(e.id,t,"Pattern");for(var r=0,i=e.params;r<i.length;r+=1)n(i[r],t,"Pattern");n(e.body,t,e.expression?"Expression":"Statement")},o.Pattern=function(e,t,n){"Identifier"===e.type?n(e,t,"VariablePattern"):"MemberExpression"===e.type?n(e,t,"MemberPattern"):n(e,t)},o.VariablePattern=a,o.MemberPattern=s,o.RestElement=function(e,t,n){return n(e.argument,t,"Pattern")},o.ArrayPattern=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Pattern")}},o.ObjectPattern=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];"Property"===s.type?(s.computed&&n(s.key,t,"Expression"),n(s.value,t,"Pattern")):"RestElement"===s.type&&n(s.argument,t,"Pattern")}},o.Expression=s,o.ThisExpression=o.Super=o.MetaProperty=a,o.ArrayExpression=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Expression")}},o.ObjectExpression=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1)n(i[r],t)},o.FunctionExpression=o.ArrowFunctionExpression=o.FunctionDeclaration,o.SequenceExpression=function(e,t,n){for(var r=0,i=e.expressions;r<i.length;r+=1)n(i[r],t,"Expression")},o.TemplateLiteral=function(e,t,n){for(var r=0,i=e.quasis;r<i.length;r+=1)n(i[r],t);for(var s=0,a=e.expressions;s<a.length;s+=1)n(a[s],t,"Expression")},o.TemplateElement=a,o.UnaryExpression=o.UpdateExpression=function(e,t,n){n(e.argument,t,"Expression")},o.BinaryExpression=o.LogicalExpression=function(e,t,n){n(e.left,t,"Expression"),n(e.right,t,"Expression")},o.AssignmentExpression=o.AssignmentPattern=function(e,t,n){n(e.left,t,"Pattern"),n(e.right,t,"Expression")},o.ConditionalExpression=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Expression"),n(e.alternate,t,"Expression")},o.NewExpression=o.CallExpression=function(e,t,n){if(n(e.callee,t,"Expression"),e.arguments)for(var r=0,i=e.arguments;r<i.length;r+=1)n(i[r],t,"Expression")},o.MemberExpression=function(e,t,n){n(e.object,t,"Expression"),e.computed&&n(e.property,t,"Expression")},o.ExportNamedDeclaration=o.ExportDefaultDeclaration=function(e,t,n){e.declaration&&n(e.declaration,t,"ExportNamedDeclaration"===e.type||e.declaration.id?"Statement":"Expression"),e.source&&n(e.source,t,"Expression")},o.ExportAllDeclaration=function(e,t,n){n(e.source,t,"Expression")},o.ImportDeclaration=function(e,t,n){for(var r=0,i=e.specifiers;r<i.length;r+=1)n(i[r],t);n(e.source,t,"Expression")},o.ImportSpecifier=o.ImportDefaultSpecifier=o.ImportNamespaceSpecifier=o.Identifier=o.Literal=o.Import=a,o.TaggedTemplateExpression=function(e,t,n){n(e.tag,t,"Expression"),n(e.quasi,t,"Expression")},o.ClassDeclaration=o.ClassExpression=function(e,t,n){return n(e,t,"Class")},o.Class=function(e,t,n){e.id&&n(e.id,t,"Pattern"),e.superClass&&n(e.superClass,t,"Expression"),n(e.body,t)},o.ClassBody=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1)n(i[r],t)},o.MethodDefinition=o.Property=function(e,t,n){e.computed&&n(e.key,t,"Expression"),n(e.value,t,"Expression")},e.ancestor=function(e,t,n,r){var i=[];n||(n=o),function e(r,s,a){var o=a||r.type,l=t[o],c=r!==i[i.length-1];c&&i.push(r),n[o](r,s,e),l&&l(r,s||i,i),c&&i.pop()}(e,r)},e.base=o,e.findNodeAfter=function(e,r,i,s,a){i=t(i),s||(s=o);try{!function e(t,a,o){if(!(t.end<r)){var l=o||t.type;if(t.start>=r&&i(l,t))throw new n(t,a);s[l](t,a,e)}}(e,a)}catch(e){if(e instanceof n)return e;throw e}},e.findNodeAround=function(e,r,i,s,a){i=t(i),s||(s=o);try{!function e(t,a,o){var l=o||t.type;if(!(t.start>r||t.end<r)&&(s[l](t,a,e),i(l,t)))throw new n(t,a)}(e,a)}catch(e){if(e instanceof n)return e;throw e}},e.findNodeAt=function(e,r,i,s,a,l){a||(a=o),s=t(s);try{!function e(t,o,l){var c=l||t.type;if((null==r||t.start<=r)&&(null==i||t.end>=i)&&a[c](t,o,e),(null==r||t.start===r)&&(null==i||t.end===i)&&s(c,t))throw new n(t,o)}(e,l)}catch(e){if(e instanceof n)return e;throw e}},e.findNodeBefore=function(e,r,i,s,a){var l;return i=t(i),s||(s=o),function e(t,a,o){if(!(t.start>r)){var c=o||t.type;t.end<=r&&(!l||l.node.end<t.end)&&i(c,t)&&(l=new n(t,a)),s[c](t,a,e)}}(e,a),l},e.full=function(e,t,n,r,i){n||(n=o),function e(r,i,s){var a=s||r.type;n[a](r,i,e),s||t(r,i,a)}(e,r,i)},e.fullAncestor=function(e,t,n,r){n||(n=o);var i=[];!function e(r,s,a){var o=a||r.type,l=r!==i[i.length-1];l&&i.push(r),n[o](r,s,e),a||t(r,s||i,i,o),l&&i.pop()}(e,r)},e.make=i,e.recursive=function(e,t,n,r,s){var a=n?i(n,r||void 0):r;!function e(t,n,r){a[r||t.type](t,n,e)}(e,t,s)},e.simple=function(e,t,n,r,i){n||(n=o),function e(r,i,s){var a=s||r.type,o=t[a];n[a](r,i,e),o&&o(r,i)}(e,r,i)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},6699:function(e,t){!function(e){"use strict";var t={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,"5module":n+" export import",6:n+" const class extends export import super"},i=/^in(stanceof)?$/,s="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-Ᶎꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭧꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",a="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",o=new RegExp("["+s+"]"),l=new RegExp("["+s+a+"]");s=a=null;var c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],u=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function h(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function p(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&o.test(String.fromCharCode(e)):!1!==t&&h(e,c)))}function d(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&l.test(String.fromCharCode(e)):!1!==t&&(h(e,c)||h(e,u)))))}var f=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function m(e,t){return new f(e,{beforeExpr:!0,binop:t})}var g={beforeExpr:!0},y={startsExpr:!0},v={};function x(e,t){return void 0===t&&(t={}),t.keyword=e,v[e]=new f(e,t)}var b={num:new f("num",y),regexp:new f("regexp",y),string:new f("string",y),name:new f("name",y),eof:new f("eof"),bracketL:new f("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new f("]"),braceL:new f("{",{beforeExpr:!0,startsExpr:!0}),braceR:new f("}"),parenL:new f("(",{beforeExpr:!0,startsExpr:!0}),parenR:new f(")"),comma:new f(",",g),semi:new f(";",g),colon:new f(":",g),dot:new f("."),question:new f("?",g),arrow:new f("=>",g),template:new f("template"),invalidTemplate:new f("invalidTemplate"),ellipsis:new f("...",g),backQuote:new f("`",y),dollarBraceL:new f("${",{beforeExpr:!0,startsExpr:!0}),eq:new f("=",{beforeExpr:!0,isAssign:!0}),assign:new f("_=",{beforeExpr:!0,isAssign:!0}),incDec:new f("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new f("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:m("||",1),logicalAND:m("&&",2),bitwiseOR:m("|",3),bitwiseXOR:m("^",4),bitwiseAND:m("&",5),equality:m("==/!=/===/!==",6),relational:m("</>/<=/>=",7),bitShift:m("<</>>/>>>",8),plusMin:new f("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:m("%",10),star:m("*",10),slash:m("/",10),starstar:new f("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",g),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",g),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",g),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",y),_if:x("if"),_return:x("return",g),_switch:x("switch"),_throw:x("throw",g),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",y),_super:x("super",y),_class:x("class",y),_extends:x("extends",g),_export:x("export"),_import:x("import",y),_null:x("null",y),_true:x("true",y),_false:x("false",y),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(w.source,"g");function _(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var E=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,C=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,T=Object.prototype,M=T.hasOwnProperty,A=T.toString;function k(e,t){return M.call(e,t)}var P=Array.isArray||function(e){return"[object Array]"===A.call(e)};function L(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var D=function(e,t){this.line=e,this.column=t};D.prototype.offset=function(e){return new D(this.line,this.column+e)};var N=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function R(e,t){for(var n=1,r=0;;){S.lastIndex=r;var i=S.exec(e);if(!(i&&i.index<t))return new D(n,t-r);++n,r=i.index+i[0].length}}var I={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function O(e){var t={};for(var n in I)t[n]=e&&k(e,n)?e[n]:I[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),P(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return P(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new N(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}function F(e,t){return 2|(e?4:0)|(t?8:0)}var B=function(e,n,i){this.options=e=O(e),this.sourceFile=e.sourceFile,this.keywords=L(r[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var s="";if(!0!==e.allowReserved){for(var a=e.ecmaVersion;!(s=t[a]);a--);"module"===e.sourceType&&(s+=" await")}this.reservedWords=L(s);var o=(s?s+" ":"")+t.strict;this.reservedWordsStrict=L(o),this.reservedWordsStrictBind=L(o+" "+t.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},U={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};B.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},U.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},U.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},U.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},U.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},U.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},U.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},B.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},B.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},B.parse=function(e,t){return new this(t,e).parse()},B.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},B.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(B.prototype,U);var V=B.prototype,j=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function z(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}V.strictDirective=function(e){for(;;){C.lastIndex=e,e+=C.exec(this.input)[0].length;var t=j.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,C.lastIndex=e,e+=C.exec(this.input)[0].length,";"===this.input[e]&&e++}},V.eat=function(e){return this.type===e&&(this.next(),!0)},V.isContextual=function(e){return this.type===b.name&&this.value===e&&!this.containsEsc},V.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},V.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},V.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},V.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},V.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},V.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},V.expect=function(e){this.eat(e)||this.unexpected()},V.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},V.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},V.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},V.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},V.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var H=B.prototype;H.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var W={kind:"loop"},G={kind:"switch"};H.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(p(r,!0)){for(var s=n+1;d(this.input.charCodeAt(s),!0);)++s;var a=this.input.slice(n,s);if(!i.test(a))return!0}return!1},H.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),t=this.pos+e[0].length;return!(w.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&d(this.input.charAt(t+8)))},H.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(s,i.keyword);case b._debugger:return this.parseDebuggerStatement(s);case b._do:return this.parseDoStatement(s);case b._for:return this.parseForStatement(s);case b._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case b._class:return e&&this.unexpected(),this.parseClass(s,!0);case b._if:return this.parseIfStatement(s);case b._return:return this.parseReturnStatement(s);case b._switch:return this.parseSwitchStatement(s);case b._throw:return this.parseThrowStatement(s);case b._try:return this.parseTryStatement(s);case b._const:case b._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case b._while:return this.parseWhileStatement(s);case b._with:return this.parseWithStatement(s);case b.braceL:return this.parseBlock(!0,s);case b.semi:return this.parseEmptyStatement(s);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){C.lastIndex=this.pos;var a=C.exec(this.input),o=this.pos+a[0].length;if(40===this.input.charCodeAt(o))return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var l=this.value,c=this.parseExpression();return i===b.name&&"Identifier"===c.type&&this.eat(b.colon)?this.parseLabeledStatement(s,l,c,e):this.parseExpressionStatement(s,c)}},H.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(b.semi)||this.insertSemicolon()?e.label=null:this.type!==b.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},H.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},H.parseDoStatement=function(e){return this.next(),this.labels.push(W),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},H.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(W),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=new z,a=this.parseExpression(!0,s);return this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},H.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,K|(n?0:q),!1,t)},H.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},H.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},H.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(b.braceL),this.labels.push(G),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(b.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},H.parseThrowStatement=function(e){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var X=[];H.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===b._catch){var t=this.startNode();if(this.next(),this.eat(b.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(b._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},H.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},H.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(W),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},H.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},H.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},H.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===b._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},H.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},H.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(b.braceL),e&&this.enterScope(0);!this.eat(b.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},H.parseFor=function(e,t){return e.init=t,this.expect(b.semi),e.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),e.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},H.parseForIn=function(e,t){var n=this.type===b._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},H.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(b.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return e},H.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var K=1,q=2;H.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&t&q&&this.unexpected(),e.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&K&&(e.id=4&t&&this.type!==b.name?null:this.parseIdent(),!e.id||t&q||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(F(e.async,e.generator)),t&K||(e.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,t&K?"FunctionDeclaration":"FunctionExpression")},H.parseFunctionParams=function(e){this.expect(b.parenL),e.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},H.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(b.braceL);!this.eat(b.braceR);){var s=this.parseClassElement(null!==e.superClass);s&&(r.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(i&&this.raise(s.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},H.parseClassElement=function(e){var t=this;if(this.eat(b.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,s=t.startLoc;return!(!t.eatContextual(e)||(t.type===b.parenL||r&&t.canInsertSemicolon())&&(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,s),n.key.name=e,t.finishNode(n.key,"Identifier"),1))};n.kind="method",n.static=r("static");var i=this.eat(b.star),s=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(b.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,o=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,s,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},H.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},H.parseClassId=function(e,t){this.type===b.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},H.parseClassSuper=function(e){e.superClass=this.eat(b._extends)?this.parseExprSubscripts():null},H.parseExport=function(e,t){if(this.next(),this.eat(b.star))return this.expectContextual("from"),this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|K,!1,n)}else if(this.type===b._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},H.checkExport=function(e,t,n){e&&(k(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},H.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},H.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},H.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},H.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},H.parseImport=function(e){return this.next(),this.type===b.string?(e.specifiers=X,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},H.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return e}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(b.braceL);!this.eat(b.braceR);){if(t)t=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},H.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},H.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var J=B.prototype;J.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},J.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},J.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},J.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},J.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},J.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(b.comma),t&&this.type===b.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===b.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},J.parseBindingListItem=function(e){return e},J.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},J.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(k(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLVal(s,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var Y=B.prototype;Y.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[s]=!0}}},Y.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===b.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(b.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},Y.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new z,r=!0);var o=this.start,l=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,u.left=this.type===b.eq?this.toAssignable(c,!1,t):c,r||z.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),a>-1&&(t.shorthandAssign=a),c},Y.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(b.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(b.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},Y.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},Y.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==b._in)&&s>r){var a=this.type===b.logicalOR||this.type===b.logicalAND,o=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,s,i),h=this.buildBinary(t,n,e,u,o,a);return this.parseExprOp(h,t,n,r,i)}return e},Y.buildBinary=function(e,t,n,r,i,s){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},Y.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===b.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(b.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},Y.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var s=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},Y.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var s=this.parseSubscript(e,t,n,r,i);if(s===e||"ArrowFunctionExpression"===s.type)return s;e=s}},Y.parseSubscript=function(e,t,n,r,i){var s=this.eat(b.bracketL);if(s||this.eat(b.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=s?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),a.computed=!!s,s&&this.expect(b.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var o=new z,l=this.yieldPos,c=this.awaitPos,u=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(b.parenR,this.options.ecmaVersion>=8&&"Import"!==e.type,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=c,this.awaitIdentPos=u,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=u||this.awaitIdentPos;var p=this.startNodeAt(t,n);if(p.callee=e,p.arguments=h,"Import"===p.callee.type){1!==p.arguments.length&&this.raise(p.start,"import() requires exactly one argument");var d=p.arguments[0];d&&"SpreadElement"===d.type&&this.raise(d.start,"... is not allowed in import()")}e=this.finishNode(p,"CallExpression")}else if(this.type===b.backQuote){var f=this.startNodeAt(t,n);f.tag=e,f.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(f,"TaggedTemplateExpression")}return e},Y.parseExprAtom=function(e){this.type===b.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(t,"Super");case b._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case b.name:var r=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===b.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case b.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(t=this.startNode()).value=this.type===b._null?null:this.type===b._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case b.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case b.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(b.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case b.braceL:return this.parseObj(!1,e);case b._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},Y.parseDynamicImport=function(){var e=this.startNode();return this.next(),this.type!==b.parenL&&this.unexpected(),this.finishNode(e,"Import")},Y.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1)),this.next(),this.finishNode(t,"Literal")},Y.parseParenExpression=function(){this.expect(b.parenL);var e=this.parseExpression();return this.expect(b.parenR),e},Y.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new z,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(c?c=!1:this.expect(b.comma),i&&this.afterTrailingComma(b.parenR,!0)){u=!0;break}if(this.type===b.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(b.parenR),e&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(a,o)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},Y.parseParenItem=function(e){return e},Y.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var $=[];Y.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.options.ecmaVersion>10&&"Import"===e.callee.type&&this.raise(e.callee.start,"Cannot use new with import(...)"),this.eat(b.parenL)?e.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8&&"Import"!==e.callee.type,!1):e.arguments=$,this.finishNode(e,"NewExpression")},Y.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},Y.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},Y.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},Y.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},Y.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===b.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===b.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(b.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},Y.parsePropertyValue=function(e,t,n,r,i,s,a,o){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===b.comma||this.type===b.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===b.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},Y.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(b.bracketR),e.key;e.computed=!1}return e.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},Y.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},Y.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|F(t,r.generator)|(n?128:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},Y.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|F(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},Y.parseFunctionBody=function(e,t,n){var r=t&&this.type!==b.braceL,i=this.strict,s=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!i&&!s&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},Y.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},Y.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLVal(s,1,t?null:n)}},Y.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(b.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===b.comma?a=null:this.type===b.ellipsis?(a=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},Y.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},Y.parseIdent=function(e,t){var n=this.startNode();return this.type===b.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},Y.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(b.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},Y.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var Z=B.prototype;Z.raise=function(e,t){var n=R(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Z.raiseRecoverable=Z.raise,Z.curPosition=function(){if(this.options.locations)return new D(this.curLine,this.pos-this.lineStart)};var Q=B.prototype,ee=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};Q.enterScope=function(e){this.scopeStack.push(new ee(e))},Q.exitScope=function(){this.scopeStack.pop()},Q.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},Q.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t)this.currentScope().lexical.push(e);else if(3===t){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],3&o.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},Q.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},Q.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Q.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags)return t}},Q.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags&&!(16&t.flags))return t}};var te=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new N(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},ne=B.prototype;function re(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}ne.startNode=function(){return new te(this,this.start,this.startLoc)},ne.startNodeAt=function(e,t){return new te(this,e,t)},ne.finishNode=function(e,t){return re.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},ne.finishNodeAt=function(e,t,n,r){return re.call(this,e,t,n,r)};var ie=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},se={b_stat:new ie("{",!1),b_expr:new ie("{",!0),b_tmpl:new ie("${",!1),p_stat:new ie("(",!1),p_expr:new ie("(",!0),q_tmpl:new ie("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new ie("function",!1),f_expr:new ie("function",!0),f_expr_gen:new ie("function",!0,!1,null,!0),f_gen:new ie("function",!1,!1,null,!0)},ae=B.prototype;ae.initialContext=function(){return[se.b_stat]},ae.braceIsBlock=function(e){var t=this.curContext();return t===se.f_expr||t===se.f_stat||(e!==b.colon||t!==se.b_stat&&t!==se.b_expr?e===b._return||e===b.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):e===b._else||e===b.semi||e===b.eof||e===b.parenR||e===b.arrow||(e===b.braceL?t===se.b_stat:e!==b._var&&e!==b._const&&e!==b.name&&!this.exprAllowed):!t.isExpr)},ae.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},ae.updateContext=function(e){var t,n=this.type;n.keyword&&e===b.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===se.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?se.b_stat:se.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(se.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(e){var t=e===b._if||e===b._for||e===b._with||e===b._while;this.context.push(t?se.p_stat:se.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(e){!e.beforeExpr||e===b.semi||e===b._else||e===b._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(e===b.colon||e===b.braceL)&&this.curContext()===se.b_stat?this.context.push(se.f_stat):this.context.push(se.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===se.q_tmpl?this.context.pop():this.context.push(se.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(e){if(e===b._function){var t=this.context.length-1;this.context[t]===se.f_expr?this.context[t]=se.f_expr_gen:this.context[t]=se.f_gen}this.exprAllowed=!0},b.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var oe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",le=oe+" Extended_Pictographic",ce={9:oe,10:le,11:le},ue="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",he="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",pe=he+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",de={9:he,10:pe,11:pe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},fe={};function me(e){var t=fe[e]={binary:L(ce[e]+" "+ue),nonBinary:{General_Category:L(ue),Script:L(de[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}me(9),me(10),me(11);var ge=B.prototype,ye=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=fe[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ve(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function xe(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function be(e){return e>=65&&e<=90||e>=97&&e<=122}function we(e){return be(e)||95===e}function Se(e){return we(e)||_e(e)}function _e(e){return e>=48&&e<=57}function Ee(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Ce(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Te(e){return e>=48&&e<=55}ye.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ye.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},ye.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);if(!this.switchU||r<=55295||r>=57344||e+1>=n)return r;var i=t.charCodeAt(e+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},ye.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r,i=t.charCodeAt(e);return!this.switchU||i<=55295||i>=57344||e+1>=n||(r=t.charCodeAt(e+1))<56320||r>57343?e+1:e+2},ye.prototype.current=function(){return this.at(this.pos)},ye.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ye.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ye.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},ge.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},ge.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},ge.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},ge.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},ge.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},ge.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},ge.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},ge.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},ge.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},ge.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},ge.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},ge.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},ge.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},ge.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},ge.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},ge.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},ge.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!xe(t)&&(e.lastIntValue=t,e.advance(),!0)},ge.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!xe(n);)e.advance();return e.pos!==t},ge.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},ge.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},ge.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},ge.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ve(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ve(e.lastIntValue);return!0}return!1},ge.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return p(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ge.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return d(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ge.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},ge.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},ge.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},ge.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},ge.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},ge.regexp_eatZero=function(e){return 48===e.current()&&!_e(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},ge.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},ge.regexp_eatControlLetter=function(e){var t=e.current();return!!be(t)&&(e.lastIntValue=t%32,e.advance(),!0)},ge.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(s>=56320&&s<=57343)return e.lastIntValue=1024*(r-55296)+(s-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},ge.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},ge.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},ge.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},ge.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},ge.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){k(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},ge.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},ge.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";we(t=e.current());)e.lastStringValue+=ve(t),e.advance();return""!==e.lastStringValue},ge.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Se(t=e.current());)e.lastStringValue+=ve(t),e.advance();return""!==e.lastStringValue},ge.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},ge.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},ge.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},ge.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Te(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},ge.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},ge.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!_e(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},ge.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},ge.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;_e(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},ge.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ee(n=e.current());)e.lastIntValue=16*e.lastIntValue+Ce(n),e.advance();return e.pos!==t},ge.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},ge.regexp_eatOctalDigit=function(e){var t=e.current();return Te(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},ge.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Ee(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Ce(i),e.advance()}return!0};var Me=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new N(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Ae=B.prototype;function ke(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Ae.next=function(){this.options.onToken&&this.options.onToken(new Me(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ae.getToken=function(){return this.next(),new Me(this)},"undefined"!=typeof Symbol&&(Ae[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===b.eof,value:t}}}}),Ae.curContext=function(){return this.context[this.context.length-1]},Ae.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Ae.readToken=function(e){return p(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Ae.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Ae.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(S.lastIndex=n;(e=S.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},Ae.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!_(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},Ae.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&E.test(String.fromCharCode(e))))break e;++this.pos}}},Ae.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},Ae.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},Ae.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},Ae.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=b.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(b.assign,n+1):this.finishOp(r,n)},Ae.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?b.logicalOR:b.logicalAND,2):61===t?this.finishOp(b.assign,2):this.finishOp(124===e?b.bitwiseOR:b.bitwiseAND,1)},Ae.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},Ae.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},Ae.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Ae.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===e?b.eq:b.prefix,1)},Ae.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 63:return++this.pos,this.finishToken(b.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(b.prefix,1)}this.raise(this.pos,"Unexpected character '"+ke(e)+"'")},Ae.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},Ae.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(w.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new ye(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(e){}return this.finishToken(b.regexp,{pattern:i,flags:a,value:l})},Ae.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;i<s;++i){var a,o=this.input.charCodeAt(this.pos);if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=e)break;++this.pos,r=r*e+a}return this.pos===n||null!=t&&this.pos-n!==t?null:r},Ae.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!=typeof BigInt?BigInt(this.input.slice(t,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},Ae.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(t,this.pos),s="undefined"!=typeof BigInt?BigInt(i):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,s)}46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a=this.input.slice(t,this.pos),o=n?parseInt(a,8):parseFloat(a);return this.finishToken(b.num,o)},Ae.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Ae.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(_(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(b.string,t)};var Pe={};Ae.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Pe)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Ae.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Pe;this.raise(e,t)},Ae.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(b.template,e)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(_(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Ae.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Ae.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ke(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return _(t)?"":String.fromCharCode(t)}},Ae.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},Ae.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(d(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?p:d)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=ke(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},Ae.readWord=function(){var e=this.readWord1(),t=b.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=v[e]),this.finishToken(t,e)};var Le="6.4.2";B.acorn={Parser:B,version:Le,defaultOptions:I,Position:D,SourceLocation:N,getLineInfo:R,Node:te,TokenType:f,tokTypes:b,keywordTypes:v,TokContext:ie,tokContexts:se,isIdentifierChar:d,isIdentifierStart:p,Token:Me,isNewLine:_,lineBreak:w,lineBreakG:S,nonASCIIwhitespace:E},e.Node=te,e.Parser=B,e.Position=D,e.SourceLocation=N,e.TokContext=ie,e.Token=Me,e.TokenType=f,e.defaultOptions=I,e.getLineInfo=R,e.isIdentifierChar=d,e.isIdentifierStart=p,e.isNewLine=_,e.keywordTypes=v,e.lineBreak=w,e.lineBreakG=S,e.nonASCIIwhitespace=E,e.parse=function(e,t){return B.parse(e,t)},e.parseExpressionAt=function(e,t,n){return B.parseExpressionAt(e,t,n)},e.tokContexts=se,e.tokTypes=b,e.tokenizer=function(e,t){return B.tokenizer(e,t)},e.version=Le,Object.defineProperty(e,"__esModule",{value:!0})}(t)},7761:function(e,t,n){var r={"./Sidebar.Geometry.BoxGeometry.js":[9990,990],"./Sidebar.Geometry.BufferGeometry.js":[5972],"./Sidebar.Geometry.CapsuleGeometry.js":[6703,703],"./Sidebar.Geometry.CircleGeometry.js":[9179,178],"./Sidebar.Geometry.CylinderGeometry.js":[6509,509],"./Sidebar.Geometry.DodecahedronGeometry.js":[8857,857],"./Sidebar.Geometry.ExtrudeGeometry.js":[353,353],"./Sidebar.Geometry.IcosahedronGeometry.js":[9670,670],"./Sidebar.Geometry.LatheGeometry.js":[9436,436],"./Sidebar.Geometry.Modifiers.js":[7606],"./Sidebar.Geometry.OctahedronGeometry.js":[2020,20],"./Sidebar.Geometry.PlaneGeometry.js":[4283,283],"./Sidebar.Geometry.RingGeometry.js":[302,302],"./Sidebar.Geometry.ShapeGeometry.js":[5150,150],"./Sidebar.Geometry.SphereGeometry.js":[9750,750],"./Sidebar.Geometry.TetrahedronGeometry.js":[6588,588],"./Sidebar.Geometry.TorusGeometry.js":[1893,893],"./Sidebar.Geometry.TorusKnotGeometry.js":[3971,971],"./Sidebar.Geometry.TubeGeometry.js":[399,399]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id=7761,e.exports=i},5331:function(e,t,n){"use strict";n.r(t),n.d(t,{LooseParser:function(){return s},parse:function(){return h}});var r=n(1272);function i(){}var s=function(e,t){if(void 0===t&&(t={}),this.toks=this.constructor.BaseParser.tokenizer(e,t),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:r.tokTypes.eof,start:0,end:0},this.tok.validateRegExpFlags=i,this.tok.validateRegExpPattern=i,this.options.locations){var n=this.toks.curPosition();this.tok.loc=new r.SourceLocation(this.toks,n,n)}this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1,this.inAsync=!1,this.inFunction=!1};s.prototype.startNode=function(){return new r.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)},s.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start},s.prototype.startNodeAt=function(e){return this.options.locations?new r.Node(this.toks,e[0],e[1]):new r.Node(this.toks,e)},s.prototype.finishNode=function(e,t){return e.type=t,e.end=this.last.end,this.options.locations&&(e.loc.end=this.last.loc.end),this.options.ranges&&(e.range[1]=this.last.end),e},s.prototype.dummyNode=function(e){var t=this.startNode();return t.type=e,t.end=t.start,this.options.locations&&(t.loc.end=t.loc.start),this.options.ranges&&(t.range[1]=t.start),this.last={type:r.tokTypes.name,start:t.start,end:t.start,loc:t.loc},t},s.prototype.dummyIdent=function(){var e=this.dummyNode("Identifier");return e.name="✖",e},s.prototype.dummyString=function(){var e=this.dummyNode("Literal");return e.value=e.raw="✖",e},s.prototype.eat=function(e){return this.tok.type===e&&(this.next(),!0)},s.prototype.isContextual=function(e){return this.tok.type===r.tokTypes.name&&this.tok.value===e},s.prototype.eatContextual=function(e){return this.tok.value===e&&this.eat(r.tokTypes.name)},s.prototype.canInsertSemicolon=function(){return this.tok.type===r.tokTypes.eof||this.tok.type===r.tokTypes.braceR||r.lineBreak.test(this.input.slice(this.last.end,this.tok.start))},s.prototype.semicolon=function(){return this.eat(r.tokTypes.semi)},s.prototype.expect=function(e){if(this.eat(e))return!0;for(var t=1;t<=2;t++)if(this.lookAhead(t).type===e){for(var n=0;n<t;n++)this.next();return!0}},s.prototype.pushCx=function(){this.context.push(this.curIndent)},s.prototype.popCx=function(){this.curIndent=this.context.pop()},s.prototype.lineEnd=function(e){for(;e<this.input.length&&!(0,r.isNewLine)(this.input.charCodeAt(e));)++e;return e},s.prototype.indentationAfter=function(e){for(var t=0;;++e){var n=this.input.charCodeAt(e);if(32===n)++t;else{if(9!==n)return t;t+=this.options.tabSize}}},s.prototype.closes=function(e,t,n,i){return this.tok.type===e||this.tok.type===r.tokTypes.eof||n!==this.curLineStart&&this.curIndent<t&&this.tokenStartsLine()&&(!i||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<t)},s.prototype.tokenStartsLine=function(){for(var e=this.tok.start-1;e>=this.curLineStart;--e){var t=this.input.charCodeAt(e);if(9!==t&&32!==t)return!1}return!0},s.prototype.extend=function(e,t){this[e]=t(this[e])},s.prototype.parse=function(){return this.next(),this.parseTopLevel()},s.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},s.parse=function(e,t){return new this(e,t).parse()},s.BaseParser=r.Parser;var a=s.prototype;function o(e){return e<14&&e>8||32===e||160===e||(0,r.isNewLine)(e)}function l(e){return"✖"===e.name}a.next=function(){if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}},a.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===r.tokTypes.dot&&"."===this.input.substr(this.toks.end,1)&&this.options.ecmaVersion>=6&&(this.toks.end++,this.toks.type=r.tokTypes.ellipsis),new r.Token(this.toks)}catch(a){if(!(a instanceof SyntaxError))throw a;var e=a.message,t=a.raisedAt,n=!0;if(/unterminated/i.test(e))if(t=this.lineEnd(a.pos+1),/string/.test(e))n={start:a.pos,end:t,type:r.tokTypes.string,value:this.input.slice(a.pos+1,t)};else if(/regular expr/i.test(e)){var i=this.input.slice(a.pos,t);try{i=new RegExp(i)}catch(e){}n={start:a.pos,end:t,type:r.tokTypes.regexp,value:i}}else n=!!/template/.test(e)&&{start:a.pos,end:t,type:r.tokTypes.template,value:this.input.slice(a.pos,t)};else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(e))for(;t<this.input.length&&!o(this.input.charCodeAt(t));)++t;else if(/character escape|expected hexadecimal/i.test(e))for(;t<this.input.length;){var s=this.input.charCodeAt(t++);if(34===s||39===s||(0,r.isNewLine)(s))break}else if(/unexpected character/i.test(e))t++,n=!1;else{if(!/regular expression/i.test(e))throw a;n=!0}if(this.resetTo(t),!0===n&&(n={start:t,end:t,type:r.tokTypes.name,value:"✖"}),n)return this.options.locations&&(n.loc=new r.SourceLocation(this.toks,(0,r.getLineInfo)(this.input,n.start),(0,r.getLineInfo)(this.input,n.end))),n}},a.resetTo=function(e){this.toks.pos=e;var t,n=this.input.charAt(e-1);if(this.toks.exprAllowed=!n||/[[{(,;:?/*=+\-~!|&%^<>]/.test(n)||/[enwfd]/.test(n)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(e-10,e)),this.options.locations)for(this.toks.curLine=1,this.toks.lineStart=r.lineBreakG.lastIndex=0;(t=r.lineBreakG.exec(this.input))&&t.index<e;)++this.toks.curLine,this.toks.lineStart=t.index+t[0].length},a.lookAhead=function(e){for(;e>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[e-1]};var c=s.prototype;c.parseTopLevel=function(){var e=this.startNodeAt(this.options.locations?[0,(0,r.getLineInfo)(this.input,0)]:0);for(e.body=[];this.tok.type!==r.tokTypes.eof;)e.body.push(this.parseStatement());return this.toks.adaptDirectivePrologue(e.body),this.last=this.tok,this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")},c.parseStatement=function(){var e,t=this.tok.type,n=this.startNode();switch(this.toks.isLet()&&(t=r.tokTypes._var,e="let"),t){case r.tokTypes._break:case r.tokTypes._continue:this.next();var i=t===r.tokTypes._break;return this.semicolon()||this.canInsertSemicolon()?n.label=null:(n.label=this.tok.type===r.tokTypes.name?this.parseIdent():null,this.semicolon()),this.finishNode(n,i?"BreakStatement":"ContinueStatement");case r.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(n,"DebuggerStatement");case r.tokTypes._do:return this.next(),n.body=this.parseStatement(),n.test=this.eat(r.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(n,"DoWhileStatement");case r.tokTypes._for:this.next();var s=this.options.ecmaVersion>=9&&this.inAsync&&this.eatContextual("await");if(this.pushCx(),this.expect(r.tokTypes.parenL),this.tok.type===r.tokTypes.semi)return this.parseFor(n,null);var a=this.toks.isLet();if(a||this.tok.type===r.tokTypes._var||this.tok.type===r.tokTypes._const){var o=this.parseVar(this.startNode(),!0,a?"let":this.tok.value);return 1!==o.declarations.length||this.tok.type!==r.tokTypes._in&&!this.isContextual("of")?this.parseFor(n,o):(this.options.ecmaVersion>=9&&this.tok.type!==r.tokTypes._in&&(n.await=s),this.parseForIn(n,o))}var c=this.parseExpression(!0);return this.tok.type===r.tokTypes._in||this.isContextual("of")?(this.options.ecmaVersion>=9&&this.tok.type!==r.tokTypes._in&&(n.await=s),this.parseForIn(n,this.toAssignable(c))):this.parseFor(n,c);case r.tokTypes._function:return this.next(),this.parseFunction(n,!0);case r.tokTypes._if:return this.next(),n.test=this.parseParenExpression(),n.consequent=this.parseStatement(),n.alternate=this.eat(r.tokTypes._else)?this.parseStatement():null,this.finishNode(n,"IfStatement");case r.tokTypes._return:return this.next(),this.eat(r.tokTypes.semi)||this.canInsertSemicolon()?n.argument=null:(n.argument=this.parseExpression(),this.semicolon()),this.finishNode(n,"ReturnStatement");case r.tokTypes._switch:var u,h=this.curIndent,p=this.curLineStart;for(this.next(),n.discriminant=this.parseParenExpression(),n.cases=[],this.pushCx(),this.expect(r.tokTypes.braceL);!this.closes(r.tokTypes.braceR,h,p,!0);)if(this.tok.type===r.tokTypes._case||this.tok.type===r.tokTypes._default){var d=this.tok.type===r.tokTypes._case;u&&this.finishNode(u,"SwitchCase"),n.cases.push(u=this.startNode()),u.consequent=[],this.next(),u.test=d?this.parseExpression():null,this.expect(r.tokTypes.colon)}else u||(n.cases.push(u=this.startNode()),u.consequent=[],u.test=null),u.consequent.push(this.parseStatement());return u&&this.finishNode(u,"SwitchCase"),this.popCx(),this.eat(r.tokTypes.braceR),this.finishNode(n,"SwitchStatement");case r.tokTypes._throw:return this.next(),n.argument=this.parseExpression(),this.semicolon(),this.finishNode(n,"ThrowStatement");case r.tokTypes._try:if(this.next(),n.block=this.parseBlock(),n.handler=null,this.tok.type===r.tokTypes._catch){var f=this.startNode();this.next(),this.eat(r.tokTypes.parenL)?(f.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(r.tokTypes.parenR)):f.param=null,f.body=this.parseBlock(),n.handler=this.finishNode(f,"CatchClause")}return n.finalizer=this.eat(r.tokTypes._finally)?this.parseBlock():null,n.handler||n.finalizer?this.finishNode(n,"TryStatement"):n.block;case r.tokTypes._var:case r.tokTypes._const:return this.parseVar(n,!1,e||this.tok.value);case r.tokTypes._while:return this.next(),n.test=this.parseParenExpression(),n.body=this.parseStatement(),this.finishNode(n,"WhileStatement");case r.tokTypes._with:return this.next(),n.object=this.parseParenExpression(),n.body=this.parseStatement(),this.finishNode(n,"WithStatement");case r.tokTypes.braceL:return this.parseBlock();case r.tokTypes.semi:return this.next(),this.finishNode(n,"EmptyStatement");case r.tokTypes._class:return this.parseClass(!0);case r.tokTypes._import:return this.options.ecmaVersion>10&&this.lookAhead(1).type===r.tokTypes.parenL?(n.expression=this.parseExpression(),this.semicolon(),this.finishNode(n,"ExpressionStatement")):this.parseImport();case r.tokTypes._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(n,!0,!0);var m=this.parseExpression();return l(m)?(this.next(),this.tok.type===r.tokTypes.eof?this.finishNode(n,"EmptyStatement"):this.parseStatement()):t===r.tokTypes.name&&"Identifier"===m.type&&this.eat(r.tokTypes.colon)?(n.body=this.parseStatement(),n.label=m,this.finishNode(n,"LabeledStatement")):(n.expression=m,this.semicolon(),this.finishNode(n,"ExpressionStatement"))}},c.parseBlock=function(){var e=this.startNode();this.pushCx(),this.expect(r.tokTypes.braceL);var t=this.curIndent,n=this.curLineStart;for(e.body=[];!this.closes(r.tokTypes.braceR,t,n,!0);)e.body.push(this.parseStatement());return this.popCx(),this.eat(r.tokTypes.braceR),this.finishNode(e,"BlockStatement")},c.parseFor=function(e,t){return e.init=t,e.test=e.update=null,this.eat(r.tokTypes.semi)&&this.tok.type!==r.tokTypes.semi&&(e.test=this.parseExpression()),this.eat(r.tokTypes.semi)&&this.tok.type!==r.tokTypes.parenR&&(e.update=this.parseExpression()),this.popCx(),this.expect(r.tokTypes.parenR),e.body=this.parseStatement(),this.finishNode(e,"ForStatement")},c.parseForIn=function(e,t){var n=this.tok.type===r.tokTypes._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.popCx(),this.expect(r.tokTypes.parenR),e.body=this.parseStatement(),this.finishNode(e,n)},c.parseVar=function(e,t,n){e.kind=n,this.next(),e.declarations=[];do{var i=this.startNode();i.id=this.options.ecmaVersion>=6?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),i.init=this.eat(r.tokTypes.eq)?this.parseMaybeAssign(t):null,e.declarations.push(this.finishNode(i,"VariableDeclarator"))}while(this.eat(r.tokTypes.comma));if(!e.declarations.length){var s=this.startNode();s.id=this.dummyIdent(),e.declarations.push(this.finishNode(s,"VariableDeclarator"))}return t||this.semicolon(),this.finishNode(e,"VariableDeclaration")},c.parseClass=function(e){var t=this.startNode();this.next(),this.tok.type===r.tokTypes.name?t.id=this.parseIdent():t.id=!0===e?this.dummyIdent():null,t.superClass=this.eat(r.tokTypes._extends)?this.parseExpression():null,t.body=this.startNode(),t.body.body=[],this.pushCx();var n=this.curIndent+1,i=this.curLineStart;for(this.eat(r.tokTypes.braceL),this.curIndent+1<n&&(n=this.curIndent,i=this.curLineStart);!this.closes(r.tokTypes.braceR,n,i);)if(!this.semicolon()){var s=this.startNode(),a=void 0,o=void 0;this.options.ecmaVersion>=6&&(s.static=!1,a=this.eat(r.tokTypes.star)),this.parsePropertyName(s),l(s.key)?(l(this.parseMaybeAssign())&&this.next(),this.eat(r.tokTypes.comma)):("Identifier"!==s.key.type||s.computed||"static"!==s.key.name||this.tok.type===r.tokTypes.parenL||this.tok.type===r.tokTypes.braceL?s.static=!1:(s.static=!0,a=this.eat(r.tokTypes.star),this.parsePropertyName(s)),s.computed||"Identifier"!==s.key.type||"async"!==s.key.name||this.tok.type===r.tokTypes.parenL||this.canInsertSemicolon()?o=!1:(o=!0,a=this.options.ecmaVersion>=9&&this.eat(r.tokTypes.star),this.parsePropertyName(s)),this.options.ecmaVersion>=5&&"Identifier"===s.key.type&&!s.computed&&("get"===s.key.name||"set"===s.key.name)&&this.tok.type!==r.tokTypes.parenL&&this.tok.type!==r.tokTypes.braceL?(s.kind=s.key.name,this.parsePropertyName(s),s.value=this.parseMethod(!1)):(s.computed||s.static||a||o||!("Identifier"===s.key.type&&"constructor"===s.key.name||"Literal"===s.key.type&&"constructor"===s.key.value)?s.kind="method":s.kind="constructor",s.value=this.parseMethod(a,o)),t.body.body.push(this.finishNode(s,"MethodDefinition")))}return this.popCx(),this.eat(r.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(t.body,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},c.parseFunction=function(e,t,n){var i=this.inAsync,s=this.inFunction;return this.initFunction(e),this.options.ecmaVersion>=6&&(e.generator=this.eat(r.tokTypes.star)),this.options.ecmaVersion>=8&&(e.async=!!n),this.tok.type===r.tokTypes.name?e.id=this.parseIdent():!0===t&&(e.id=this.dummyIdent()),this.inAsync=e.async,this.inFunction=!0,e.params=this.parseFunctionParams(),e.body=this.parseBlock(),this.toks.adaptDirectivePrologue(e.body.body),this.inAsync=i,this.inFunction=s,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},c.parseExport=function(){var e=this.startNode();if(this.next(),this.eat(r.tokTypes.star))return e.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(r.tokTypes._default)){var t;if(this.tok.type===r.tokTypes._function||(t=this.toks.isAsyncFunction())){var n=this.startNode();this.next(),t&&this.next(),e.declaration=this.parseFunction(n,"nullableID",t)}else this.tok.type===r.tokTypes._class?e.declaration=this.parseClass("nullableID"):(e.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(e,"ExportDefaultDeclaration")}return this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(e.declaration=this.parseStatement(),e.specifiers=[],e.source=null):(e.declaration=null,e.specifiers=this.parseExportSpecifierList(),e.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(e,"ExportNamedDeclaration")},c.parseImport=function(){var e,t=this.startNode();return this.next(),this.tok.type===r.tokTypes.string?(t.specifiers=[],t.source=this.parseExprAtom()):(this.tok.type===r.tokTypes.name&&"from"!==this.tok.value&&((e=this.startNode()).local=this.parseIdent(),this.finishNode(e,"ImportDefaultSpecifier"),this.eat(r.tokTypes.comma)),t.specifiers=this.parseImportSpecifiers(),t.source=this.eatContextual("from")&&this.tok.type===r.tokTypes.string?this.parseExprAtom():this.dummyString(),e&&t.specifiers.unshift(e)),this.semicolon(),this.finishNode(t,"ImportDeclaration")},c.parseImportSpecifiers=function(){var e=[];if(this.tok.type===r.tokTypes.star){var t=this.startNode();this.next(),t.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),e.push(this.finishNode(t,"ImportNamespaceSpecifier"))}else{var n=this.curIndent,i=this.curLineStart,s=this.nextLineStart;for(this.pushCx(),this.eat(r.tokTypes.braceL),this.curLineStart>s&&(s=this.curLineStart);!this.closes(r.tokTypes.braceR,n+(this.curLineStart<=s?1:0),i);){var a=this.startNode();if(this.eat(r.tokTypes.star))a.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(a,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;if(a.imported=this.parseIdent(),l(a.imported))break;a.local=this.eatContextual("as")?this.parseIdent():a.imported,this.finishNode(a,"ImportSpecifier")}e.push(a),this.eat(r.tokTypes.comma)}this.eat(r.tokTypes.braceR),this.popCx()}return e},c.parseExportSpecifierList=function(){var e=[],t=this.curIndent,n=this.curLineStart,i=this.nextLineStart;for(this.pushCx(),this.eat(r.tokTypes.braceL),this.curLineStart>i&&(i=this.curLineStart);!this.closes(r.tokTypes.braceR,t+(this.curLineStart<=i?1:0),n)&&!this.isContextual("from");){var s=this.startNode();if(s.local=this.parseIdent(),l(s.local))break;s.exported=this.eatContextual("as")?this.parseIdent():s.local,this.finishNode(s,"ExportSpecifier"),e.push(s),this.eat(r.tokTypes.comma)}return this.eat(r.tokTypes.braceR),this.popCx(),e};var u=s.prototype;function h(e,t){return s.parse(e,t)}u.checkLVal=function(e){if(!e)return e;switch(e.type){case"Identifier":case"MemberExpression":return e;case"ParenthesizedExpression":return e.expression=this.checkLVal(e.expression),e;default:return this.dummyIdent()}},u.parseExpression=function(e){var t=this.storeCurrentPos(),n=this.parseMaybeAssign(e);if(this.tok.type===r.tokTypes.comma){var i=this.startNodeAt(t);for(i.expressions=[n];this.eat(r.tokTypes.comma);)i.expressions.push(this.parseMaybeAssign(e));return this.finishNode(i,"SequenceExpression")}return n},u.parseParenExpression=function(){this.pushCx(),this.expect(r.tokTypes.parenL);var e=this.parseExpression();return this.popCx(),this.expect(r.tokTypes.parenR),e},u.parseMaybeAssign=function(e){if(this.toks.isContextual("yield")){var t=this.startNode();return this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==r.tokTypes.star&&!this.tok.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(r.tokTypes.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")}var n=this.storeCurrentPos(),i=this.parseMaybeConditional(e);if(this.tok.type.isAssign){var s=this.startNodeAt(n);return s.operator=this.tok.value,s.left=this.tok.type===r.tokTypes.eq?this.toAssignable(i):this.checkLVal(i),this.next(),s.right=this.parseMaybeAssign(e),this.finishNode(s,"AssignmentExpression")}return i},u.parseMaybeConditional=function(e){var t=this.storeCurrentPos(),n=this.parseExprOps(e);if(this.eat(r.tokTypes.question)){var i=this.startNodeAt(t);return i.test=n,i.consequent=this.parseMaybeAssign(),i.alternate=this.expect(r.tokTypes.colon)?this.parseMaybeAssign(e):this.dummyIdent(),this.finishNode(i,"ConditionalExpression")}return n},u.parseExprOps=function(e){var t=this.storeCurrentPos(),n=this.curIndent,r=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),t,-1,e,n,r)},u.parseExprOp=function(e,t,n,i,s,a){if(this.curLineStart!==a&&this.curIndent<s&&this.tokenStartsLine())return e;var o=this.tok.type.binop;if(null!=o&&(!i||this.tok.type!==r.tokTypes._in)&&o>n){var l=this.startNodeAt(t);if(l.left=e,l.operator=this.tok.value,this.next(),this.curLineStart!==a&&this.curIndent<s&&this.tokenStartsLine())l.right=this.dummyIdent();else{var c=this.storeCurrentPos();l.right=this.parseExprOp(this.parseMaybeUnary(!1),c,o,i,s,a)}return this.finishNode(l,/&&|\|\|/.test(l.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(l,t,n,i,s,a)}return e},u.parseMaybeUnary=function(e){var t,n=this.storeCurrentPos();if(this.options.ecmaVersion>=8&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))t=this.parseAwait(),e=!0;else if(this.tok.type.prefix){var i=this.startNode(),s=this.tok.type===r.tokTypes.incDec;s||(e=!0),i.operator=this.tok.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(!0),s&&(i.argument=this.checkLVal(i.argument)),t=this.finishNode(i,s?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===r.tokTypes.ellipsis){var a=this.startNode();this.next(),a.argument=this.parseMaybeUnary(e),t=this.finishNode(a,"SpreadElement")}else for(t=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(n);o.operator=this.tok.value,o.prefix=!1,o.argument=this.checkLVal(t),this.next(),t=this.finishNode(o,"UpdateExpression")}if(!e&&this.eat(r.tokTypes.starstar)){var l=this.startNodeAt(n);return l.operator="**",l.left=t,l.right=this.parseMaybeUnary(!1),this.finishNode(l,"BinaryExpression")}return t},u.parseExprSubscripts=function(){var e=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),e,!1,this.curIndent,this.curLineStart)},u.parseSubscripts=function(e,t,n,i,s){for(;;){if(this.curLineStart!==s&&this.curIndent<=i&&this.tokenStartsLine()){if(this.tok.type!==r.tokTypes.dot||this.curIndent!==i)return e;--i}var a="Identifier"===e.type&&"async"===e.name&&!this.canInsertSemicolon();if(this.eat(r.tokTypes.dot)){var o=this.startNodeAt(t);o.object=e,this.curLineStart!==s&&this.curIndent<=i&&this.tokenStartsLine()?o.property=this.dummyIdent():o.property=this.parsePropertyAccessor()||this.dummyIdent(),o.computed=!1,e=this.finishNode(o,"MemberExpression")}else if(this.tok.type===r.tokTypes.bracketL){this.pushCx(),this.next();var l=this.startNodeAt(t);l.object=e,l.property=this.parseExpression(),l.computed=!0,this.popCx(),this.expect(r.tokTypes.bracketR),e=this.finishNode(l,"MemberExpression")}else if(n||this.tok.type!==r.tokTypes.parenL){if(this.tok.type!==r.tokTypes.backQuote)return e;var c=this.startNodeAt(t);c.tag=e,c.quasi=this.parseTemplate(),e=this.finishNode(c,"TaggedTemplateExpression")}else{var u=this.parseExprList(r.tokTypes.parenR);if(a&&this.eat(r.tokTypes.arrow))return this.parseArrowExpression(this.startNodeAt(t),u,!0);var h=this.startNodeAt(t);h.callee=e,h.arguments=u,e=this.finishNode(h,"CallExpression")}}},u.parseExprAtom=function(){var e;switch(this.tok.type){case r.tokTypes._this:case r.tokTypes._super:var t=this.tok.type===r.tokTypes._this?"ThisExpression":"Super";return e=this.startNode(),this.next(),this.finishNode(e,t);case r.tokTypes.name:var n=this.storeCurrentPos(),i=this.parseIdent(),s=!1;if("async"===i.name&&!this.canInsertSemicolon()){if(this.eat(r.tokTypes._function))return this.parseFunction(this.startNodeAt(n),!1,!0);this.tok.type===r.tokTypes.name&&(i=this.parseIdent(),s=!0)}return this.eat(r.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(n),[i],s):i;case r.tokTypes.regexp:e=this.startNode();var a=this.tok.value;return e.regex={pattern:a.pattern,flags:a.flags},e.value=a.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(e,"Literal");case r.tokTypes.num:case r.tokTypes.string:return(e=this.startNode()).value=this.tok.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===r.tokTypes.num&&110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal");case r.tokTypes._null:case r.tokTypes._true:case r.tokTypes._false:return(e=this.startNode()).value=this.tok.type===r.tokTypes._null?null:this.tok.type===r.tokTypes._true,e.raw=this.tok.type.keyword,this.next(),this.finishNode(e,"Literal");case r.tokTypes.parenL:var o=this.storeCurrentPos();this.next();var c=this.parseExpression();if(this.expect(r.tokTypes.parenR),this.eat(r.tokTypes.arrow)){var u=c.expressions||[c];return u.length&&l(u[u.length-1])&&u.pop(),this.parseArrowExpression(this.startNodeAt(o),u)}if(this.options.preserveParens){var h=this.startNodeAt(o);h.expression=c,c=this.finishNode(h,"ParenthesizedExpression")}return c;case r.tokTypes.bracketL:return(e=this.startNode()).elements=this.parseExprList(r.tokTypes.bracketR,!0),this.finishNode(e,"ArrayExpression");case r.tokTypes.braceL:return this.parseObj();case r.tokTypes._class:return this.parseClass(!1);case r.tokTypes._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case r.tokTypes._new:return this.parseNew();case r.tokTypes.backQuote:return this.parseTemplate();case r.tokTypes._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.dummyIdent();default:return this.dummyIdent()}},u.parseDynamicImport=function(){var e=this.startNode();return this.next(),this.finishNode(e,"Import")},u.parseNew=function(){var e=this.startNode(),t=this.curIndent,n=this.curLineStart,i=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(r.tokTypes.dot))return e.meta=i,e.property=this.parseIdent(!0),this.finishNode(e,"MetaProperty");var s=this.storeCurrentPos();return e.callee=this.parseSubscripts(this.parseExprAtom(),s,!0,t,n),this.tok.type===r.tokTypes.parenL?e.arguments=this.parseExprList(r.tokTypes.parenR):e.arguments=[],this.finishNode(e,"NewExpression")},u.parseTemplateElement=function(){var e=this.startNode();return this.tok.type===r.tokTypes.invalidTemplate?e.value={raw:this.tok.value,cooked:null}:e.value={raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value},this.next(),e.tail=this.tok.type===r.tokTypes.backQuote,this.finishNode(e,"TemplateElement")},u.parseTemplate=function(){var e=this.startNode();this.next(),e.expressions=[];var t=this.parseTemplateElement();for(e.quasis=[t];!t.tail;)this.next(),e.expressions.push(this.parseExpression()),this.expect(r.tokTypes.braceR)?t=this.parseTemplateElement():((t=this.startNode()).value={cooked:"",raw:""},t.tail=!0,this.finishNode(t,"TemplateElement")),e.quasis.push(t);return this.expect(r.tokTypes.backQuote),this.finishNode(e,"TemplateLiteral")},u.parseObj=function(){var e=this.startNode();e.properties=[],this.pushCx();var t=this.curIndent+1,n=this.curLineStart;for(this.eat(r.tokTypes.braceL),this.curIndent+1<t&&(t=this.curIndent,n=this.curLineStart);!this.closes(r.tokTypes.braceR,t,n);){var i=this.startNode(),s=void 0,a=void 0,o=void 0;if(this.options.ecmaVersion>=9&&this.eat(r.tokTypes.ellipsis))i.argument=this.parseMaybeAssign(),e.properties.push(this.finishNode(i,"SpreadElement")),this.eat(r.tokTypes.comma);else if(this.options.ecmaVersion>=6&&(o=this.storeCurrentPos(),i.method=!1,i.shorthand=!1,s=this.eat(r.tokTypes.star)),this.parsePropertyName(i),this.toks.isAsyncProp(i)?(a=!0,s=this.options.ecmaVersion>=9&&this.eat(r.tokTypes.star),this.parsePropertyName(i)):a=!1,l(i.key))l(this.parseMaybeAssign())&&this.next(),this.eat(r.tokTypes.comma);else{if(this.eat(r.tokTypes.colon))i.kind="init",i.value=this.parseMaybeAssign();else if(this.options.ecmaVersion>=6&&(this.tok.type===r.tokTypes.parenL||this.tok.type===r.tokTypes.braceL))i.kind="init",i.method=!0,i.value=this.parseMethod(s,a);else if(this.options.ecmaVersion>=5&&"Identifier"===i.key.type&&!i.computed&&("get"===i.key.name||"set"===i.key.name)&&this.tok.type!==r.tokTypes.comma&&this.tok.type!==r.tokTypes.braceR&&this.tok.type!==r.tokTypes.eq)i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);else{if(i.kind="init",this.options.ecmaVersion>=6)if(this.eat(r.tokTypes.eq)){var c=this.startNodeAt(o);c.operator="=",c.left=i.key,c.right=this.parseMaybeAssign(),i.value=this.finishNode(c,"AssignmentExpression")}else i.value=i.key;else i.value=this.dummyIdent();i.shorthand=!0}e.properties.push(this.finishNode(i,"Property")),this.eat(r.tokTypes.comma)}}return this.popCx(),this.eat(r.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(e,"ObjectExpression")},u.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(r.tokTypes.bracketL))return e.computed=!0,e.key=this.parseExpression(),void this.expect(r.tokTypes.bracketR);e.computed=!1}var t=this.tok.type===r.tokTypes.num||this.tok.type===r.tokTypes.string?this.parseExprAtom():this.parseIdent();e.key=t||this.dummyIdent()},u.parsePropertyAccessor=function(){if(this.tok.type===r.tokTypes.name||this.tok.type.keyword)return this.parseIdent()},u.parseIdent=function(){var e=this.tok.type===r.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!e)return this.dummyIdent();var t=this.startNode();return this.next(),t.name=e,this.finishNode(t,"Identifier")},u.initFunction=function(e){e.id=null,e.params=[],this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},u.toAssignable=function(e,t){if(!e||"Identifier"===e.type||"MemberExpression"===e.type&&!t);else if("ParenthesizedExpression"===e.type)this.toAssignable(e.expression,t);else{if(this.options.ecmaVersion<6)return this.dummyIdent();if("ObjectExpression"===e.type){e.type="ObjectPattern";for(var n=0,r=e.properties;n<r.length;n+=1){var i=r[n];this.toAssignable(i,t)}}else if("ArrayExpression"===e.type)e.type="ArrayPattern",this.toAssignableList(e.elements,t);else if("Property"===e.type)this.toAssignable(e.value,t);else if("SpreadElement"===e.type)e.type="RestElement",this.toAssignable(e.argument,t);else{if("AssignmentExpression"!==e.type)return this.dummyIdent();e.type="AssignmentPattern",delete e.operator}}return e},u.toAssignableList=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.toAssignable(i,t)}return e},u.parseFunctionParams=function(e){return e=this.parseExprList(r.tokTypes.parenR),this.toAssignableList(e,!0)},u.parseMethod=function(e,t){var n=this.startNode(),r=this.inAsync,i=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=!!e),this.options.ecmaVersion>=8&&(n.async=!!t),this.inAsync=n.async,this.inFunction=!0,n.params=this.parseFunctionParams(),n.body=this.parseBlock(),this.toks.adaptDirectivePrologue(n.body.body),this.inAsync=r,this.inFunction=i,this.finishNode(n,"FunctionExpression")},u.parseArrowExpression=function(e,t,n){var i=this.inAsync,s=this.inFunction;return this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.inAsync=e.async,this.inFunction=!0,e.params=this.toAssignableList(t,!0),e.expression=this.tok.type!==r.tokTypes.braceL,e.expression?e.body=this.parseMaybeAssign():(e.body=this.parseBlock(),this.toks.adaptDirectivePrologue(e.body.body)),this.inAsync=i,this.inFunction=s,this.finishNode(e,"ArrowFunctionExpression")},u.parseExprList=function(e,t){this.pushCx();var n=this.curIndent,i=this.curLineStart,s=[];for(this.next();!this.closes(e,n+1,i);)if(this.eat(r.tokTypes.comma))s.push(t?null:this.dummyIdent());else{var a=this.parseMaybeAssign();if(l(a)){if(this.closes(e,n,i))break;this.next()}else s.push(a);this.eat(r.tokTypes.comma)}return this.popCx(),this.eat(e)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),s},u.parseAwait=function(){var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(),this.finishNode(e,"AwaitExpression")},r.defaultOptions.tabSize=4},1272:function(e,t,n){"use strict";n.r(t),n.d(t,{Node:function(){return ne},Parser:function(){return U},Position:function(){return R},SourceLocation:function(){return I},TokContext:function(){return se},Token:function(){return Ae},TokenType:function(){return g},defaultOptions:function(){return F},getLineInfo:function(){return O},isIdentifierChar:function(){return m},isIdentifierStart:function(){return f},isNewLine:function(){return C},keywordTypes:function(){return b},lineBreak:function(){return _},lineBreakG:function(){return E},nonASCIIwhitespace:function(){return T},parse:function(){return Ne},parseExpressionAt:function(){return Re},tokContexts:function(){return ae},tokTypes:function(){return S},tokenizer:function(){return Ie},version:function(){return De}});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:i,"5module":i+" export import",6:i+" const class extends export import super"},a=/^in(stanceof)?$/,o="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-Ᶎꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭧꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",l="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",c=new RegExp("["+o+"]"),u=new RegExp("["+o+l+"]");o=l=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function d(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function f(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==t&&d(e,h)))}function m(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&(d(e,h)||d(e,p)))))}var g=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function y(e,t){return new g(e,{beforeExpr:!0,binop:t})}var v={beforeExpr:!0},x={startsExpr:!0},b={};function w(e,t){return void 0===t&&(t={}),t.keyword=e,b[e]=new g(e,t)}var S={num:new g("num",x),regexp:new g("regexp",x),string:new g("string",x),name:new g("name",x),eof:new g("eof"),bracketL:new g("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new g("]"),braceL:new g("{",{beforeExpr:!0,startsExpr:!0}),braceR:new g("}"),parenL:new g("(",{beforeExpr:!0,startsExpr:!0}),parenR:new g(")"),comma:new g(",",v),semi:new g(";",v),colon:new g(":",v),dot:new g("."),question:new g("?",v),arrow:new g("=>",v),template:new g("template"),invalidTemplate:new g("invalidTemplate"),ellipsis:new g("...",v),backQuote:new g("`",x),dollarBraceL:new g("${",{beforeExpr:!0,startsExpr:!0}),eq:new g("=",{beforeExpr:!0,isAssign:!0}),assign:new g("_=",{beforeExpr:!0,isAssign:!0}),incDec:new g("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new g("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new g("**",{beforeExpr:!0}),_break:w("break"),_case:w("case",v),_catch:w("catch"),_continue:w("continue"),_debugger:w("debugger"),_default:w("default",v),_do:w("do",{isLoop:!0,beforeExpr:!0}),_else:w("else",v),_finally:w("finally"),_for:w("for",{isLoop:!0}),_function:w("function",x),_if:w("if"),_return:w("return",v),_switch:w("switch"),_throw:w("throw",v),_try:w("try"),_var:w("var"),_const:w("const"),_while:w("while",{isLoop:!0}),_with:w("with"),_new:w("new",{beforeExpr:!0,startsExpr:!0}),_this:w("this",x),_super:w("super",x),_class:w("class",x),_extends:w("extends",v),_export:w("export"),_import:w("import",x),_null:w("null",x),_true:w("true",x),_false:w("false",x),_in:w("in",{beforeExpr:!0,binop:7}),_instanceof:w("instanceof",{beforeExpr:!0,binop:7}),_typeof:w("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:w("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:w("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},_=/\r\n?|\n|\u2028|\u2029/,E=new RegExp(_.source,"g");function C(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,M=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,A=Object.prototype,k=A.hasOwnProperty,P=A.toString;function L(e,t){return k.call(e,t)}var D=Array.isArray||function(e){return"[object Array]"===P.call(e)};function N(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var R=function(e,t){this.line=e,this.column=t};R.prototype.offset=function(e){return new R(this.line,this.column+e)};var I=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function O(e,t){for(var n=1,r=0;;){E.lastIndex=r;var i=E.exec(e);if(!(i&&i.index<t))return new R(n,t-r);++n,r=i.index+i[0].length}}var F={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(e,t){return 2|(e?4:0)|(t?8:0)}var U=function(e,t,n){this.options=e=function(e){var t={};for(var n in F)t[n]=e&&L(e,n)?e[n]:F[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),D(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return D(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new I(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}(e),this.sourceFile=e.sourceFile,this.keywords=N(s[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var i="";if(!0!==e.allowReserved){for(var a=e.ecmaVersion;!(i=r[a]);a--);"module"===e.sourceType&&(i+=" await")}this.reservedWords=N(i);var o=(i?i+" ":"")+r.strict;this.reservedWordsStrict=N(o),this.reservedWordsStrictBind=N(o+" "+r.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(_).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=S.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},V={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};U.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},V.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},V.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},V.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},V.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},V.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},V.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},U.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},U.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},U.parse=function(e,t){return new this(t,e).parse()},U.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},U.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(U.prototype,V);var j=U.prototype,z=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function H(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}j.strictDirective=function(e){for(;;){M.lastIndex=e,e+=M.exec(this.input)[0].length;var t=z.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,M.lastIndex=e,e+=M.exec(this.input)[0].length,";"===this.input[e]&&e++}},j.eat=function(e){return this.type===e&&(this.next(),!0)},j.isContextual=function(e){return this.type===S.name&&this.value===e&&!this.containsEsc},j.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},j.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},j.canInsertSemicolon=function(){return this.type===S.eof||this.type===S.braceR||_.test(this.input.slice(this.lastTokEnd,this.start))},j.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},j.semicolon=function(){this.eat(S.semi)||this.insertSemicolon()||this.unexpected()},j.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},j.expect=function(e){this.eat(e)||this.unexpected()},j.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},j.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},j.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},j.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},j.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var W=U.prototype;W.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==S.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var G={kind:"loop"},X={kind:"switch"};W.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;M.lastIndex=this.pos;var t=M.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(f(r,!0)){for(var i=n+1;m(this.input.charCodeAt(i),!0);)++i;var s=this.input.slice(n,i);if(!a.test(s))return!0}return!1},W.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;M.lastIndex=this.pos;var e=M.exec(this.input),t=this.pos+e[0].length;return!(_.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&m(this.input.charAt(t+8)))},W.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=S._var,r="let"),i){case S._break:case S._continue:return this.parseBreakContinueStatement(s,i.keyword);case S._debugger:return this.parseDebuggerStatement(s);case S._do:return this.parseDoStatement(s);case S._for:return this.parseForStatement(s);case S._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case S._class:return e&&this.unexpected(),this.parseClass(s,!0);case S._if:return this.parseIfStatement(s);case S._return:return this.parseReturnStatement(s);case S._switch:return this.parseSwitchStatement(s);case S._throw:return this.parseThrowStatement(s);case S._try:return this.parseTryStatement(s);case S._const:case S._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case S._while:return this.parseWhileStatement(s);case S._with:return this.parseWithStatement(s);case S.braceL:return this.parseBlock(!0,s);case S.semi:return this.parseEmptyStatement(s);case S._export:case S._import:if(this.options.ecmaVersion>10&&i===S._import){M.lastIndex=this.pos;var a=M.exec(this.input),o=this.pos+a[0].length;if(40===this.input.charCodeAt(o))return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===S._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var l=this.value,c=this.parseExpression();return i===S.name&&"Identifier"===c.type&&this.eat(S.colon)?this.parseLabeledStatement(s,l,c,e):this.parseExpressionStatement(s,c)}},W.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(S.semi)||this.insertSemicolon()?e.label=null:this.type!==S.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},W.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},W.parseDoStatement=function(e){return this.next(),this.labels.push(G),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(S._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(S.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},W.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(G),this.enterScope(0),this.expect(S.parenL),this.type===S.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===S._var||this.type===S._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===S._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=new H,a=this.parseExpression(!0,s);return this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===S._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},W.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,q|(n?0:J),!1,t)},W.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(S._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},W.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(S.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},W.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(S.braceL),this.labels.push(X),this.enterScope(0);for(var n=!1;this.type!==S.braceR;)if(this.type===S._case||this.type===S._default){var r=this.type===S._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(S.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},W.parseThrowStatement=function(e){return this.next(),_.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var K=[];W.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===S._catch){var t=this.startNode();if(this.next(),this.eat(S.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(S.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(S._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},W.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},W.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(G),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},W.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},W.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},W.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===S._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},W.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},W.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(S.braceL),e&&this.enterScope(0);!this.eat(S.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},W.parseFor=function(e,t){return e.init=t,this.expect(S.semi),e.test=this.type===S.semi?null:this.parseExpression(),this.expect(S.semi),e.update=this.type===S.parenR?null:this.parseExpression(),this.expect(S.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},W.parseForIn=function(e,t){var n=this.type===S._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(S.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},W.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(S.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===S._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(S.comma))break}return e},W.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var q=1,J=2;W.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===S.star&&t&J&&this.unexpected(),e.generator=this.eat(S.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&q&&(e.id=4&t&&this.type!==S.name?null:this.parseIdent(),!e.id||t&J||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(B(e.async,e.generator)),t&q||(e.id=this.type===S.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,t&q?"FunctionDeclaration":"FunctionExpression")},W.parseFunctionParams=function(e){this.expect(S.parenL),e.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},W.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(S.braceL);!this.eat(S.braceR);){var s=this.parseClassElement(null!==e.superClass);s&&(r.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(i&&this.raise(s.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},W.parseClassElement=function(e){var t=this;if(this.eat(S.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,s=t.startLoc;return!(!t.eatContextual(e)||(t.type===S.parenL||r&&t.canInsertSemicolon())&&(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,s),n.key.name=e,t.finishNode(n.key,"Identifier"),1))};n.kind="method",n.static=r("static");var i=this.eat(S.star),s=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(S.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,o=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,s,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},W.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},W.parseClassId=function(e,t){this.type===S.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},W.parseClassSuper=function(e){e.superClass=this.eat(S._extends)?this.parseExprSubscripts():null},W.parseExport=function(e,t){if(this.next(),this.eat(S.star))return this.expectContextual("from"),this.type!==S.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(S._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===S._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|q,!1,n)}else if(this.type===S._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==S.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},W.checkExport=function(e,t,n){e&&(L(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},W.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},W.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},W.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},W.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(S.braceL);!this.eat(S.braceR);){if(n)n=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},W.parseImport=function(e){return this.next(),this.type===S.string?(e.specifiers=K,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===S.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},W.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===S.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(S.comma))return e}if(this.type===S.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(S.braceL);!this.eat(S.braceR);){if(t)t=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},W.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},W.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var Y=U.prototype;Y.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},Y.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},Y.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Y.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==S.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Y.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case S.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(S.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case S.braceL:return this.parseObj(!0)}return this.parseIdent()},Y.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(S.comma),t&&this.type===S.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===S.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},Y.parseBindingListItem=function(e){return e},Y.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(S.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Y.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(L(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLVal(s,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var $=U.prototype;$.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[s]=!0}}},$.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===S.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(S.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},$.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new H,r=!0);var o=this.start,l=this.startLoc;this.type!==S.parenL&&this.type!==S.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,u.left=this.type===S.eq?this.toAssignable(c,!1,t):c,r||H.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),a>-1&&(t.shorthandAssign=a),c},$.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(S.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(S.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},$.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},$.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==S._in)&&s>r){var a=this.type===S.logicalOR||this.type===S.logicalAND,o=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,s,i),h=this.buildBinary(t,n,e,u,o,a);return this.parseExprOp(h,t,n,r,i)}return e},$.buildBinary=function(e,t,n,r,i,s){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},$.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===S.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(S.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},$.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var s=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},$.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var s=this.parseSubscript(e,t,n,r,i);if(s===e||"ArrowFunctionExpression"===s.type)return s;e=s}},$.parseSubscript=function(e,t,n,r,i){var s=this.eat(S.bracketL);if(s||this.eat(S.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=s?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),a.computed=!!s,s&&this.expect(S.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(S.parenL)){var o=new H,l=this.yieldPos,c=this.awaitPos,u=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(S.parenR,this.options.ecmaVersion>=8&&"Import"!==e.type,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=c,this.awaitIdentPos=u,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=u||this.awaitIdentPos;var p=this.startNodeAt(t,n);if(p.callee=e,p.arguments=h,"Import"===p.callee.type){1!==p.arguments.length&&this.raise(p.start,"import() requires exactly one argument");var d=p.arguments[0];d&&"SpreadElement"===d.type&&this.raise(d.start,"... is not allowed in import()")}e=this.finishNode(p,"CallExpression")}else if(this.type===S.backQuote){var f=this.startNodeAt(t,n);f.tag=e,f.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(f,"TaggedTemplateExpression")}return e},$.parseExprAtom=function(e){this.type===S.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case S._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==S.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==S.dot&&this.type!==S.bracketL&&this.type!==S.parenL&&this.unexpected(),this.finishNode(t,"Super");case S._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case S.name:var r=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(S._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(S.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===S.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(S.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case S.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case S.num:case S.string:return this.parseLiteral(this.value);case S._null:case S._true:case S._false:return(t=this.startNode()).value=this.type===S._null?null:this.type===S._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case S.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case S.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(S.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case S.braceL:return this.parseObj(!1,e);case S._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case S._class:return this.parseClass(this.startNode(),!1);case S._new:return this.parseNew();case S.backQuote:return this.parseTemplate();case S._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},$.parseDynamicImport=function(){var e=this.startNode();return this.next(),this.type!==S.parenL&&this.unexpected(),this.finishNode(e,"Import")},$.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1)),this.next(),this.finishNode(t,"Literal")},$.parseParenExpression=function(){this.expect(S.parenL);var e=this.parseExpression();return this.expect(S.parenR),e},$.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new H,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==S.parenR;){if(c?c=!1:this.expect(S.comma),i&&this.afterTrailingComma(S.parenR,!0)){u=!0;break}if(this.type===S.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(S.parenR),e&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(a,o)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},$.parseParenItem=function(e){return e},$.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var Z=[];$.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(S.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.options.ecmaVersion>10&&"Import"===e.callee.type&&this.raise(e.callee.start,"Cannot use new with import(...)"),this.eat(S.parenL)?e.arguments=this.parseExprList(S.parenR,this.options.ecmaVersion>=8&&"Import"!==e.callee.type,!1):e.arguments=Z,this.finishNode(e,"NewExpression")},$.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===S.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===S.backQuote,this.finishNode(n,"TemplateElement")},$.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===S.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(S.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(S.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},$.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===S.name||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===S.star)&&!_.test(this.input.slice(this.lastTokEnd,this.start))},$.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(S.braceR);){if(r)r=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},$.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(S.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===S.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===S.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(S.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(S.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},$.parsePropertyValue=function(e,t,n,r,i,s,a,o){if((n||r)&&this.type===S.colon&&this.unexpected(),this.eat(S.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===S.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===S.comma||this.type===S.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===S.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},$.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(S.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(S.bracketR),e.key;e.computed=!1}return e.key=this.type===S.num||this.type===S.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},$.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},$.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|B(t,r.generator)|(n?128:0)),this.expect(S.parenL),r.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},$.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|B(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},$.parseFunctionBody=function(e,t,n){var r=t&&this.type!==S.braceL,i=this.strict,s=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!i&&!s&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},$.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},$.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLVal(s,1,t?null:n)}},$.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(S.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===S.comma?a=null:this.type===S.ellipsis?(a=this.parseSpread(r),r&&this.type===S.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},$.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},$.parseIdent=function(e,t){var n=this.startNode();return this.type===S.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},$.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===S.semi||this.canInsertSemicolon()||this.type!==S.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(S.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},$.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var Q=U.prototype;Q.raise=function(e,t){var n=O(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Q.raiseRecoverable=Q.raise,Q.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var ee=U.prototype,te=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};ee.enterScope=function(e){this.scopeStack.push(new te(e))},ee.exitScope=function(){this.scopeStack.pop()},ee.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},ee.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t)this.currentScope().lexical.push(e);else if(3===t){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],3&o.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},ee.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},ee.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ee.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags)return t}},ee.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags&&!(16&t.flags))return t}};var ne=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new I(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},re=U.prototype;function ie(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}re.startNode=function(){return new ne(this,this.start,this.startLoc)},re.startNodeAt=function(e,t){return new ne(this,e,t)},re.finishNode=function(e,t){return ie.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},re.finishNodeAt=function(e,t,n,r){return ie.call(this,e,t,n,r)};var se=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},ae={b_stat:new se("{",!1),b_expr:new se("{",!0),b_tmpl:new se("${",!1),p_stat:new se("(",!1),p_expr:new se("(",!0),q_tmpl:new se("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new se("function",!1),f_expr:new se("function",!0),f_expr_gen:new se("function",!0,!1,null,!0),f_gen:new se("function",!1,!1,null,!0)},oe=U.prototype;oe.initialContext=function(){return[ae.b_stat]},oe.braceIsBlock=function(e){var t=this.curContext();return t===ae.f_expr||t===ae.f_stat||(e!==S.colon||t!==ae.b_stat&&t!==ae.b_expr?e===S._return||e===S.name&&this.exprAllowed?_.test(this.input.slice(this.lastTokEnd,this.start)):e===S._else||e===S.semi||e===S.eof||e===S.parenR||e===S.arrow||(e===S.braceL?t===ae.b_stat:e!==S._var&&e!==S._const&&e!==S.name&&!this.exprAllowed):!t.isExpr)},oe.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},oe.updateContext=function(e){var t,n=this.type;n.keyword&&e===S.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},S.parenR.updateContext=S.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===ae.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},S.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ae.b_stat:ae.b_expr),this.exprAllowed=!0},S.dollarBraceL.updateContext=function(){this.context.push(ae.b_tmpl),this.exprAllowed=!0},S.parenL.updateContext=function(e){var t=e===S._if||e===S._for||e===S._with||e===S._while;this.context.push(t?ae.p_stat:ae.p_expr),this.exprAllowed=!0},S.incDec.updateContext=function(){},S._function.updateContext=S._class.updateContext=function(e){!e.beforeExpr||e===S.semi||e===S._else||e===S._return&&_.test(this.input.slice(this.lastTokEnd,this.start))||(e===S.colon||e===S.braceL)&&this.curContext()===ae.b_stat?this.context.push(ae.f_stat):this.context.push(ae.f_expr),this.exprAllowed=!1},S.backQuote.updateContext=function(){this.curContext()===ae.q_tmpl?this.context.pop():this.context.push(ae.q_tmpl),this.exprAllowed=!1},S.star.updateContext=function(e){if(e===S._function){var t=this.context.length-1;this.context[t]===ae.f_expr?this.context[t]=ae.f_expr_gen:this.context[t]=ae.f_gen}this.exprAllowed=!0},S.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==S.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var le="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ce=le+" Extended_Pictographic",ue={9:le,10:ce,11:ce},he="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",pe="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",de=pe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",fe={9:pe,10:de,11:de+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},me={};function ge(e){var t=me[e]={binary:N(ue[e]+" "+he),nonBinary:{General_Category:N(he),Script:N(fe[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}ge(9),ge(10),ge(11);var ye=U.prototype,ve=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=me[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function xe(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function be(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function we(e){return e>=65&&e<=90||e>=97&&e<=122}function Se(e){return we(e)||95===e}function _e(e){return Se(e)||Ee(e)}function Ee(e){return e>=48&&e<=57}function Ce(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Te(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Me(e){return e>=48&&e<=55}ve.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ve.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},ve.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);if(!this.switchU||r<=55295||r>=57344||e+1>=n)return r;var i=t.charCodeAt(e+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},ve.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r,i=t.charCodeAt(e);return!this.switchU||i<=55295||i>=57344||e+1>=n||(r=t.charCodeAt(e+1))<56320||r>57343?e+1:e+2},ve.prototype.current=function(){return this.at(this.pos)},ve.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ve.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ve.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},ye.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},ye.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},ye.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},ye.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},ye.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},ye.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},ye.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},ye.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},ye.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},ye.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},ye.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},ye.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},ye.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},ye.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},ye.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},ye.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},ye.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!be(t)&&(e.lastIntValue=t,e.advance(),!0)},ye.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!be(n);)e.advance();return e.pos!==t},ye.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},ye.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},ye.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},ye.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=xe(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=xe(e.lastIntValue);return!0}return!1},ye.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return f(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ye.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return m(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ye.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},ye.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},ye.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},ye.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},ye.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},ye.regexp_eatZero=function(e){return 48===e.current()&&!Ee(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},ye.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},ye.regexp_eatControlLetter=function(e){var t=e.current();return!!we(t)&&(e.lastIntValue=t%32,e.advance(),!0)},ye.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(s>=56320&&s<=57343)return e.lastIntValue=1024*(r-55296)+(s-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(t=e.lastIntValue)>=0&&t<=1114111)return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},ye.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},ye.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},ye.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},ye.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},ye.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){L(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},ye.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},ye.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Se(t=e.current());)e.lastStringValue+=xe(t),e.advance();return""!==e.lastStringValue},ye.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";_e(t=e.current());)e.lastStringValue+=xe(t),e.advance();return""!==e.lastStringValue},ye.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},ye.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},ye.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},ye.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Me(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},ye.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},ye.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Ee(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},ye.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},ye.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ee(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},ye.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ce(n=e.current());)e.lastIntValue=16*e.lastIntValue+Te(n),e.advance();return e.pos!==t},ye.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},ye.regexp_eatOctalDigit=function(e){var t=e.current();return Me(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},ye.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Ce(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Te(i),e.advance()}return!0};var Ae=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new I(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},ke=U.prototype;function Pe(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}ke.next=function(){this.options.onToken&&this.options.onToken(new Ae(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ke.getToken=function(){return this.next(),new Ae(this)},"undefined"!=typeof Symbol&&(ke[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===S.eof,value:t}}}}),ke.curContext=function(){return this.context[this.context.length-1]},ke.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(S.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},ke.readToken=function(e){return f(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},ke.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},ke.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(E.lastIndex=n;(e=E.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},ke.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!C(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},ke.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&T.test(String.fromCharCode(e))))break e;++this.pos}}},ke.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},ke.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(S.ellipsis)):(++this.pos,this.finishToken(S.dot))},ke.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(S.assign,2):this.finishOp(S.slash,1)},ke.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?S.star:S.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=S.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(S.assign,n+1):this.finishOp(r,n)},ke.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?S.logicalOR:S.logicalAND,2):61===t?this.finishOp(S.assign,2):this.finishOp(124===e?S.bitwiseOR:S.bitwiseAND,1)},ke.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(S.assign,2):this.finishOp(S.bitwiseXOR,1)},ke.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!_.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(S.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(S.assign,2):this.finishOp(S.plusMin,1)},ke.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(S.assign,n+1):this.finishOp(S.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(S.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ke.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(S.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(S.arrow)):this.finishOp(61===e?S.eq:S.prefix,1)},ke.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(S.parenL);case 41:return++this.pos,this.finishToken(S.parenR);case 59:return++this.pos,this.finishToken(S.semi);case 44:return++this.pos,this.finishToken(S.comma);case 91:return++this.pos,this.finishToken(S.bracketL);case 93:return++this.pos,this.finishToken(S.bracketR);case 123:return++this.pos,this.finishToken(S.braceL);case 125:return++this.pos,this.finishToken(S.braceR);case 58:return++this.pos,this.finishToken(S.colon);case 63:return++this.pos,this.finishToken(S.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(S.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(S.prefix,1)}this.raise(this.pos,"Unexpected character '"+Pe(e)+"'")},ke.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},ke.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(_.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new ve(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(e){}return this.finishToken(S.regexp,{pattern:i,flags:a,value:l})},ke.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;i<s;++i){var a,o=this.input.charCodeAt(this.pos);if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=e)break;++this.pos,r=r*e+a}return this.pos===n||null!=t&&this.pos-n!==t?null:r},ke.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!=typeof BigInt?BigInt(this.input.slice(t,this.pos)):null,++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,n)},ke.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(t,this.pos),s="undefined"!=typeof BigInt?BigInt(i):null;return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,s)}46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a=this.input.slice(t,this.pos),o=n?parseInt(a,8):parseFloat(a);return this.finishToken(S.num,o)},ke.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},ke.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(C(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(S.string,t)};var Le={};ke.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Le)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ke.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Le;this.raise(e,t)},ke.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==S.template&&this.type!==S.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(S.template,e)):36===n?(this.pos+=2,this.finishToken(S.dollarBraceL)):(++this.pos,this.finishToken(S.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(C(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},ke.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(S.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ke.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Pe(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return C(t)?"":String.fromCharCode(t)}},ke.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},ke.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(m(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?f:m)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Pe(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},ke.readWord=function(){var e=this.readWord1(),t=S.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=b[e]),this.finishToken(t,e)};var De="6.4.2";function Ne(e,t){return U.parse(e,t)}function Re(e,t,n){return U.parseExpressionAt(e,t,n)}function Ie(e,t){return U.tokenizer(e,t)}U.acorn={Parser:U,version:De,defaultOptions:F,Position:R,SourceLocation:I,getLineInfo:O,Node:ne,TokenType:g,tokTypes:S,keywordTypes:b,TokContext:se,tokContexts:ae,isIdentifierChar:m,isIdentifierStart:f,Token:Ae,isNewLine:C,lineBreak:_,lineBreakG:E,nonASCIIwhitespace:T}},1658:function(e,t,n){"use strict";function r(e,t,n,r,i){n||(n=v),function e(r,i,s){var a=s||r.type,o=t[a];n[a](r,i,e),o&&o(r,i)}(e,r,i)}function i(e,t,n,r){var i=[];n||(n=v),function e(r,s,a){var o=a||r.type,l=t[o],c=r!==i[i.length-1];c&&i.push(r),n[o](r,s,e),l&&l(r,s||i,i),c&&i.pop()}(e,r)}function s(e,t,n,r,i){var s=n?m(n,r||void 0):r;!function e(t,n,r){s[r||t.type](t,n,e)}(e,t,i)}function a(e){return"string"==typeof e?function(t){return t===e}:e||function(){return!0}}n.r(t),n.d(t,{ancestor:function(){return i},base:function(){return v},findNodeAfter:function(){return p},findNodeAround:function(){return h},findNodeAt:function(){return u},findNodeBefore:function(){return d},full:function(){return l},fullAncestor:function(){return c},make:function(){return m},recursive:function(){return s},simple:function(){return r}});var o=function(e,t){this.node=e,this.state=t};function l(e,t,n,r,i){n||(n=v),function e(r,i,s){var a=s||r.type;n[a](r,i,e),s||t(r,i,a)}(e,r,i)}function c(e,t,n,r){n||(n=v);var i=[];!function e(r,s,a){var o=a||r.type,l=r!==i[i.length-1];l&&i.push(r),n[o](r,s,e),a||t(r,s||i,i,o),l&&i.pop()}(e,r)}function u(e,t,n,r,i,s){i||(i=v),r=a(r);try{!function e(s,a,l){var c=l||s.type;if((null==t||s.start<=t)&&(null==n||s.end>=n)&&i[c](s,a,e),(null==t||s.start===t)&&(null==n||s.end===n)&&r(c,s))throw new o(s,a)}(e,s)}catch(e){if(e instanceof o)return e;throw e}}function h(e,t,n,r,i){n=a(n),r||(r=v);try{!function e(i,s,a){var l=a||i.type;if(!(i.start>t||i.end<t)&&(r[l](i,s,e),n(l,i)))throw new o(i,s)}(e,i)}catch(e){if(e instanceof o)return e;throw e}}function p(e,t,n,r,i){n=a(n),r||(r=v);try{!function e(i,s,a){if(!(i.end<t)){var l=a||i.type;if(i.start>=t&&n(l,i))throw new o(i,s);r[l](i,s,e)}}(e,i)}catch(e){if(e instanceof o)return e;throw e}}function d(e,t,n,r,i){var s;return n=a(n),r||(r=v),function e(i,a,l){if(!(i.start>t)){var c=l||i.type;i.end<=t&&(!s||s.node.end<i.end)&&n(c,i)&&(s=new o(i,a)),r[c](i,a,e)}}(e,i),s}var f=Object.create||function(e){function t(){}return t.prototype=e,new t};function m(e,t){var n=f(t||v);for(var r in e)n[r]=e[r];return n}function g(e,t,n){n(e,t)}function y(e,t,n){}var v={};v.Program=v.BlockStatement=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1)n(i[r],t,"Statement")},v.Statement=g,v.EmptyStatement=y,v.ExpressionStatement=v.ParenthesizedExpression=function(e,t,n){return n(e.expression,t,"Expression")},v.IfStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Statement"),e.alternate&&n(e.alternate,t,"Statement")},v.LabeledStatement=function(e,t,n){return n(e.body,t,"Statement")},v.BreakStatement=v.ContinueStatement=y,v.WithStatement=function(e,t,n){n(e.object,t,"Expression"),n(e.body,t,"Statement")},v.SwitchStatement=function(e,t,n){n(e.discriminant,t,"Expression");for(var r=0,i=e.cases;r<i.length;r+=1){var s=i[r];s.test&&n(s.test,t,"Expression");for(var a=0,o=s.consequent;a<o.length;a+=1)n(o[a],t,"Statement")}},v.SwitchCase=function(e,t,n){e.test&&n(e.test,t,"Expression");for(var r=0,i=e.consequent;r<i.length;r+=1)n(i[r],t,"Statement")},v.ReturnStatement=v.YieldExpression=v.AwaitExpression=function(e,t,n){e.argument&&n(e.argument,t,"Expression")},v.ThrowStatement=v.SpreadElement=function(e,t,n){return n(e.argument,t,"Expression")},v.TryStatement=function(e,t,n){n(e.block,t,"Statement"),e.handler&&n(e.handler,t),e.finalizer&&n(e.finalizer,t,"Statement")},v.CatchClause=function(e,t,n){e.param&&n(e.param,t,"Pattern"),n(e.body,t,"Statement")},v.WhileStatement=v.DoWhileStatement=function(e,t,n){n(e.test,t,"Expression"),n(e.body,t,"Statement")},v.ForStatement=function(e,t,n){e.init&&n(e.init,t,"ForInit"),e.test&&n(e.test,t,"Expression"),e.update&&n(e.update,t,"Expression"),n(e.body,t,"Statement")},v.ForInStatement=v.ForOfStatement=function(e,t,n){n(e.left,t,"ForInit"),n(e.right,t,"Expression"),n(e.body,t,"Statement")},v.ForInit=function(e,t,n){"VariableDeclaration"===e.type?n(e,t):n(e,t,"Expression")},v.DebuggerStatement=y,v.FunctionDeclaration=function(e,t,n){return n(e,t,"Function")},v.VariableDeclaration=function(e,t,n){for(var r=0,i=e.declarations;r<i.length;r+=1)n(i[r],t)},v.VariableDeclarator=function(e,t,n){n(e.id,t,"Pattern"),e.init&&n(e.init,t,"Expression")},v.Function=function(e,t,n){e.id&&n(e.id,t,"Pattern");for(var r=0,i=e.params;r<i.length;r+=1)n(i[r],t,"Pattern");n(e.body,t,e.expression?"Expression":"Statement")},v.Pattern=function(e,t,n){"Identifier"===e.type?n(e,t,"VariablePattern"):"MemberExpression"===e.type?n(e,t,"MemberPattern"):n(e,t)},v.VariablePattern=y,v.MemberPattern=g,v.RestElement=function(e,t,n){return n(e.argument,t,"Pattern")},v.ArrayPattern=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Pattern")}},v.ObjectPattern=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];"Property"===s.type?(s.computed&&n(s.key,t,"Expression"),n(s.value,t,"Pattern")):"RestElement"===s.type&&n(s.argument,t,"Pattern")}},v.Expression=g,v.ThisExpression=v.Super=v.MetaProperty=y,v.ArrayExpression=function(e,t,n){for(var r=0,i=e.elements;r<i.length;r+=1){var s=i[r];s&&n(s,t,"Expression")}},v.ObjectExpression=function(e,t,n){for(var r=0,i=e.properties;r<i.length;r+=1)n(i[r],t)},v.FunctionExpression=v.ArrowFunctionExpression=v.FunctionDeclaration,v.SequenceExpression=function(e,t,n){for(var r=0,i=e.expressions;r<i.length;r+=1)n(i[r],t,"Expression")},v.TemplateLiteral=function(e,t,n){for(var r=0,i=e.quasis;r<i.length;r+=1)n(i[r],t);for(var s=0,a=e.expressions;s<a.length;s+=1)n(a[s],t,"Expression")},v.TemplateElement=y,v.UnaryExpression=v.UpdateExpression=function(e,t,n){n(e.argument,t,"Expression")},v.BinaryExpression=v.LogicalExpression=function(e,t,n){n(e.left,t,"Expression"),n(e.right,t,"Expression")},v.AssignmentExpression=v.AssignmentPattern=function(e,t,n){n(e.left,t,"Pattern"),n(e.right,t,"Expression")},v.ConditionalExpression=function(e,t,n){n(e.test,t,"Expression"),n(e.consequent,t,"Expression"),n(e.alternate,t,"Expression")},v.NewExpression=v.CallExpression=function(e,t,n){if(n(e.callee,t,"Expression"),e.arguments)for(var r=0,i=e.arguments;r<i.length;r+=1)n(i[r],t,"Expression")},v.MemberExpression=function(e,t,n){n(e.object,t,"Expression"),e.computed&&n(e.property,t,"Expression")},v.ExportNamedDeclaration=v.ExportDefaultDeclaration=function(e,t,n){e.declaration&&n(e.declaration,t,"ExportNamedDeclaration"===e.type||e.declaration.id?"Statement":"Expression"),e.source&&n(e.source,t,"Expression")},v.ExportAllDeclaration=function(e,t,n){n(e.source,t,"Expression")},v.ImportDeclaration=function(e,t,n){for(var r=0,i=e.specifiers;r<i.length;r+=1)n(i[r],t);n(e.source,t,"Expression")},v.ImportSpecifier=v.ImportDefaultSpecifier=v.ImportNamespaceSpecifier=v.Identifier=v.Literal=v.Import=y,v.TaggedTemplateExpression=function(e,t,n){n(e.tag,t,"Expression"),n(e.quasi,t,"Expression")},v.ClassDeclaration=v.ClassExpression=function(e,t,n){return n(e,t,"Class")},v.Class=function(e,t,n){e.id&&n(e.id,t,"Pattern"),e.superClass&&n(e.superClass,t,"Expression"),n(e.body,t)},v.ClassBody=function(e,t,n){for(var r=0,i=e.body;r<i.length;r+=1)n(i[r],t)},v.MethodDefinition=v.Property=function(e,t,n){e.computed&&n(e.key,t,"Expression"),n(e.value,t,"Expression")}},5356:function(e,t,n){"use strict";n.r(t),n.d(t,{Node:function(){return ne},Parser:function(){return U},Position:function(){return R},SourceLocation:function(){return I},TokContext:function(){return se},Token:function(){return Ae},TokenType:function(){return g},defaultOptions:function(){return F},getLineInfo:function(){return O},isIdentifierChar:function(){return m},isIdentifierStart:function(){return f},isNewLine:function(){return C},keywordTypes:function(){return b},lineBreak:function(){return _},lineBreakG:function(){return E},nonASCIIwhitespace:function(){return T},parse:function(){return Ne},parseExpressionAt:function(){return Re},tokContexts:function(){return ae},tokTypes:function(){return S},tokenizer:function(){return Ie},version:function(){return De}});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:i,"5module":i+" export import",6:i+" const class extends export import super"},a=/^in(stanceof)?$/,o="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-Ᶎꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭧꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",l="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",c=new RegExp("["+o+"]"),u=new RegExp("["+o+l+"]");o=l=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function d(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function f(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==t&&d(e,h)))}function m(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&(d(e,h)||d(e,p)))))}var g=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function y(e,t){return new g(e,{beforeExpr:!0,binop:t})}var v={beforeExpr:!0},x={startsExpr:!0},b={};function w(e,t){return void 0===t&&(t={}),t.keyword=e,b[e]=new g(e,t)}var S={num:new g("num",x),regexp:new g("regexp",x),string:new g("string",x),name:new g("name",x),eof:new g("eof"),bracketL:new g("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new g("]"),braceL:new g("{",{beforeExpr:!0,startsExpr:!0}),braceR:new g("}"),parenL:new g("(",{beforeExpr:!0,startsExpr:!0}),parenR:new g(")"),comma:new g(",",v),semi:new g(";",v),colon:new g(":",v),dot:new g("."),question:new g("?",v),arrow:new g("=>",v),template:new g("template"),invalidTemplate:new g("invalidTemplate"),ellipsis:new g("...",v),backQuote:new g("`",x),dollarBraceL:new g("${",{beforeExpr:!0,startsExpr:!0}),eq:new g("=",{beforeExpr:!0,isAssign:!0}),assign:new g("_=",{beforeExpr:!0,isAssign:!0}),incDec:new g("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new g("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new g("**",{beforeExpr:!0}),_break:w("break"),_case:w("case",v),_catch:w("catch"),_continue:w("continue"),_debugger:w("debugger"),_default:w("default",v),_do:w("do",{isLoop:!0,beforeExpr:!0}),_else:w("else",v),_finally:w("finally"),_for:w("for",{isLoop:!0}),_function:w("function",x),_if:w("if"),_return:w("return",v),_switch:w("switch"),_throw:w("throw",v),_try:w("try"),_var:w("var"),_const:w("const"),_while:w("while",{isLoop:!0}),_with:w("with"),_new:w("new",{beforeExpr:!0,startsExpr:!0}),_this:w("this",x),_super:w("super",x),_class:w("class",x),_extends:w("extends",v),_export:w("export"),_import:w("import",x),_null:w("null",x),_true:w("true",x),_false:w("false",x),_in:w("in",{beforeExpr:!0,binop:7}),_instanceof:w("instanceof",{beforeExpr:!0,binop:7}),_typeof:w("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:w("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:w("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},_=/\r\n?|\n|\u2028|\u2029/,E=new RegExp(_.source,"g");function C(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var T=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,M=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,A=Object.prototype,k=A.hasOwnProperty,P=A.toString;function L(e,t){return k.call(e,t)}var D=Array.isArray||function(e){return"[object Array]"===P.call(e)};function N(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var R=function(e,t){this.line=e,this.column=t};R.prototype.offset=function(e){return new R(this.line,this.column+e)};var I=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function O(e,t){for(var n=1,r=0;;){E.lastIndex=r;var i=E.exec(e);if(!(i&&i.index<t))return new R(n,t-r);++n,r=i.index+i[0].length}}var F={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(e,t){return 2|(e?4:0)|(t?8:0)}var U=function(e,t,n){this.options=e=function(e){var t={};for(var n in F)t[n]=e&&L(e,n)?e[n]:F[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),D(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return D(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new I(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}(e),this.sourceFile=e.sourceFile,this.keywords=N(s[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var i="";if(!0!==e.allowReserved){for(var a=e.ecmaVersion;!(i=r[a]);a--);"module"===e.sourceType&&(i+=" await")}this.reservedWords=N(i);var o=(i?i+" ":"")+r.strict;this.reservedWordsStrict=N(o),this.reservedWordsStrictBind=N(o+" "+r.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(_).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=S.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},V={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};U.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},V.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},V.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},V.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},V.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},V.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},V.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},U.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},U.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},U.parse=function(e,t){return new this(t,e).parse()},U.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},U.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(U.prototype,V);var j=U.prototype,z=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function H(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}j.strictDirective=function(e){for(;;){M.lastIndex=e,e+=M.exec(this.input)[0].length;var t=z.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,M.lastIndex=e,e+=M.exec(this.input)[0].length,";"===this.input[e]&&e++}},j.eat=function(e){return this.type===e&&(this.next(),!0)},j.isContextual=function(e){return this.type===S.name&&this.value===e&&!this.containsEsc},j.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},j.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},j.canInsertSemicolon=function(){return this.type===S.eof||this.type===S.braceR||_.test(this.input.slice(this.lastTokEnd,this.start))},j.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},j.semicolon=function(){this.eat(S.semi)||this.insertSemicolon()||this.unexpected()},j.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},j.expect=function(e){this.eat(e)||this.unexpected()},j.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},j.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},j.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},j.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},j.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var W=U.prototype;W.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==S.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var G={kind:"loop"},X={kind:"switch"};W.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;M.lastIndex=this.pos;var t=M.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(f(r,!0)){for(var i=n+1;m(this.input.charCodeAt(i),!0);)++i;var s=this.input.slice(n,i);if(!a.test(s))return!0}return!1},W.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;M.lastIndex=this.pos;var e=M.exec(this.input),t=this.pos+e[0].length;return!(_.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&m(this.input.charAt(t+8)))},W.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=S._var,r="let"),i){case S._break:case S._continue:return this.parseBreakContinueStatement(s,i.keyword);case S._debugger:return this.parseDebuggerStatement(s);case S._do:return this.parseDoStatement(s);case S._for:return this.parseForStatement(s);case S._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case S._class:return e&&this.unexpected(),this.parseClass(s,!0);case S._if:return this.parseIfStatement(s);case S._return:return this.parseReturnStatement(s);case S._switch:return this.parseSwitchStatement(s);case S._throw:return this.parseThrowStatement(s);case S._try:return this.parseTryStatement(s);case S._const:case S._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case S._while:return this.parseWhileStatement(s);case S._with:return this.parseWithStatement(s);case S.braceL:return this.parseBlock(!0,s);case S.semi:return this.parseEmptyStatement(s);case S._export:case S._import:if(this.options.ecmaVersion>10&&i===S._import){M.lastIndex=this.pos;var a=M.exec(this.input),o=this.pos+a[0].length;if(40===this.input.charCodeAt(o))return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===S._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var l=this.value,c=this.parseExpression();return i===S.name&&"Identifier"===c.type&&this.eat(S.colon)?this.parseLabeledStatement(s,l,c,e):this.parseExpressionStatement(s,c)}},W.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(S.semi)||this.insertSemicolon()?e.label=null:this.type!==S.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},W.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},W.parseDoStatement=function(e){return this.next(),this.labels.push(G),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(S._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(S.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},W.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(G),this.enterScope(0),this.expect(S.parenL),this.type===S.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===S._var||this.type===S._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===S._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=new H,a=this.parseExpression(!0,s);return this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===S._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},W.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,q|(n?0:J),!1,t)},W.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(S._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},W.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(S.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},W.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(S.braceL),this.labels.push(X),this.enterScope(0);for(var n=!1;this.type!==S.braceR;)if(this.type===S._case||this.type===S._default){var r=this.type===S._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(S.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},W.parseThrowStatement=function(e){return this.next(),_.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var K=[];W.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===S._catch){var t=this.startNode();if(this.next(),this.eat(S.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(S.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(S._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},W.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},W.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(G),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},W.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},W.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},W.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===S._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},W.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},W.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(S.braceL),e&&this.enterScope(0);!this.eat(S.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},W.parseFor=function(e,t){return e.init=t,this.expect(S.semi),e.test=this.type===S.semi?null:this.parseExpression(),this.expect(S.semi),e.update=this.type===S.parenR?null:this.parseExpression(),this.expect(S.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},W.parseForIn=function(e,t){var n=this.type===S._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(S.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},W.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(S.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===S._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===S._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(S.comma))break}return e},W.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var q=1,J=2;W.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===S.star&&t&J&&this.unexpected(),e.generator=this.eat(S.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&q&&(e.id=4&t&&this.type!==S.name?null:this.parseIdent(),!e.id||t&J||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(B(e.async,e.generator)),t&q||(e.id=this.type===S.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,t&q?"FunctionDeclaration":"FunctionExpression")},W.parseFunctionParams=function(e){this.expect(S.parenL),e.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},W.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(S.braceL);!this.eat(S.braceR);){var s=this.parseClassElement(null!==e.superClass);s&&(r.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(i&&this.raise(s.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},W.parseClassElement=function(e){var t=this;if(this.eat(S.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,s=t.startLoc;return!(!t.eatContextual(e)||(t.type===S.parenL||r&&t.canInsertSemicolon())&&(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,s),n.key.name=e,t.finishNode(n.key,"Identifier"),1))};n.kind="method",n.static=r("static");var i=this.eat(S.star),s=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(S.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var a=n.key,o=!1;return n.computed||n.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?n.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),i&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,s,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},W.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},W.parseClassId=function(e,t){this.type===S.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},W.parseClassSuper=function(e){e.superClass=this.eat(S._extends)?this.parseExprSubscripts():null},W.parseExport=function(e,t){if(this.next(),this.eat(S.star))return this.expectContextual("from"),this.type!==S.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(S._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===S._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|q,!1,n)}else if(this.type===S._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==S.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},W.checkExport=function(e,t,n){e&&(L(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},W.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},W.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},W.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},W.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(S.braceL);!this.eat(S.braceR);){if(n)n=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},W.parseImport=function(e){return this.next(),this.type===S.string?(e.specifiers=K,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===S.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},W.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===S.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(S.comma))return e}if(this.type===S.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(S.braceL);!this.eat(S.braceR);){if(t)t=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},W.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},W.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var Y=U.prototype;Y.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},Y.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},Y.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Y.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==S.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Y.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case S.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(S.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case S.braceL:return this.parseObj(!0)}return this.parseIdent()},Y.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(S.comma),t&&this.type===S.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===S.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},Y.parseBindingListItem=function(e){return e},Y.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(S.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Y.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(L(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLVal(s,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var $=U.prototype;$.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n&&n.doubleProto<0?n.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[s]=!0}}},$.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===S.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(S.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},$.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new H,r=!0);var o=this.start,l=this.startLoc;this.type!==S.parenL&&this.type!==S.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,u.left=this.type===S.eq?this.toAssignable(c,!1,t):c,r||H.call(t),t.shorthandAssign=-1,this.checkLVal(c),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),a>-1&&(t.shorthandAssign=a),c},$.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(S.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(S.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},$.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},$.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==S._in)&&s>r){var a=this.type===S.logicalOR||this.type===S.logicalAND,o=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1),l,c,s,i),h=this.buildBinary(t,n,e,u,o,a);return this.parseExprOp(h,t,n,r,i)}return e},$.buildBinary=function(e,t,n,r,i,s){var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},$.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===S.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(S.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},$.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return r;var s=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},$.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var s=this.parseSubscript(e,t,n,r,i);if(s===e||"ArrowFunctionExpression"===s.type)return s;e=s}},$.parseSubscript=function(e,t,n,r,i){var s=this.eat(S.bracketL);if(s||this.eat(S.dot)){var a=this.startNodeAt(t,n);a.object=e,a.property=s?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),a.computed=!!s,s&&this.expect(S.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(S.parenL)){var o=new H,l=this.yieldPos,c=this.awaitPos,u=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(S.parenR,this.options.ecmaVersion>=8&&"Import"!==e.type,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=c,this.awaitIdentPos=u,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=u||this.awaitIdentPos;var p=this.startNodeAt(t,n);if(p.callee=e,p.arguments=h,"Import"===p.callee.type){1!==p.arguments.length&&this.raise(p.start,"import() requires exactly one argument");var d=p.arguments[0];d&&"SpreadElement"===d.type&&this.raise(d.start,"... is not allowed in import()")}e=this.finishNode(p,"CallExpression")}else if(this.type===S.backQuote){var f=this.startNodeAt(t,n);f.tag=e,f.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(f,"TaggedTemplateExpression")}return e},$.parseExprAtom=function(e){this.type===S.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case S._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==S.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==S.dot&&this.type!==S.bracketL&&this.type!==S.parenL&&this.unexpected(),this.finishNode(t,"Super");case S._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case S.name:var r=this.start,i=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(S._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(S.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===S.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(S.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[a],!0)}return a;case S.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case S.num:case S.string:return this.parseLiteral(this.value);case S._null:case S._true:case S._false:return(t=this.startNode()).value=this.type===S._null?null:this.type===S._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case S.parenL:var l=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),c;case S.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(S.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case S.braceL:return this.parseObj(!1,e);case S._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case S._class:return this.parseClass(this.startNode(),!1);case S._new:return this.parseNew();case S.backQuote:return this.parseTemplate();case S._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},$.parseDynamicImport=function(){var e=this.startNode();return this.next(),this.type!==S.parenL&&this.unexpected(),this.finishNode(e,"Import")},$.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1)),this.next(),this.finishNode(t,"Literal")},$.parseParenExpression=function(){this.expect(S.parenL);var e=this.parseExpression();return this.expect(S.parenR),e},$.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,l=[],c=!0,u=!1,h=new H,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==S.parenR;){if(c?c=!1:this.expect(S.comma),i&&this.afterTrailingComma(S.parenR,!0)){u=!0;break}if(this.type===S.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(S.parenR),e&&!this.canInsertSemicolon()&&this.eat(S.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(n,r,l);l.length&&!u||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(a,o)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},$.parseParenItem=function(e){return e},$.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var Z=[];$.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(S.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),this.options.ecmaVersion>10&&"Import"===e.callee.type&&this.raise(e.callee.start,"Cannot use new with import(...)"),this.eat(S.parenL)?e.arguments=this.parseExprList(S.parenR,this.options.ecmaVersion>=8&&"Import"!==e.callee.type,!1):e.arguments=Z,this.finishNode(e,"NewExpression")},$.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===S.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===S.backQuote,this.finishNode(n,"TemplateElement")},$.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===S.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(S.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(S.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},$.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===S.name||this.type===S.num||this.type===S.string||this.type===S.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===S.star)&&!_.test(this.input.slice(this.lastTokEnd,this.start))},$.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(S.braceR);){if(r)r=!1;else if(this.expect(S.comma),this.afterTrailingComma(S.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},$.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(S.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===S.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===S.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===S.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(S.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(S.star),this.parsePropertyName(a,t)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},$.parsePropertyValue=function(e,t,n,r,i,s,a,o){if((n||r)&&this.type===S.colon&&this.unexpected(),this.eat(S.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===S.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===S.comma||this.type===S.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===S.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},$.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(S.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(S.bracketR),e.key;e.computed=!1}return e.key=this.type===S.num||this.type===S.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},$.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},$.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|B(t,r.generator)|(n?128:0)),this.expect(S.parenL),r.params=this.parseBindingList(S.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},$.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|B(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},$.parseFunctionBody=function(e,t,n){var r=t&&this.type!==S.braceL,i=this.strict,s=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!i&&!s&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},$.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},$.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLVal(s,1,t?null:n)}},$.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(S.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===S.comma?a=null:this.type===S.ellipsis?(a=this.parseSpread(r),r&&this.type===S.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},$.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},$.parseIdent=function(e,t){var n=this.startNode();return this.type===S.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},$.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===S.semi||this.canInsertSemicolon()||this.type!==S.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(S.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},$.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var Q=U.prototype;Q.raise=function(e,t){var n=O(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Q.raiseRecoverable=Q.raise,Q.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var ee=U.prototype,te=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};ee.enterScope=function(e){this.scopeStack.push(new te(e))},ee.exitScope=function(){this.scopeStack.pop()},ee.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},ee.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t)this.currentScope().lexical.push(e);else if(3===t){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],3&o.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},ee.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},ee.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ee.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags)return t}},ee.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags&&!(16&t.flags))return t}};var ne=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new I(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},re=U.prototype;function ie(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}re.startNode=function(){return new ne(this,this.start,this.startLoc)},re.startNodeAt=function(e,t){return new ne(this,e,t)},re.finishNode=function(e,t){return ie.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},re.finishNodeAt=function(e,t,n,r){return ie.call(this,e,t,n,r)};var se=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},ae={b_stat:new se("{",!1),b_expr:new se("{",!0),b_tmpl:new se("${",!1),p_stat:new se("(",!1),p_expr:new se("(",!0),q_tmpl:new se("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new se("function",!1),f_expr:new se("function",!0),f_expr_gen:new se("function",!0,!1,null,!0),f_gen:new se("function",!1,!1,null,!0)},oe=U.prototype;oe.initialContext=function(){return[ae.b_stat]},oe.braceIsBlock=function(e){var t=this.curContext();return t===ae.f_expr||t===ae.f_stat||(e!==S.colon||t!==ae.b_stat&&t!==ae.b_expr?e===S._return||e===S.name&&this.exprAllowed?_.test(this.input.slice(this.lastTokEnd,this.start)):e===S._else||e===S.semi||e===S.eof||e===S.parenR||e===S.arrow||(e===S.braceL?t===ae.b_stat:e!==S._var&&e!==S._const&&e!==S.name&&!this.exprAllowed):!t.isExpr)},oe.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},oe.updateContext=function(e){var t,n=this.type;n.keyword&&e===S.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},S.parenR.updateContext=S.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===ae.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},S.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ae.b_stat:ae.b_expr),this.exprAllowed=!0},S.dollarBraceL.updateContext=function(){this.context.push(ae.b_tmpl),this.exprAllowed=!0},S.parenL.updateContext=function(e){var t=e===S._if||e===S._for||e===S._with||e===S._while;this.context.push(t?ae.p_stat:ae.p_expr),this.exprAllowed=!0},S.incDec.updateContext=function(){},S._function.updateContext=S._class.updateContext=function(e){!e.beforeExpr||e===S.semi||e===S._else||e===S._return&&_.test(this.input.slice(this.lastTokEnd,this.start))||(e===S.colon||e===S.braceL)&&this.curContext()===ae.b_stat?this.context.push(ae.f_stat):this.context.push(ae.f_expr),this.exprAllowed=!1},S.backQuote.updateContext=function(){this.curContext()===ae.q_tmpl?this.context.pop():this.context.push(ae.q_tmpl),this.exprAllowed=!1},S.star.updateContext=function(e){if(e===S._function){var t=this.context.length-1;this.context[t]===ae.f_expr?this.context[t]=ae.f_expr_gen:this.context[t]=ae.f_gen}this.exprAllowed=!0},S.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==S.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var le="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ce=le+" Extended_Pictographic",ue={9:le,10:ce,11:ce},he="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",pe="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",de=pe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",fe={9:pe,10:de,11:de+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},me={};function ge(e){var t=me[e]={binary:N(ue[e]+" "+he),nonBinary:{General_Category:N(he),Script:N(fe[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}ge(9),ge(10),ge(11);var ye=U.prototype,ve=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=me[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function xe(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function be(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function we(e){return e>=65&&e<=90||e>=97&&e<=122}function Se(e){return we(e)||95===e}function _e(e){return Se(e)||Ee(e)}function Ee(e){return e>=48&&e<=57}function Ce(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Te(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Me(e){return e>=48&&e<=55}ve.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ve.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},ve.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);if(!this.switchU||r<=55295||r>=57344||e+1>=n)return r;var i=t.charCodeAt(e+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},ve.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r,i=t.charCodeAt(e);return!this.switchU||i<=55295||i>=57344||e+1>=n||(r=t.charCodeAt(e+1))<56320||r>57343?e+1:e+2},ve.prototype.current=function(){return this.at(this.pos)},ve.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ve.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ve.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},ye.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},ye.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},ye.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},ye.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},ye.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},ye.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},ye.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},ye.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},ye.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},ye.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},ye.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},ye.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},ye.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},ye.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},ye.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},ye.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},ye.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!be(t)&&(e.lastIntValue=t,e.advance(),!0)},ye.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!be(n);)e.advance();return e.pos!==t},ye.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},ye.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},ye.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},ye.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=xe(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=xe(e.lastIntValue);return!0}return!1},ye.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return f(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ye.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return m(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ye.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},ye.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},ye.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},ye.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},ye.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},ye.regexp_eatZero=function(e){return 48===e.current()&&!Ee(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},ye.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},ye.regexp_eatControlLetter=function(e){var t=e.current();return!!we(t)&&(e.lastIntValue=t%32,e.advance(),!0)},ye.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(s>=56320&&s<=57343)return e.lastIntValue=1024*(r-55296)+(s-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(t=e.lastIntValue)>=0&&t<=1114111)return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},ye.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},ye.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},ye.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},ye.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},ye.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){L(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},ye.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},ye.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Se(t=e.current());)e.lastStringValue+=xe(t),e.advance();return""!==e.lastStringValue},ye.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";_e(t=e.current());)e.lastStringValue+=xe(t),e.advance();return""!==e.lastStringValue},ye.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},ye.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},ye.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},ye.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Me(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},ye.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},ye.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Ee(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},ye.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},ye.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ee(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},ye.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ce(n=e.current());)e.lastIntValue=16*e.lastIntValue+Te(n),e.advance();return e.pos!==t},ye.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},ye.regexp_eatOctalDigit=function(e){var t=e.current();return Me(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},ye.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Ce(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Te(i),e.advance()}return!0};var Ae=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new I(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},ke=U.prototype;function Pe(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}ke.next=function(){this.options.onToken&&this.options.onToken(new Ae(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ke.getToken=function(){return this.next(),new Ae(this)},"undefined"!=typeof Symbol&&(ke[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===S.eof,value:t}}}}),ke.curContext=function(){return this.context[this.context.length-1]},ke.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(S.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},ke.readToken=function(e){return f(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},ke.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},ke.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(E.lastIndex=n;(e=E.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},ke.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!C(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},ke.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&T.test(String.fromCharCode(e))))break e;++this.pos}}},ke.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},ke.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(S.ellipsis)):(++this.pos,this.finishToken(S.dot))},ke.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(S.assign,2):this.finishOp(S.slash,1)},ke.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?S.star:S.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=S.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(S.assign,n+1):this.finishOp(r,n)},ke.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?S.logicalOR:S.logicalAND,2):61===t?this.finishOp(S.assign,2):this.finishOp(124===e?S.bitwiseOR:S.bitwiseAND,1)},ke.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(S.assign,2):this.finishOp(S.bitwiseXOR,1)},ke.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!_.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(S.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(S.assign,2):this.finishOp(S.plusMin,1)},ke.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(S.assign,n+1):this.finishOp(S.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(S.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ke.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(S.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(S.arrow)):this.finishOp(61===e?S.eq:S.prefix,1)},ke.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(S.parenL);case 41:return++this.pos,this.finishToken(S.parenR);case 59:return++this.pos,this.finishToken(S.semi);case 44:return++this.pos,this.finishToken(S.comma);case 91:return++this.pos,this.finishToken(S.bracketL);case 93:return++this.pos,this.finishToken(S.bracketR);case 123:return++this.pos,this.finishToken(S.braceL);case 125:return++this.pos,this.finishToken(S.braceR);case 58:return++this.pos,this.finishToken(S.colon);case 63:return++this.pos,this.finishToken(S.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(S.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(S.prefix,1)}this.raise(this.pos,"Unexpected character '"+Pe(e)+"'")},ke.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},ke.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(_.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new ve(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(e){}return this.finishToken(S.regexp,{pattern:i,flags:a,value:l})},ke.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;i<s;++i){var a,o=this.input.charCodeAt(this.pos);if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=e)break;++this.pos,r=r*e+a}return this.pos===n||null!=t&&this.pos-n!==t?null:r},ke.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!=typeof BigInt?BigInt(this.input.slice(t,this.pos)):null,++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,n)},ke.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number"),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(t,this.pos),s="undefined"!=typeof BigInt?BigInt(i):null;return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(S.num,s)}46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a=this.input.slice(t,this.pos),o=n?parseInt(a,8):parseFloat(a);return this.finishToken(S.num,o)},ke.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},ke.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(C(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(S.string,t)};var Le={};ke.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Le)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ke.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Le;this.raise(e,t)},ke.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==S.template&&this.type!==S.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(S.template,e)):36===n?(this.pos+=2,this.finishToken(S.dollarBraceL)):(++this.pos,this.finishToken(S.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(C(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},ke.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(S.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ke.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Pe(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),"0"===n&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-n.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return C(t)?"":String.fromCharCode(t)}},ke.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},ke.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(m(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?f:m)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Pe(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},ke.readWord=function(){var e=this.readWord1(),t=S.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=b[e]),this.finishToken(t,e)};var De="6.4.2";function Ne(e,t){return U.parse(e,t)}function Re(e,t,n){return U.parseExpressionAt(e,t,n)}function Ie(e,t){return U.tokenizer(e,t)}U.acorn={Parser:U,version:De,defaultOptions:F,Position:R,SourceLocation:I,getLineInfo:O,Node:ne,TokenType:g,tokTypes:S,keywordTypes:b,TokContext:se,tokContexts:ae,isIdentifierChar:m,isIdentifierStart:f,Token:Ae,isNewLine:C,lineBreak:_,lineBreakG:E,nonASCIIwhitespace:T}},9477:function(e,t,n){"use strict";n.d(t,{$V:function(){return Au},A5E:function(){return Vn},BVQ:function(){return el},CP7:function(){return ga},D1R:function(){return R},DvJ:function(){return br},EB7:function(){return Lo},EJi:function(){return ec},F5T:function(){return Pn},FE5:function(){return Kl},FIo:function(){return Zl},FM8:function(){return Ve},FT0:function(){return ac},FvO:function(){return Du},GQ:function(){return Zu},GUF:function(){return ye},Gql:function(){return au},H$k:function(){return Gl},Hw6:function(){return st},Hyl:function(){return Ro},IEO:function(){return Qa},IKL:function(){return nc},ILR:function(){return J},Ilk:function(){return In},JUT:function(){return pt},KI_:function(){return ge},Kgo:function(){return sl},Kj0:function(){return vr},Ltg:function(){return ct},M8C:function(){return Ue},Mig:function(){return Zc},N$j:function(){return Za},NMF:function(){return ie},O7d:function(){return Bl},OdW:function(){return no},OoA:function(){return A},Ox3:function(){return $c},PMe:function(){return Wc},Pa4:function(){return ft},QRU:function(){return uu},Qpg:function(){return zu},ROQ:function(){return No},RSm:function(){return rc},Rki:function(){return Yu},SPe:function(){return ho},SUY:function(){return hu},Syv:function(){return re},TUj:function(){return Pu},TUv:function(){return $a},T_1:function(){return Qu},T_f:function(){return Qc},TlE:function(){return Hn},Tme:function(){return gn},Tn7:function(){return $l},TyD:function(){return k},USm:function(){return en},UY4:function(){return Eo},UZH:function(){return r},UlW:function(){return ue},VLJ:function(){return Hu},Vkp:function(){return je},VzW:function(){return B},WMw:function(){return u},WXh:function(){return ql},Wid:function(){return Ql},Wl3:function(){return o},WwZ:function(){return ce},Xcj:function(){return _u},XvJ:function(){return Xl},YBo:function(){return ic},YLQ:function(){return P},YT8:function(){return jo},ZAu:function(){return la},Z_g:function(){return Do},Zp0:function(){return ru},ZzF:function(){return yt},_12:function(){return jr},_AM:function(){return Y},_C8:function(){return dc},_Li:function(){return l},_YX:function(){return Ou},_fP:function(){return dt},_iA:function(){return i},a$l:function(){return Xn},aCh:function(){return me},aH4:function(){return L},aLr:function(){return It},aNw:function(){return Pc},anP:function(){return ai},av9:function(){return G},b_z:function(){return rl},blk:function(){return _o},bnF:function(){return ul},bsb:function(){return ne},cBI:function(){return Ku},cJO:function(){return Vl},cLu:function(){return U},cPb:function(){return Mr},cek:function(){return Jc},dSO:function(){return _},dUE:function(){return bc},dpR:function(){return Oc},eaV:function(){return $},ehD:function(){return c},ejS:function(){return So},ekQ:function(){return ee},fHI:function(){return nl},fto:function(){return Z},hEm:function(){return W},hH6:function(){return Nc},iDF:function(){return Il},iKG:function(){return Zr},iLg:function(){return Sc},iMs:function(){return Cu},iUV:function(){return bu},jyi:function(){return Fa},jyz:function(){return Cr},kB5:function(){return Sa},kaV:function(){return sc},l0P:function(){return Q},lLk:function(){return Ac},lRF:function(){return ta},m7l:function(){return Cc},mSO:function(){return fe},nls:function(){return po},o8S:function(){return zl},oa8:function(){return Hl},p7y:function(){return Qo},pBf:function(){return Ce},pQR:function(){return jl},ptH:function(){return te},qlB:function(){return Wn},qyh:function(){return N},rBU:function(){return Hr},rDY:function(){return Er},rpg:function(){return T},s4_:function(){return su},tEQ:function(){return kc},u9r:function(){return er},uL9:function(){return m},uWy:function(){return M},vBJ:function(){return Fn},vmT:function(){return Bc},vpT:function(){return ba},wem:function(){return D},wk1:function(){return j},woe:function(){return ko},wuA:function(){return X},x12:function(){return xo},xEZ:function(){return lt},xG9:function(){return Bu},xWb:function(){return Eu},xeV:function(){return _a},xo$:function(){return Wl},xoR:function(){return tc},xsS:function(){return xa},y$t:function(){return Zo},yC1:function(){return Ec},yGw:function(){return Wt},ybr:function(){return va},yo9:function(){return ya},ywz:function(){return I},yxD:function(){return Ic},z$h:function(){return he},z81:function(){return de},zHn:function(){return Ht},zf8:function(){return tl}});const r="153",i=1,s=2,a=3,o=0,l=1,c=2,u=2,h=100,p=0,d=1,f=2,m=0,g=1,y=2,v=3,x=4,b=5,w=301,S=302,_=303,E=304,C=306,T=1e3,M=1001,A=1002,k=1003,P=1004,L=1005,D=1006,N=1007,R=1008,I=1009,O=1012,F=1014,B=1015,U=1016,V=1020,j=1023,z=1026,H=1027,W=1028,G=1030,X=33776,K=33777,q=33778,J=33779,Y=35840,$=35842,Z=36196,Q=37492,ee=37496,te=37808,ne=36492,re=2300,ie=2301,se=2302,ae=2400,oe=2401,le=2402,ce=0,ue=1,he=2,pe=3001,de=3200,fe=3201,me="",ge="srgb",ye="srgb-linear",ve="display-p3",xe=7680,be=35044,we="300 es",Se=1035,_e=2e3,Ee=2001;class Ce{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Te=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Me=1234567;const Ae=Math.PI/180,ke=180/Math.PI;function Pe(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Te[255&e]+Te[e>>8&255]+Te[e>>16&255]+Te[e>>24&255]+"-"+Te[255&t]+Te[t>>8&255]+"-"+Te[t>>16&15|64]+Te[t>>24&255]+"-"+Te[63&n|128]+Te[n>>8&255]+"-"+Te[n>>16&255]+Te[n>>24&255]+Te[255&r]+Te[r>>8&255]+Te[r>>16&255]+Te[r>>24&255]).toLowerCase()}function Le(e,t,n){return Math.max(t,Math.min(n,e))}function De(e,t){return(e%t+t)%t}function Ne(e,t,n){return(1-n)*e+n*t}function Re(e){return 0==(e&e-1)&&0!==e}function Ie(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Oe(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Fe(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Be(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Ue={DEG2RAD:Ae,RAD2DEG:ke,generateUUID:Pe,clamp:Le,euclideanModulo:De,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Ne,damp:function(e,t,n,r){return Ne(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(De(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Me=e);let t=Me+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Ae},radToDeg:function(e){return e*ke},isPowerOfTwo:Re,ceilPowerOfTwo:Ie,floorPowerOfTwo:Oe,setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((t+r)/2),u=a((t+r)/2),h=s((t-r)/2),p=a((t-r)/2),d=s((r-t)/2),f=a((r-t)/2);switch(i){case"XYX":e.set(o*u,l*h,l*p,o*c);break;case"YZY":e.set(l*p,o*u,l*h,o*c);break;case"ZXZ":e.set(l*h,l*p,o*u,o*c);break;case"XZX":e.set(o*u,l*f,l*d,o*c);break;case"YXY":e.set(l*d,o*u,l*f,o*c);break;case"ZYZ":e.set(l*f,l*d,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Be,denormalize:Fe};class Ve{constructor(e=0,t=0){Ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Le(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class je{constructor(e,t,n,r,i,s,a,o,l){je.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,s,a,o,l)}set(e,t,n,r,i,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],p=n[5],d=n[8],f=r[0],m=r[3],g=r[6],y=r[1],v=r[4],x=r[7],b=r[2],w=r[5],S=r[8];return i[0]=s*f+a*y+o*b,i[3]=s*m+a*v+o*w,i[6]=s*g+a*x+o*S,i[1]=l*f+c*y+u*b,i[4]=l*m+c*v+u*w,i[7]=l*g+c*x+u*S,i[2]=h*f+p*y+d*b,i[5]=h*m+p*v+d*w,i[8]=h*g+p*x+d*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*i*c+n*a*o+r*i*l-r*s*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,h=a*o-c*i,p=l*i-s*o,d=t*u+n*h+r*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const f=1/d;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(a*n-r*s)*f,e[3]=h*f,e[4]=(c*t-r*o)*f,e[5]=(r*i-a*t)*f,e[6]=p*f,e[7]=(n*o-l*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,a){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-r*l,r*o,-r*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(ze.makeScale(e,t)),this}rotate(e){return this.premultiply(ze.makeRotation(-e)),this}translate(e,t){return this.premultiply(ze.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const ze=new je;function He(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const We={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ge(e,t){return new We[e](t)}function Xe(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}const Ke={};function qe(e){e in Ke||(Ke[e]=!0,console.warn(e))}function Je(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ye(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const $e=(new je).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Ze=(new je).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Qe={[ye]:e=>e,[ge]:e=>e.convertSRGBToLinear(),[ve]:function(e){return e.convertSRGBToLinear().applyMatrix3(Ze)}},et={[ye]:e=>e,[ge]:e=>e.convertLinearToSRGB(),[ve]:function(e){return e.applyMatrix3($e).convertLinearToSRGB()}},tt={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return ye},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=Qe[t],i=et[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${t}" to "${n}".`);return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let nt;class rt{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===nt&&(nt=Xe("canvas")),nt.width=e.width,nt.height=e.height;const n=nt.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=nt}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Xe("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Je(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Je(t[e]/255)):t[e]=Je(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let it=0;class st{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:it++}),this.uuid=Pe(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(at(r[t].image)):e.push(at(r[t]))}else e=at(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function at(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?rt.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ot=0;class lt extends Ce{constructor(e=lt.DEFAULT_IMAGE,t=lt.DEFAULT_MAPPING,n=M,r=M,i=D,s=R,a=j,o=I,l=lt.DEFAULT_ANISOTROPY,c=me){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ot++}),this.uuid=Pe(),this.name="",this.source=new st(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new je,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(qe("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===pe?ge:me),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case T:e.x=e.x-Math.floor(e.x);break;case M:e.x=e.x<0?0:1;break;case A:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case T:e.y=e.y-Math.floor(e.y);break;case M:e.y=e.y<0?0:1;break;case A:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return qe("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ge?pe:3e3}set encoding(e){qe("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===pe?ge:me}}lt.DEFAULT_IMAGE=null,lt.DEFAULT_MAPPING=300,lt.DEFAULT_ANISOTROPY=1;class ct{constructor(e=0,t=0,n=0,r=1){ct.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],h=o[1],p=o[5],d=o[9],f=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<s&&Math.abs(u-f)<s&&Math.abs(d-m)<s){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(d+m)<a&&Math.abs(l+p+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(p+1)/2,y=(g+1)/2,v=(c+h)/4,x=(u+f)/4,b=(d+m)/4;return e>o&&e>y?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=v/n,i=x/n):o>y?o<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=v/r,i=b/r):y<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=x/i,r=b/i),this.set(n,r,i,t),this}let y=Math.sqrt((m-d)*(m-d)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(y)<.001&&(y=1),this.x=(m-d)/y,this.y=(u-f)/y,this.z=(h-c)/y,this.w=Math.acos((l+p+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ut extends Ce{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ct(0,0,e,t),this.scissorTest=!1,this.viewport=new ct(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(qe("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===pe?ge:me),this.texture=new lt(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:D,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new st(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ht extends lt{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=k,this.minFilter=k,this.wrapR=M,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pt extends lt{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=k,this.minFilter=k,this.wrapR=M,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dt{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,a){let o=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[s+0],p=i[s+1],d=i[s+2],f=i[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=p,e[t+2]=d,void(e[t+3]=f);if(u!==f||o!==h||l!==p||c!==d){let e=1-a;const t=o*h+l*p+c*d+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,a=Math.sin(a*s)/i}const i=a*n;if(o=o*e+h*i,l=l*e+p*i,c=c*e+d*i,u=u*e+f*i,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,s){const a=n[r],o=n[r+1],l=n[r+2],c=n[r+3],u=i[s],h=i[s+1],p=i[s+2],d=i[s+3];return e[t]=a*d+c*u+o*p-l*h,e[t+1]=o*d+c*h+l*u-a*p,e[t+2]=l*d+c*p+a*h-o*u,e[t+3]=c*d-a*u-o*h-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=o(n/2),p=o(r/2),d=o(i/2);switch(s){case"XYZ":this._x=h*c*u+l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u-h*p*d;break;case"YXZ":this._x=h*c*u+l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u+h*p*d;break;case"ZXY":this._x=h*c*u-l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u-h*p*d;break;case"ZYX":this._x=h*c*u-l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u+h*p*d;break;case"YZX":this._x=h*c*u+l*p*d,this._y=l*p*u+h*c*d,this._z=l*c*d-h*p*u,this._w=l*c*u-h*p*d;break;case"XZY":this._x=h*c*u-l*p*d,this._y=l*p*u-h*c*d,this._z=l*c*d+h*p*u,this._w=l*c*u+h*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(i-l)*e,this._z=(s-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(s-r)/e,this._x=(i+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Le(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+r*l-i*o,this._y=r*c+s*o+i*a-n*l,this._z=i*c+s*l+n*o-r*a,this._w=s*c-n*a-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ft{constructor(e=0,t=0,n=0){ft.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(gt.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(gt.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*r-a*n,c=o*n+a*t-i*r,u=o*r+i*n-s*t,h=-i*t-s*n-a*r;return this.x=l*o+h*-i+c*-a-u*-s,this.y=c*o+h*-s+u*-i-l*-a,this.z=u*o+h*-a+l*-s-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return mt.copy(this).projectOnVector(e),this.sub(mt)}reflect(e){return this.sub(mt.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Le(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mt=new ft,gt=new dt;class yt{constructor(e=new ft(1/0,1/0,1/0),t=new ft(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(xt.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(xt.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=xt.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),bt.copy(e.boundingBox),bt.applyMatrix4(e.matrixWorld),this.union(bt);else{const n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)xt.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(xt)}else null===n.boundingBox&&n.computeBoundingBox(),bt.copy(n.boundingBox),bt.applyMatrix4(e.matrixWorld),this.union(bt)}const n=e.children;for(let e=0,r=n.length;e<r;e++)this.expandByObject(n[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xt),xt.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mt),At.subVectors(this.max,Mt),wt.subVectors(e.a,Mt),St.subVectors(e.b,Mt),_t.subVectors(e.c,Mt),Et.subVectors(St,wt),Ct.subVectors(_t,St),Tt.subVectors(wt,_t);let t=[0,-Et.z,Et.y,0,-Ct.z,Ct.y,0,-Tt.z,Tt.y,Et.z,0,-Et.x,Ct.z,0,-Ct.x,Tt.z,0,-Tt.x,-Et.y,Et.x,0,-Ct.y,Ct.x,0,-Tt.y,Tt.x,0];return!!Lt(t,wt,St,_t,At)&&(t=[1,0,0,0,1,0,0,0,1],!!Lt(t,wt,St,_t,At)&&(kt.crossVectors(Et,Ct),t=[kt.x,kt.y,kt.z],Lt(t,wt,St,_t,At)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xt).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(xt).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(vt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vt)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vt=[new ft,new ft,new ft,new ft,new ft,new ft,new ft,new ft],xt=new ft,bt=new yt,wt=new ft,St=new ft,_t=new ft,Et=new ft,Ct=new ft,Tt=new ft,Mt=new ft,At=new ft,kt=new ft,Pt=new ft;function Lt(e,t,n,r,i){for(let s=0,a=e.length-3;s<=a;s+=3){Pt.fromArray(e,s);const a=i.x*Math.abs(Pt.x)+i.y*Math.abs(Pt.y)+i.z*Math.abs(Pt.z),o=t.dot(Pt),l=n.dot(Pt),c=r.dot(Pt);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const Dt=new yt,Nt=new ft,Rt=new ft;class It{constructor(e=new ft,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Dt.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Nt.subVectors(e,this.center);const t=Nt.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Nt,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Rt.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Nt.copy(e.center).add(Rt)),this.expandByPoint(Nt.copy(e.center).sub(Rt))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ot=new ft,Ft=new ft,Bt=new ft,Ut=new ft,Vt=new ft,jt=new ft,zt=new ft;class Ht{constructor(e=new ft,t=new ft(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ot)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ot.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ot.copy(this.origin).addScaledVector(this.direction,t),Ot.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Ft.copy(e).add(t).multiplyScalar(.5),Bt.copy(t).sub(e).normalize(),Ut.copy(this.origin).sub(Ft);const i=.5*e.distanceTo(t),s=-this.direction.dot(Bt),a=Ut.dot(this.direction),o=-Ut.dot(Bt),l=Ut.lengthSq(),c=Math.abs(1-s*s);let u,h,p,d;if(c>0)if(u=s*o-a,h=s*a-o,d=i*c,u>=0)if(h>=-d)if(h<=d){const e=1/c;u*=e,h*=e,p=u*(u+s*h+2*a)+h*(s*u+h+2*o)+l}else h=i,u=Math.max(0,-(s*h+a)),p=-u*u+h*(h+2*o)+l;else h=-i,u=Math.max(0,-(s*h+a)),p=-u*u+h*(h+2*o)+l;else h<=-d?(u=Math.max(0,-(-s*i+a)),h=u>0?-i:Math.min(Math.max(-i,-o),i),p=-u*u+h*(h+2*o)+l):h<=d?(u=0,h=Math.min(Math.max(-i,-o),i),p=h*(h+2*o)+l):(u=Math.max(0,-(s*i+a)),h=u>0?i:Math.min(Math.max(-i,-o),i),p=-u*u+h*(h+2*o)+l);else h=s>0?-i:i,u=Math.max(0,-(s*h+a)),p=-u*u+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Ft).addScaledVector(Bt,h),p}intersectSphere(e,t){Ot.subVectors(e.center,this.origin);const n=Ot.dot(this.direction),r=Ot.dot(Ot)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),n>s||i>r?null:((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),u>=0?(a=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),n>o||a>r?null:((a>n||n!=n)&&(n=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Ot)}intersectTriangle(e,t,n,r,i){Vt.subVectors(t,e),jt.subVectors(n,e),zt.crossVectors(Vt,jt);let s,a=this.direction.dot(zt);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}Ut.subVectors(this.origin,e);const o=s*this.direction.dot(jt.crossVectors(Ut,jt));if(o<0)return null;const l=s*this.direction.dot(Vt.cross(Ut));if(l<0)return null;if(o+l>a)return null;const c=-s*Ut.dot(zt);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Wt{constructor(e,t,n,r,i,s,a,o,l,c,u,h,p,d,f,m){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,s,a,o,l,c,u,h,p,d,f,m)}set(e,t,n,r,i,s,a,o,l,c,u,h,p,d,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Wt).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Gt.setFromMatrixColumn(e,0).length(),i=1/Gt.setFromMatrixColumn(e,1).length(),s=1/Gt.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=s*c,n=s*u,r=a*c,i=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-s*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=s*c,t[9]=i-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*u,r=a*c,i=a*u;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=s*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Kt,e,qt)}lookAt(e,t,n){const r=this.elements;return $t.subVectors(e,t),0===$t.lengthSq()&&($t.z=1),$t.normalize(),Jt.crossVectors(n,$t),0===Jt.lengthSq()&&(1===Math.abs(n.z)?$t.x+=1e-4:$t.z+=1e-4,$t.normalize(),Jt.crossVectors(n,$t)),Jt.normalize(),Yt.crossVectors($t,Jt),r[0]=Jt.x,r[4]=Yt.x,r[8]=$t.x,r[1]=Jt.y,r[5]=Yt.y,r[9]=$t.y,r[2]=Jt.z,r[6]=Yt.z,r[10]=$t.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],x=n[11],b=n[15],w=r[0],S=r[4],_=r[8],E=r[12],C=r[1],T=r[5],M=r[9],A=r[13],k=r[2],P=r[6],L=r[10],D=r[14],N=r[3],R=r[7],I=r[11],O=r[15];return i[0]=s*w+a*C+o*k+l*N,i[4]=s*S+a*T+o*P+l*R,i[8]=s*_+a*M+o*L+l*I,i[12]=s*E+a*A+o*D+l*O,i[1]=c*w+u*C+h*k+p*N,i[5]=c*S+u*T+h*P+p*R,i[9]=c*_+u*M+h*L+p*I,i[13]=c*E+u*A+h*D+p*O,i[2]=d*w+f*C+m*k+g*N,i[6]=d*S+f*T+m*P+g*R,i[10]=d*_+f*M+m*L+g*I,i[14]=d*E+f*A+m*D+g*O,i[3]=y*w+v*C+x*k+b*N,i[7]=y*S+v*T+x*P+b*R,i[11]=y*_+v*M+x*L+b*I,i[15]=y*E+v*A+x*D+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],p=e[14];return e[3]*(+i*o*u-r*l*u-i*a*h+n*l*h+r*a*p-n*o*p)+e[7]*(+t*o*p-t*l*h+i*s*h-r*s*p+r*l*c-i*o*c)+e[11]*(+t*l*u-t*a*p-i*s*u+n*s*p+i*a*c-n*l*c)+e[15]*(-r*a*c-t*o*u+t*a*h+r*s*u-n*s*h+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],p=e[11],d=e[12],f=e[13],m=e[14],g=e[15],y=u*m*l-f*h*l+f*o*p-a*m*p-u*o*g+a*h*g,v=d*h*l-c*m*l-d*o*p+s*m*p+c*o*g-s*h*g,x=c*f*l-d*u*l+d*a*p-s*f*p-c*a*g+s*u*g,b=d*u*o-c*f*o-d*a*h+s*f*h+c*a*m-s*u*m,w=t*y+n*v+r*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/w;return e[0]=y*S,e[1]=(f*h*i-u*m*i-f*r*p+n*m*p+u*r*g-n*h*g)*S,e[2]=(a*m*i-f*o*i+f*r*l-n*m*l-a*r*g+n*o*g)*S,e[3]=(u*o*i-a*h*i-u*r*l+n*h*l+a*r*p-n*o*p)*S,e[4]=v*S,e[5]=(c*m*i-d*h*i+d*r*p-t*m*p-c*r*g+t*h*g)*S,e[6]=(d*o*i-s*m*i-d*r*l+t*m*l+s*r*g-t*o*g)*S,e[7]=(s*h*i-c*o*i+c*r*l-t*h*l-s*r*p+t*o*p)*S,e[8]=x*S,e[9]=(d*u*i-c*f*i-d*n*p+t*f*p+c*n*g-t*u*g)*S,e[10]=(s*f*i-d*a*i+d*n*l-t*f*l-s*n*g+t*a*g)*S,e[11]=(c*a*i-s*u*i-c*n*l+t*u*l+s*n*p-t*a*p)*S,e[12]=b*S,e[13]=(c*f*r-d*u*r+d*n*h-t*f*h-c*n*m+t*u*m)*S,e[14]=(d*a*r-s*f*r-d*n*o+t*f*o+s*n*m-t*a*m)*S,e[15]=(s*u*r-c*a*r+c*n*o-t*u*o-s*n*h+t*a*h)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,o=e.z,l=i*s,c=i*a;return this.set(l*s+n,l*a-r*o,l*o+r*a,0,l*a+r*o,c*a+n,c*o-r*s,0,l*o-r*a,c*o+r*s,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,a=t._z,o=t._w,l=i+i,c=s+s,u=a+a,h=i*l,p=i*c,d=i*u,f=s*c,m=s*u,g=a*u,y=o*l,v=o*c,x=o*u,b=n.x,w=n.y,S=n.z;return r[0]=(1-(f+g))*b,r[1]=(p+x)*b,r[2]=(d-v)*b,r[3]=0,r[4]=(p-x)*w,r[5]=(1-(h+g))*w,r[6]=(m+y)*w,r[7]=0,r[8]=(d+v)*S,r[9]=(m-y)*S,r[10]=(1-(h+f))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Gt.set(r[0],r[1],r[2]).length();const s=Gt.set(r[4],r[5],r[6]).length(),a=Gt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Xt.copy(this);const o=1/i,l=1/s,c=1/a;return Xt.elements[0]*=o,Xt.elements[1]*=o,Xt.elements[2]*=o,Xt.elements[4]*=l,Xt.elements[5]*=l,Xt.elements[6]*=l,Xt.elements[8]*=c,Xt.elements[9]*=c,Xt.elements[10]*=c,t.setFromRotationMatrix(Xt),n.x=i,n.y=s,n.z=a,this}makePerspective(e,t,n,r,i,s,a=2e3){const o=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),h=(n+r)/(n-r);let p,d;if(a===_e)p=-(s+i)/(s-i),d=-2*s*i/(s-i);else{if(a!==Ee)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);p=-s/(s-i),d=-s*i/(s-i)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=p,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,s,a=2e3){const o=this.elements,l=1/(t-e),c=1/(n-r),u=1/(s-i),h=(t+e)*l,p=(n+r)*c;let d,f;if(a===_e)d=(s+i)*u,f=-2*u;else{if(a!==Ee)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);d=i*u,f=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-p,o[2]=0,o[6]=0,o[10]=f,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Gt=new ft,Xt=new Wt,Kt=new ft(0,0,0),qt=new ft(1,1,1),Jt=new ft,Yt=new ft,$t=new ft,Zt=new Wt,Qt=new dt;class en{constructor(e=0,t=0,n=0,r=en.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],a=r[8],o=r[1],l=r[5],c=r[9],u=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(Le(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Le(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Le(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-Le(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Le(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-Le(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Zt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Zt,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Qt.setFromEuler(this),this.setFromQuaternion(Qt,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}en.DEFAULT_ORDER="XYZ";class tn{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let nn=0;const rn=new ft,sn=new dt,an=new Wt,on=new ft,ln=new ft,cn=new ft,un=new dt,hn=new ft(1,0,0),pn=new ft(0,1,0),dn=new ft(0,0,1),fn={type:"added"},mn={type:"removed"};class gn extends Ce{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nn++}),this.uuid=Pe(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gn.DEFAULT_UP.clone();const e=new ft,t=new en,n=new dt,r=new ft(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Wt},normalMatrix:{value:new je}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=gn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new tn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sn.setFromAxisAngle(e,t),this.quaternion.multiply(sn),this}rotateOnWorldAxis(e,t){return sn.setFromAxisAngle(e,t),this.quaternion.premultiply(sn),this}rotateX(e){return this.rotateOnAxis(hn,e)}rotateY(e){return this.rotateOnAxis(pn,e)}rotateZ(e){return this.rotateOnAxis(dn,e)}translateOnAxis(e,t){return rn.copy(e).applyQuaternion(this.quaternion),this.position.add(rn.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hn,e)}translateY(e){return this.translateOnAxis(pn,e)}translateZ(e){return this.translateOnAxis(dn,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(an.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?on.copy(e):on.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ln.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?an.lookAt(ln,on,this.up):an.lookAt(on,ln,this.up),this.quaternion.setFromRotationMatrix(an),r&&(an.extractRotation(r.matrixWorld),sn.setFromRotationMatrix(an),this.quaternion.premultiply(sn.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(fn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(mn)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(mn)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),an.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),an.multiply(e.parent.matrixWorld)),e.applyMatrix4(an),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ln,e,cn),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ln,un,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}gn.DEFAULT_UP=new ft(0,1,0),gn.DEFAULT_MATRIX_AUTO_UPDATE=!0,gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const yn=new ft,vn=new ft,xn=new ft,bn=new ft,wn=new ft,Sn=new ft,_n=new ft,En=new ft,Cn=new ft,Tn=new ft;let Mn=!1;class An{constructor(e=new ft,t=new ft,n=new ft){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),yn.subVectors(e,t),r.cross(yn);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){yn.subVectors(r,t),vn.subVectors(n,t),xn.subVectors(e,t);const s=yn.dot(yn),a=yn.dot(vn),o=yn.dot(xn),l=vn.dot(vn),c=vn.dot(xn),u=s*l-a*a;if(0===u)return i.set(-2,-1,-1);const h=1/u,p=(l*o-a*c)*h,d=(s*c-a*o)*h;return i.set(1-p-d,d,p)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,bn),bn.x>=0&&bn.y>=0&&bn.x+bn.y<=1}static getUV(e,t,n,r,i,s,a,o){return!1===Mn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Mn=!0),this.getInterpolation(e,t,n,r,i,s,a,o)}static getInterpolation(e,t,n,r,i,s,a,o){return this.getBarycoord(e,t,n,r,bn),o.setScalar(0),o.addScaledVector(i,bn.x),o.addScaledVector(s,bn.y),o.addScaledVector(a,bn.z),o}static isFrontFacing(e,t,n,r){return yn.subVectors(n,t),vn.subVectors(e,t),yn.cross(vn).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return yn.subVectors(this.c,this.b),vn.subVectors(this.a,this.b),.5*yn.cross(vn).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return An.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return An.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===Mn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Mn=!0),An.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return An.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return An.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return An.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,a;wn.subVectors(r,n),Sn.subVectors(i,n),En.subVectors(e,n);const o=wn.dot(En),l=Sn.dot(En);if(o<=0&&l<=0)return t.copy(n);Cn.subVectors(e,r);const c=wn.dot(Cn),u=Sn.dot(Cn);if(c>=0&&u<=c)return t.copy(r);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(wn,s);Tn.subVectors(e,i);const p=wn.dot(Tn),d=Sn.dot(Tn);if(d>=0&&p<=d)return t.copy(i);const f=p*l-o*d;if(f<=0&&l>=0&&d<=0)return a=l/(l-d),t.copy(n).addScaledVector(Sn,a);const m=c*d-p*u;if(m<=0&&u-c>=0&&p-d>=0)return _n.subVectors(i,r),a=(u-c)/(u-c+(p-d)),t.copy(r).addScaledVector(_n,a);const g=1/(m+f+h);return s=f*g,a=h*g,t.copy(n).addScaledVector(wn,s).addScaledVector(Sn,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let kn=0;class Pn extends Ce{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kn++}),this.uuid=Pe(),this.name="",this.type="Material",this.blending=1,this.side=o,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=h,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=xe,this.stencilZFail=xe,this.stencilZPass=xe,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==o&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const Ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Dn={h:0,s:0,l:0},Nn={h:0,s:0,l:0};function Rn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class In{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ge){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,tt.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=tt.workingColorSpace){return this.r=e,this.g=t,this.b=n,tt.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=tt.workingColorSpace){if(e=De(e,1),t=Le(t,0,1),n=Le(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Rn(i,r,e+1/3),this.g=Rn(i,r,e),this.b=Rn(i,r,e-1/3)}return tt.toWorkingColorSpace(this,r),this}setStyle(e,t=ge){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ge){const n=Ln[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Je(e.r),this.g=Je(e.g),this.b=Je(e.b),this}copyLinearToSRGB(e){return this.r=Ye(e.r),this.g=Ye(e.g),this.b=Ye(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ge){return tt.fromWorkingColorSpace(On.copy(this),e),65536*Math.round(Le(255*On.r,0,255))+256*Math.round(Le(255*On.g,0,255))+Math.round(Le(255*On.b,0,255))}getHexString(e=ge){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=tt.workingColorSpace){tt.fromWorkingColorSpace(On.copy(this),t);const n=On.r,r=On.g,i=On.b,s=Math.max(n,r,i),a=Math.min(n,r,i);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(r-i)/e+(r<i?6:0);break;case r:o=(i-n)/e+2;break;case i:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=tt.workingColorSpace){return tt.fromWorkingColorSpace(On.copy(this),t),e.r=On.r,e.g=On.g,e.b=On.b,e}getStyle(e=ge){tt.fromWorkingColorSpace(On.copy(this),e);const t=On.r,n=On.g,r=On.b;return e!==ge?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Dn),Dn.h+=e,Dn.s+=t,Dn.l+=n,this.setHSL(Dn.h,Dn.s,Dn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Dn),e.getHSL(Nn);const n=Ne(Dn.h,Nn.h,t),r=Ne(Dn.s,Nn.s,t),i=Ne(Dn.l,Nn.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const On=new In;In.NAMES=Ln;class Fn extends Pn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new In(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bn=Un();function Un(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,s[e]=t|n}for(let e=1024;e<2048;++e)s[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)a[e]=e<<23;a[31]=1199570944,a[32]=2147483648;for(let e=33;e<63;++e)a[e]=2147483648+(e-32<<23);a[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}const Vn={toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Le(e,-65504,65504),Bn.floatView[0]=e;const t=Bn.uint32View[0],n=t>>23&511;return Bn.baseTable[n]+((8388607&t)>>Bn.shiftTable[n])},fromHalfFloat:function(e){const t=e>>10;return Bn.uint32View[0]=Bn.mantissaTable[Bn.offsetTable[t]+(1023&e)]+Bn.exponentTable[t],Bn.floatView[0]}},jn=new ft,zn=new Ve;class Hn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=be,this.updateRange={offset:0,count:-1},this.gpuType=B,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)zn.fromBufferAttribute(this,t),zn.applyMatrix3(e),this.setXY(t,zn.x,zn.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix3(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)jn.fromBufferAttribute(this,t),jn.applyMatrix4(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)jn.fromBufferAttribute(this,t),jn.applyNormalMatrix(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)jn.fromBufferAttribute(this,t),jn.transformDirection(e),this.setXYZ(t,jn.x,jn.y,jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fe(t,this.array)),t}setX(e,t){return this.normalized&&(t=Be(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fe(t,this.array)),t}setY(e,t){return this.normalized&&(t=Be(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fe(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Be(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fe(t,this.array)),t}setW(e,t){return this.normalized&&(t=Be(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Be(t,this.array),n=Be(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Be(t,this.array),n=Be(n,this.array),r=Be(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Be(t,this.array),n=Be(n,this.array),r=Be(r,this.array),i=Be(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==be&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Wn extends Hn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Gn extends Hn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Xn extends Hn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Kn=0;const qn=new Wt,Jn=new gn,Yn=new ft,$n=new yt,Zn=new yt,Qn=new ft;class er extends Ce{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Kn++}),this.uuid=Pe(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(He(e)?Gn:Wn)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new je).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return qn.makeRotationFromQuaternion(e),this.applyMatrix4(qn),this}rotateX(e){return qn.makeRotationX(e),this.applyMatrix4(qn),this}rotateY(e){return qn.makeRotationY(e),this.applyMatrix4(qn),this}rotateZ(e){return qn.makeRotationZ(e),this.applyMatrix4(qn),this}translate(e,t,n){return qn.makeTranslation(e,t,n),this.applyMatrix4(qn),this}scale(e,t,n){return qn.makeScale(e,t,n),this.applyMatrix4(qn),this}lookAt(e){return Jn.lookAt(e),Jn.updateMatrix(),this.applyMatrix4(Jn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Yn).negate(),this.translate(Yn.x,Yn.y,Yn.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Xn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new yt);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ft(-1/0,-1/0,-1/0),new ft(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];$n.setFromBufferAttribute(n),this.morphTargetsRelative?(Qn.addVectors(this.boundingBox.min,$n.min),this.boundingBox.expandByPoint(Qn),Qn.addVectors(this.boundingBox.max,$n.max),this.boundingBox.expandByPoint(Qn)):(this.boundingBox.expandByPoint($n.min),this.boundingBox.expandByPoint($n.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new It);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ft,1/0);if(e){const n=this.boundingSphere.center;if($n.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Zn.setFromBufferAttribute(n),this.morphTargetsRelative?(Qn.addVectors($n.min,Zn.min),$n.expandByPoint(Qn),Qn.addVectors($n.max,Zn.max),$n.expandByPoint(Qn)):($n.expandByPoint(Zn.min),$n.expandByPoint(Zn.max))}$n.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Qn.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Qn));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],a=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)Qn.fromBufferAttribute(s,t),a&&(Yn.fromBufferAttribute(e,t),Qn.add(Yn)),r=Math.max(r,n.distanceToSquared(Qn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Hn(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new ft,c[e]=new ft;const u=new ft,h=new ft,p=new ft,d=new Ve,f=new Ve,m=new Ve,g=new ft,y=new ft;function v(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),p.fromArray(r,3*n),d.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(u),p.sub(u),f.sub(d),m.sub(d);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(p,-f.y).multiplyScalar(i),y.copy(p).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(y),c[t].add(y),c[n].add(y))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let e=0,t=x.length;e<t;++e){const t=x[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)v(n[e+0],n[e+1],n[e+2])}const b=new ft,w=new ft,S=new ft,_=new ft;function E(e){S.fromArray(i,3*e),_.copy(S);const t=l[e];b.copy(t),b.sub(S.multiplyScalar(S.dot(t))).normalize(),w.crossVectors(_,t);const n=w.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let e=0,t=x.length;e<t;++e){const t=x[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)E(n[e+0]),E(n[e+1]),E(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Hn(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new ft,i=new ft,s=new ft,a=new ft,o=new ft,l=new ft,c=new ft,u=new ft;if(e)for(let h=0,p=e.count;h<p;h+=3){const p=e.getX(h+0),d=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,p),i.fromBufferAttribute(t,d),s.fromBufferAttribute(t,f),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,p),o.fromBufferAttribute(n,d),l.fromBufferAttribute(n,f),a.add(c),o.add(c),l.add(c),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Qn.fromBufferAttribute(e,t),Qn.normalize(),e.setXYZ(t,Qn.x,Qn.y,Qn.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let a=0,o=0;for(let i=0,l=t.length;i<l;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)s[o++]=n[a++]}return new Hn(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new er,n=this.index.array,r=this.attributes;for(const i in r){const s=e(r[i],n);t.setAttribute(i,s)}const i=this.morphAttributes;for(const r in i){const s=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);s.push(r)}t.morphAttributes[r]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];s.push(r.toJSON(e.data))}s.length>0&&(r[t]=s,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const tr=new Wt,nr=new Ht,rr=new It,ir=new ft,sr=new ft,ar=new ft,or=new ft,lr=new ft,cr=new ft,ur=new Ve,hr=new Ve,pr=new Ve,dr=new ft,fr=new ft,mr=new ft,gr=new ft,yr=new ft;class vr extends gn{constructor(e=new er,t=new Fn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){cr.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],o=i[n];0!==r&&(lr.fromBufferAttribute(o,e),s?cr.addScaledVector(lr,r):cr.addScaledVector(lr.sub(t),r))}t.add(cr)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),rr.copy(n.boundingSphere),rr.applyMatrix4(i),nr.copy(e.ray).recast(e.near),!1===rr.containsPoint(nr.origin)){if(null===nr.intersectSphere(rr,ir))return;if(nr.origin.distanceToSquared(ir)>(e.far-e.near)**2)return}tr.copy(i).invert(),nr.copy(e.ray).applyMatrix4(tr),null!==n.boundingBox&&!1===nr.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,nr)}}_computeIntersections(e,t,n){let r;const i=this.geometry,s=this.material,a=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,h=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(s))for(let i=0,o=h.length;i<o;i++){const o=h[i],d=s[o.materialIndex];for(let i=Math.max(o.start,p.start),s=Math.min(a.count,Math.min(o.start+o.count,p.start+p.count));i<s;i+=3)r=xr(this,d,e,n,l,c,u,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}else for(let i=Math.max(0,p.start),o=Math.min(a.count,p.start+p.count);i<o;i+=3)r=xr(this,s,e,n,l,c,u,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r));else if(void 0!==o)if(Array.isArray(s))for(let i=0,a=h.length;i<a;i++){const a=h[i],d=s[a.materialIndex];for(let i=Math.max(a.start,p.start),s=Math.min(o.count,Math.min(a.start+a.count,p.start+p.count));i<s;i+=3)r=xr(this,d,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=a.materialIndex,t.push(r))}else for(let i=Math.max(0,p.start),a=Math.min(o.count,p.start+p.count);i<a;i+=3)r=xr(this,s,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}function xr(e,t,n,r,i,s,a,c,u,h){e.getVertexPosition(c,sr),e.getVertexPosition(u,ar),e.getVertexPosition(h,or);const p=function(e,t,n,r,i,s,a,c){let u;if(u=t.side===l?r.intersectTriangle(a,s,i,!0,c):r.intersectTriangle(i,s,a,t.side===o,c),null===u)return null;yr.copy(c),yr.applyMatrix4(e.matrixWorld);const h=n.ray.origin.distanceTo(yr);return h<n.near||h>n.far?null:{distance:h,point:yr.clone(),object:e}}(e,t,n,r,sr,ar,or,gr);if(p){i&&(ur.fromBufferAttribute(i,c),hr.fromBufferAttribute(i,u),pr.fromBufferAttribute(i,h),p.uv=An.getInterpolation(gr,sr,ar,or,ur,hr,pr,new Ve)),s&&(ur.fromBufferAttribute(s,c),hr.fromBufferAttribute(s,u),pr.fromBufferAttribute(s,h),p.uv1=An.getInterpolation(gr,sr,ar,or,ur,hr,pr,new Ve),p.uv2=p.uv1),a&&(dr.fromBufferAttribute(a,c),fr.fromBufferAttribute(a,u),mr.fromBufferAttribute(a,h),p.normal=An.getInterpolation(gr,sr,ar,or,dr,fr,mr,new ft),p.normal.dot(r.direction)>0&&p.normal.multiplyScalar(-1));const e={a:c,b:u,c:h,normal:new ft,materialIndex:0};An.getNormal(sr,ar,or,e.normal),p.face=e}return p}class br extends er{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const a=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const o=[],l=[],c=[],u=[];let h=0,p=0;function d(e,t,n,r,i,s,d,f,m,g,y){const v=s/m,x=d/g,b=s/2,w=d/2,S=f/2,_=m+1,E=g+1;let C=0,T=0;const M=new ft;for(let s=0;s<E;s++){const a=s*x-w;for(let o=0;o<_;o++){const h=o*v-b;M[e]=h*r,M[t]=a*i,M[n]=S,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=f>0?1:-1,c.push(M.x,M.y,M.z),u.push(o/m),u.push(1-s/g),C+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+_*e,r=h+t+_*(e+1),i=h+(t+1)+_*(e+1),s=h+(t+1)+_*e;o.push(n,r,s),o.push(r,i,s),T+=6}a.addGroup(p,T,y),p+=T,h+=C}d("z","y","x",-1,-1,n,t,e,s,i,0),d("z","y","x",1,-1,n,t,-e,s,i,1),d("x","z","y",1,1,e,n,t,r,s,2),d("x","z","y",1,-1,e,n,-t,r,s,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new Xn(l,3)),this.setAttribute("normal",new Xn(c,3)),this.setAttribute("uv",new Xn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new br(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function wr(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Sr(e){const t={};for(let n=0;n<e.length;n++){const r=wr(e[n]);for(const e in r)t[e]=r[e]}return t}function _r(e){return null===e.getRenderTarget()?e.outputColorSpace:ye}const Er={clone:wr,merge:Sr};class Cr extends Pn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wr(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Tr extends gn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=_e}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Mr extends Tr{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ke*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ae*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ke*Math.atan(Math.tan(.5*Ae*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ae*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/a,r*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ar=-90;class kr extends gn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new Mr(Ar,1,e,t);r.layers=this.layers,this.add(r);const i=new Mr(Ar,1,e,t);i.layers=this.layers,this.add(i);const s=new Mr(Ar,1,e,t);s.layers=this.layers,this.add(s);const a=new Mr(Ar,1,e,t);a.layers=this.layers,this.add(a);const o=new Mr(Ar,1,e,t);o.layers=this.layers,this.add(o);const l=new Mr(Ar,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,s,a,o]=t;for(const e of t)this.remove(e);if(e===_e)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==Ee)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,i,s,a,o,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=m,e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Pr extends lt{constructor(e,t,n,r,i,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:w,n,r,i,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Lr extends ut{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(qe("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===pe?ge:me),this.texture=new Pr(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:D}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new br(5,5,5),a=new Cr({name:"CubemapFromEquirect",uniforms:wr(n),vertexShader:r,fragmentShader:i,side:l,blending:0});a.uniforms.tEquirect.value=t;const o=new vr(s,a),c=t.minFilter;return t.minFilter===R&&(t.minFilter=D),new kr(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const Dr=new ft,Nr=new ft,Rr=new je;class Ir{constructor(e=new ft(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Dr.subVectors(n,t).cross(Nr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Dr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Rr.getNormalMatrix(e),r=this.coplanarPoint(Dr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Or=new It,Fr=new ft;class Br{constructor(e=new Ir,t=new Ir,n=new Ir,r=new Ir,i=new Ir,s=new Ir){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){const n=this.planes,r=e.elements,i=r[0],s=r[1],a=r[2],o=r[3],l=r[4],c=r[5],u=r[6],h=r[7],p=r[8],d=r[9],f=r[10],m=r[11],g=r[12],y=r[13],v=r[14],x=r[15];if(n[0].setComponents(o-i,h-l,m-p,x-g).normalize(),n[1].setComponents(o+i,h+l,m+p,x+g).normalize(),n[2].setComponents(o+s,h+c,m+d,x+y).normalize(),n[3].setComponents(o-s,h-c,m-d,x-y).normalize(),n[4].setComponents(o-a,h-u,m-f,x-v).normalize(),t===_e)n[5].setComponents(o+a,h+u,m+f,x+v).normalize();else{if(t!==Ee)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,f,v).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Or.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Or.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Or)}intersectsSprite(e){return Or.center.set(0,0,0),Or.radius=.7071067811865476,Or.applyMatrix4(e.matrixWorld),this.intersectsSphere(Or)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Fr.x=r.normal.x>0?e.max.x:e.min.x,Fr.y=r.normal.y>0?e.max.y:e.min.y,Fr.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Fr)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ur(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Vr(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=r.get(t);void 0===s?r.set(t,function(t,r){const i=t.array,s=t.usage,a=e.createBuffer();let o;if(e.bindBuffer(r,a),e.bufferData(r,i,s),t.onUploadCallback(),i instanceof Float32Array)o=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=e.HALF_FLOAT}else o=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)o=e.SHORT;else if(i instanceof Uint32Array)o=e.UNSIGNED_INT;else if(i instanceof Int32Array)o=e.INT;else if(i instanceof Int8Array)o=e.BYTE;else if(i instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=e.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):s.version<t.version&&(function(t,r,i){const s=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,s):(n?e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}(s.buffer,t,i),s.version=t.version)}}}class jr extends er{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,a=Math.floor(n),o=Math.floor(r),l=a+1,c=o+1,u=e/a,h=t/o,p=[],d=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-s;for(let n=0;n<l;n++){const r=n*u-i;d.push(r,-t,0),f.push(0,0,1),m.push(n/a),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),s=t+1+l*e;p.push(n,r,s),p.push(r,i,s)}this.setIndex(p),this.setAttribute("position",new Xn(d,3)),this.setAttribute("normal",new Xn(f,3)),this.setAttribute("uv",new Xn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jr(e.width,e.height,e.widthSegments,e.heightSegments)}}const zr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Hr={common:{diffuse:{value:new In(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new je},alphaMap:{value:null},alphaMapTransform:{value:new je},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new je}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new je}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new je}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new je},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new je},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new je},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new je}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new je}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new je}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new In(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new In(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new je},alphaTest:{value:0},uvTransform:{value:new je}},sprite:{diffuse:{value:new In(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new je},alphaMap:{value:null},alphaMapTransform:{value:new je},alphaTest:{value:0}}},Wr={basic:{uniforms:Sr([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.fog]),vertexShader:zr.meshbasic_vert,fragmentShader:zr.meshbasic_frag},lambert:{uniforms:Sr([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,Hr.lights,{emissive:{value:new In(0)}}]),vertexShader:zr.meshlambert_vert,fragmentShader:zr.meshlambert_frag},phong:{uniforms:Sr([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,Hr.lights,{emissive:{value:new In(0)},specular:{value:new In(1118481)},shininess:{value:30}}]),vertexShader:zr.meshphong_vert,fragmentShader:zr.meshphong_frag},standard:{uniforms:Sr([Hr.common,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.roughnessmap,Hr.metalnessmap,Hr.fog,Hr.lights,{emissive:{value:new In(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag},toon:{uniforms:Sr([Hr.common,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.gradientmap,Hr.fog,Hr.lights,{emissive:{value:new In(0)}}]),vertexShader:zr.meshtoon_vert,fragmentShader:zr.meshtoon_frag},matcap:{uniforms:Sr([Hr.common,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.fog,{matcap:{value:null}}]),vertexShader:zr.meshmatcap_vert,fragmentShader:zr.meshmatcap_frag},points:{uniforms:Sr([Hr.points,Hr.fog]),vertexShader:zr.points_vert,fragmentShader:zr.points_frag},dashed:{uniforms:Sr([Hr.common,Hr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zr.linedashed_vert,fragmentShader:zr.linedashed_frag},depth:{uniforms:Sr([Hr.common,Hr.displacementmap]),vertexShader:zr.depth_vert,fragmentShader:zr.depth_frag},normal:{uniforms:Sr([Hr.common,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,{opacity:{value:1}}]),vertexShader:zr.meshnormal_vert,fragmentShader:zr.meshnormal_frag},sprite:{uniforms:Sr([Hr.sprite,Hr.fog]),vertexShader:zr.sprite_vert,fragmentShader:zr.sprite_frag},background:{uniforms:{uvTransform:{value:new je},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zr.background_vert,fragmentShader:zr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:zr.backgroundCube_vert,fragmentShader:zr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zr.cube_vert,fragmentShader:zr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zr.equirect_vert,fragmentShader:zr.equirect_frag},distanceRGBA:{uniforms:Sr([Hr.common,Hr.displacementmap,{referencePosition:{value:new ft},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zr.distanceRGBA_vert,fragmentShader:zr.distanceRGBA_frag},shadow:{uniforms:Sr([Hr.lights,Hr.fog,{color:{value:new In(0)},opacity:{value:1}}]),vertexShader:zr.shadow_vert,fragmentShader:zr.shadow_frag}};Wr.physical={uniforms:Sr([Wr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new je},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new je},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new je},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new je},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new je},sheen:{value:0},sheenColor:{value:new In(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new je},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new je},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new je},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new je},attenuationDistance:{value:0},attenuationColor:{value:new In(0)},specularColor:{value:new In(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new je},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new je},anisotropyVector:{value:new Ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new je}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag};const Gr={r:0,b:0,g:0};function Xr(e,t,n,r,i,s,a){const c=new In(0);let u,h,p=!0===s?0:1,d=null,f=0,m=null;function g(t,n){t.getRGB(Gr,_r(e)),r.buffers.color.setClear(Gr.r,Gr.g,Gr.b,n,a)}return{getClearColor:function(){return c},setClearColor:function(e,t=1){c.set(e),p=t,g(c,p)},getClearAlpha:function(){return p},setClearAlpha:function(e){p=e,g(c,p)},render:function(s,y){let v=!1,x=!0===y.isScene?y.background:null;switch(x&&x.isTexture&&(x=(y.backgroundBlurriness>0?n:t).get(x)),null===x?g(c,p):x&&x.isColor&&(g(x,1),v=!0),e.xr.getEnvironmentBlendMode()){case"opaque":v=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,a),v=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,a),v=!0}(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===C)?(void 0===h&&(h=new vr(new br(1,1,1),new Cr({name:"BackgroundCubeMaterial",uniforms:wr(Wr.backgroundCube.uniforms),vertexShader:Wr.backgroundCube.vertexShader,fragmentShader:Wr.backgroundCube.fragmentShader,side:l,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=x,h.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,h.material.toneMapped=x.colorSpace!==ge,d===x&&f===x.version&&m===e.toneMapping||(h.material.needsUpdate=!0,d=x,f=x.version,m=e.toneMapping),h.layers.enableAll(),s.unshift(h,h.geometry,h.material,0,0,null)):x&&x.isTexture&&(void 0===u&&(u=new vr(new jr(2,2),new Cr({name:"BackgroundMaterial",uniforms:wr(Wr.background.uniforms),vertexShader:Wr.background.vertexShader,fragmentShader:Wr.background.fragmentShader,side:o,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=x,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.toneMapped=x.colorSpace!==ge,!0===x.matrixAutoUpdate&&x.updateMatrix(),u.material.uniforms.uvTransform.value.copy(x.matrix),d===x&&f===x.version&&m===e.toneMapping||(u.material.needsUpdate=!0,d=x,f=x.version,m=e.toneMapping),u.layers.enableAll(),s.unshift(u,u.geometry,u.material,0,0,null))}}}function Kr(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==s,o={},l=d(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function p(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i)}function y(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,r,i,s,a,o){!0===o?e.vertexAttribIPointer(t,n,r,s,a):e.vertexAttribPointer(t,n,r,i,s,a)}function x(){b(),u=!0,c!==l&&(c=l,h(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,p,x,b){let w=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=d(r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[a]=u),u}(x,p,l);c!==t&&(c=t,h(c.object)),w=function(e,t,n,r){const i=c.attributes,s=t.attributes;let a=0;const o=n.getAttributes();for(const t in o)if(o[t].location>=0){const n=i[t];let r=s[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,x,p,b),w&&function(e,t,n,r){const i={},s=t.attributes;let a=0;const o=n.getAttributes();for(const t in o)if(o[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,a++}c.attributes=i,c.attributesNum=a,c.index=r}(i,x,p,b)}else{const e=!0===l.wireframe;c.geometry===x.id&&c.program===p.id&&c.wireframe===e||(c.geometry=x.id,c.program=p.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(w||u)&&(u=!1,function(i,s,a,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=a.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const s=c[t];if(s.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){const t=a.normalized,l=a.itemSize,c=n.get(a);if(void 0===c)continue;const u=c.buffer,h=c.type,p=c.bytesPerElement,d=!0===r.isWebGL2&&(h===e.INT||h===e.UNSIGNED_INT||1013===a.gpuType);if(a.isInterleavedBufferAttribute){const n=a.data,r=n.stride,c=a.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<s.locationSize;e++)g(s.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<s.locationSize;e++)m(s.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<s.locationSize;e++)v(s.location+e,l/s.locationSize,h,t,r*p,(c+l/s.locationSize*e)*p,d)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<s.locationSize;e++)g(s.location+e,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<s.locationSize;e++)m(s.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<s.locationSize;e++)v(s.location+e,l/s.locationSize,h,t,l*p,l/s.locationSize*e*p,d)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(s.location,n);break;case 3:e.vertexAttrib3fv(s.location,n);break;case 4:e.vertexAttrib4fv(s.location,n);break;default:e.vertexAttrib1fv(s.location,n)}}}}y()}(i,l,p,x),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){x();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)p(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const n=t[e];for(const e in n)p(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)p(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:y}}function qr(e,t,n,r){const i=r.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,r){e.drawArrays(s,t,r),n.update(r,s,1)},this.renderInstances=function(r,a,o){if(0===o)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,r,a,o),n.update(a,s,o)}}function Jr(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const o=i(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),y=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,x=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:v,floatFragmentTextures:x,floatVertexTextures:v&&x,maxSamples:s?e.getParameter(e.MAX_SAMPLES):0}}function Yr(e){const t=this;let n=null,r=0,i=!1,s=!1;const a=new Ir,o=new je,l={value:null,needsUpdate:!1};function c(e,n,r,i){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==i||null===c){const t=r+4*s,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==s;++t,n+=4)a.copy(e[t]).applyMatrix4(i,o),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,u){const h=a.clippingPlanes,p=a.clipIntersection,d=a.clipShadows,f=e.get(a);if(!i||null===h||0===h.length||s&&!d)s?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=s?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(h,o,t,u);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=e}}}function $r(e){let t=new WeakMap;function n(e,t){return t===_?e.mapping=w:t===E&&(e.mapping=S),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const s=i.mapping;if(s===_||s===E){if(t.has(i))return n(t.get(i).texture,i.mapping);{const s=i.image;if(s&&s.height>0){const a=new Lr(s.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class Zr extends Tr{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,a=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Qr=[.125,.215,.35,.446,.526,.582],ei=new Zr,ti=new In;let ni=null;const ri=(1+Math.sqrt(5))/2,ii=1/ri,si=[new ft(1,1,1),new ft(-1,1,1),new ft(1,1,-1),new ft(-1,1,-1),new ft(0,ri,ii),new ft(0,ri,-ii),new ft(ii,0,ri),new ft(-ii,0,ri),new ft(ri,ii,0),new ft(-ri,ii,0)];class ai{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){ni=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ui(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ci(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ni),e.scissorTest=!1,li(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===w||e.mapping===S?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ni=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:D,minFilter:D,generateMipmaps:!1,type:U,format:j,colorSpace:ye,depthBuffer:!1},r=oi(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=oi(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const s=e-4+1+Qr.length;for(let a=0;a<s;a++){const s=Math.pow(2,i);n.push(s);let o=1/s;a>e-4?o=Qr[a-e+4-1]:0===a&&(o=0),r.push(o);const l=1/(s-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],p=6,d=6,f=3,m=2,g=1,y=new Float32Array(f*d*p),v=new Float32Array(m*d*p),x=new Float32Array(g*d*p);for(let e=0;e<p;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];y.set(r,f*d*e),v.set(h,m*d*e);const i=[e,e,e,e,e,e];x.set(i,g*d*e)}const b=new er;b.setAttribute("position",new Hn(y,f)),b.setAttribute("uv",new Hn(v,m)),b.setAttribute("faceIndex",new Hn(x,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new ft(0,1,0);return new Cr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new vr(this._lodPlanes[0],e);this._renderer.compile(t,ei)}_sceneToCubeUV(e,t,n,r){const i=new Mr(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,c=o.autoClear,u=o.toneMapping;o.getClearColor(ti),o.toneMapping=m,o.autoClear=!1;const h=new Fn({name:"PMREM.Background",side:l,depthWrite:!1,depthTest:!1}),p=new vr(new br,h);let d=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,d=!0):(h.color.copy(ti),d=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,s[t],0),i.lookAt(a[t],0,0)):1===n?(i.up.set(0,0,s[t]),i.lookAt(0,a[t],0)):(i.up.set(0,s[t],0),i.lookAt(0,0,a[t]));const l=this._cubeSize;li(r,n*l,t>2?l:0,l,l),o.setRenderTarget(r),d&&o.render(p,i),o.render(e,i)}p.geometry.dispose(),p.material.dispose(),o.toneMapping=u,o.autoClear=c,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===w||e.mapping===S;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ui()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ci());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new vr(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;li(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,ei)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=si[(t-1)%si.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new vr(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,p=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/p,f=isFinite(i)?1+Math.floor(3*d):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/d,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:y}=this;u.dTheta.value=p,u.mipInt.value=y-n;const v=this._sizeLods[r];li(t,3*v*(r>y-4?r-y+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(t),o.render(c,ei)}}function oi(e,t,n){const r=new ut(e,t,n);return r.texture.mapping=C,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function li(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ci(){return new Cr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ui(){return new Cr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function hi(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping,a=s===_||s===E,o=s===w||s===S;if(a||o){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new ai(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const s=i.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(s)){null===n&&(n=new ai(e));const s=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,s),i.addEventListener("dispose",r),s.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function pi(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function di(e,t,n,r){const i={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);for(const e in o.morphAttributes){const n=o.morphAttributes[e];for(let e=0,r=n.length;e<r;e++)t.remove(n[e])}o.removeEventListener("dispose",a),delete i[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const o=new(He(n)?Gn:Wn)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const n in i){const r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function fi(e,t,n,r){const i=r.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(s,r,a,t*o),n.update(r,s,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,l,a,r*o,c),n.update(l,s,c)}}function mi(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function gi(e,t){return e[0]-t[0]}function yi(e,t){return Math.abs(t[1])-Math.abs(e[1])}function vi(e,t,n){const r={},i=new Float32Array(8),s=new WeakMap,a=new ct,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,d=void 0!==p?p.length:0;let f=s.get(c);if(void 0===f||f.count!==d){void 0!==f&&f.texture.dispose();const y=void 0!==c.morphAttributes.position,v=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let _=0;!0===y&&(_=1),!0===v&&(_=2),!0===x&&(_=3);let E=c.attributes.position.count*_,C=1;E>t.maxTextureSize&&(C=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const T=new Float32Array(E*C*4*d),M=new ht(T,E,C,d);M.type=B,M.needsUpdate=!0;const A=4*_;for(let P=0;P<d;P++){const L=b[P],D=w[P],N=S[P],R=E*C*4*P;for(let I=0;I<L.count;I++){const O=I*A;!0===y&&(a.fromBufferAttribute(L,I),T[R+O+0]=a.x,T[R+O+1]=a.y,T[R+O+2]=a.z,T[R+O+3]=0),!0===v&&(a.fromBufferAttribute(D,I),T[R+O+4]=a.x,T[R+O+5]=a.y,T[R+O+6]=a.z,T[R+O+7]=0),!0===x&&(a.fromBufferAttribute(N,I),T[R+O+8]=a.x,T[R+O+9]=a.y,T[R+O+10]=a.z,T[R+O+11]=4===N.itemSize?a.w:1)}}function k(){M.dispose(),s.delete(c),c.removeEventListener("dispose",k)}f={count:d,texture:M,size:new Ve(E,C)},s.set(c,f),c.addEventListener("dispose",k)}let m=0;for(let F=0;F<h.length;F++)m+=h[F];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",h),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const U=void 0===h?0:h.length;let V=r[c.id];if(void 0===V||V.length!==U){V=[];for(let G=0;G<U;G++)V[G]=[G,0];r[c.id]=V}for(let X=0;X<U;X++){const K=V[X];K[0]=X,K[1]=h[X]}V.sort(yi);for(let q=0;q<8;q++)q<U&&V[q][1]?(o[q][0]=V[q][0],o[q][1]=V[q][1]):(o[q][0]=Number.MAX_SAFE_INTEGER,o[q][1]=0);o.sort(gi);const j=c.morphAttributes.position,z=c.morphAttributes.normal;let H=0;for(let J=0;J<8;J++){const Y=o[J],$=Y[0],Z=Y[1];$!==Number.MAX_SAFE_INTEGER&&Z?(j&&c.getAttribute("morphTarget"+J)!==j[$]&&c.setAttribute("morphTarget"+J,j[$]),z&&c.getAttribute("morphNormal"+J)!==z[$]&&c.setAttribute("morphNormal"+J,z[$]),i[J]=Z,H+=Z):(j&&!0===c.hasAttribute("morphTarget"+J)&&c.deleteAttribute("morphTarget"+J),z&&!0===c.hasAttribute("morphNormal"+J)&&c.deleteAttribute("morphNormal"+J),i[J]=0)}const W=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(e,"morphTargetBaseInfluence",W),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function xi(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const o=r.render.frame,l=a.geometry,c=t.get(a,l);return i.get(c)!==o&&(t.update(c),i.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER)),c},dispose:function(){i=new WeakMap}}}const bi=new lt,wi=new ht,Si=new pt,_i=new Pr,Ei=[],Ci=[],Ti=new Float32Array(16),Mi=new Float32Array(9),Ai=new Float32Array(4);function ki(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=Ei[i];if(void 0===s&&(s=new Float32Array(i),Ei[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function Pi(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Li(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Di(e,t){let n=Ci[t];void 0===n&&(n=new Int32Array(t),Ci[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ni(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ri(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Pi(n,t))return;e.uniform2fv(this.addr,t),Li(n,t)}}function Ii(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Pi(n,t))return;e.uniform3fv(this.addr,t),Li(n,t)}}function Oi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Pi(n,t))return;e.uniform4fv(this.addr,t),Li(n,t)}}function Fi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Pi(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Li(n,t)}else{if(Pi(n,r))return;Ai.set(r),e.uniformMatrix2fv(this.addr,!1,Ai),Li(n,r)}}function Bi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Pi(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Li(n,t)}else{if(Pi(n,r))return;Mi.set(r),e.uniformMatrix3fv(this.addr,!1,Mi),Li(n,r)}}function Ui(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Pi(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Li(n,t)}else{if(Pi(n,r))return;Ti.set(r),e.uniformMatrix4fv(this.addr,!1,Ti),Li(n,r)}}function Vi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ji(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Pi(n,t))return;e.uniform2iv(this.addr,t),Li(n,t)}}function zi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Pi(n,t))return;e.uniform3iv(this.addr,t),Li(n,t)}}function Hi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Pi(n,t))return;e.uniform4iv(this.addr,t),Li(n,t)}}function Wi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Gi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Pi(n,t))return;e.uniform2uiv(this.addr,t),Li(n,t)}}function Xi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Pi(n,t))return;e.uniform3uiv(this.addr,t),Li(n,t)}}function Ki(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Pi(n,t))return;e.uniform4uiv(this.addr,t),Li(n,t)}}function qi(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||bi,i)}function Ji(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Si,i)}function Yi(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||_i,i)}function $i(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||wi,i)}function Zi(e,t){e.uniform1fv(this.addr,t)}function Qi(e,t){const n=ki(t,this.size,2);e.uniform2fv(this.addr,n)}function es(e,t){const n=ki(t,this.size,3);e.uniform3fv(this.addr,n)}function ts(e,t){const n=ki(t,this.size,4);e.uniform4fv(this.addr,n)}function ns(e,t){const n=ki(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function rs(e,t){const n=ki(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function is(e,t){const n=ki(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ss(e,t){e.uniform1iv(this.addr,t)}function as(e,t){e.uniform2iv(this.addr,t)}function os(e,t){e.uniform3iv(this.addr,t)}function ls(e,t){e.uniform4iv(this.addr,t)}function cs(e,t){e.uniform1uiv(this.addr,t)}function us(e,t){e.uniform2uiv(this.addr,t)}function hs(e,t){e.uniform3uiv(this.addr,t)}function ps(e,t){e.uniform4uiv(this.addr,t)}function ds(e,t,n){const r=this.cache,i=t.length,s=Di(n,i);Pi(r,s)||(e.uniform1iv(this.addr,s),Li(r,s));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||bi,s[e])}function fs(e,t,n){const r=this.cache,i=t.length,s=Di(n,i);Pi(r,s)||(e.uniform1iv(this.addr,s),Li(r,s));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||Si,s[e])}function ms(e,t,n){const r=this.cache,i=t.length,s=Di(n,i);Pi(r,s)||(e.uniform1iv(this.addr,s),Li(r,s));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||_i,s[e])}function gs(e,t,n){const r=this.cache,i=t.length,s=Di(n,i);Pi(r,s)||(e.uniform1iv(this.addr,s),Li(r,s));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||wi,s[e])}class ys{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ni;case 35664:return Ri;case 35665:return Ii;case 35666:return Oi;case 35674:return Fi;case 35675:return Bi;case 35676:return Ui;case 5124:case 35670:return Vi;case 35667:case 35671:return ji;case 35668:case 35672:return zi;case 35669:case 35673:return Hi;case 5125:return Wi;case 36294:return Gi;case 36295:return Xi;case 36296:return Ki;case 35678:case 36198:case 36298:case 36306:case 35682:return qi;case 35679:case 36299:case 36307:return Ji;case 35680:case 36300:case 36308:case 36293:return Yi;case 36289:case 36303:case 36311:case 36292:return $i}}(t.type)}}class vs{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Zi;case 35664:return Qi;case 35665:return es;case 35666:return ts;case 35674:return ns;case 35675:return rs;case 35676:return is;case 5124:case 35670:return ss;case 35667:case 35671:return as;case 35668:case 35672:return os;case 35669:case 35673:return ls;case 5125:return cs;case 36294:return us;case 36295:return hs;case 36296:return ps;case 35678:case 36198:case 36298:case 36306:case 35682:return ds;case 35679:case 36299:case 36307:return fs;case 35680:case 36300:case 36308:case 36293:return ms;case 36289:case 36303:case 36311:case 36292:return gs}}(t.type)}}class xs{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}}}const bs=/(\w+)(\])?(\[|\.)?/g;function ws(e,t){e.seq.push(t),e.map[t.id]=t}function Ss(e,t,n){const r=e.name,i=r.length;for(bs.lastIndex=0;;){const s=bs.exec(r),a=bs.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===i){ws(n,void 0===c?new ys(o,e,t):new vs(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new xs(o),ws(n,e)),n=e}}}class _s{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Ss(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function Es(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let Cs=0;function Ts(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const r=parseInt(s[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let e=i;e<s;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function Ms(e,t){const n=function(e){switch(e){case ye:return["Linear","( value )"];case ge:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function As(e,t){let n;switch(t){case g:n="Linear";break;case y:n="Reinhard";break;case v:n="OptimizedCineon";break;case x:n="ACESFilmic";break;case b:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ks(e){return""!==e}function Ps(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ls(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ds=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ns(e){return e.replace(Ds,Rs)}function Rs(e,t){const n=zr[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ns(n)}const Is=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Os(e){return e.replace(Is,Fs)}function Fs(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Bs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Us(e,t,n,r){const o=e.getContext(),l=n.defines;let c=n.vertexShader,u=n.fragmentShader;const h=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===i?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===s?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===a&&(t="SHADOWMAP_TYPE_VSM"),t}(n),g=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case w:case S:t="ENVMAP_TYPE_CUBE";break;case C:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),y=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===S&&(t="ENVMAP_MODE_REFRACTION"),t}(n),v=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case p:t="ENVMAP_BLENDING_MULTIPLY";break;case d:t="ENVMAP_BLENDING_MIX";break;case f:t="ENVMAP_BLENDING_ADD"}return t}(n),x=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),b=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ks).join("\n")}(n),_=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(l),E=o.createProgram();let T,M,A=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(T=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter(ks).join("\n"),T.length>0&&(T+="\n"),M=[b,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter(ks).join("\n"),M.length>0&&(M+="\n")):(T=[Bs(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ks).join("\n"),M=[b,Bs(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+g:"",n.envMap?"#define "+y:"",n.envMap?"#define "+v:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==m?"#define TONE_MAPPING":"",n.toneMapping!==m?zr.tonemapping_pars_fragment:"",n.toneMapping!==m?As("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",zr.encodings_pars_fragment,Ms("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ks).join("\n")),c=Ns(c),c=Ps(c,n),c=Ls(c,n),u=Ns(u),u=Ps(u,n),u=Ls(u,n),c=Os(c),u=Os(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(A="#version 300 es\n",T=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+T,M=["#define varying in",n.glslVersion===we?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===we?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+M);const k=A+T+c,P=A+M+u,L=Es(o,o.VERTEX_SHADER,k),D=Es(o,o.FRAGMENT_SHADER,P);if(o.attachShader(E,L),o.attachShader(E,D),void 0!==n.index0AttributeName?o.bindAttribLocation(E,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(E,0,"position"),o.linkProgram(E),e.debug.checkShaderErrors){const t=o.getProgramInfoLog(E).trim(),n=o.getShaderInfoLog(L).trim(),r=o.getShaderInfoLog(D).trim();let i=!0,s=!0;if(!1===o.getProgramParameter(E,o.LINK_STATUS))if(i=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(o,E,L,D);else{const e=Ts(o,L,"vertex"),n=Ts(o,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(E,o.VALIDATE_STATUS)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==n&&""!==r||(s=!1);s&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:n,prefix:T},fragmentShader:{log:r,prefix:M}})}let N,R;return o.deleteShader(L),o.deleteShader(D),this.getUniforms=function(){return void 0===N&&(N=new _s(o,E)),N},this.getAttributes=function(){return void 0===R&&(R=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(o,E)),R},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(E),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Cs++,this.cacheKey=t,this.usedTimes=1,this.program=E,this.vertexShader=L,this.fragmentShader=D,this}let Vs=0;class js{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(i)&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new zs(e),t.set(e,n)),n}}class zs{constructor(e){this.id=Vs++,this.code=e,this.usedTimes=0}}function Hs(e,t,n,r,i,s,a){const o=new tn,u=new js,h=[],p=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let g=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(s,o,h,x,b){const w=x.fog,S=b.geometry,_=s.isMeshStandardMaterial?x.environment:null,E=(s.isMeshStandardMaterial?n:t).get(s.envMap||_),T=E&&E.mapping===C?E.image.height:null,M=y[s.type];null!==s.precision&&(g=i.getMaxPrecision(s.precision),g!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",g,"instead."));const A=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,k=void 0!==A?A.length:0;let P,L,D,N,R=0;if(void 0!==S.morphAttributes.position&&(R=1),void 0!==S.morphAttributes.normal&&(R=2),void 0!==S.morphAttributes.color&&(R=3),M){const e=Wr[M];P=e.vertexShader,L=e.fragmentShader}else P=s.vertexShader,L=s.fragmentShader,u.update(s),D=u.getVertexShaderID(s),N=u.getFragmentShaderID(s);const I=e.getRenderTarget(),O=!0===b.isInstancedMesh,F=!!s.map,B=!!s.matcap,U=!!E,V=!!s.aoMap,j=!!s.lightMap,z=!!s.bumpMap,H=!!s.normalMap,W=!!s.displacementMap,G=!!s.emissiveMap,X=!!s.metalnessMap,K=!!s.roughnessMap,q=s.anisotropy>0,J=s.clearcoat>0,Y=s.iridescence>0,$=s.sheen>0,Z=s.transmission>0,Q=q&&!!s.anisotropyMap,ee=J&&!!s.clearcoatMap,te=J&&!!s.clearcoatNormalMap,ne=J&&!!s.clearcoatRoughnessMap,re=Y&&!!s.iridescenceMap,ie=Y&&!!s.iridescenceThicknessMap,se=$&&!!s.sheenColorMap,ae=$&&!!s.sheenRoughnessMap,oe=!!s.specularMap,le=!!s.specularColorMap,ce=!!s.specularIntensityMap,ue=Z&&!!s.transmissionMap,he=Z&&!!s.thicknessMap,pe=!!s.gradientMap,de=!!s.alphaMap,fe=s.alphaTest>0,me=!!s.extensions,ge=!!S.attributes.uv1,ve=!!S.attributes.uv2,xe=!!S.attributes.uv3;return{isWebGL2:p,shaderID:M,shaderType:s.type,shaderName:s.name,vertexShader:P,fragmentShader:L,defines:s.defines,customVertexShaderID:D,customFragmentShaderID:N,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:g,instancing:O,instancingColor:O&&null!==b.instanceColor,supportsVertexTextures:f,outputColorSpace:null===I?e.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:ye,map:F,matcap:B,envMap:U,envMapMode:U&&E.mapping,envMapCubeUVHeight:T,aoMap:V,lightMap:j,bumpMap:z,normalMap:H,displacementMap:f&&W,emissiveMap:G,normalMapObjectSpace:H&&1===s.normalMapType,normalMapTangentSpace:H&&0===s.normalMapType,metalnessMap:X,roughnessMap:K,anisotropy:q,anisotropyMap:Q,clearcoat:J,clearcoatMap:ee,clearcoatNormalMap:te,clearcoatRoughnessMap:ne,iridescence:Y,iridescenceMap:re,iridescenceThicknessMap:ie,sheen:$,sheenColorMap:se,sheenRoughnessMap:ae,specularMap:oe,specularColorMap:le,specularIntensityMap:ce,transmission:Z,transmissionMap:ue,thicknessMap:he,gradientMap:pe,opaque:!1===s.transparent&&1===s.blending,alphaMap:de,alphaTest:fe,combine:s.combine,mapUv:F&&v(s.map.channel),aoMapUv:V&&v(s.aoMap.channel),lightMapUv:j&&v(s.lightMap.channel),bumpMapUv:z&&v(s.bumpMap.channel),normalMapUv:H&&v(s.normalMap.channel),displacementMapUv:W&&v(s.displacementMap.channel),emissiveMapUv:G&&v(s.emissiveMap.channel),metalnessMapUv:X&&v(s.metalnessMap.channel),roughnessMapUv:K&&v(s.roughnessMap.channel),anisotropyMapUv:Q&&v(s.anisotropyMap.channel),clearcoatMapUv:ee&&v(s.clearcoatMap.channel),clearcoatNormalMapUv:te&&v(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ne&&v(s.clearcoatRoughnessMap.channel),iridescenceMapUv:re&&v(s.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&v(s.iridescenceThicknessMap.channel),sheenColorMapUv:se&&v(s.sheenColorMap.channel),sheenRoughnessMapUv:ae&&v(s.sheenRoughnessMap.channel),specularMapUv:oe&&v(s.specularMap.channel),specularColorMapUv:le&&v(s.specularColorMap.channel),specularIntensityMapUv:ce&&v(s.specularIntensityMap.channel),transmissionMapUv:ue&&v(s.transmissionMap.channel),thicknessMapUv:he&&v(s.thicknessMap.channel),alphaMapUv:de&&v(s.alphaMap.channel),vertexTangents:!!S.attributes.tangent&&(H||q),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,vertexUv1s:ge,vertexUv2s:ve,vertexUv3s:xe,pointsUvs:!0===b.isPoints&&!!S.attributes.uv&&(F||de),fog:!!w,useFog:!0===s.fog,fogExp2:w&&w.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==S.morphAttributes.position,morphNormals:void 0!==S.morphAttributes.normal,morphColors:void 0!==S.morphAttributes.color,morphTargetsCount:k,morphTextureStride:R,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:m,useLegacyLights:e.useLegacyLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===c,flipSided:s.side===l,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:me&&!0===s.extensions.derivatives,extensionFragDepth:me&&!0===s.extensions.fragDepth,extensionDrawBuffers:me&&!0===s.extensions.drawBuffers,extensionShaderTextureLOD:me&&!0===s.extensions.shaderTextureLOD,rendererExtensionFragDepth:p||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||r.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),t.anisotropy&&o.enable(17),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.useLegacyLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=y[e.type];let n;if(t){const e=Wr[t];n=Er.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=h.length;e<t;e++){const t=h[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Us(e,n,t,s),h.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=h.indexOf(e);h[t]=h[h.length-1],h.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:h,dispose:function(){u.dispose()}}}function Ws(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Gs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Xs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ks(){const e=[];let t=0;const n=[],r=[],i=[];function s(n,r,i,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Gs),r.length>1&&r.sort(t||Xs),i.length>1&&i.sort(t||Xs)}}}function qs(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Ks,e.set(t,[i])):n>=r.length?(i=new Ks,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Js(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ft,color:new In};break;case"SpotLight":n={position:new ft,direction:new ft,color:new In,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ft,color:new In,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ft,skyColor:new In,groundColor:new In};break;case"RectAreaLight":n={color:new In,position:new ft,halfWidth:new ft,halfHeight:new ft}}return e[t.id]=n,n}}}let Ys=0;function $s(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Zs(e,t){const n=new Js,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)i.probe.push(new ft);const s=new ft,a=new Wt,o=new Wt;return{setup:function(s,a){let o=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,p=0,d=0,f=0,m=0,g=0,y=0,v=0,x=0;s.sort($s);const b=!0===a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,w=t.intensity,S=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*w*b,l+=a.g*w*b,c+=a.b*w*b;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=_,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(w*b),e.distance=S,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[p]=e;const s=t.shadow;if(t.map&&(i.spotLightMap[v]=t.map,v++,s.updateMatrices(t),t.castShadow&&x++),i.spotLightMatrix[p]=s.matrix,t.castShadow){const e=r.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,i.spotShadow[p]=e,i.spotShadowMap[p]=_,y++}p++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=_,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*b),e.groundColor.copy(t.groundColor).multiplyScalar(w*b),i.hemi[f]=e,f++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Hr.LTC_FLOAT_1,i.rectAreaLTC2=Hr.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Hr.LTC_HALF_1,i.rectAreaLTC2=Hr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=c;const w=i.hash;w.directionalLength===u&&w.pointLength===h&&w.spotLength===p&&w.rectAreaLength===d&&w.hemiLength===f&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===y&&w.numSpotMaps===v||(i.directional.length=u,i.spot.length=p,i.rectArea.length=d,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+v-x,i.spotLightMap.length=v,i.numSpotLightShadowsWithMaps=x,w.directionalLength=u,w.pointLength=h,w.spotLength=p,w.rectAreaLength=d,w.hemiLength=f,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=y,w.numSpotMaps=v,i.version=Ys++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,p=e.length;t<p;t++){const p=e[t];if(p.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(p.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(p.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(p.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*p.width,0,0),e.halfHeight.set(0,.5*p.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(p.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(p.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function Qs(e,t){const n=new Zs(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function ea(e,t){let n=new WeakMap;return{get:function(r,i=0){const s=n.get(r);let a;return void 0===s?(a=new Qs(e,t),n.set(r,[a])):i>=s.length?(a=new Qs(e,t),s.push(a)):a=s[i],a},dispose:function(){n=new WeakMap}}}class ta extends Pn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=de,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class na extends Pn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function ra(e,t,n){let r=new Br;const s=new Ve,u=new Ve,h=new ct,p=new ta({depthPacking:fe}),d=new na,f={},m=n.maxTextureSize,g={[o]:l,[l]:o,[c]:c},y=new Cr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const x=new er;x.setAttribute("position",new Hn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new vr(x,y),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i;let S=this.type;function _(n,r){const i=t.update(b);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,v.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,v.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new ut(s.x,s.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,y,b,null),v.uniforms.shadow_pass.value=n.mapPass.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,v,b,null)}function E(t,n,r,i){let s=null;const o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)s=o;else if(s=!0===r.isPointLight?d:p,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=s.uuid,t=n.uuid;let r=f[e];void 0===r&&(r={},f[e]=r);let i=r[t];void 0===i&&(i=s.clone(),r[t]=i),s=i}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=i===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:g[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===r.isPointLight&&!0===s.isMeshDistanceMaterial&&(e.properties.get(s).light=r),s}function C(n,i,s,o,l){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&l===a)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let a=0,c=t.length;a<c;a++){const c=t[a],u=i[c.materialIndex];if(u&&u.visible){const t=E(n,u,o,l);e.renderBufferDirect(s,null,r,t,n,c)}}}else if(i.visible){const t=E(n,i,o,l);e.renderBufferDirect(s,null,r,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)C(c[e],i,s,o,l)}this.render=function(t,n,i){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const o=e.getRenderTarget(),l=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),p=e.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const d=S!==a&&this.type===a,f=S===a&&this.type!==a;for(let o=0,l=t.length;o<l;o++){const l=t[o],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;s.copy(c.mapSize);const g=c.getFrameExtents();if(s.multiply(g),u.copy(c.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(u.x=Math.floor(m/g.x),s.x=u.x*g.x,c.mapSize.x=u.x),s.y>m&&(u.y=Math.floor(m/g.y),s.y=u.y*g.y,c.mapSize.y=u.y)),null===c.map||!0===d||!0===f){const e=this.type!==a?{minFilter:k,magFilter:k}:{};null!==c.map&&c.map.dispose(),c.map=new ut(s.x,s.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const y=c.getViewportCount();for(let e=0;e<y;e++){const t=c.getViewport(e);h.set(u.x*t.x,u.y*t.y,u.x*t.z,u.y*t.w),p.viewport(h),c.updateMatrices(l,e),r=c.getFrustum(),C(n,i,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===a&&_(c,i),c.needsUpdate=!1}S=this.type,w.needsUpdate=!1,e.setRenderTarget(o,l,c)}}function ia(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new ct;let r=null;const i=new ct(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,a,o){!0===o&&(t*=a,r*=a,s*=a),n.set(t,r,s,a),!1===i.equals(n)&&(e.clearColor(t,r,s,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?W(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?W(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&s===a||(e.stencilFunc(t,n,a),r=t,i=n,s=a)},setOp:function(t,n,r){a===t&&o===n&&l===r||(e.stencilOp(t,n,r),a=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,c=null}}},o=new WeakMap,p=new WeakMap;let d={},f={},m=new WeakMap,g=[],y=null,v=!1,x=null,b=null,w=null,S=null,_=null,E=null,C=null,T=!1,M=null,A=null,k=null,P=null,L=null;const D=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,R=0;const I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(I)[1]),N=R>=1):-1!==I.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),N=R>=2);let O=null,F={};const B=e.getParameter(e.SCISSOR_BOX),U=e.getParameter(e.VIEWPORT),V=(new ct).fromArray(B),j=(new ct).fromArray(U);function z(t,n,i,s){const a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<i;o++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage3D(n,0,e.RGBA,1,1,s,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}const H={};function W(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function G(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}H[e.TEXTURE_2D]=z(e.TEXTURE_2D,e.TEXTURE_2D,1),H[e.TEXTURE_CUBE_MAP]=z(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(H[e.TEXTURE_2D_ARRAY]=z(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),H[e.TEXTURE_3D]=z(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),s.setClear(1),a.setClear(0),W(e.DEPTH_TEST),s.setFunc(3),J(!1),Y(1),W(e.CULL_FACE),q(0);const X={[h]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(r)X[103]=e.MIN,X[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(X[103]=e.MIN_EXT,X[104]=e.MAX_EXT)}const K={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA};function q(t,n,r,i,s,a,o,l){if(0!==t){if(!1===v&&(W(e.BLEND),v=!0),5===t)s=s||n,a=a||r,o=o||i,n===b&&s===_||(e.blendEquationSeparate(X[n],X[s]),b=n,_=s),r===w&&i===S&&a===E&&o===C||(e.blendFuncSeparate(K[r],K[i],K[a],K[o]),w=r,S=i,E=a,C=o),x=t,T=!1;else if(t!==x||l!==T){if(b===h&&_===h||(e.blendEquation(e.FUNC_ADD),b=h,_=h),l)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case u:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case u:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}w=null,S=null,E=null,C=null,x=t,T=l}}else!0===v&&(G(e.BLEND),v=!1)}function J(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function Y(t){0!==t?(W(e.CULL_FACE),t!==A&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),A=t}function $(t,n,r){t?(W(e.POLYGON_OFFSET_FILL),P===n&&L===r||(e.polygonOffset(n,r),P=n,L=r)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:s,stencil:a},enable:W,disable:G,bindFramebuffer:function(t,n){return f[t]!==n&&(e.bindFramebuffer(t,n),f[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(f[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(f[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let s=g,a=!1;if(r)if(s=m.get(i),void 0===s&&(s=[],m.set(i,s)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(s.length!==t.length||s[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)s[n]=e.COLOR_ATTACHMENT0+n;s.length=t.length,a=!0}}else s[0]!==e.COLOR_ATTACHMENT0&&(s[0]=e.COLOR_ATTACHMENT0,a=!0);else s[0]!==e.BACK&&(s[0]=e.BACK,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return y!==t&&(e.useProgram(t),y=t,!0)},setBlending:q,setMaterial:function(t,n){t.side===c?G(e.CULL_FACE):W(e.CULL_FACE);let r=t.side===l;n&&(r=!r),J(r),1===t.blending&&!1===t.transparent?q(0):q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),i.setMask(t.colorWrite);const o=t.stencilWrite;a.setTest(o),o&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?W(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:J,setCullFace:Y,setLineWidth:function(t){t!==k&&(N&&e.lineWidth(t),k=t)},setPolygonOffset:$,setScissorTest:function(t){t?W(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+D-1),O!==t&&(e.activeTexture(t),O=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===O?e.TEXTURE0+D-1:O);let i=F[r];void 0===i&&(i={type:void 0,texture:void 0},F[r]=i),i.type===t&&i.texture===n||(O!==r&&(e.activeTexture(r),O=r),e.bindTexture(t,n||H[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=F[O];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=p.get(n);void 0===r&&(r=new WeakMap,p.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=p.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===V.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),V.copy(t))},viewport:function(t){!1===j.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),j.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},O=null,F={},f={},m=new WeakMap,g=[],y=null,v=!1,x=null,b=null,w=null,S=null,_=null,E=null,C=null,T=!1,M=null,A=null,k=null,P=null,L=null,V.set(0,0,e.canvas.width,e.canvas.height),j.set(0,0,e.canvas.width,e.canvas.height),i.reset(),s.reset(),a.reset()}}}function sa(e,t,n,r,i,s,a){const o=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,p=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function v(e,t){return y?new OffscreenCanvas(e,t):Xe("canvas")}function x(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Oe:Math.floor,s=r(i*e.width),a=r(i*e.height);void 0===m&&(m=v(s,a));const o=n?v(s,a):m;return o.width=s,o.height=a,o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return Re(e.width)&&Re(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==k&&e.minFilter!==D}function S(t){e.generateMipmap(t)}function _(n,r,i,s,a=!1){if(!1===o)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA&&(i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=s===ge&&!1===a?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==k&&e.minFilter!==D?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function C(t){return t===k||t===P||t===L?e.NEAREST:e.LINEAR}function W(e){const t=e.target;t.removeEventListener("dispose",W),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&X(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function G(t){const n=t.target;n.removeEventListener("dispose",G),function(t){const n=t.texture,i=r.get(t),s=r.get(n);if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function X(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],a.memory.textures--}let K=0;function q(t,i){const s=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void ee(s,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,s.__webglTexture,e.TEXTURE0+i)}const J={[T]:e.REPEAT,[M]:e.CLAMP_TO_EDGE,[A]:e.MIRRORED_REPEAT},Y={[k]:e.NEAREST,[P]:e.NEAREST_MIPMAP_NEAREST,[L]:e.NEAREST_MIPMAP_LINEAR,[D]:e.LINEAR,[N]:e.LINEAR_MIPMAP_NEAREST,[R]:e.LINEAR_MIPMAP_LINEAR},$={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function Z(n,s,a){if(a?(e.texParameteri(n,e.TEXTURE_WRAP_S,J[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,J[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,J[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,Y[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,Y[s.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),s.wrapS===M&&s.wrapT===M||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C(s.minFilter)),s.minFilter!==k&&s.minFilter!==D&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),s.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,$[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(s.magFilter===k)return;if(s.minFilter!==L&&s.minFilter!==R)return;if(s.type===B&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&s.type===U&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function Q(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",W));const i=n.source;let s=g.get(i);void 0===s&&(s={},g.set(i,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),s[o].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&X(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return r}function ee(t,i,a){let l=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(l=e.TEXTURE_3D);const c=Q(t,i),h=i.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+a);const p=r.get(h);if(h.version!==p.__version||!0===c){n.activeTexture(e.TEXTURE0+a),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=function(e){return!o&&(e.wrapS!==M||e.wrapT!==M||e.minFilter!==k&&e.minFilter!==D)}(i)&&!1===b(i.image);let r=x(i.image,t,!1,u);r=ae(i,r);const d=b(r)||o,f=s.convert(i.format,i.colorSpace);let m,g=s.convert(i.type),y=_(i.internalFormat,f,g,i.colorSpace);Z(l,i,d);const v=i.mipmaps,C=o&&!0!==i.isVideoTexture,T=void 0===p.__version||!0===c,A=E(i,r,d);if(i.isDepthTexture)y=e.DEPTH_COMPONENT,o?y=i.type===B?e.DEPTH_COMPONENT32F:i.type===F?e.DEPTH_COMPONENT24:i.type===V?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:i.type===B&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===z&&y===e.DEPTH_COMPONENT&&i.type!==O&&i.type!==F&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=F,g=s.convert(i.type)),i.format===H&&y===e.DEPTH_COMPONENT&&(y=e.DEPTH_STENCIL,i.type!==V&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=V,g=s.convert(i.type))),T&&(C?n.texStorage2D(e.TEXTURE_2D,1,y,r.width,r.height):n.texImage2D(e.TEXTURE_2D,0,y,r.width,r.height,0,f,g,null));else if(i.isDataTexture)if(v.length>0&&d){C&&T&&n.texStorage2D(e.TEXTURE_2D,A,y,v[0].width,v[0].height);for(let t=0,r=v.length;t<r;t++)m=v[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,g,m.data):n.texImage2D(e.TEXTURE_2D,t,y,m.width,m.height,0,f,g,m.data);i.generateMipmaps=!1}else C?(T&&n.texStorage2D(e.TEXTURE_2D,A,y,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,f,g,r.data)):n.texImage2D(e.TEXTURE_2D,0,y,r.width,r.height,0,f,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){C&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,y,v[0].width,v[0].height,r.depth);for(let t=0,s=v.length;t<s;t++)m=v[t],i.format!==j?null!==f?C?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,f,m.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,y,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,f,g,m.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,y,m.width,m.height,r.depth,0,f,g,m.data)}else{C&&T&&n.texStorage2D(e.TEXTURE_2D,A,y,v[0].width,v[0].height);for(let t=0,r=v.length;t<r;t++)m=v[t],i.format!==j?null!==f?C?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(e.TEXTURE_2D,t,y,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,g,m.data):n.texImage2D(e.TEXTURE_2D,t,y,m.width,m.height,0,f,g,m.data)}else if(i.isDataArrayTexture)C?(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,y,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,y,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isData3DTexture)C?(T&&n.texStorage3D(e.TEXTURE_3D,A,y,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(e.TEXTURE_3D,0,y,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isFramebufferTexture){if(T)if(C)n.texStorage2D(e.TEXTURE_2D,A,y,r.width,r.height);else{let t=r.width,i=r.height;for(let r=0;r<A;r++)n.texImage2D(e.TEXTURE_2D,r,y,t,i,0,f,g,null),t>>=1,i>>=1}}else if(v.length>0&&d){C&&T&&n.texStorage2D(e.TEXTURE_2D,A,y,v[0].width,v[0].height);for(let t=0,r=v.length;t<r;t++)m=v[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,g,m):n.texImage2D(e.TEXTURE_2D,t,y,f,g,m);i.generateMipmaps=!1}else C?(T&&n.texStorage2D(e.TEXTURE_2D,A,y,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,g,r)):n.texImage2D(e.TEXTURE_2D,0,y,f,g,r);w(i,d)&&S(l),p.__version=h.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function te(t,i,a,o,l){const c=s.convert(a.format,a.colorSpace),u=s.convert(a.type),h=_(a.internalFormat,c,u,a.colorSpace);r.get(i).__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(e.FRAMEBUFFER,t),se(i)?p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,r.get(a).__webglTexture,0,ie(i)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,r.get(a).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function ne(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=e.DEPTH_COMPONENT16;if(r||se(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===B?i=e.DEPTH_COMPONENT32F:t.type===F&&(i=e.DEPTH_COMPONENT24));const r=ie(n);se(n)?p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=ie(n);r&&!1===se(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):se(n)?p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],o=s.convert(a.format,a.colorSpace),l=s.convert(a.type),c=_(a.internalFormat,o,l,a.colorSpace),u=ie(n);r&&!1===se(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):se(n)?p.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function re(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),q(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,a=ie(i);if(i.depthTexture.format===z)se(i)?p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==H)throw new Error("Unknown depthTexture format");se(i)?p.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),ne(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),ne(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function ie(e){return Math.min(h,e.samples)}function se(e){const n=r.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function ae(e,n){const r=e.colorSpace,i=e.format,s=e.type;return!0===e.isCompressedTexture||e.format===Se||r!==ye&&r!==me&&(r===ge?!1===o?!0===t.has("EXT_sRGB")&&i===j?(e.format=Se,e.minFilter=D,e.generateMipmaps=!1):n=rt.sRGBToLinear(n):i===j&&s===I||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){const e=K;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),K+=1,e},this.resetTextureUnits=function(){K=0},this.setTexture2D=q,this.setTexture2DArray=function(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?ee(s,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?ee(s,t,i):n.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,i,a){if(6!==i.image.length)return;const l=Q(t,i),u=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+a);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(e.TEXTURE0+a),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,p=[];for(let e=0;e<6;e++)p[e]=t||r?r?i.image[e].image:i.image[e]:x(i.image[e],!1,!0,c),p[e]=ae(i,p[e]);const d=p[0],f=b(d)||o,m=s.convert(i.format,i.colorSpace),g=s.convert(i.type),y=_(i.internalFormat,m,g,i.colorSpace),v=o&&!0!==i.isVideoTexture,C=void 0===h.__version||!0===l;let T,M=E(i,d,f);if(Z(e.TEXTURE_CUBE_MAP,i,f),t){v&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,M,y,d.width,d.height);for(let t=0;t<6;t++){T=p[t].mipmaps;for(let r=0;r<T.length;r++){const s=T[r];i.format!==j?null!==m?v?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,s.width,s.height,m,s.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,y,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,s.width,s.height,m,g,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,y,s.width,s.height,0,m,g,s.data)}}}else{T=i.mipmaps,v&&C&&(T.length>0&&M++,n.texStorage2D(e.TEXTURE_CUBE_MAP,M,y,p[0].width,p[0].height));for(let t=0;t<6;t++)if(r){v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,p[t].width,p[t].height,m,g,p[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,y,p[t].width,p[t].height,0,m,g,p[t].data);for(let r=0;r<T.length;r++){const i=T[r].image[t].image;v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,m,g,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,y,i.width,i.height,0,m,g,i.data)}}else{v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m,g,p[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,y,m,g,p[t]);for(let r=0;r<T.length;r++){const i=T[r];v?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,m,g,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,y,m,g,i.image[t])}}}w(i,f)&&S(e.TEXTURE_CUBE_MAP),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(a,t,i):n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+i)},this.rebindTextures=function(t,n,i){const s=r.get(t);void 0!==n&&te(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==i&&re(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",G),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,p=!0===t.isWebGLMultipleRenderTargets,d=b(t)||o;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),p)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===se(t)){const r=p?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const a=s.convert(i.format,i.colorSpace),o=s.convert(i.type),l=_(i.internalFormat,a,o,i.colorSpace,!0===t.isXRRenderTarget),u=ie(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),ne(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),Z(e.TEXTURE_CUBE_MAP,l,d);for(let n=0;n<6;n++)te(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n);w(l,d)&&S(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(p){const i=t.texture;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r.get(a);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),Z(e.TEXTURE_2D,a,d),te(c.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D),w(a,d)&&S(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),Z(r,l,d),te(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r),w(l,d)&&S(r),n.unbindTexture()}t.depthBuffer&&re(t)},this.updateRenderTargetMipmap=function(t){const i=b(t)||o,s=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,o=s.length;a<o;a++){const o=s[a];if(w(o,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=r.get(o).__webglTexture;n.bindTexture(i,s),S(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===se(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const p=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,e.NEAREST),d&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const s=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=te,this.useMultisampledRTT=se}function aa(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=me){let s;if(n===I)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===O)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(n===F)return e.UNSIGNED_INT;if(n===B)return e.FLOAT;if(n===U)return r?e.HALF_FLOAT:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===j)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===z)return e.DEPTH_COMPONENT;if(n===H)return e.DEPTH_STENCIL;if(n===Se)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(n===W)return e.RED;if(1029===n)return e.RED_INTEGER;if(n===G)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===X||n===K||n===q||n===J)if(i===ge){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===X)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===K)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===q)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===J)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===X)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===K)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===q)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===J)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Y||35841===n||n===$||35843===n){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===Y)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===$)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Z)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Q||n===ee){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===Q)return i===ge?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===ee)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===te||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===te)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return i===ge?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ne){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===ne)return i===ge?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===n||36284===n||36285===n||36286===n){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===ne)return s.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===V?r?e.UNSIGNED_INT_24_8:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class oa extends Mr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class la extends gn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ca={type:"move"};class ua{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new la,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new la,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ft,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ft),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new la,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ft,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ft),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ca)))}return null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new la;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ha extends lt{constructor(e,t,n,r,i,s,a,o,l,c){if((c=void 0!==c?c:z)!==z&&c!==H)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===z&&(n=F),void 0===n&&c===H&&(n=V),super(null,r,i,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:k,this.minFilter=void 0!==o?o:k,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class pa extends Ce{constructor(e,t){super();const n=this;let r=null,i=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,h=null,p=null,d=null;const f=t.getContextAttributes();let m=null,g=null;const y=[],v=[];let x=null;const b=new Mr;b.layers.enable(1),b.viewport=new ct;const w=new Mr;w.layers.enable(2),w.viewport=new ct;const S=[b,w],_=new oa;_.layers.enable(1),_.layers.enable(2);let E=null,C=null;function T(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function M(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",M),r.removeEventListener("inputsourceschange",A);for(let e=0;e<y.length;e++){const t=v[e];null!==t&&(v[e]=null,y[e].disconnect(t))}E=null,C=null,e.setRenderTarget(m),p=null,h=null,u=null,r=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,y[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<y.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const i=y[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(e){x=e},this.getController=function(e){let t=y[e];return void 0===t&&(t=new ua,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new ua,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new ua,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:p},this.getBinding=function(){return u},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",M),r.addEventListener("inputsourceschange",A),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};p=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:p}),g=new ut(p.framebufferWidth,p.framebufferHeight,{format:j,type:I,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,s=null,a=null;f.depth&&(a=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?H:z,s=f.stencil?V:F);const o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(o),r.updateRenderState({layers:[h]}),g=new ut(h.textureWidth,h.textureHeight,{format:j,type:I,depthTexture:new ha(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await r.requestReferenceSpace(a),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const k=new ft,P=new ft;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCameraXR=function(e){if(null===r)return e;x&&(e=x),_.near=w.near=b.near=e.near,_.far=w.far=b.far=e.far,E===_.near&&C===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),E=_.near,C=_.far);const t=e.parent,n=_.cameras;L(_,t);for(let e=0;e<n.length;e++)L(n[e],t);return 2===n.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);const r=k.distanceTo(P),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(s[8]+1)/s[0],p=a*u,d=a*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+f,y=o+f,v=p-m,x=d+(r-m),b=l*o/y*g,w=c*o/y*g;e.projectionMatrix.makePerspective(v,x,b,w,g,y),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(_,b,w):_.projectionMatrix.copy(b.projectionMatrix),x&&function(e,t){const n=x;null===t?n.matrix.copy(e.matrixWorld):(n.matrix.copy(t.matrixWorld),n.matrix.invert(),n.matrix.multiply(e.matrixWorld)),n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0);const r=n.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);n.projectionMatrix.copy(e.projectionMatrix),n.projectionMatrixInverse.copy(e.projectionMatrixInverse),n.isPerspectiveCamera&&(n.fov=2*ke*Math.atan(1/n.projectionMatrix.elements[5]),n.zoom=1)}(_,t),_},this.getFoveation=function(){if(null!==h||null!==p)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)};let D=null;const N=new Ur;N.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||s),d=r,null!==c){const t=c.views;null!==p&&(e.setRenderTargetFramebuffer(g,p.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let s=null;if(null!==p)s=p.getViewport(i);else{const t=u.getViewSubImage(h,i);s=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let a=S[r];void 0===a&&(a=new Mr,a.layers.enable(r),a.viewport=new ct,S[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===r&&(_.matrix.copy(a.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale)),!0===n&&_.cameras.push(a)}}for(let e=0;e<y.length;e++){const t=v[e],n=y[e];null!==t&&void 0!==n&&n.update(t,r,l||s)}D&&D(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),d=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function da(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===l&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===l&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const s=t.get(i).envMap;if(s&&(r.envMap.value=s,r.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,_r(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,s,a,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform)),e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));t.get(r).envMap&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===l&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,o)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,s,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function fa(e,t,n,r){let i={},s={},a=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n){const r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{const e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let p=i[n.id];void 0===p&&(function(e){const t=e.uniforms;let n=0;let r=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],s={boundary:0,storage:0},a=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]);s.boundary+=t.boundary,s.storage+=t.storage}i.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0&&(r=n%16,0!==r&&16-r-s.boundary<0&&(n+=16-r,i.__offset=n)),n+=s.storage}r=n%16,r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),p=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,s=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,s),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=p,n.addEventListener("dispose",u));const d=h.program;r.updateUBOMapping(n,d);const f=t.render.frame;s[n.id]!==f&&(function(t){const n=i[t.id],r=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,s)){const t=n.__offset,r=Array.isArray(n.value)?n.value:[n.value];let i=0;for(let s=0;s<r.length;s++){const a=r[s],o=c(a);"number"==typeof a?(n.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+i,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),s[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},s={}}}}function ma(){const e=Xe("canvas");return e.style.display="block",e}class ga{constructor(e={}){const{canvas:t=ma(),context:n=null,depth:i=!0,stencil:s=!0,alpha:a=!1,antialias:u=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:p=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;let g;this.isWebGLRenderer=!0,g=null!==n?n.getContextAttributes().alpha:a;const y=new Uint32Array(4),v=new Int32Array(4);let x=null,b=null;const w=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=ge,this.useLegacyLights=!0,this.toneMapping=m,this.toneMappingExposure=1;const _=this;let E=!1,C=0,T=0,M=null,A=-1,k=null;const P=new ct,L=new ct;let D=null;const N=new In(0);let z=0,H=t.width,W=t.height,G=1,X=null,K=null;const q=new ct(0,0,H,W),J=new ct(0,0,H,W);let Y=!1;const $=new Br;let Z=!1,Q=!1,ee=null;const te=new Wt,ne=new Ve,re=new ft,ie={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return null===M?G:1}let ae,oe,le,ce,ue,he,pe,de,fe,me,ve,xe,be,we,Se,_e,Ee,Ce,Te,Me,Ae,ke,Pe,Le,De=n;function Ne(e,n){for(let r=0;r<e.length;r++){const i=e[r],s=t.getContext(i,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:i,stencil:s,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:p,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",Fe,!1),t.addEventListener("webglcontextrestored",Be,!1),t.addEventListener("webglcontextcreationerror",Ue,!1),null===De){const t=["webgl2","webgl","experimental-webgl"];if(!0===_.isWebGL1Renderer&&t.shift(),De=Ne(t,e),null===De)throw Ne(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}De instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===De.getShaderPrecisionFormat&&(De.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Re(){ae=new pi(De),oe=new Jr(De,ae,e),ae.init(oe),ke=new aa(De,ae,oe),le=new ia(De,ae,oe),ce=new mi(De),ue=new Ws,he=new sa(De,ae,le,ue,oe,ke,ce),pe=new $r(_),de=new hi(_),fe=new Vr(De,oe),Pe=new Kr(De,ae,fe,oe),me=new di(De,fe,ce,Pe),ve=new xi(De,me,fe,ce),Te=new vi(De,oe,he),_e=new Yr(ue),xe=new Hs(_,pe,de,ae,oe,Pe,_e),be=new da(_,ue),we=new qs,Se=new ea(ae,oe),Ce=new Xr(_,pe,de,le,ve,g,h),Ee=new ra(_,ve,oe),Le=new fa(De,ce,oe,le),Me=new qr(De,ae,ce,oe),Ae=new fi(De,ae,ce,oe),ce.programs=xe.programs,_.capabilities=oe,_.extensions=ae,_.properties=ue,_.renderLists=we,_.shadowMap=Ee,_.state=le,_.info=ce}Re();const Ie=new pa(_,De);function Fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const e=ce.autoReset,t=Ee.enabled,n=Ee.autoUpdate,r=Ee.needsUpdate,i=Ee.type;Re(),ce.autoReset=e,Ee.enabled=t,Ee.autoUpdate=n,Ee.needsUpdate=r,Ee.type=i}function Ue(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function je(e){const t=e.target;t.removeEventListener("dispose",je),function(e){(function(e){const t=ue.get(e).programs;void 0!==t&&(t.forEach((function(e){xe.releaseProgram(e)})),e.isShaderMaterial&&xe.releaseShaderCache(e))})(e),ue.remove(e)}(t)}this.xr=Ie,this.getContext=function(){return De},this.getContextAttributes=function(){return De.getContextAttributes()},this.forceContextLoss=function(){const e=ae.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=ae.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(e){void 0!==e&&(G=e,this.setSize(H,W,!1))},this.getSize=function(e){return e.set(H,W)},this.setSize=function(e,n,r=!0){Ie.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=e,W=n,t.width=Math.floor(e*G),t.height=Math.floor(n*G),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(H*G,W*G).floor()},this.setDrawingBufferSize=function(e,n,r){H=e,W=n,G=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(P)},this.getViewport=function(e){return e.copy(q)},this.setViewport=function(e,t,n,r){e.isVector4?q.set(e.x,e.y,e.z,e.w):q.set(e,t,n,r),le.viewport(P.copy(q).multiplyScalar(G).floor())},this.getScissor=function(e){return e.copy(J)},this.setScissor=function(e,t,n,r){e.isVector4?J.set(e.x,e.y,e.z,e.w):J.set(e,t,n,r),le.scissor(L.copy(J).multiplyScalar(G).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(e){le.setScissorTest(Y=e)},this.setOpaqueSort=function(e){X=e},this.setTransparentSort=function(e){K=e},this.getClearColor=function(e){return e.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor.apply(Ce,arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha.apply(Ce,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==M){const t=M.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=M.texture.type,t=e===I||e===F||e===O||e===V||1017===e||1018===e,n=Ce.getClearColor(),r=Ce.getClearAlpha(),i=n.r,s=n.g,a=n.b,o=ue.get(M).__webglFramebuffer;t?(y[0]=i,y[1]=s,y[2]=a,y[3]=r,De.clearBufferuiv(De.COLOR,o,y)):(v[0]=i,v[1]=s,v[2]=a,v[3]=r,De.clearBufferiv(De.COLOR,o,v))}else r|=De.COLOR_BUFFER_BIT}t&&(r|=De.DEPTH_BUFFER_BIT),n&&(r|=De.STENCIL_BUFFER_BIT),De.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Fe,!1),t.removeEventListener("webglcontextrestored",Be,!1),t.removeEventListener("webglcontextcreationerror",Ue,!1),we.dispose(),Se.dispose(),ue.dispose(),pe.dispose(),de.dispose(),ve.dispose(),Pe.dispose(),Le.dispose(),xe.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",He),Ie.removeEventListener("sessionend",We),ee&&(ee.dispose(),ee=null),Ge.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=ie);const a=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=ie),he.resetTextureUnits();const s=t.fog,a=r.isMeshStandardMaterial?t.environment:null,o=null===M?_.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:ye,l=(r.isMeshStandardMaterial?de:pe).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,d=!!n.morphAttributes.color,f=r.toneMapped?_.toneMapping:m,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,v=ue.get(r),x=b.state.lights;if(!0===Z&&(!0===Q||e!==k)){const t=e===k&&r.id===A;_e.setState(r,e,t)}let w=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==x.state.version||v.outputColorSpace!==o||i.isInstancedMesh&&!1===v.instancing?w=!0:i.isInstancedMesh||!0!==v.instancing?i.isSkinnedMesh&&!1===v.skinning?w=!0:i.isSkinnedMesh||!0!==v.skinning?v.envMap!==l||!0===r.fog&&v.fog!==s?w=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===_e.numPlanes&&v.numIntersection===_e.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==h||v.morphNormals!==p||v.morphColors!==d||v.toneMapping!==f||!0===oe.isWebGL2&&v.morphTargetsCount!==y)&&(w=!0):w=!0:w=!0:w=!0:(w=!0,v.__version=r.version);let S=v.currentProgram;!0===w&&(S=Ye(r,t,i));let E=!1,C=!1,T=!1;const P=S.getUniforms(),L=v.uniforms;if(le.useProgram(S.program)&&(E=!0,C=!0,T=!0),r.id!==A&&(A=r.id,C=!0),E||k!==e){if(P.setValue(De,"projectionMatrix",e.projectionMatrix),oe.logarithmicDepthBuffer&&P.setValue(De,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),k!==e&&(k=e,C=!0,T=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=P.map.cameraPosition;void 0!==t&&t.setValue(De,re.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&P.setValue(De,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&P.setValue(De,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){P.setOptional(De,i,"bindMatrix"),P.setOptional(De,i,"bindMatrixInverse");const e=i.skeleton;e&&(oe.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),P.setValue(De,"boneTexture",e.boneTexture,he),P.setValue(De,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const D=n.morphAttributes;var N,R;if((void 0!==D.position||void 0!==D.normal||void 0!==D.color&&!0===oe.isWebGL2)&&Te.update(i,n,S),(C||v.receiveShadow!==i.receiveShadow)&&(v.receiveShadow=i.receiveShadow,P.setValue(De,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),C&&(P.setValue(De,"toneMappingExposure",_.toneMappingExposure),v.needsLights&&(R=T,(N=L).ambientLightColor.needsUpdate=R,N.lightProbe.needsUpdate=R,N.directionalLights.needsUpdate=R,N.directionalLightShadows.needsUpdate=R,N.pointLights.needsUpdate=R,N.pointLightShadows.needsUpdate=R,N.spotLights.needsUpdate=R,N.spotLightShadows.needsUpdate=R,N.rectAreaLights.needsUpdate=R,N.hemisphereLights.needsUpdate=R),s&&!0===r.fog&&be.refreshFogUniforms(L,s),be.refreshMaterialUniforms(L,r,G,W,ee),_s.upload(De,v.uniformsList,L,he)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(_s.upload(De,v.uniformsList,L,he),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&P.setValue(De,"center",i.center),P.setValue(De,"modelViewMatrix",i.modelViewMatrix),P.setValue(De,"normalMatrix",i.normalMatrix),P.setValue(De,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(oe.isWebGL2){const n=e[t];Le.update(n,S),Le.bind(n,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return S}(e,t,n,r,i);le.setMaterial(r,a);let l=n.index,c=1;!0===r.wireframe&&(l=me.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let p=u.start*c,d=(u.start+u.count)*c;null!==s&&(p=Math.max(p,s.start*c),d=Math.min(d,(s.start+s.count)*c)),null!==l?(p=Math.max(p,0),d=Math.min(d,l.count)):null!=h&&(p=Math.max(p,0),d=Math.min(d,h.count));const f=d-p;if(f<0||f===1/0)return;let g;Pe.setup(i,r,o,n,l);let y=Me;if(null!==l&&(g=fe.get(l),y=Ae,y.setIndex(g)),i.isMesh)!0===r.wireframe?(le.setLineWidth(r.wireframeLinewidth*se()),y.setMode(De.LINES)):y.setMode(De.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),le.setLineWidth(e*se()),i.isLineSegments?y.setMode(De.LINES):i.isLineLoop?y.setMode(De.LINE_LOOP):y.setMode(De.LINE_STRIP)}else i.isPoints?y.setMode(De.POINTS):i.isSprite&&y.setMode(De.TRIANGLES);if(i.isInstancedMesh)y.renderInstances(p,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);y.renderInstances(p,f,t)}else y.render(p,f)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===c&&!1===e.forceSinglePass?(e.side=l,e.needsUpdate=!0,Ye(e,t,n),e.side=o,e.needsUpdate=!0,Ye(e,t,n),e.side=c):Ye(e,t,n)}b=Se.get(e),b.init(),S.push(b),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(b.pushLight(e),e.castShadow&&b.pushShadow(e))})),b.setupLights(_.useLegacyLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++)n(r[i],e,t);else n(r,e,t)})),S.pop(),b=null};let ze=null;function He(){Ge.stop()}function We(){Ge.start()}const Ge=new Ur;function Xe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)b.pushLight(e),e.castShadow&&b.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||$.intersectsSprite(e)){r&&re.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te);const t=ve.update(e),i=e.material;i.visible&&x.push(e,t,i,n,re.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||$.intersectsObject(e))){e.isSkinnedMesh&&e.skeleton.frame!==ce.render.frame&&(e.skeleton.update(),e.skeleton.frame=ce.render.frame);const t=ve.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),re.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),re.copy(t.boundingSphere.center)),re.applyMatrix4(e.matrixWorld).applyMatrix4(te)),Array.isArray(i)){const r=t.groups;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i[a.materialIndex];o&&o.visible&&x.push(e,t,o,n,re.z,a)}}else i.visible&&x.push(e,t,i,n,re.z,null)}const i=e.children;for(let e=0,s=i.length;e<s;e++)Xe(i[e],t,n,r)}function Ke(e,t,n,r){const i=e.opaque,s=e.transmissive,a=e.transparent;b.setupLightsView(n),!0===Z&&_e.setGlobalState(_.clippingPlanes,n),s.length>0&&function(e,t,n,r){const i=oe.isWebGL2;null===ee&&(ee=new ut(1,1,{generateMipmaps:!0,type:ae.has("EXT_color_buffer_half_float")?U:I,minFilter:R,samples:i&&!0===u?4:0})),_.getDrawingBufferSize(ne),i?ee.setSize(ne.x,ne.y):ee.setSize(Oe(ne.x),Oe(ne.y));const s=_.getRenderTarget();_.setRenderTarget(ee),_.getClearColor(N),z=_.getClearAlpha(),z<1&&_.setClearColor(16777215,.5),_.clear();const a=_.toneMapping;_.toneMapping=m,qe(e,n,r),he.updateMultisampleRenderTarget(ee),he.updateRenderTargetMipmap(ee);let o=!1;for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.object,a=i.geometry,u=i.material,h=i.group;if(u.side===c&&s.layers.test(r.layers)){const e=u.side;u.side=l,u.needsUpdate=!0,Je(s,n,r,a,u,h),u.side=e,u.needsUpdate=!0,o=!0}}!0===o&&(he.updateMultisampleRenderTarget(ee),he.updateRenderTargetMipmap(ee)),_.setRenderTarget(s),_.setClearColor(N,z),_.toneMapping=a}(i,s,t,n),r&&le.viewport(P.copy(r)),i.length>0&&qe(i,t,n),s.length>0&&qe(s,t,n),a.length>0&&qe(a,t,n),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function qe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=s.object,o=s.geometry,l=null===r?s.material:r,c=s.group;a.layers.test(n.layers)&&Je(a,t,n,o,l,c)}}function Je(e,t,n,r,i,s){e.onBeforeRender(_,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(_,t,n,r,e,s),!0===i.transparent&&i.side===c&&!1===i.forceSinglePass?(i.side=l,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,s),i.side=o,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,s),i.side=c):_.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(_,t,n,r,i,s)}function Ye(e,t,n){!0!==t.isScene&&(t=ie);const r=ue.get(e),i=b.state.lights,s=b.state.shadowsArray,a=i.state.version,o=xe.getParameters(e,i.state,s,t,n),l=xe.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?de:pe).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",je),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return $e(e,o),u}else o.uniforms=xe.getUniforms(e),e.onBuild(n,o,_),e.onBeforeCompile(o,_),u=xe.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=_e.uniform),$e(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const p=u.getUniforms(),d=_s.seqWithValue(p.seq,h);return r.currentProgram=u,r.uniformsList=d,u}function $e(e,t){const n=ue.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ge.setAnimationLoop((function(e){ze&&ze(e)})),"undefined"!=typeof self&&Ge.setContext(self),this.setAnimationLoop=function(e){ze=e,Ie.setAnimationLoop(e),null===e?Ge.stop():Ge.start()},Ie.addEventListener("sessionstart",He),Ie.addEventListener("sessionend",We),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===E)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ie.enabled&&!0===Ie.isPresenting&&(t=Ie.updateCameraXR(t)),!0===e.isScene&&e.onBeforeRender(_,e,t,M),b=Se.get(e,S.length),b.init(),S.push(b),te.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),$.setFromProjectionMatrix(te),Q=this.localClippingEnabled,Z=_e.init(this.clippingPlanes,Q),x=we.get(e,w.length),x.init(),w.push(x),Xe(e,t,0,_.sortObjects),x.finish(),!0===_.sortObjects&&x.sort(X,K),!0===Z&&_e.beginShadows();const n=b.state.shadowsArray;if(Ee.render(n,e,t),!0===Z&&_e.endShadows(),!0===this.info.autoReset&&this.info.reset(),this.info.render.frame++,Ce.render(x,e),b.setupLights(_.useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ke(x,e,r,r.viewport)}}else Ke(x,e,t);null!==M&&(he.updateMultisampleRenderTarget(M),he.updateRenderTargetMipmap(M)),!0===e.isScene&&e.onAfterRender(_,e,t),Pe.resetDefaultState(),A=-1,k=null,S.pop(),b=S.length>0?S[S.length-1]:null,w.pop(),x=w.length>0?w[w.length-1]:null},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(e,t,n){ue.get(e.texture).__webglTexture=t,ue.get(e.depthTexture).__webglTexture=n;const r=ue.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===ae.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=ue.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){M=e,C=t,T=n;let r=!0,i=null,s=!1,a=!1;if(e){const n=ue.get(e);void 0!==n.__useDefaultFramebuffer?(le.bindFramebuffer(De.FRAMEBUFFER,null),r=!1):void 0===n.__webglFramebuffer?he.setupRenderTarget(e):n.__hasExternalTextures&&he.rebindTextures(e,ue.get(e.texture).__webglTexture,ue.get(e.depthTexture).__webglTexture);const o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(a=!0);const l=ue.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],s=!0):i=oe.isWebGL2&&e.samples>0&&!1===he.useMultisampledRTT(e)?ue.get(e).__webglMultisampledFramebuffer:l,P.copy(e.viewport),L.copy(e.scissor),D=e.scissorTest}else P.copy(q).multiplyScalar(G).floor(),L.copy(J).multiplyScalar(G).floor(),D=Y;if(le.bindFramebuffer(De.FRAMEBUFFER,i)&&oe.drawBuffers&&r&&le.drawBuffers(e,i),le.viewport(P),le.scissor(L),le.setScissorTest(D),s){const r=ue.get(e.texture);De.framebufferTexture2D(De.FRAMEBUFFER,De.COLOR_ATTACHMENT0,De.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(a){const r=ue.get(e.texture),i=t||0;De.framebufferTextureLayer(De.FRAMEBUFFER,De.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}A=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=ue.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){le.bindFramebuffer(De.FRAMEBUFFER,o);try{const a=e.texture,o=a.format,l=a.type;if(o!==j&&ke.convert(o)!==De.getParameter(De.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===U&&(ae.has("EXT_color_buffer_half_float")||oe.isWebGL2&&ae.has("EXT_color_buffer_float"));if(!(l===I||ke.convert(l)===De.getParameter(De.IMPLEMENTATION_COLOR_READ_TYPE)||l===B&&(oe.isWebGL2||ae.has("OES_texture_float")||ae.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&De.readPixels(t,n,r,i,ke.convert(o),ke.convert(l),s)}finally{const e=null!==M?ue.get(M).__webglFramebuffer:null;le.bindFramebuffer(De.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);he.setTexture2D(t,0),De.copyTexSubImage2D(De.TEXTURE_2D,n,0,0,e.x,e.y,i,s),le.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,a=ke.convert(n.format),o=ke.convert(n.type);he.setTexture2D(n,0),De.pixelStorei(De.UNPACK_FLIP_Y_WEBGL,n.flipY),De.pixelStorei(De.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),De.pixelStorei(De.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?De.texSubImage2D(De.TEXTURE_2D,r,e.x,e.y,i,s,a,o,t.image.data):t.isCompressedTexture?De.compressedTexSubImage2D(De.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):De.texSubImage2D(De.TEXTURE_2D,r,e.x,e.y,a,o,t.image),0===r&&n.generateMipmaps&&De.generateMipmap(De.TEXTURE_2D),le.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(_.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=ke.convert(r.format),c=ke.convert(r.type);let u;if(r.isData3DTexture)he.setTexture3D(r,0),u=De.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");he.setTexture2DArray(r,0),u=De.TEXTURE_2D_ARRAY}De.pixelStorei(De.UNPACK_FLIP_Y_WEBGL,r.flipY),De.pixelStorei(De.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),De.pixelStorei(De.UNPACK_ALIGNMENT,r.unpackAlignment);const h=De.getParameter(De.UNPACK_ROW_LENGTH),p=De.getParameter(De.UNPACK_IMAGE_HEIGHT),d=De.getParameter(De.UNPACK_SKIP_PIXELS),f=De.getParameter(De.UNPACK_SKIP_ROWS),m=De.getParameter(De.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;De.pixelStorei(De.UNPACK_ROW_LENGTH,g.width),De.pixelStorei(De.UNPACK_IMAGE_HEIGHT,g.height),De.pixelStorei(De.UNPACK_SKIP_PIXELS,e.min.x),De.pixelStorei(De.UNPACK_SKIP_ROWS,e.min.y),De.pixelStorei(De.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?De.texSubImage3D(u,i,t.x,t.y,t.z,s,a,o,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),De.compressedTexSubImage3D(u,i,t.x,t.y,t.z,s,a,o,l,g.data)):De.texSubImage3D(u,i,t.x,t.y,t.z,s,a,o,l,c,g),De.pixelStorei(De.UNPACK_ROW_LENGTH,h),De.pixelStorei(De.UNPACK_IMAGE_HEIGHT,p),De.pixelStorei(De.UNPACK_SKIP_PIXELS,d),De.pixelStorei(De.UNPACK_SKIP_ROWS,f),De.pixelStorei(De.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&De.generateMipmap(u),le.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?he.setTextureCube(e,0):e.isData3DTexture?he.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?he.setTexture2DArray(e,0):he.setTexture2D(e,0),le.unbindTexture()},this.resetState=function(){C=0,T=0,M=null,le.reset(),Pe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _e}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ge?pe:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===pe?ge:ye}}(class extends ga{}).prototype.isWebGL1Renderer=!0;class ya{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new In(e),this.density=t}clone(){return new ya(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class va{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new In(e),this.near=t,this.far=n}clone(){return new va(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class xa extends gn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class ba{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=be,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Pe()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Pe()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Pe()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wa=new ft;class Sa{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)wa.fromBufferAttribute(this,t),wa.applyMatrix4(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)wa.fromBufferAttribute(this,t),wa.applyNormalMatrix(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)wa.fromBufferAttribute(this,t),wa.transformDirection(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}setX(e,t){return this.normalized&&(t=Be(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Be(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Be(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Be(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fe(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fe(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fe(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fe(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Be(t,this.array),n=Be(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Be(t,this.array),n=Be(n,this.array),r=Be(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Be(t,this.array),n=Be(n,this.array),r=Be(r,this.array),i=Be(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Hn(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Sa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class _a extends Pn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new In(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ea;const Ca=new ft,Ta=new ft,Ma=new ft,Aa=new Ve,ka=new Ve,Pa=new Wt,La=new ft,Da=new ft,Na=new ft,Ra=new Ve,Ia=new Ve,Oa=new Ve;class Fa extends gn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Ea){Ea=new er;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new ba(e,5);Ea.setIndex([0,1,2,0,2,3]),Ea.setAttribute("position",new Sa(t,3,0,!1)),Ea.setAttribute("uv",new Sa(t,2,3,!1))}this.geometry=Ea,this.material=void 0!==e?e:new _a,this.center=new Ve(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ta.setFromMatrixScale(this.matrixWorld),Pa.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ma.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ta.multiplyScalar(-Ma.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;Ba(La.set(-.5,-.5,0),Ma,s,Ta,r,i),Ba(Da.set(.5,-.5,0),Ma,s,Ta,r,i),Ba(Na.set(.5,.5,0),Ma,s,Ta,r,i),Ra.set(0,0),Ia.set(1,0),Oa.set(1,1);let a=e.ray.intersectTriangle(La,Da,Na,!1,Ca);if(null===a&&(Ba(Da.set(-.5,.5,0),Ma,s,Ta,r,i),Ia.set(0,1),a=e.ray.intersectTriangle(La,Na,Da,!1,Ca),null===a))return;const o=e.ray.origin.distanceTo(Ca);o<e.near||o>e.far||t.push({distance:o,point:Ca.clone(),uv:An.getInterpolation(Ca,La,Da,Na,Ra,Ia,Oa,new Ve),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Ba(e,t,n,r,i,s){Aa.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(ka.x=s*Aa.x-i*Aa.y,ka.y=i*Aa.x+s*Aa.y):ka.copy(Aa),e.copy(t),e.x+=ka.x,e.y+=ka.y,e.applyMatrix4(Pa)}const Ua=new ft,Va=new ft;class ja extends gn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Ua.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Ua);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ua.setFromMatrixPosition(e.matrixWorld),Va.setFromMatrixPosition(this.matrixWorld);const n=Ua.distanceTo(Va)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}const za=new ft,Ha=new ct,Wa=new ct,Ga=new ft,Xa=new Wt,Ka=new ft,qa=new It,Ja=new Wt,Ya=new Ht;class $a extends vr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new yt),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)Ka.fromBufferAttribute(t,e),this.applyBoneTransform(e,Ka),this.boundingBox.expandByPoint(Ka)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new It),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)Ka.fromBufferAttribute(t,e),this.applyBoneTransform(e,Ka),this.boundingSphere.expandByPoint(Ka)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),qa.copy(this.boundingSphere),qa.applyMatrix4(r),!1!==e.ray.intersectsSphere(qa)&&(Ja.copy(r).invert(),Ya.copy(e.ray).applyMatrix4(Ja),null!==this.boundingBox&&!1===Ya.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Ya)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ct,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Ha.fromBufferAttribute(r.attributes.skinIndex,e),Wa.fromBufferAttribute(r.attributes.skinWeight,e),za.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Wa.getComponent(e);if(0!==r){const i=Ha.getComponent(e);Xa.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Ga.copy(za).applyMatrix4(Xa),r)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Za extends gn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Qa extends lt{constructor(e=null,t=1,n=1,r,i,s,a,o,l=k,c=k,u,h){super(null,s,a,o,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const eo=new Wt,to=new Wt;class no{constructor(e=[],t=[]){this.uuid=Pe(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Wt;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:to;eo.multiplyMatrices(i,t[r]),eo.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new no(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Ie(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Qa(t,e,e,j,B);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Za),this.bones.push(i),this.boneInverses.push((new Wt).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}class ro extends Hn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const io=new Wt,so=new Wt,ao=[],oo=new yt,lo=new Wt,co=new vr,uo=new It;class ho extends vr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ro(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,lo)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new yt),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,io),oo.copy(e.boundingBox).applyMatrix4(io),this.boundingBox.union(oo)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new It),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,io),uo.copy(e.boundingSphere).applyMatrix4(io),this.boundingSphere.union(uo)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(co.geometry=this.geometry,co.material=this.material,void 0!==co.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),uo.copy(this.boundingSphere),uo.applyMatrix4(n),!1!==e.ray.intersectsSphere(uo)))for(let i=0;i<r;i++){this.getMatrixAt(i,io),so.multiplyMatrices(n,io),co.matrixWorld=so,co.raycast(e,ao);for(let e=0,n=ao.length;e<n;e++){const n=ao[e];n.instanceId=i,n.object=this,t.push(n)}ao.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ro(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class po extends Pn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new In(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const fo=new ft,mo=new ft,go=new Wt,yo=new Ht,vo=new It;class xo extends gn{constructor(e=new er,t=new po){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)fo.fromBufferAttribute(t,e-1),mo.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=fo.distanceTo(mo);e.setAttribute("lineDistance",new Xn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),vo.copy(n.boundingSphere),vo.applyMatrix4(r),vo.radius+=i,!1===e.ray.intersectsSphere(vo))return;go.copy(r).invert(),yo.copy(e.ray).applyMatrix4(go);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new ft,c=new ft,u=new ft,h=new ft,p=this.isLineSegments?2:1,d=n.index,f=n.attributes.position;if(null!==d)for(let n=Math.max(0,s.start),r=Math.min(d.count,s.start+s.count)-1;n<r;n+=p){const r=d.getX(n),i=d.getX(n+1);if(l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i),yo.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(h);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,s.start),r=Math.min(f.count,s.start+s.count)-1;n<r;n+=p){if(l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1),yo.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const bo=new ft,wo=new ft;class So extends xo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)bo.fromBufferAttribute(t,e),wo.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+bo.distanceTo(wo);e.setAttribute("lineDistance",new Xn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class _o extends xo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Eo extends Pn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new In(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Co=new Wt,To=new Ht,Mo=new It,Ao=new ft;class ko extends gn{constructor(e=new er,t=new Eo){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mo.copy(n.boundingSphere),Mo.applyMatrix4(r),Mo.radius+=i,!1===e.ray.intersectsSphere(Mo))return;Co.copy(r).invert(),To.copy(e.ray).applyMatrix4(Co);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,s.start),i=Math.min(l.count,s.start+s.count);n<i;n++){const i=l.getX(n);Ao.fromBufferAttribute(c,i),Po(Ao,i,o,r,e,t,this)}else for(let n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);n<i;n++)Ao.fromBufferAttribute(c,n),Po(Ao,n,o,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Po(e,t,n,r,i,s,a){const o=To.distanceSqToPoint(e);if(o<n){const n=new ft;To.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:a})}}class Lo extends lt{constructor(e,t,n,r,i,s,a,o,l,c,u,h){super(null,s,a,o,l,c,r,i,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Do extends Lo{constructor(e,t,n,r,i,s){super(e,t,n,i,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=M}}class No extends lt{constructor(e,t,n,r,i,s,a,o,l){super(e,t,n,r,i,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ro{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let a,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),a=n[r]-s,a<0)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===s)return r/(i-1);const c=n[r];return(r+(s-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),a=this.getPoint(i),o=t||(s.isVector2?new Ve:new ft);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ft,r=[],i=[],s=[],a=new ft,o=new Wt;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new ft)}i[0]=new ft,s[0]=new ft;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),s[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),s[t]=s[t-1].clone(),a.crossVectors(r[t-1],r[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Le(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(o.makeRotationAxis(a,e))}s[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Le(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Io extends Ro{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){const n=t||new Ve,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function Oo(){let e=0,t=0,n=0,r=0;function i(i,s,a,o){e=i,t=a,n=-3*i+3*s-2*a-o,r=2*i-2*s+a+o}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+o)+(r-n)/o;l*=a,c*=a,i(t,n,l,c)},calc:function(i){const s=i*i;return e+t*i+n*s+r*(s*i)}}}const Fo=new ft,Bo=new Oo,Uo=new Oo,Vo=new Oo;class jo extends Ro{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ft){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let a,o,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?a=r[(l-1)%i]:(Fo.subVectors(r[0],r[1]).add(r[0]),a=Fo);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?o=r[(l+2)%i]:(Fo.subVectors(r[i-1],r[i-2]).add(r[i-1]),o=Fo),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Bo.initNonuniformCatmullRom(a.x,u.x,h.x,o.x,t,n,r),Uo.initNonuniformCatmullRom(a.y,u.y,h.y,o.y,t,n,r),Vo.initNonuniformCatmullRom(a.z,u.z,h.z,o.z,t,n,r)}else"catmullrom"===this.curveType&&(Bo.initCatmullRom(a.x,u.x,h.x,o.x,this.tension),Uo.initCatmullRom(a.y,u.y,h.y,o.y,this.tension),Vo.initCatmullRom(a.z,u.z,h.z,o.z,this.tension));return n.set(Bo.calc(c),Uo.calc(c),Vo.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new ft).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zo(e,t,n,r,i){const s=.5*(r-t),a=.5*(i-n),o=e*e;return(2*n-2*r+s+a)*(e*o)+(-3*n+3*r-2*s-a)*o+s*e+n}function Ho(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Wo(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Go extends Ro{constructor(e=new Ve,t=new Ve,n=new Ve,r=new Ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Ve){const n=t,r=this.v0,i=this.v1,s=this.v2,a=this.v3;return n.set(Wo(e,r.x,i.x,s.x,a.x),Wo(e,r.y,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Xo extends Ro{constructor(e=new Ve,t=new Ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ve){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ko extends Ro{constructor(e=new Ve,t=new Ve,n=new Ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ve){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Ho(e,r.x,i.x,s.x),Ho(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qo extends Ro{constructor(e=new ft,t=new ft,n=new ft){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ft){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Ho(e,r.x,i.x,s.x),Ho(e,r.y,i.y,s.y),Ho(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Jo extends Ro{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ve){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),a=i-s,o=r[0===s?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return n.set(zo(a,o.x,l.x,c.x,u.x),zo(a,o.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ve).fromArray(n))}return this}}var Yo=Object.freeze({__proto__:null,ArcCurve:class extends Io{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:jo,CubicBezierCurve:Go,CubicBezierCurve3:class extends Ro{constructor(e=new ft,t=new ft,n=new ft,r=new ft){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ft){const n=t,r=this.v0,i=this.v1,s=this.v2,a=this.v3;return n.set(Wo(e,r.x,i.x,s.x,a.x),Wo(e,r.y,i.y,s.y,a.y),Wo(e,r.z,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:Io,LineCurve:Xo,LineCurve3:class extends Ro{constructor(e=new ft,t=new ft){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ft){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ft){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Ko,QuadraticBezierCurve3:qo,SplineCurve:Jo});class $o extends Ro{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Xo(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,s=this.curves[i],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],a=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Yo[n.type]).fromJSON(n))}return this}}class Zo extends $o{constructor(e){super(),this.type="Path",this.currentPoint=new Ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Xo(this.currentPoint.clone(),new Ve(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Ko(this.currentPoint.clone(),new Ve(e,t),new Ve(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const a=new Go(this.currentPoint.clone(),new Ve(e,t),new Ve(n,r),new Ve(i,s));return this.curves.push(a),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Jo(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,s,a,o),this}absellipse(e,t,n,r,i,s,a,o){const l=new Io(e,t,n,r,i,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Qo extends er{constructor(e=[new Ve(0,-.5),new Ve(.5,0),new Ve(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Le(r,0,2*Math.PI);const i=[],s=[],a=[],o=[],l=[],c=1/t,u=new ft,h=new Ve,p=new ft,d=new ft,f=new ft;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,p.x=1*g,p.y=-m,p.z=0*g,f.copy(p),p.normalize(),o.push(p.x,p.y,p.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,p.x=1*g,p.y=-m,p.z=0*g,d.copy(p),p.x+=f.x,p.y+=f.y,p.z+=f.z,p.normalize(),o.push(p.x,p.y,p.z),f.copy(d)}for(let i=0;i<=t;i++){const p=n+i*c*r,d=Math.sin(p),f=Math.cos(p);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*d,u.y=e[n].y,u.z=e[n].x*f,s.push(u.x,u.y,u.z),h.x=i/t,h.y=n/(e.length-1),a.push(h.x,h.y);const r=o[3*n+0]*d,c=o[3*n+1],p=o[3*n+0]*f;l.push(r,c,p)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,s=r,a=r+e.length,o=r+e.length+1,l=r+1;i.push(s,a,l),i.push(o,l,a)}this.setIndex(i),this.setAttribute("position",new Xn(s,3)),this.setAttribute("uv",new Xn(a,2)),this.setAttribute("normal",new Xn(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qo(e.points,e.segments,e.phiStart,e.phiLength)}}class el extends Qo{constructor(e=1,t=1,n=4,r=8){const i=new Zo;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new el(e.radius,e.length,e.capSegments,e.radialSegments)}}class tl extends er{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],s=[],a=[],o=[],l=new ft,c=new Ve;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const h=n+i/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[u]/e+1)/2,c.y=(s[u+1]/e+1)/2,o.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Xn(s,3)),this.setAttribute("normal",new Xn(a,3)),this.setAttribute("uv",new Xn(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tl(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class nl extends er{constructor(e=1,t=1,n=1,r=32,i=1,s=!1,a=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],p=[];let d=0;const f=[],m=n/2;let g=0;function y(n){const i=d,s=new Ve,f=new ft;let y=0;const v=!0===n?e:t,x=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*x,0),h.push(0,x,0),p.push(.5,.5),d++;const b=d;for(let e=0;e<=r;e++){const t=e/r*o+a,n=Math.cos(t),i=Math.sin(t);f.x=v*i,f.y=m*x,f.z=v*n,u.push(f.x,f.y,f.z),h.push(0,x,0),s.x=.5*n+.5,s.y=.5*i*x+.5,p.push(s.x,s.y),d++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){const s=new ft,y=new ft;let v=0;const x=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,v=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*o+a,l=Math.sin(i),f=Math.cos(i);y.x=v*l,y.y=-g*n+m,y.z=v*f,u.push(y.x,y.y,y.z),s.set(l,x,f).normalize(),h.push(s.x,s.y,s.z),p.push(t,1-g),c.push(d++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],s=f[t][e+1];c.push(n,r,s),c.push(r,i,s),v+=6}l.addGroup(g,v,0),g+=v}(),!1===s&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Xn(u,3)),this.setAttribute("normal",new Xn(h,3)),this.setAttribute("uv",new Xn(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rl extends nl{constructor(e=1,t=1,n=32,r=1,i=!1,s=0,a=2*Math.PI){super(0,e,t,n,r,i,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:s,thetaLength:a}}static fromJSON(e){return new rl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class il extends er{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],s=[];function a(e,t,n,r){const i=r+1,s=[];for(let r=0;r<=i;r++){s[r]=[];const a=e.clone().lerp(n,r/i),o=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)s[r][e]=0===e&&r===i?a:a.clone().lerp(o,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(o(s[e][n+1]),o(s[e+1][n]),o(s[e][n])):(o(s[e][n+1]),o(s[e+1][n+1]),o(s[e+1][n]))}}function o(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new ft,r=new ft,i=new ft;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],r),l(t[s+2],i),a(n,r,i,e)}(r),function(e){const t=new ft;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new ft;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);s.push(r,1-a)}var t;(function(){const e=new ft,t=new ft,n=new ft,r=new ft,a=new Ve,o=new Ve,l=new Ve;for(let h=0,p=0;h<i.length;h+=9,p+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(s[p+0],s[p+1]),o.set(s[p+2],s[p+3]),l.set(s[p+4],s[p+5]),r.copy(e).add(t).add(n).divideScalar(3);const d=u(r);c(a,p+0,e,d),c(o,p+2,t,d),c(l,p+4,n,d)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],r=s[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),r<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new Xn(i,3)),this.setAttribute("normal",new Xn(i.slice(),3)),this.setAttribute("uv",new Xn(s,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new il(e.vertices,e.indices,e.radius,e.details)}}class sl extends il{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sl(e.radius,e.detail)}}const al=new ft,ol=new ft,ll=new ft,cl=new An;class ul extends Zo{constructor(e){super(e),this.uuid=Pe(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Zo).fromJSON(n))}return this}}function hl(e,t,n,r,i){let s,a;if(i===function(e,t,n,r){let i=0;for(let s=t,a=n-r;s<n;s+=r)i+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return i}(e,t,n,r)>0)for(s=t;s<n;s+=r)a=Dl(s,e[s],e[s+1],a);else for(s=n-r;s>=t;s-=r)a=Dl(s,e[s],e[s+1],a);return a&&Tl(a,a.next)&&(Nl(a),a=a.next),a}function pl(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Tl(r,r.next)&&0!==Cl(r.prev,r,r.next))r=r.next;else{if(Nl(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function dl(e,t,n,r,i,s,a){if(!e)return;!a&&s&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=wl(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,s,a,o,l,c=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,r=n,o=0,t=0;t<c&&(o++,r=r.nextZ,r);t++);for(l=c;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,s);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?ml(e,r,i,s):fl(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Nl(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?dl(e=gl(pl(e),t,n),t,n,r,i,s,2):2===a&&yl(e,t,n,r,i,s):dl(pl(e),t,n,r,i,s,1);break}}function fl(e){const t=e.prev,n=e,r=e.next;if(Cl(t,n,r)>=0)return!1;const i=t.x,s=n.x,a=r.x,o=t.y,l=n.y,c=r.y,u=i<s?i<a?i:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,p=i>s?i>a?i:a:s>a?s:a,d=o>l?o>c?o:c:l>c?l:c;let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=p&&f.y>=h&&f.y<=d&&_l(i,o,s,l,a,c,f.x,f.y)&&Cl(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function ml(e,t,n,r){const i=e.prev,s=e,a=e.next;if(Cl(i,s,a)>=0)return!1;const o=i.x,l=s.x,c=a.x,u=i.y,h=s.y,p=a.y,d=o<l?o<c?o:c:l<c?l:c,f=u<h?u<p?u:p:h<p?h:p,m=o>l?o>c?o:c:l>c?l:c,g=u>h?u>p?u:p:h>p?h:p,y=wl(d,f,t,n,r),v=wl(m,g,t,n,r);let x=e.prevZ,b=e.nextZ;for(;x&&x.z>=y&&b&&b.z<=v;){if(x.x>=d&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&_l(o,u,l,h,c,p,x.x,x.y)&&Cl(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=d&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&_l(o,u,l,h,c,p,b.x,b.y)&&Cl(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=y;){if(x.x>=d&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==a&&_l(o,u,l,h,c,p,x.x,x.y)&&Cl(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=v;){if(b.x>=d&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&_l(o,u,l,h,c,p,b.x,b.y)&&Cl(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function gl(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!Tl(i,s)&&Ml(i,r,r.next,s)&&Pl(i,s)&&Pl(s,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(s.i/n|0),Nl(r),Nl(r.next),r=e=s),r=r.next}while(r!==e);return pl(r)}function yl(e,t,n,r,i,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&El(a,e)){let o=Ll(a,e);return a=pl(a,a.next),o=pl(o,o.next),dl(a,t,n,r,i,s,0),void dl(o,t,n,r,i,s,0)}e=e.next}a=a.next}while(a!==e)}function vl(e,t){return e.x-t.x}function xl(e,t){const n=function(e,t){let n,r=t,i=-1/0;const s=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const e=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=s&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===s))return n}r=r.next}while(r!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,h=1/0;r=n;do{s>=r.x&&r.x>=l&&s!==r.x&&_l(a<c?s:i,a,l,c,a<c?i:s,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(s-r.x),Pl(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&bl(n,r)))&&(n=r,h=u)),r=r.next}while(r!==o);return n}(e,t);if(!n)return t;const r=Ll(n,e);return pl(r,r.next),pl(n,n.next)}function bl(e,t){return Cl(e.prev,e,t.prev)<0&&Cl(t.next,e,e.next)<0}function wl(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Sl(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function _l(e,t,n,r,i,s,a,o){return(i-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(r-o)>=(n-a)*(t-o)&&(n-a)*(s-o)>=(i-a)*(r-o)}function El(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ml(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Pl(e,t)&&Pl(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Cl(e.prev,e,t.prev)||Cl(e,t.prev,t))||Tl(e,t)&&Cl(e.prev,e,e.next)>0&&Cl(t.prev,t,t.next)>0)}function Cl(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Tl(e,t){return e.x===t.x&&e.y===t.y}function Ml(e,t,n,r){const i=kl(Cl(e,t,n)),s=kl(Cl(e,t,r)),a=kl(Cl(n,r,e)),o=kl(Cl(n,r,t));return i!==s&&a!==o||!(0!==i||!Al(e,n,t))||!(0!==s||!Al(e,r,t))||!(0!==a||!Al(n,e,r))||!(0!==o||!Al(n,t,r))}function Al(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function kl(e){return e>0?1:e<0?-1:0}function Pl(e,t){return Cl(e.prev,e,e.next)<0?Cl(e,t,e.next)>=0&&Cl(e,e.prev,t)>=0:Cl(e,t,e.prev)<0||Cl(e,e.next,t)<0}function Ll(e,t){const n=new Rl(e.i,e.x,e.y),r=new Rl(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function Dl(e,t,n,r){const i=new Rl(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Nl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Rl(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Il{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Il.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Ol(e),Fl(n,e);let s=e.length;t.forEach(Ol);for(let e=0;e<t.length;e++)r.push(s),s+=t[e].length,Fl(n,t[e]);const a=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let s=hl(e,0,i,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,p,d;if(r&&(s=function(e,t,n,r){const i=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*r,l=s<a-1?t[s+1]*r:e.length,c=hl(e,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Sl(c));for(i.sort(vl),s=0;s<i.length;s++)n=xl(i[s],n);return n}(e,t,s,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],p=e[t+1],h<o&&(o=h),p<l&&(l=p),h>c&&(c=h),p>u&&(u=p);d=Math.max(c-o,u-l),d=0!==d?32767/d:0}return dl(s,a,n,o,l,d,0),a}(n,r);for(let e=0;e<a.length;e+=3)i.push(a.slice(e,e+3));return i}}function Ol(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Fl(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Bl extends er{constructor(e=new ul([new Ve(.5,.5),new Ve(-.5,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)s(e[t]);function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,p=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ul;let g,y,v,x,b,w=!1;f&&(g=f.getSpacedPoints(o),w=!0,c=!1,y=f.computeFrenetFrames(o,!1),v=new ft,x=new ft,b=new ft),c||(d=0,u=0,h=0,p=0);const S=e.extractPoints(a);let _=S.shape;const E=S.holes;if(!Il.isClockWise(_)){_=_.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];Il.isClockWise(t)&&(E[e]=t.reverse())}}const C=Il.triangulateShape(_,E),T=_;for(let e=0,t=E.length;e<t;e++){const t=E[e];_=_.concat(t)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const A=_.length,k=C.length;function P(e,t,n){let r,i,s;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+o*o,h=a*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),p=Math.sqrt(l*l+c*c),d=t.x-o/h,f=t.y+a/h,m=((n.x-c/p-d)*c-(n.y+l/p-f)*l)/(a*c-o*l);r=d+a*m-e.x,i=f+o*m-e.y;const g=r*r+i*i;if(g<=2)return new Ve(r,i);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,i=a,s=Math.sqrt(u)):(r=a,i=o,s=Math.sqrt(u/2))}return new Ve(r/s,i/s)}const L=[];for(let e=0,t=T.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),L[e]=P(T[e],T[n],T[r]);const D=[];let N,R=L.concat();for(let e=0,t=E.length;e<t;e++){const t=E[e];N=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),N[e]=P(t[e],t[r],t[i]);D.push(N),R=R.concat(N)}for(let e=0;e<d;e++){const t=e/d,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,t=T.length;e<t;e++){const t=M(T[e],L[e],r);F(t.x,t.y,-n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];N=D[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],N[e],r);F(i.x,i.y,-n)}}}const I=h+p;for(let e=0;e<A;e++){const t=c?M(_[e],R[e],I):_[e];w?(x.copy(y.normals[0]).multiplyScalar(t.x),v.copy(y.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(x).add(v),F(b.x,b.y,b.z)):F(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<A;t++){const n=c?M(_[t],R[t],I):_[t];w?(x.copy(y.normals[e]).multiplyScalar(n.x),v.copy(y.binormals[e]).multiplyScalar(n.y),b.copy(g[e]).add(x).add(v),F(b.x,b.y,b.z)):F(n.x,n.y,l/o*e)}for(let e=d-1;e>=0;e--){const t=e/d,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,t=T.length;e<t;e++){const t=M(T[e],L[e],r);F(t.x,t.y,l+n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];N=D[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],N[e],r);w?F(i.x,i.y+g[o-1].y,g[o-1].x+n):F(i.x,i.y,l+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=o+2*d;e<n;e++){const n=A*e,s=A*(e+1);U(t+r+n,t+i+n,t+i+s,t+r+s)}}}function F(e,t,n){s.push(e),s.push(t),s.push(n)}function B(e,t,i){V(e),V(t),V(i);const s=r.length/3,a=m.generateTopUV(n,r,s-3,s-2,s-1);j(a[0]),j(a[1]),j(a[2])}function U(e,t,i,s){V(e),V(t),V(s),V(t),V(i),V(s);const a=r.length/3,o=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);j(o[0]),j(o[1]),j(o[3]),j(o[1]),j(o[2]),j(o[3])}function V(e){r.push(s[3*e+0]),r.push(s[3*e+1]),r.push(s[3*e+2])}function j(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=A*e;for(let e=0;e<k;e++){const n=C[e];B(n[2]+t,n[1]+t,n[0]+t)}e=o+2*d,t=A*e;for(let e=0;e<k;e++){const n=C[e];B(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<k;e++){const t=C[e];B(t[2],t[1],t[0])}for(let e=0;e<k;e++){const t=C[e];B(t[0]+A*o,t[1]+A*o,t[2]+A*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;O(T,t),t+=T.length;for(let e=0,n=E.length;e<n;e++){const n=E[e];O(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Xn(r,3)),this.setAttribute("uv",new Xn(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Yo[r.type]).fromJSON(r)),new Bl(n,e.options)}}const Ul={generateTopUV:function(e,t,n,r,i){const s=t[3*n],a=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Ve(s,a),new Ve(o,l),new Ve(c,u)]},generateSideWallUV:function(e,t,n,r,i,s){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],p=t[3*i],d=t[3*i+1],f=t[3*i+2],m=t[3*s],g=t[3*s+1],y=t[3*s+2];return Math.abs(o-u)<Math.abs(a-c)?[new Ve(a,1-l),new Ve(c,1-h),new Ve(p,1-f),new Ve(m,1-y)]:[new Ve(o,1-l),new Ve(u,1-h),new Ve(d,1-f),new Ve(g,1-y)]}};class Vl extends il{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vl(e.radius,e.detail)}}class jl extends il{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jl(e.radius,e.detail)}}class zl extends er{constructor(e=.5,t=1,n=32,r=1,i=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},n=Math.max(3,n);const a=[],o=[],l=[],c=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),p=new ft,d=new Ve;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*s;p.x=u*Math.cos(r),p.y=u*Math.sin(r),o.push(p.x,p.y,p.z),l.push(0,0,1),d.x=(p.x/t+1)/2,d.y=(p.y/t+1)/2,c.push(d.x,d.y)}u+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,s=r+n+1,o=r+n+2,l=r+1;a.push(i,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new Xn(o,3)),this.setAttribute("normal",new Xn(l,3)),this.setAttribute("uv",new Xn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zl(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Hl extends er{constructor(e=new ul([new Ve(0,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],s=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,o,t),a+=o,o=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Il.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Il.isClockWise(t)&&(u[e]=t.reverse())}const h=Il.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+a,i=t[1]+a,s=t[2]+a;n.push(r,i,s),o+=3}}this.setIndex(n),this.setAttribute("position",new Xn(r,3)),this.setAttribute("normal",new Xn(i,3)),this.setAttribute("uv",new Xn(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Hl(n,e.curveSegments)}}class Wl extends er{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],u=new ft,h=new ft,p=[],d=[],f=[],m=[];for(let p=0;p<=n;p++){const g=[],y=p/n;let v=0;0===p&&0===s?v=.5/t:p===n&&o===Math.PI&&(v=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(r+o*i)*Math.sin(s+y*a),u.y=e*Math.cos(s+y*a),u.z=e*Math.sin(r+o*i)*Math.sin(s+y*a),d.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(o+v,1-y),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],a=c[e+1][r],l=c[e+1][r+1];(0!==e||s>0)&&p.push(t,i,l),(e!==n-1||o<Math.PI)&&p.push(i,a,l)}this.setIndex(p),this.setAttribute("position",new Xn(d,3)),this.setAttribute("normal",new Xn(f,3)),this.setAttribute("uv",new Xn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Gl extends il{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gl(e.radius,e.detail)}}class Xl extends er{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],a=[],o=[],l=[],c=new ft,u=new ft,h=new ft;for(let s=0;s<=n;s++)for(let p=0;p<=r;p++){const d=p/r*i,f=s/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(d),u.y=(e+t*Math.cos(f))*Math.sin(d),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),c.x=e*Math.cos(d),c.y=e*Math.sin(d),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(p/r),l.push(s/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,a=(r+1)*(e-1)+t,o=(r+1)*e+t;s.push(n,i,o),s.push(i,a,o)}this.setIndex(s),this.setAttribute("position",new Xn(a,3)),this.setAttribute("normal",new Xn(o,3)),this.setAttribute("uv",new Xn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xl(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Kl extends er{constructor(e=1,t=.4,n=64,r=8,i=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:s},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new ft,h=new ft,p=new ft,d=new ft,f=new ft,m=new ft,g=new ft;for(let a=0;a<=n;++a){const v=a/n*i*Math.PI*2;y(v,i,s,e,p),y(v+.01,i,s,e,d),m.subVectors(d,p),g.addVectors(d,p),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,s=-t*Math.cos(i),d=t*Math.sin(i);u.x=p.x+(s*g.x+d*f.x),u.y=p.y+(s*g.y+d*f.y),u.z=p.z+(s*g.z+d*f.z),o.push(u.x,u.y,u.z),h.subVectors(u,p).normalize(),l.push(h.x,h.y,h.z),c.push(a/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,o=(r+1)*(e-1)+t;a.push(n,i,o),a.push(i,s,o)}function y(e,t,n,r,i){const s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);i.x=r*(2+l)*.5*s,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new Xn(o,3)),this.setAttribute("normal",new Xn(l,3)),this.setAttribute("uv",new Xn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kl(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ql extends er{constructor(e=new qo(new ft(-1,-1,0),new ft(-1,1,0),new ft(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const s=e.computeFrenetFrames(t,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new ft,o=new ft,l=new Ve;let c=new ft;const u=[],h=[],p=[],d=[];function f(i){c=e.getPointAt(i/t,c);const l=s.normals[i],p=s.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),s=-Math.cos(t);o.x=s*l.x+i*p.x,o.y=s*l.y+i*p.y,o.z=s*l.z+i*p.z,o.normalize(),h.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,p.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,a=(r+1)*(e-1)+t;d.push(n,i,a),d.push(i,s,a)}}()}(),this.setIndex(d),this.setAttribute("position",new Xn(u,3)),this.setAttribute("normal",new Xn(h,3)),this.setAttribute("uv",new Xn(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ql((new Yo[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}function Jl(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Yl=Object.freeze({__proto__:null,BoxGeometry:br,CapsuleGeometry:el,CircleGeometry:tl,ConeGeometry:rl,CylinderGeometry:nl,DodecahedronGeometry:sl,EdgesGeometry:class extends er{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Ae*t),s=e.getIndex(),a=e.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},p=[];for(let e=0;e<o;e+=3){s?(l[0]=s.getX(e),l[1]=s.getX(e+1),l[2]=s.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=cl;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),cl.getNormal(ll),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(o.x*r)},${Math.round(o.y*r)},${Math.round(o.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],s=cl[c[e]],a=cl[c[t]],o=`${n}_${r}`,d=`${r}_${n}`;d in h&&h[d]?(ll.dot(h[d].normal)<=i&&(p.push(s.x,s.y,s.z),p.push(a.x,a.y,a.z)),h[d]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:ll.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];al.fromBufferAttribute(a,t),ol.fromBufferAttribute(a,n),p.push(al.x,al.y,al.z),p.push(ol.x,ol.y,ol.z)}this.setAttribute("position",new Xn(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},ExtrudeGeometry:Bl,IcosahedronGeometry:Vl,LatheGeometry:Qo,OctahedronGeometry:jl,PlaneGeometry:jr,PolyhedronGeometry:il,RingGeometry:zl,ShapeGeometry:Hl,SphereGeometry:Wl,TetrahedronGeometry:Gl,TorusGeometry:Xl,TorusKnotGeometry:Kl,TubeGeometry:ql,WireframeGeometry:class extends er{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new ft,i=new ft;if(null!==e.index){const s=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let o=0;o<3;o++){const l=a.getX(e+o),c=a.getX(e+(o+1)%3);r.fromBufferAttribute(s,l),i.fromBufferAttribute(s,c),!0===Jl(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const s=e.attributes.position;for(let e=0,a=s.count/3;e<a;e++)for(let a=0;a<3;a++){const o=3*e+a,l=3*e+(a+1)%3;r.fromBufferAttribute(s,o),i.fromBufferAttribute(s,l),!0===Jl(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Xn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}});class $l extends Pn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new In(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Zl extends Cr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ql extends Pn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new In(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ec extends Ql{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Le(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new In(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new In(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new In(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class tc extends Pn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new In(16777215),this.specular=new In(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nc extends Pn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new In(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class rc extends Pn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ic extends Pn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new In(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sc extends Pn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new In(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ac extends po{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function oc(e,t,n){return cc(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function lc(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function cc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uc(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function hc(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,a=0;a!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i}function pc(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let a=s[r];if(void 0!==a)if(Array.isArray(a))do{a=s[r],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[i++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[r],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{a=s[r],void 0!==a&&(t.push(s.time),n.push(a)),s=e[i++]}while(void 0!==s)}class dc{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fc extends dc{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ae,endingEnd:ae}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,a=r[i],o=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case oe:i=e,a=2*t-n;break;case le:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case oe:s=e,o=2*n-t;break;case le:s=1,o=n+r[1]-r[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=s*c}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(r-t),f=d*d,m=f*d,g=-h*m+2*h*f-h*d,y=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,v=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f;for(let e=0;e!==a;++e)i[e]=g*s[c+e]+y*s[l+e]+v*s[o+e]+x*s[u+e];return i}}class mc extends dc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==a;++e)i[e]=s[l+e]*u+s[o+e]*c;return i}}class gc extends dc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class yc{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=lc(t,this.TimeBufferType),this.values=lc(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:lc(e.times,Array),values:lc(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new gc(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new mc(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fc(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case re:t=this.InterpolantFactoryMethodDiscrete;break;case ie:t=this.InterpolantFactoryMethodLinear;break;case se:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return re;case this.InterpolantFactoryMethodLinear:return ie;case this.InterpolantFactoryMethodSmooth:return se}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=oc(n,i,s),this.values=oc(this.values,i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==s&&s>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,s),e=!1;break}s=r}if(void 0!==r&&cc(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=oc(this.times),t=oc(this.values),n=this.getValueSize(),r=this.getInterpolation()===se,i=e.length-1;let s=1;for(let a=1;a<i;++a){let i=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[s+a]){i=!0;break}}}if(i){if(a!==s){e[s]=e[a];const r=a*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,a=0;a!==n;++a)t[r+a]=t[e+a];++s}return s!==e.length?(this.times=oc(e,0,s),this.values=oc(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=oc(this.times,0),t=oc(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}yc.prototype.TimeBufferType=Float32Array,yc.prototype.ValueBufferType=Float32Array,yc.prototype.DefaultInterpolation=ie;class vc extends yc{}vc.prototype.ValueTypeName="bool",vc.prototype.ValueBufferType=Array,vc.prototype.DefaultInterpolation=re,vc.prototype.InterpolantFactoryMethodLinear=void 0,vc.prototype.InterpolantFactoryMethodSmooth=void 0;class xc extends yc{}xc.prototype.ValueTypeName="color";class bc extends yc{}bc.prototype.ValueTypeName="number";class wc extends dc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)dt.slerpFlat(i,0,s,l-a,s,l,o);return i}}class Sc extends yc{InterpolantFactoryMethodLinear(e){return new wc(this.times,this.values,this.getValueSize(),e)}}Sc.prototype.ValueTypeName="quaternion",Sc.prototype.DefaultInterpolation=ie,Sc.prototype.InterpolantFactoryMethodSmooth=void 0;class _c extends yc{}_c.prototype.ValueTypeName="string",_c.prototype.ValueBufferType=Array,_c.prototype.DefaultInterpolation=re,_c.prototype.InterpolantFactoryMethodLinear=void 0,_c.prototype.InterpolantFactoryMethodSmooth=void 0;class Ec extends yc{}Ec.prototype.ValueTypeName="vector";class Cc{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Pe(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(Tc(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(yc.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let e=0;e<i;e++){let a=[],o=[];a.push((e+i-1)%i,e,(e+1)%i),o.push(0,1,0);const l=uc(a);a=hc(a,1,l),o=hc(o,1,l),r||0!==a[0]||(a.push(i),o.push(o[0])),s.push(new bc(".morphTargetInfluences["+t[e].name+"]",a,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],s=n.name.match(i);if(s&&s.length>1){const e=s[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const s=[];for(const e in r)s.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],a=[];pc(n,s,a,r),0!==s.length&&i.push(new e(t,s,a))}},r=[],i=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],s=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),s.push(r.morphTarget===n?1:0)}r.push(new bc(".morphTargetInfluence["+n+"]",e,s))}o=e.length*s}else{const s=".bones["+t[e].name+"]";n(Ec,s+".position",i,"pos",r),n(Sc,s+".quaternion",i,"rot",r),n(Ec,s+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,o,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Tc(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bc;case"vector":case"vector2":case"vector3":case"vector4":return Ec;case"color":return xc;case"quaternion":return Sc;case"bool":case"boolean":return vc;case"string":return _c}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];pc(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Mc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Ac{constructor(e,t,n){const r=this;let i,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==r.onStart&&r.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const kc=new Ac;class Pc{constructor(e){this.manager=void 0!==e?e:kc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Lc={};class Dc extends Error{constructor(e,t){super(e),this.response=t}}class Nc extends Pc{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Mc.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Lc[e])return void Lc[e].push({onLoad:t,onProgress:n,onError:r});Lc[e]=[],Lc[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Lc[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),s=i?parseInt(i):0,a=0!==s;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{o+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new Dc(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Mc.add(e,t);const n=Lc[e];delete Lc[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=Lc[e];if(void 0===n)throw this.manager.itemError(e),t;delete Lc[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Rc extends Pc{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Mc.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a=Xe("img");function o(){c(),Mc.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Ic extends Pc{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Qa,a=new Nc(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:M,s.wrapT=void 0!==n.wrapT?n.wrapT:M,s.magFilter=void 0!==n.magFilter?n.magFilter:D,s.minFilter=void 0!==n.minFilter?n.minFilter:D,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?s.colorSpace=n.colorSpace:void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=R),1===n.mipmapCount&&(s.minFilter=D),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n))}),n,r),s}}class Oc extends Pc{constructor(e){super(e)}load(e,t,n,r){const i=new lt,s=new Rc(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Fc extends gn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new In(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Bc extends Fc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(gn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new In(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Uc=new Wt,Vc=new ft,jc=new ft;class zc{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Br,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new ct(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Vc.setFromMatrixPosition(e.matrixWorld),t.position.copy(Vc),jc.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(jc),t.updateMatrixWorld(),Uc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Uc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Uc)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Hc extends zc{constructor(){super(new Mr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ke*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Wc extends Fc{constructor(e,t,n=0,r=Math.PI/3,i=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(gn.DEFAULT_UP),this.updateMatrix(),this.target=new gn,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new Hc}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Gc=new Wt,Xc=new ft,Kc=new ft;class qc extends zc{constructor(){super(new Mr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new ct(2,1,1,1),new ct(0,1,1,1),new ct(3,1,1,1),new ct(1,1,1,1),new ct(3,0,1,1),new ct(1,0,1,1)],this._cubeDirections=[new ft(1,0,0),new ft(-1,0,0),new ft(0,0,1),new ft(0,0,-1),new ft(0,1,0),new ft(0,-1,0)],this._cubeUps=[new ft(0,1,0),new ft(0,1,0),new ft(0,1,0),new ft(0,1,0),new ft(0,0,1),new ft(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Xc.setFromMatrixPosition(e.matrixWorld),n.position.copy(Xc),Kc.copy(n.position),Kc.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Kc),n.updateMatrixWorld(),r.makeTranslation(-Xc.x,-Xc.y,-Xc.z),Gc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gc)}}class Jc extends Fc{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new qc}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Yc extends zc{constructor(){super(new Zr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $c extends Fc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gn.DEFAULT_UP),this.updateMatrix(),this.target=new gn,this.shadow=new Yc}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Zc extends Fc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Qc extends Fc{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class eu{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ft)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*i),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*r*1.092548),t.addScaledVector(s[5],r*i*1.092548),t.addScaledVector(s[6],.315392*(3*i*i-1)),t.addScaledVector(s[7],n*i*1.092548),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*i),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*r),t.addScaledVector(s[5],.858086*r*i),t.addScaledVector(s[6],.743125*i*i-.247708),t.addScaledVector(s[7],.858086*n*i),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class tu extends Fc{constructor(e=new eu,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class nu extends Pc{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,s=new Nc(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=nu.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new In).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new In).setHex(i.value);break;case"v2":r.uniforms[t].value=(new Ve).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new ft).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new ct).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new je).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Wt).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Ve).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Ve).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:$l,SpriteMaterial:_a,RawShaderMaterial:Zl,ShaderMaterial:Cr,PointsMaterial:Eo,MeshPhysicalMaterial:ec,MeshStandardMaterial:Ql,MeshPhongMaterial:tc,MeshToonMaterial:nc,MeshNormalMaterial:rc,MeshLambertMaterial:ic,MeshDepthMaterial:ta,MeshDistanceMaterial:na,MeshBasicMaterial:Fn,MeshMatcapMaterial:sc,LineDashedMaterial:ac,LineBasicMaterial:po,Material:Pn}[e]}}class ru{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class iu extends er{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class su extends Pc{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Nc(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],s=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=Ge(i.type,s),o=new ba(a,i.stride);return o.uuid=i.uuid,t[r]=o,o}const i=e.isInstancedBufferGeometry?new iu:new er,s=e.data.index;if(void 0!==s){const e=Ge(s.type,s.array);i.setIndex(new Hn(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let s;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);s=new Sa(t,n.itemSize,n.offset,n.normalized)}else{const e=Ge(n.type,n.array);s=new(n.isInstancedBufferAttribute?ro:Hn)(e,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),void 0!==n.usage&&s.setUsage(n.usage),void 0!==n.updateRange&&(s.updateRange.offset=n.updateRange.offset,s.updateRange.count=n.updateRange.count),i.setAttribute(t,s)}const o=e.data.morphAttributes;if(o)for(const t in o){const n=o[t],s=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new Sa(t,i.itemSize,i.offset,i.normalized)}else{const e=Ge(i.type,i.array);a=new Hn(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),s.push(a)}i.morphAttributes[t]=s}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new ft;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new It(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class au extends Pc{constructor(e){super(e)}load(e,t,n,r){const i=this,s=""===this.path?ru.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new Nc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let s=null;try{s=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(s,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?ru.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Nc(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),s=JSON.parse(i),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in s)if(s[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,r,a,s,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new ul).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new no).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new su;for(let i=0,s=e.length;i<s;i++){let s;const a=e[i];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(a);break;default:a.type in Yl?s=Yl[a.type].fromJSON(a,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new nu;i.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=Cc.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function s(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Ge(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Ac(t);i=new Rc(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=s(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Qa(n.data,n.width,n.height)))}r[n.uuid]=new st(e)}else{const e=s(n.url);r[n.uuid]=new st(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:Ge(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Rc(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],s=r.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Qa(r.data,r.width,r.height)))}n[r.uuid]=new st(e)}else{const e=await i(r.url);n[r.uuid]=new st(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,s=e.length;i<s;i++){const s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=t[s.image],o=a.data;let l;Array.isArray(o)?(l=new Pr,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Qa:new lt,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,ou)),void 0!==s.channel&&(l.channel=s.channel),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],lu),l.wrapT=n(s.wrap[1],lu)),void 0!==s.format&&(l.format=s.format),void 0!==s.internalFormat&&(l.internalFormat=s.internalFormat),void 0!==s.type&&(l.type=s.type),void 0!==s.colorSpace&&(l.colorSpace=s.colorSpace),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,cu)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,cu)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.generateMipmaps&&(l.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(l.compareFunction=s.compareFunction),void 0!==s.userData&&(l.userData=s.userData),r[s.uuid]=l}return r}parseObject(e,t,n,r,i){let s,a,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":s=new xa,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new In(e.background):s.background=u(e.background)),void 0!==e.environment&&(s.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new va(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new ya(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(s.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new Mr(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Zr(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Zc(e.color,e.intensity);break;case"DirectionalLight":s=new $c(e.color,e.intensity);break;case"PointLight":s=new Jc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Qc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Wc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Bc(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new tu).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=c(e.material),s=new $a(a,o),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=c(e.material),s=new vr(a,o);break;case"InstancedMesh":a=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;s=new ho(a,o,t),s.instanceMatrix=new ro(new Float32Array(n.array),16),void 0!==r&&(s.instanceColor=new ro(new Float32Array(r.array),r.itemSize));break;case"LOD":s=new ja;break;case"Line":s=new xo(l(e.geometry),c(e.material));break;case"LineLoop":s=new _o(l(e.geometry),c(e.material));break;case"LineSegments":s=new So(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new ko(l(e.geometry),c(e.material));break;case"Sprite":s=new Fa(c(e.material));break;case"Group":s=new la;break;case"Bone":s=new Za;break;default:s=new gn}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.up&&s.up.fromArray(e.up),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)s.add(this.parseObject(a[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=s.getObjectByProperty("uuid",n.object);void 0!==r&&s.addLevel(r,n.distance,n.hysteresis)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const ou={UVMapping:300,CubeReflectionMapping:w,CubeRefractionMapping:S,EquirectangularReflectionMapping:_,EquirectangularRefractionMapping:E,CubeUVReflectionMapping:C},lu={RepeatWrapping:T,ClampToEdgeWrapping:M,MirroredRepeatWrapping:A},cu={NearestFilter:k,NearestMipmapNearestFilter:P,NearestMipmapLinearFilter:L,LinearFilter:D,LinearMipmapNearestFilter:N,LinearMipmapLinearFilter:R};class uu extends Pc{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Mc.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Mc.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}class hu{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=pu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=pu();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function pu(){return("undefined"==typeof performance?Date:performance).now()}class du{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){dt.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;dt.multiplyQuaternionsFlat(e,s,e,t,e,n),dt.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*s+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const fu="\\[\\]\\.:\\/",mu=new RegExp("["+fu+"]","g"),gu="[^"+fu+"]",yu="[^"+fu.replace("\\.","")+"]",vu=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",gu)+/(WCOD+)?/.source.replace("WCOD",yu)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gu)+"$"),xu=["material","materials","bones","map"];class bu{constructor(e,t,n){this.path=t,this.parsedPath=n||bu.parseTrackName(t),this.node=bu.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new bu.Composite(e,t,n):new bu(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mu,"")}static parseTrackName(e){const t=vu.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==xu.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=bu.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}bu.Composite=class{constructor(e,t,n){const r=n||bu.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},bu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},bu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},bu.prototype.GetterByBindingType=[bu.prototype._getValue_direct,bu.prototype._getValue_array,bu.prototype._getValue_arrayElement,bu.prototype._getValue_toArray],bu.prototype.SetterByBindingTypeAndVersioning=[[bu.prototype._setValue_direct,bu.prototype._setValue_direct_setNeedsUpdate,bu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bu.prototype._setValue_array,bu.prototype._setValue_array_setNeedsUpdate,bu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bu.prototype._setValue_arrayElement,bu.prototype._setValue_arrayElement_setNeedsUpdate,bu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bu.prototype._setValue_fromArray,bu.prototype._setValue_fromArray_setNeedsUpdate,bu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wu{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,a=new Array(s),o={endingStart:ae,endingEnd:ae};for(let e=0;e!==s;++e){const t=i[e].createInterpolant(null);a[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,s=n/r;e.warp(1,i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=2202===n;if(0===e)return-1===i?r:s&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=oe,r.endingEnd=oe):(r.endingStart=e?this.zeroSlopeAtStart?oe:ae:le,r.endingEnd=t?this.zeroSlopeAtEnd?oe:ae:le)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=i,o[0]=t,a[1]=i+e,o[1]=n,this}}const Su=new Float32Array(1);class _u extends Ce{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)++u.referenceCount,s[e]=u;else{if(u=s[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new du(bu.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,l),s[e]=u}a[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,a=s[i],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,a=s[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[i],0===Object.keys(a).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new mc(new Float32Array(2),new Float32Array(2),1,Su),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"==typeof e?Cc.findByName(r,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:2500),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new wu(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?Cc.findByName(n,e):e,s=i?i.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let a=0;a!==n;++a)t[a]._update(r,e,i,s);const a=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)a[e].apply(s);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Eu{constructor(e){this.value=e}clone(){return new Eu(void 0===this.value.clone?this.value:this.value.clone())}}class Cu{constructor(e,t,n=0,r=1/0){this.ray=new Ht(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new tn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Mu(e,this,n,t),n.sort(Tu),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)Mu(e[r],this,n,t);return n.sort(Tu),n}}function Tu(e,t){return e.distance-t.distance}function Mu(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Mu(r[e],t,n,!0)}}class Au{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Le(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const ku=new Ve;class Pu{constructor(e=new Ve(1/0,1/0),t=new Ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ku.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ku).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Lu=new ft;class Du extends gn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new er,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,s=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Xn(r,3));const i=new po({fog:!1,toneMapped:!1});this.cone=new So(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Lu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Lu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Nu=new ft,Ru=new Wt,Iu=new Wt;class Ou extends So{constructor(e){const t=Fu(e),n=new er,r=[],i=[],s=new In(0,0,1),a=new In(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(s.r,s.g,s.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Xn(r,3)),n.setAttribute("color",new Xn(i,3)),super(n,new po({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Iu.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(Ru.multiplyMatrices(Iu,i.matrixWorld),Nu.setFromMatrixPosition(Ru),r.setXYZ(n,Nu.x,Nu.y,Nu.z),Ru.multiplyMatrices(Iu,i.parent.matrixWorld),Nu.setFromMatrixPosition(Ru),r.setXYZ(n+1,Nu.x,Nu.y,Nu.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Fu(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Fu(e.children[n]));return t}class Bu extends vr{constructor(e,t,n){super(new Wl(t,4,2),new Fn({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Uu=new ft,Vu=new In,ju=new In;class zu extends gn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new jl(t);r.rotateY(.5*Math.PI),this.material=new Fn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),s=new Float32Array(3*i.count);r.setAttribute("color",new Hn(s,3)),this.add(new vr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Vu.copy(this.light.color),ju.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Vu:ju;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Uu.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Hu extends So{constructor(e=10,t=10,n=4473924,r=8947848){n=new In(n),r=new In(r);const i=t/2,s=e/t,a=e/2,o=[],l=[];for(let e=0,c=0,u=-a;e<=t;e++,u+=s){o.push(-a,0,u,a,0,u),o.push(u,0,-a,u,0,a);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new er;c.setAttribute("position",new Xn(o,3)),c.setAttribute("color",new Xn(l,3)),super(c,new po({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Wu=new ft,Gu=new ft,Xu=new ft;class Ku extends gn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new er;r.setAttribute("position",new Xn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new po({fog:!1,toneMapped:!1});this.lightPlane=new xo(r,i),this.add(this.lightPlane),r=new er,r.setAttribute("position",new Xn([0,0,0,0,0,1],3)),this.targetLine=new xo(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Wu.setFromMatrixPosition(this.light.matrixWorld),Gu.setFromMatrixPosition(this.light.target.matrixWorld),Xu.subVectors(Gu,Wu),this.lightPlane.lookAt(Gu),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gu),this.targetLine.scale.z=Xu.length()}}const qu=new ft,Ju=new Tr;class Yu extends So{constructor(e){const t=new er,n=new po({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={};function a(e,t){o(e),o(t)}function o(e){r.push(0,0,0),i.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Xn(r,3)),t.setAttribute("color",new Xn(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new In(16755200),c=new In(16711680),u=new In(43775),h=new In(16777215),p=new In(3355443);this.setColors(l,c,u,h,p)}setColors(e,t,n,r,i){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,i.r,i.g,i.b),s.setXYZ(41,i.r,i.g,i.b),s.setXYZ(42,i.r,i.g,i.b),s.setXYZ(43,i.r,i.g,i.b),s.setXYZ(44,i.r,i.g,i.b),s.setXYZ(45,i.r,i.g,i.b),s.setXYZ(46,i.r,i.g,i.b),s.setXYZ(47,i.r,i.g,i.b),s.setXYZ(48,i.r,i.g,i.b),s.setXYZ(49,i.r,i.g,i.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Ju.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),$u("c",t,e,Ju,0,0,-1),$u("t",t,e,Ju,0,0,1),$u("n1",t,e,Ju,-1,-1,-1),$u("n2",t,e,Ju,1,-1,-1),$u("n3",t,e,Ju,-1,1,-1),$u("n4",t,e,Ju,1,1,-1),$u("f1",t,e,Ju,-1,-1,1),$u("f2",t,e,Ju,1,-1,1),$u("f3",t,e,Ju,-1,1,1),$u("f4",t,e,Ju,1,1,1),$u("u1",t,e,Ju,.7,1.1,-1),$u("u2",t,e,Ju,-.7,1.1,-1),$u("u3",t,e,Ju,0,2,-1),$u("cf1",t,e,Ju,-1,0,1),$u("cf2",t,e,Ju,1,0,1),$u("cf3",t,e,Ju,0,-1,1),$u("cf4",t,e,Ju,0,1,1),$u("cn1",t,e,Ju,-1,0,-1),$u("cn2",t,e,Ju,1,0,-1),$u("cn3",t,e,Ju,0,-1,-1),$u("cn4",t,e,Ju,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function $u(e,t,n,r,i,s,a){qu.set(i,s,a).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],qu.x,qu.y,qu.z)}}class Zu extends So{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new er;r.setIndex(new Hn(n,1)),r.setAttribute("position",new Xn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new po({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qu{constructor(){this.type="ShapePath",this.color=new In,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Zo,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=t[i],a=t[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],o=-o,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const n=Il.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,s,a;const o=[];if(1===r.length)return s=r[0],a=new ul,a.curves=s.curves,o.push(a),o;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let h,p,d=[],f=0;u[f]=void 0,d[f]=[];for(let t=0,a=r.length;t<a;t++)s=r[t],h=s.getPoints(),i=n(h),i=e?!i:i,i?(!l&&u[f]&&f++,u[f]={s:new ul,p:h},u[f].s.curves=s.curves,l&&f++,d[f]=[]):d[f].push({h:s,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new ul;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let r=0,i=u.length;r<i;r++){const i=d[r];for(let s=0;s<i.length;s++){const a=i[s];let o=!0;for(let i=0;i<u.length;i++)t(a.p,u[i].p)&&(r!==i&&n++,o?(o=!1,c[i].push(a)):e=!0);o&&c[r].push(a)}}n>0&&!1===e&&(d=c)}for(let e=0,t=u.length;e<t;e++){a=u[e].s,o.push(a),p=d[e];for(let e=0,t=p.length;e<t;e++)a.holes.push(p[e].h)}return o}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},8646:function(e,t,n){"use strict";n.d(t,{GZ:function(){return fe},HT:function(){return ee},T8:function(){return ae},TD:function(){return se},Xo:function(){return de}});var r=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(r(""))}catch(e){r=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var i=Uint8Array,s=Uint16Array,a=Uint32Array,o=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var n=new s(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new a(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},h=u(o,2),p=h[0],d=h[1];p[28]=258,d[258]=28;for(var f=u(l,0),m=f[0],g=f[1],y=new s(32768),v=0;v<32768;++v){var x=(43690&v)>>>1|(21845&v)<<1;x=(61680&(x=(52428&x)>>>2|(13107&x)<<2))>>>4|(3855&x)<<4,y[v]=((65280&x)>>>8|(255&x)<<8)>>>1}var b=function(e,t,n){for(var r=e.length,i=0,a=new s(t);i<r;++i)++a[e[i]-1];var o,l=new s(t);for(i=0;i<t;++i)l[i]=l[i-1]+a[i-1]<<1;if(n){o=new s(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],h=t-e[i],p=l[e[i]-1]++<<h,d=p|(1<<h)-1;p<=d;++p)o[y[p]>>>c]=u}else for(o=new s(r),i=0;i<r;++i)e[i]&&(o[i]=y[l[e[i]-1]++]>>>15-e[i]);return o},w=new i(288);for(v=0;v<144;++v)w[v]=8;for(v=144;v<256;++v)w[v]=9;for(v=256;v<280;++v)w[v]=7;for(v=280;v<288;++v)w[v]=8;var S=new i(32);for(v=0;v<32;++v)S[v]=5;var _=b(w,9,0),E=b(w,9,1),C=b(S,5,0),T=b(S,5,1),M=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},A=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},k=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},P=function(e){return(e/8|0)+(7&e&&1)},L=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof s?s:e instanceof a?a:i)(n-t);return r.set(e.subarray(t,n)),r},D=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new i(0);var s=!t||n,a=!n||n.i;n||(n={}),t||(t=new i(3*r));var u=function(e){var n=t.length;if(e>n){var r=new i(Math.max(2*n,e));r.set(t),t=r}},h=n.f||0,d=n.p||0,f=n.b||0,g=n.l,y=n.d,v=n.m,x=n.n,w=8*r;do{if(!g){n.f=h=A(e,d,1);var S=A(e,d+1,3);if(d+=3,!S){var _=e[(j=P(d)+4)-4]|e[j-3]<<8,C=j+_;if(C>r){if(a)throw"unexpected EOF";break}s&&u(f+_),t.set(e.subarray(j,C),f),n.b=f+=_,n.p=d=8*C;continue}if(1==S)g=E,y=T,v=9,x=5;else{if(2!=S)throw"invalid block type";var D=A(e,d,31)+257,N=A(e,d+10,15)+4,R=D+A(e,d+5,31)+1;d+=14;for(var I=new i(R),O=new i(19),F=0;F<N;++F)O[c[F]]=A(e,d+3*F,7);d+=3*N;var B=M(O),U=(1<<B)-1,V=b(O,B,1);for(F=0;F<R;){var j,z=V[A(e,d,U)];if(d+=15&z,(j=z>>>4)<16)I[F++]=j;else{var H=0,W=0;for(16==j?(W=3+A(e,d,3),d+=2,H=I[F-1]):17==j?(W=3+A(e,d,7),d+=3):18==j&&(W=11+A(e,d,127),d+=7);W--;)I[F++]=H}}var G=I.subarray(0,D),X=I.subarray(D);v=M(G),x=M(X),g=b(G,v,1),y=b(X,x,1)}if(d>w){if(a)throw"unexpected EOF";break}}s&&u(f+131072);for(var K=(1<<v)-1,q=(1<<x)-1,J=d;;J=d){var Y=(H=g[k(e,d)&K])>>>4;if((d+=15&H)>w){if(a)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(Y<256)t[f++]=Y;else{if(256==Y){J=d,g=null;break}var $=Y-254;if(Y>264){var Z=o[F=Y-257];$=A(e,d,(1<<Z)-1)+p[F],d+=Z}var Q=y[k(e,d)&q],ee=Q>>>4;if(!Q)throw"invalid distance";if(d+=15&Q,X=m[ee],ee>3&&(Z=l[ee],X+=k(e,d)&(1<<Z)-1,d+=Z),d>w){if(a)throw"unexpected EOF";break}s&&u(f+131072);for(var te=f+$;f<te;f+=4)t[f]=t[f-X],t[f+1]=t[f+1-X],t[f+2]=t[f+2-X],t[f+3]=t[f+3-X];f=te}}n.l=g,n.p=J,n.b=f,g&&(h=1,n.m=v,n.d=y,n.n=x)}while(!h);return f==t.length?t:L(t,0,f)},N=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},R=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},I=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,o=n.slice();if(!a)return[z,0];if(1==a){var l=new i(n[0].s+1);return l[n[0].s]=1,[l,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var c=n[0],u=n[1],h=0,p=1,d=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};p!=a-1;)c=n[n[h].f<n[d].f?h++:d++],u=n[h!=p&&n[h].f<n[d].f?h++:d++],n[p++]={s:-1,f:c.f+u.f,l:c,r:u};var f=o[0].s;for(r=1;r<a;++r)o[r].s>f&&(f=o[r].s);var m=new s(f+1),g=O(n[p-1],m,0);if(g>t){r=0;var y=0,v=g-t,x=1<<v;for(o.sort((function(e,t){return m[t.s]-m[e.s]||e.f-t.f}));r<a;++r){var b=o[r].s;if(!(m[b]>t))break;y+=x-(1<<g-m[b]),m[b]=t}for(y>>>=v;y>0;){var w=o[r].s;m[w]<t?y-=1<<t-m[w]++-1:++r}for(;r>=0&&y;--r){var S=o[r].s;m[S]==t&&(--m[S],++y)}g=t}return[new i(m),g]},O=function(e,t,n){return-1==e.s?Math.max(O(e.l,t,n+1),O(e.r,t,n+1)):t[e.s]=n},F=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new s(++t),r=0,i=e[0],a=1,o=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return[n.subarray(0,r),t]},B=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},U=function(e,t,n){var r=n.length,i=P(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var s=0;s<r;++s)e[i+s+4]=n[s];return 8*(i+4+r)},V=function(e,t,n,r,i,a,u,h,p,d,f){N(t,f++,n),++i[256];for(var m=I(i,15),g=m[0],y=m[1],v=I(a,15),x=v[0],E=v[1],T=F(g),M=T[0],A=T[1],k=F(x),P=k[0],L=k[1],D=new s(19),O=0;O<M.length;++O)D[31&M[O]]++;for(O=0;O<P.length;++O)D[31&P[O]]++;for(var V=I(D,7),j=V[0],z=V[1],H=19;H>4&&!j[c[H-1]];--H);var W,G,X,K,q=d+5<<3,J=B(i,w)+B(a,S)+u,Y=B(i,g)+B(a,x)+u+14+3*H+B(D,j)+(2*D[16]+3*D[17]+7*D[18]);if(q<=J&&q<=Y)return U(t,f,e.subarray(p,p+d));if(N(t,f,1+(Y<J)),f+=2,Y<J){W=b(g,y,0),G=g,X=b(x,E,0),K=x;var $=b(j,z,0);for(N(t,f,A-257),N(t,f+5,L-1),N(t,f+10,H-4),f+=14,O=0;O<H;++O)N(t,f+3*O,j[c[O]]);f+=3*H;for(var Z=[M,P],Q=0;Q<2;++Q){var ee=Z[Q];for(O=0;O<ee.length;++O){var te=31&ee[O];N(t,f,$[te]),f+=j[te],te>15&&(N(t,f,ee[O]>>>5&127),f+=ee[O]>>>12)}}}else W=_,G=w,X=C,K=S;for(O=0;O<h;++O)if(r[O]>255){te=r[O]>>>18&31,R(t,f,W[te+257]),f+=G[te+257],te>7&&(N(t,f,r[O]>>>23&31),f+=o[te]);var ne=31&r[O];R(t,f,X[ne]),f+=K[ne],ne>3&&(R(t,f,r[O]>>>5&8191),f+=l[ne])}else R(t,f,W[r[O]]),f+=G[r[O]];return R(t,f,W[256]),f+G[256]},j=new a([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),z=new i(0),H=function(){for(var e=new a(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),W=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=H[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},G=function(e,t,n,r,c){return function(e,t,n,r,c,u){var h=e.length,p=new i(r+h+5*(1+Math.ceil(h/7e3))+c),f=p.subarray(r,p.length-c),m=0;if(!t||h<8)for(var y=0;y<=h;y+=65535){var v=y+65535;v<h?m=U(f,m,e.subarray(y,v)):(f[y]=u,m=U(f,m,e.subarray(y,h)))}else{for(var x=j[t-1],b=x>>>13,w=8191&x,S=(1<<n)-1,_=new s(32768),E=new s(S+1),C=Math.ceil(n/3),T=2*C,M=function(t){return(e[t]^e[t+1]<<C^e[t+2]<<T)&S},A=new a(25e3),k=new s(288),D=new s(32),N=0,R=0,I=(y=0,0),O=0,F=0;y<h;++y){var B=M(y),H=32767&y,W=E[B];if(_[H]=W,E[B]=H,O<=y){var G=h-y;if((N>7e3||I>24576)&&G>423){m=V(e,f,0,A,k,D,R,I,F,y-F,m),I=N=R=0,F=y;for(var X=0;X<286;++X)k[X]=0;for(X=0;X<30;++X)D[X]=0}var K=2,q=0,J=w,Y=H-W&32767;if(G>2&&B==M(y-Y))for(var $=Math.min(b,G)-1,Z=Math.min(32767,y),Q=Math.min(258,G);Y<=Z&&--J&&H!=W;){if(e[y+K]==e[y+K-Y]){for(var ee=0;ee<Q&&e[y+ee]==e[y+ee-Y];++ee);if(ee>K){if(K=ee,q=Y,ee>$)break;var te=Math.min(Y,ee-2),ne=0;for(X=0;X<te;++X){var re=y-Y+X+32768&32767,ie=re-_[re]+32768&32767;ie>ne&&(ne=ie,W=re)}}}Y+=(H=W)-(W=_[H])+32768&32767}if(q){A[I++]=268435456|d[K]<<18|g[q];var se=31&d[K],ae=31&g[q];R+=o[se]+l[ae],++k[257+se],++D[ae],O=y+K,++N}else A[I++]=e[y],++k[e[y]]}}m=V(e,f,u,A,k,D,R,I,F,y-F,m),!u&&7&m&&(m=U(f,m+1,z))}return L(p,0,r+P(m)+c)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!c)},X=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},K=function(e,t){return e[t]|e[t+1]<<8},q=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},J=function(e,t){return q(e,t)+4294967296*q(e,t+4)},Y=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},$=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Z(e,t){return G(e,t||{},0,0)}function Q(e,t){return D(e,t)}function ee(e,t){return D(($(e),e.subarray(2,-4)),t)}var te=function(e,t,n,r){for(var s in e){var a=e[s],o=t+s;a instanceof i?n[o]=[a,r]:Array.isArray(a)?n[o]=[a[0],X(r,a[1])]:te(a,o+"/",n,r)}},ne="undefined"!=typeof TextEncoder&&new TextEncoder,re="undefined"!=typeof TextDecoder&&new TextDecoder;try{re.decode(z,{stream:!0})}catch(e){}var ie=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return[t,L(e,n-1)];i?3==i?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&i?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}};function se(e,t){if(t){for(var n=new i(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(ne)return ne.encode(e);var s=e.length,a=new i(e.length+(e.length>>1)),o=0,l=function(e){a[o++]=e};for(r=0;r<s;++r){if(o+5>a.length){var c=new i(o+8+(s-r<<1));c.set(a),a=c}var u=e.charCodeAt(r);u<128||t?l(u):u<2048?(l(192|u>>6),l(128|63&u)):u>55295&&u<57344?(l(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++r))>>18),l(128|u>>12&63),l(128|u>>6&63),l(128|63&u)):(l(224|u>>12),l(128|u>>6&63),l(128|63&u))}return L(a,0,o)}function ae(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(re)return re.decode(e);var i=ie(e),s=i[0];if(i[1].length)throw"invalid utf-8 data";return s}var oe=function(e,t){return t+30+K(e,t+26)+K(e,t+28)},le=function(e,t,n){var r=K(e,t+28),i=ae(e.subarray(t+46,t+46+r),!(2048&K(e,t+8))),s=t+46+r,a=q(e,t+20),o=n&&4294967295==a?ce(e,s):[a,q(e,t+24),q(e,t+42)],l=o[0],c=o[1],u=o[2];return[K(e,t+10),l,c,i,s+K(e,t+30)+K(e,t+32),u]},ce=function(e,t){for(;1!=K(e,t);t+=4+K(e,t+2));return[J(e,t+12),J(e,t+4),J(e,t+20)]},ue=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},he=function(e,t,n,r,i,s,a,o){var l=r.length,c=n.extra,u=o&&o.length,h=ue(c);Y(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==s&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var p=new Date(null==n.mtime?Date.now():n.mtime),d=p.getFullYear()-1980;if(d<0||d>119)throw"date not in range 1980-2099";if(Y(e,t,d<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),t+=4,null!=s&&(Y(e,t,n.crc),Y(e,t+4,s),Y(e,t+8,n.size)),Y(e,t+12,l),Y(e,t+14,h),t+=16,null!=a&&(Y(e,t,u),Y(e,t+6,n.attrs),Y(e,t+10,a),t+=14),e.set(r,t),t+=l,h)for(var f in c){var m=c[f],g=m.length;Y(e,t,+f),Y(e,t+2,g),e.set(m,t+4),t+=4+g}return u&&(e.set(o,t),t+=u),t},pe=function(e,t,n,r,i){Y(e,t,101010256),Y(e,t+8,n),Y(e,t+10,n),Y(e,t+12,r),Y(e,t+16,i)};function de(e,t){t||(t={});var n={},r=[];te(e,"",n,t);var s=0,a=0;for(var o in n){var l=n[o],c=l[0],u=l[1],h=0==u.level?0:8,p=(E=se(o)).length,d=u.comment,f=d&&se(d),m=f&&f.length,g=ue(u.extra);if(p>65535)throw"filename too long";var y=h?Z(c,u):c,v=y.length,x=W();x.p(c),r.push(X(u,{size:c.length,crc:x.d(),c:y,f:E,m:f,u:p!=o.length||f&&d.length!=m,o:s,compression:h})),s+=30+p+g+v,a+=76+2*(p+g)+(m||0)+v}for(var b=new i(a+22),w=s,S=a-s,_=0;_<r.length;++_){var E=r[_];he(b,E.o,E,E.f,E.u,E.c.length);var C=30+E.f.length+ue(E.extra);b.set(E.c,E.o+C),he(b,s,E,E.f,E.u,E.c.length,E.o,E.m),s+=16+C+(E.m?E.m.length:0)}return pe(b,s,r.length,S,w),b}function fe(e){for(var t={},n=e.length-22;101010256!=q(e,n);--n)if(!n||e.length-n>65558)throw"invalid zip file";var r=K(e,n+8);if(!r)return{};var s=q(e,n+16),a=4294967295==s;if(a){if(n=q(e,n-12),101075792!=q(e,n))throw"invalid zip file";r=q(e,n+32),s=q(e,n+48)}for(var o=0;o<r;++o){var l=le(e,s,a),c=l[0],u=l[1],h=l[2],p=l[3],d=l[4],f=l[5],m=oe(e,f);if(s=d,c){if(8!=c)throw"unknown compression type "+c;t[p]=Q(e.subarray(m,m+u),new i(h))}else t[p]=L(e,m,m+u)}return t}},3867:function(e,t,n){"use strict";n.r(t),n.d(t,{GLTFLoader:function(){return s}});var r=n(9477);function i(e,t){if(t===r.WwZ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===r.z$h||t===r.UlW){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,s=[];if(t===r.z$h)for(let e=1;e<=i;e++)s.push(n.getX(0)),s.push(n.getX(e)),s.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(s.push(n.getX(e)),s.push(n.getX(e+1)),s.push(n.getX(e+2))):(s.push(n.getX(e+2)),s.push(n.getX(e+1)),s.push(n.getX(e)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(s),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class s extends r.aNw{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new h(e)})),this.register((function(e){return new x(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new w(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new y(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new S(e)})),this.register((function(e){return new _(e)}))}load(e,t,n,i){const s=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.Zp0.extractUrlBase(e),this.manager.itemStart(e);const o=function(t){i?i(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},l=new r.hH6(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{s.parse(n,a,(function(n){t(n),s.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},a={},l=new TextDecoder;if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===E){try{s[o.KHR_BINARY_GLTF]=new C(e)}catch(e){return void(r&&r(e))}i=JSON.parse(s[o.KHR_BINARY_GLTF].content)}else i=JSON.parse(l.decode(e));else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new K(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](u);a[t.name]=t,s[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){const t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case o.KHR_MATERIALS_UNLIT:s[t]=new c;break;case o.KHR_DRACO_MESH_COMPRESSION:s[t]=new T(i,this.dracoLoader);break;case o.KHR_TEXTURE_TRANSFORM:s[t]=new M;break;case o.KHR_MESH_QUANTIZATION:s[t]=new A;break;default:n.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function a(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const o={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class l{constructor(e){this.parser=e,this.name=o.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let o;const l=new r.Ilk(16777215);void 0!==a.color&&l.fromArray(a.color);const c=void 0!==a.range?a.range:0;switch(a.type){case"directional":o=new r.Ox3(l),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new r.cek(l),o.distance=c;break;case"spot":o=new r.PMe(l),o.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return o.position.set(0,0,0),o.decay=2,j(o,a),void 0!==a.intensity&&(o.intensity=a.intensity),o.name=t.createUniqueName(a.name||"light_"+e),i=Promise.resolve(o),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class c{constructor(){this.name=o.KHR_MATERIALS_UNLIT}getMaterialType(){return r.vBJ}extendParams(e,t,n){const i=[];e.color=new r.Ilk(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==s.baseColorTexture&&i.push(n.assignTexture(e,"map",s.baseColorTexture,r.KI_))}return Promise.all(i)}}class u{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class h{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new r.FM8(e,e)}return Promise.all(s)}}class p{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class d{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new r.Ilk(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,r.KI_)),void 0!==a.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class f{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class m{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new r.Ilk(o[0],o[1],o[2]),Promise.all(s)}}class g{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class y{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new r.Ilk(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,r.KI_)),Promise.all(s)}}class v{constructor(e){this.parser=e,this.name=o.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(i)}}class x{constructor(e){this.parser=e,this.name=o.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class b{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],a=r.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class w{constructor(e){this.parser=e,this.name=o.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],a=r.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class S{constructor(e){this.name=o.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,s=e.count,a=e.byteStride,o=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(s,a,o,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(s*a);return i.decodeGltfBuffer(new Uint8Array(t),s,a,o,e.mode,e.filter),t}))}))}return null}}class _{constructor(e){this.name=o.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const e of i.primitives)if(e.mode!==D.TRIANGLES&&e.mode!==D.TRIANGLE_STRIP&&e.mode!==D.TRIANGLE_FAN&&void 0!==e.mode)return null;const s=n.extensions[this.name].attributes,a=[],o={};for(const e in s)a.push(this.parser.getDependency("accessor",s[e]).then((t=>(o[e]=t,o[e]))));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,s=[];for(const e of n){const t=new r.yGw,n=new r.Pa4,a=new r._fP,l=new r.Pa4(1,1,1),c=new r.SPe(e.geometry,e.material,i);for(let e=0;e<i;e++)o.TRANSLATION&&n.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&a.fromBufferAttribute(o.ROTATION,e),o.SCALE&&l.fromBufferAttribute(o.SCALE,e),c.setMatrixAt(e,t.compose(n,a,l));for(const t in o)"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);r.Tme.prototype.copy.call(c,e),this.parser.assignFinalMaterial(c),s.push(c)}return t.isGroup?(t.clear(),t.add(...s),t):s[0]})))}}const E="glTF";class C{constructor(e){this.name=o.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==E)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,i=new DataView(e,12);let s=0;for(;s<r;){const t=i.getUint32(s,!0);s+=4;const r=i.getUint32(s,!0);if(s+=4,1313821514===r){const r=new Uint8Array(e,12+s,t);this.content=n.decode(r)}else if(5130562===r){const n=12+s;this.body=e.slice(n,n+t)}s+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class T{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=o.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},o={},l={};for(const e in s){const t=F[e]||e.toLowerCase();a[t]=s[e]}for(const t in e.attributes){const r=F[t]||t.toLowerCase();if(void 0!==s[t]){const i=n.accessors[e.attributes[t]],s=N[i.componentType];l[r]=s.name,o[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=o[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))}}class M{constructor(){this.name=o.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class A{constructor(){this.name=o.KHR_MESH_QUANTIZATION}}class k extends r._C8{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=r-t,u=(n-t)/c,h=u*u,p=h*u,d=e*l,f=d-l,m=-2*p+3*h,g=p-h,y=1-m,v=g-h+u;for(let e=0;e!==a;e++){const t=s[f+e+a],n=s[f+e+o]*c,r=s[d+e+a],l=s[d+e]*c;i[e]=y*t+v*n+m*r+g*l}return i}}const P=new r._fP;class L extends k{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return P.fromArray(i).normalize().toArray(i),i}}const D={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},N={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},R={9728:r.TyD,9729:r.wem,9984:r.YLQ,9985:r.qyh,9986:r.aH4,9987:r.D1R},I={33071:r.uWy,33648:r.OoA,10497:r.rpg},O={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},B={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},U={CUBICSPLINE:void 0,LINEAR:r.NMF,STEP:r.Syv};function V(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function j(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function H(e){let t;const n=e.extensions&&e.extensions[o.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+W(n.attributes):e.indices+":"+W(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+W(e.targets[n]);return t}function W(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function G(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const X=new r.yGw;class K{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new a,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&s<98?this.textureLoader=new r.dpR(this.options.manager):this.textureLoader=new r.QRU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const s={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};V(i,s,r),j(s,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[o.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,s){n.load(r.Zp0.resolveURL(t.uri,i.path),e,void 0,(function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=O[i.type],t=N[i.componentType],n=!0===i.normalized,s=new t(i.count*e);return Promise.resolve(new r.TlE(s,e,n))}const s=[];return void 0!==i.bufferView?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),void 0!==i.sparse&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then((function(e){const s=e[0],a=O[i.type],o=N[i.componentType],l=o.BYTES_PER_ELEMENT,c=l*a,u=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,p=!0===i.normalized;let d,f;if(h&&h!==c){const e=Math.floor(u/h),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let c=t.cache.get(n);c||(d=new o(s,e*h,i.count*h/l),c=new r.vpT(d,h/l),t.cache.add(n,c)),f=new r.kB5(c,a,u%h/l,p)}else d=null===s?new o(i.count*a):new o(s,u,i.count*a),f=new r.TlE(d,a,p);if(void 0!==i.sparse){const t=O.SCALAR,n=N[i.sparse.indices.componentType],l=i.sparse.indices.byteOffset||0,c=i.sparse.values.byteOffset||0,u=new n(e[1],l,i.sparse.count*t),h=new o(e[2],c,i.sparse.count*a);null!==s&&(f=new r.TlE(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(f.setX(t,h[e*a]),a>=2&&f.setY(t,h[e*a+1]),a>=3&&f.setZ(t,h[e*a+2]),a>=4&&f.setW(t,h[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let s=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(s=e)}return this.loadTextureImage(e,r,s)}loadTextureImage(e,t,n){const i=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"==typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);const n=(s.samplers||{})[a.sampler]||{};return t.magFilter=R[n.magFilter]||r.wem,t.minFilter=R[n.minFilter]||r.D1R,t.wrapS=I[n.wrapS]||r.rpg,t.wrapT=I[n.wrapT]||r.rpg,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const s=n.images[e],a=self.URL||self.webkitURL;let o=s.uri||"",l=!1;if(void 0!==s.bufferView)o=this.getDependency("bufferView",s.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:s.mimeType});return o=a.createObjectURL(t),o}));else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then((function(e){return new Promise((function(n,s){let a=n;!0===t.isImageBitmapLoader&&(a=function(e){const t=new r.xEZ(e);t.needsUpdate=!0,n(t)}),t.load(r.Zp0.resolveURL(e,i.path),a,void 0,s)}))})).then((function(e){var t;return!0===l&&a.revokeObjectURL(o),e.userData.mimeType=s.mimeType||((t=s.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(s){if(!s)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((s=s.clone()).channel=n.texCoord),i.extensions[o.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[o.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(s);s=i.extensions[o.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),i.associations.set(s,t)}}return void 0!==r&&(s.colorSpace=r),e[t]=s,s}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.UY4,r.F5T.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.nls,r.F5T.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||s||a){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),s&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),s&&(t.vertexColors=!0),a&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return r.Wid}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let a;const l={},c=[];if((s.extensions||{})[o.KHR_MATERIALS_UNLIT]){const e=i[o.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),c.push(e.extendParams(l,s,t))}else{const n=s.pbrMetallicRoughness||{};if(l.color=new r.Ilk(1,1,1),l.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;l.color.fromArray(e),l.opacity=e[3]}void 0!==n.baseColorTexture&&c.push(t.assignTexture(l,"map",n.baseColorTexture,r.KI_)),l.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,l.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(c.push(t.assignTexture(l,"metalnessMap",n.metallicRoughnessTexture)),c.push(t.assignTexture(l,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)}))))}!0===s.doubleSided&&(l.side=r.ehD);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,"MASK"===u&&(l.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&a!==r.vBJ&&(c.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new r.FM8(1,1),void 0!==s.normalTexture.scale)){const e=s.normalTexture.scale;l.normalScale.set(e,e)}return void 0!==s.occlusionTexture&&a!==r.vBJ&&(c.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(l.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&a!==r.vBJ&&(l.emissive=(new r.Ilk).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&a!==r.vBJ&&c.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,r.KI_)),Promise.all(c).then((function(){const n=new a(l);return s.name&&(n.name=s.name),j(n,s),t.associations.set(n,{materials:e}),s.extensions&&V(i,n,s),n}))}createUniqueName(e){const t=r.iUV.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(e){return n[o.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return q(n,e,t)}))}const a=[];for(let n=0,l=e.length;n<l;n++){const l=e[n],c=H(l),u=i[c];if(u)a.push(u.promise);else{let e;e=l.extensions&&l.extensions[o.KHR_DRACO_MESH_COMPRESSION]?s(l):q(new r.u9r,l,t),i[c]={primitive:l,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,s=this.extensions,a=n.meshes[e],o=a.primitives,l=[];for(let e=0,t=o.length;e<t;e++){const t=void 0===o[e].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new r.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.Wl3})),c.DefaultMaterial):this.getDependency("material",o[e].material);l.push(t)}var c;return l.push(t.loadGeometries(o)),Promise.all(l).then((function(n){const l=n.slice(0,n.length-1),c=n[n.length-1],u=[];for(let n=0,h=c.length;n<h;n++){const h=c[n],p=o[n];let d;const f=l[n];if(p.mode===D.TRIANGLES||p.mode===D.TRIANGLE_STRIP||p.mode===D.TRIANGLE_FAN||void 0===p.mode)d=!0===a.isSkinnedMesh?new r.TUv(h,f):new r.Kj0(h,f),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),p.mode===D.TRIANGLE_STRIP?d.geometry=i(d.geometry,r.UlW):p.mode===D.TRIANGLE_FAN&&(d.geometry=i(d.geometry,r.z$h));else if(p.mode===D.LINES)d=new r.ejS(h,f);else if(p.mode===D.LINE_STRIP)d=new r.x12(h,f);else if(p.mode===D.LINE_LOOP)d=new r.blk(h,f);else{if(p.mode!==D.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);d=new r.woe(h,f)}Object.keys(d.geometry.morphAttributes).length>0&&z(d,a),d.name=t.createUniqueName(a.name||"mesh_"+e),j(d,a),p.extensions&&V(s,d,p),t.assignFinalMaterial(d),u.push(d)}for(let n=0,r=u.length;n<r;n++)t.associations.set(u[n],{meshes:e,primitives:n});if(1===u.length)return a.extensions&&V(s,u[0],a),u[0];const h=new r.ZAu;a.extensions&&V(s,h,a),t.associations.set(h,{meshes:e});for(let e=0,t=u.length;e<t;e++)h.add(u[e]);return h}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new r.cPb(r.M8C.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r.iKG(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),j(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),i=e,s=[],a=[];for(let e=0,o=i.length;e<o;e++){const o=i[e];if(o){s.push(o);const t=new r.yGw;null!==n&&t.fromArray(n.array,16*e),a.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new r.OdW(s,a)}))}loadAnimation(e){const t=this.json.animations[e],n=t.name?t.name:"animation_"+e,i=[],s=[],a=[],o=[],l=[];for(let e=0,n=t.channels.length;e<n;e++){const n=t.channels[e],r=t.samplers[n.sampler],c=n.target,u=c.node,h=void 0!==t.parameters?t.parameters[r.input]:r.input,p=void 0!==t.parameters?t.parameters[r.output]:r.output;void 0!==c.node&&(i.push(this.getDependency("node",u)),s.push(this.getDependency("accessor",h)),a.push(this.getDependency("accessor",p)),o.push(r),l.push(c))}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l)]).then((function(e){const t=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=[];for(let e=0,n=t.length;e<n;e++){const n=t[e],c=i[e],u=s[e],h=a[e],p=o[e];if(void 0===n)continue;let d;switch(n.updateMatrix(),B[p.path]){case B.weights:d=r.dUE;break;case B.rotation:d=r.iLg;break;default:d=r.yC1}const f=n.name?n.name:n.uuid,m=void 0!==h.interpolation?U[h.interpolation]:r.NMF,g=[];B[p.path]===B.weights?n.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(f);let y=u.array;if(u.normalized){const e=G(y.constructor),t=new Float32Array(y.length);for(let n=0,r=y.length;n<r;n++)t[n]=y[n]*e;y=t}for(let e=0,t=g.length;e<t;e++){const t=new d(g[e]+"."+B[p.path],c.array,y,m);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){return new(this instanceof r.iLg?L:k)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}return new r.m7l(n,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],s=n.children||[];for(let e=0,n=s.length;e<n;e++)i.push(t.getDependency("node",s[e]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),a]).then((function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,X)}));for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=t.nodes[e],a=s.name?i.createUniqueName(s.name):"",o=[],l=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return l&&o.push(l),void 0!==s.camera&&o.push(i.getDependency("camera",s.camera).then((function(e){return i._getNodeRef(i.cameraCache,s.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){let o;if(o=!0===s.isBone?new r.N$j:t.length>1?new r.ZAu:1===t.length?t[0]:new r.Tme,o!==t[0])for(let e=0,n=t.length;e<n;e++)o.add(t[e]);if(s.name&&(o.userData.name=s.name,o.name=a),j(o,s),s.extensions&&V(n,o,s),void 0!==s.matrix){const e=new r.yGw;e.fromArray(s.matrix),o.applyMatrix4(e)}else void 0!==s.translation&&o.position.fromArray(s.translation),void 0!==s.rotation&&o.quaternion.fromArray(s.rotation),void 0!==s.scale&&o.scale.fromArray(s.scale);return i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=e,o})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new r.ZAu;n.name&&(s.name=i.createUniqueName(n.name)),j(s,n),n.extensions&&V(t,s,n);const a=n.nodes||[],o=[];for(let e=0,t=a.length;e<t;e++)o.push(i.getDependency("node",a[e]));return Promise.all(o).then((function(e){for(let t=0,n=e.length;t<n;t++)s.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[e,n]of i.associations)(e instanceof r.F5T||e instanceof r.xEZ)&&t.set(e,n);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(s),s}))}}function q(e,t,n){const i=t.attributes,s=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in i){const n=F[t]||t.toLowerCase();n in e.attributes||s.push(a(i[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));s.push(r)}return j(e,t),function(e,t,n){const i=t.attributes,s=new r.ZzF;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new r.Pa4(t[0],t[1],t[2]),new r.Pa4(a[0],a[1],a[2])),e.normalized){const t=G(N[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new r.Pa4,t=new r.Pa4;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],s=r.min,a=r.max;if(void 0!==s&&void 0!==a){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),r.normalized){const e=G(N[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(e)}e.boundingBox=s;const o=new r.aLr;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=o}(e,t,n),Promise.all(s).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,s=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(e);const a=[],o=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;o.push(t)}if(s){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],o=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),s&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}},650:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(9477);class i extends r.yxD{constructor(e){super(e)}parse(e){e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let t=0;const n=new Uint8Array(e),i={id_length:n[t++],colormap_type:n[t++],image_type:n[t++],colormap_index:n[t++]|n[t++]<<8,colormap_length:n[t++]|n[t++]<<8,colormap_size:n[t++],origin:[n[t++]|n[t++]<<8,n[t++]|n[t++]<<8],width:n[t++]|n[t++]<<8,height:n[t++]|n[t++]<<8,pixel_size:n[t++],flags:n[t++]};!function(e){switch(e.image_type){case 1:case 9:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case 2:case 3:case 10:case 11:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case 0:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(i),i.id_length+t>e.length&&console.error("THREE.TGALoader: No data."),t+=i.id_length;let s=!1,a=!1,o=!1;switch(i.image_type){case 9:s=!0,a=!0;break;case 1:a=!0;break;case 10:s=!0;break;case 2:break;case 11:s=!0,o=!0;break;case 3:o=!0}const l=new Uint8Array(i.width*i.height*4),c=function(e,t,n,r,i){let s,a;const o=n.pixel_size>>3,l=n.width*n.height*o;if(t&&(a=i.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){let e,t,n;s=new Uint8Array(l);let a=0;const c=new Uint8Array(o);for(;a<l;)if(e=i[r++],t=1+(127&e),128&e){for(n=0;n<o;++n)c[n]=i[r++];for(n=0;n<t;++n)s.set(c,a+n*o);a+=o*t}else{for(t*=o,n=0;n<t;++n)s[a+n]=i[r++];a+=t}}else s=i.subarray(r,r+=t?n.width*n.height:l);return{pixel_data:s,palettes:a}}(s,a,i,t,n);return function(e,t,n,r,s){let a,l,c,u,h,p;switch((48&i.flags)>>4){default:case 2:a=0,c=1,h=t,l=0,u=1,p=n;break;case 0:a=0,c=1,h=t,l=n-1,u=-1,p=-1;break;case 3:a=t-1,c=-1,h=-1,l=0,u=1,p=n;break;case 1:a=t-1,c=-1,h=-1,l=n-1,u=-1,p=-1}if(o)switch(i.pixel_size){case 8:!function(e,t,n,r,s,a,o,l){let c,u,h,p=0;const d=i.width;for(h=t;h!==r;h+=n)for(u=s;u!==o;u+=a,p++)c=l[p],e[4*(u+d*h)+0]=c,e[4*(u+d*h)+1]=c,e[4*(u+d*h)+2]=c,e[4*(u+d*h)+3]=255}(e,l,u,p,a,c,h,r);break;case 16:!function(e,t,n,r,s,a,o,l){let c,u,h=0;const p=i.width;for(u=t;u!==r;u+=n)for(c=s;c!==o;c+=a,h+=2)e[4*(c+p*u)+0]=l[h+0],e[4*(c+p*u)+1]=l[h+0],e[4*(c+p*u)+2]=l[h+0],e[4*(c+p*u)+3]=l[h+1]}(e,l,u,p,a,c,h,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(i.pixel_size){case 8:!function(e,t,n,r,s,a,o,l,c){const u=c;let h,p,d,f=0;const m=i.width;for(d=t;d!==r;d+=n)for(p=s;p!==o;p+=a,f++)h=l[f],e[4*(p+m*d)+3]=255,e[4*(p+m*d)+2]=u[3*h+0],e[4*(p+m*d)+1]=u[3*h+1],e[4*(p+m*d)+0]=u[3*h+2]}(e,l,u,p,a,c,h,r,s);break;case 16:!function(e,t,n,r,s,a,o,l){let c,u,h,p=0;const d=i.width;for(h=t;h!==r;h+=n)for(u=s;u!==o;u+=a,p+=2)c=l[p+0]+(l[p+1]<<8),e[4*(u+d*h)+0]=(31744&c)>>7,e[4*(u+d*h)+1]=(992&c)>>2,e[4*(u+d*h)+2]=(31&c)<<3,e[4*(u+d*h)+3]=32768&c?0:255}(e,l,u,p,a,c,h,r);break;case 24:!function(e,t,n,r,s,a,o,l){let c,u,h=0;const p=i.width;for(u=t;u!==r;u+=n)for(c=s;c!==o;c+=a,h+=3)e[4*(c+p*u)+3]=255,e[4*(c+p*u)+2]=l[h+0],e[4*(c+p*u)+1]=l[h+1],e[4*(c+p*u)+0]=l[h+2]}(e,l,u,p,a,c,h,r);break;case 32:!function(e,t,n,r,s,a,o,l){let c,u,h=0;const p=i.width;for(u=t;u!==r;u+=n)for(c=s;c!==o;c+=a,h+=4)e[4*(c+p*u)+2]=l[h+0],e[4*(c+p*u)+1]=l[h+1],e[4*(c+p*u)+0]=l[h+2],e[4*(c+p*u)+3]=l[h+3]}(e,l,u,p,a,c,h,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(l,i.width,i.height,c.pixel_data,c.palettes),{data:l,width:i.width,height:i.height,flipY:!0,generateMipmaps:!0,minFilter:r.D1R}}}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,exports:{}};return i[e].call(n.exports,n,n.exports,a),n.exports}a.m=i,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){s[e]=function(){return n[e]}}));return s.default=function(){return n},a.d(i,s),i},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return e+".3d-editor.bundle.js"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},r="sd-webui-3d-editor:",a.l=function(e,t,i,s){if(n[e])n[e].push(t);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==r+i){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",r+i),o.src=e),n[e]=[t];var p=function(t,r){o.onerror=o.onload=null,clearTimeout(d);var i=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(e){return e(r)})),t)return t(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={179:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var s=a.p+a.u(t),o=new Error;a.l(s,(function(n){if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,r[1](o)}}),"chunk-"+t,t)}};var t=function(t,n){var r,i,s=n[0],o=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);l&&l(a)}for(t&&t(n);c<s.length;c++)i=s[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunksd_webui_3d_editor=self.webpackChunksd_webui_3d_editor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.nc=void 0,function(){"use strict";var e={};a.r(e),a.d(e,{AddObjectCommand:function(){return Rr},AddScriptCommand:function(){return di},MoveObjectCommand:function(){return fi.m},MultiCmdsCommand:function(){return bi},RemoveObjectCommand:function(){return Ti},RemoveScriptCommand:function(){return Di},SetColorCommand:function(){return Bi},SetGeometryCommand:function(){return Ui.H},SetGeometryValueCommand:function(){return Gi},SetMaterialColorCommand:function(){return $i},SetMaterialCommand:function(){return rs},SetMaterialMapCommand:function(){return cs},SetMaterialValueCommand:function(){return ms},SetMaterialVectorCommand:function(){return ws},SetPositionCommand:function(){return Ms},SetRotationCommand:function(){return Ns},SetScaleCommand:function(){return Us},SetSceneCommand:function(){return Zr},SetScriptValueCommand:function(){return Gs},SetUuidCommand:function(){return Vr},SetValueCommand:function(){return Xr}});var t=a(7294),n=a.t(t,2),r=a(745),i=a(3379),s=a.n(i),o=a(7795),l=a.n(o),c=a(569),u=a.n(c),h=a(3565),p=a.n(h),d=a(9216),f=a.n(d),m=a(4589),g=a.n(m),y=a(1424),v={};function x(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function w(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}v.styleTagTransform=g(),v.setAttributes=p(),v.insert=u().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=f(),s()(y.Z,v),y.Z&&y.Z.locals&&y.Z.locals;var S=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,_=w((function(e){return S.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),E=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),C=Math.abs,T=String.fromCharCode,M=Object.assign;function A(e){return e.trim()}function k(e,t,n){return e.replace(t,n)}function P(e,t){return e.indexOf(t)}function L(e,t){return 0|e.charCodeAt(t)}function D(e,t,n){return e.slice(t,n)}function N(e){return e.length}function R(e){return e.length}function I(e,t){return t.push(e),e}var O=1,F=1,B=0,U=0,V=0,j="";function z(e,t,n,r,i,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:O,column:F,length:a,return:""}}function H(e,t){return M(z("",null,null,"",null,null,0),e,{length:-e.length},t)}function W(){return V=U>0?L(j,--U):0,F--,10===V&&(F=1,O--),V}function G(){return V=U<B?L(j,U++):0,F++,10===V&&(F=1,O++),V}function X(){return L(j,U)}function K(){return U}function q(e,t){return D(j,e,t)}function J(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Y(e){return O=F=1,B=N(j=e),U=0,[]}function $(e){return j="",e}function Z(e){return A(q(U-1,te(91===e?e+2:40===e?e+1:e)))}function Q(e){for(;(V=X())&&V<33;)G();return J(e)>2||J(V)>3?"":" "}function ee(e,t){for(;--t&&G()&&!(V<48||V>102||V>57&&V<65||V>70&&V<97););return q(e,K()+(t<6&&32==X()&&32==G()))}function te(e){for(;G();)switch(V){case e:return U;case 34:case 39:34!==e&&39!==e&&te(V);break;case 40:41===e&&te(e);break;case 92:G()}return U}function ne(e,t){for(;G()&&e+V!==57&&(e+V!==84||47!==X()););return"/*"+q(t,U-1)+"*"+T(47===e?e:G())}function re(e){for(;!J(X());)G();return q(e,U)}var ie="-ms-",se="-moz-",ae="-webkit-",oe="comm",le="rule",ce="decl",ue="@keyframes";function he(e,t){for(var n="",r=R(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function pe(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ce:return e.return=e.return||e.value;case oe:return"";case ue:return e.return=e.value+"{"+he(e.children,r)+"}";case le:e.value=e.props.join(",")}return N(n=he(e.children,r))?e.return=e.value+"{"+n+"}":""}function de(e){return $(fe("",null,null,null,[""],e=Y(e),0,[0],e))}function fe(e,t,n,r,i,s,a,o,l){for(var c=0,u=0,h=a,p=0,d=0,f=0,m=1,g=1,y=1,v=0,x="",b=i,w=s,S=r,_=x;g;)switch(f=v,v=G()){case 40:if(108!=f&&58==L(_,h-1)){-1!=P(_+=k(Z(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:_+=Z(v);break;case 9:case 10:case 13:case 32:_+=Q(f);break;case 92:_+=ee(K()-1,7);continue;case 47:switch(X()){case 42:case 47:I(ge(ne(G(),K()),t,n),l);break;default:_+="/"}break;case 123*m:o[c++]=N(_)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(_=k(_,/\f/g,"")),d>0&&N(_)-h&&I(d>32?ye(_+";",r,n,h-1):ye(k(_," ","")+";",r,n,h-2),l);break;case 59:_+=";";default:if(I(S=me(_,t,n,c,u,i,o,x,b=[],w=[],h),s),123===v)if(0===u)fe(_,t,S,S,b,s,h,o,w);else switch(99===p&&110===L(_,3)?100:p){case 100:case 108:case 109:case 115:fe(e,S,S,r&&I(me(e,S,S,0,0,i,o,x,i,b=[],h),w),i,w,h,o,r?b:w);break;default:fe(_,S,S,S,[""],w,0,o,w)}}c=u=d=0,m=y=1,x=_="",h=a;break;case 58:h=1+N(_),d=f;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==W())continue;switch(_+=T(v),v*m){case 38:y=u>0?1:(_+="\f",-1);break;case 44:o[c++]=(N(_)-1)*y,y=1;break;case 64:45===X()&&(_+=Z(G())),p=X(),u=h=N(x=_+=re(K())),v++;break;case 45:45===f&&2==N(_)&&(m=0)}}return s}function me(e,t,n,r,i,s,a,o,l,c,u){for(var h=i-1,p=0===i?s:[""],d=R(p),f=0,m=0,g=0;f<r;++f)for(var y=0,v=D(e,h+1,h=C(m=a[f])),x=e;y<d;++y)(x=A(m>0?p[y]+" "+v:k(v,/&\f/g,p[y])))&&(l[g++]=x);return z(e,t,n,0===i?le:o,l,c,u)}function ge(e,t,n){return z(e,t,n,oe,T(V),D(e,2,-2),0)}function ye(e,t,n,r){return z(e,t,n,ce,D(e,0,r),D(e,r+1,-1),r)}var ve=function(e,t,n){for(var r=0,i=0;r=i,i=X(),38===r&&12===i&&(t[n]=1),!J(i);)G();return q(e,U)},xe=new WeakMap,be=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||xe.get(n))&&!r){xe.set(e,!0);for(var i=[],s=function(e,t){return $(function(e,t){var n=-1,r=44;do{switch(J(r)){case 0:38===r&&12===X()&&(t[n]=1),e[n]+=ve(U-1,t,n);break;case 2:e[n]+=Z(r);break;case 4:if(44===r){e[++n]=58===X()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=T(r)}}while(r=G());return e}(Y(e),t))}(t,i),a=n.props,o=0,l=0;o<s.length;o++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[o]?s[o].replace(/&\f/g,a[c]):a[c]+" "+s[o]}}},we=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Se(e,t){switch(function(e,t){return 45^L(e,0)?(((t<<2^L(e,0))<<2^L(e,1))<<2^L(e,2))<<2^L(e,3):0}(e,t)){case 5103:return ae+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ae+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ae+e+se+e+ie+e+e;case 6828:case 4268:return ae+e+ie+e+e;case 6165:return ae+e+ie+"flex-"+e+e;case 5187:return ae+e+k(e,/(\w+).+(:[^]+)/,ae+"box-$1$2"+ie+"flex-$1$2")+e;case 5443:return ae+e+ie+"flex-item-"+k(e,/flex-|-self/,"")+e;case 4675:return ae+e+ie+"flex-line-pack"+k(e,/align-content|flex-|-self/,"")+e;case 5548:return ae+e+ie+k(e,"shrink","negative")+e;case 5292:return ae+e+ie+k(e,"basis","preferred-size")+e;case 6060:return ae+"box-"+k(e,"-grow","")+ae+e+ie+k(e,"grow","positive")+e;case 4554:return ae+k(e,/([^-])(transform)/g,"$1"+ae+"$2")+e;case 6187:return k(k(k(e,/(zoom-|grab)/,ae+"$1"),/(image-set)/,ae+"$1"),e,"")+e;case 5495:case 3959:return k(e,/(image-set\([^]*)/,ae+"$1$`$1");case 4968:return k(k(e,/(.+:)(flex-)?(.*)/,ae+"box-pack:$3"+ie+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ae+e+e;case 4095:case 3583:case 4068:case 2532:return k(e,/(.+)-inline(.+)/,ae+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(N(e)-1-t>6)switch(L(e,t+1)){case 109:if(45!==L(e,t+4))break;case 102:return k(e,/(.+:)(.+)-([^]+)/,"$1"+ae+"$2-$3$1"+se+(108==L(e,t+3)?"$3":"$2-$3"))+e;case 115:return~P(e,"stretch")?Se(k(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==L(e,t+1))break;case 6444:switch(L(e,N(e)-3-(~P(e,"!important")&&10))){case 107:return k(e,":",":"+ae)+e;case 101:return k(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ae+(45===L(e,14)?"inline-":"")+"box$3$1"+ae+"$2$3$1"+ie+"$2box$3")+e}break;case 5936:switch(L(e,t+11)){case 114:return ae+e+ie+k(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ae+e+ie+k(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ae+e+ie+k(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ae+e+ie+e+e}return e}var _e=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ce:e.return=Se(e.value,e.length);break;case ue:return he([H(e,{value:k(e.value,"@","@"+ae)})],r);case le:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return he([H(e,{props:[k(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return he([H(e,{props:[k(t,/:(plac\w+)/,":"+ae+"input-$1")]}),H(e,{props:[k(t,/:(plac\w+)/,":-moz-$1")]}),H(e,{props:[k(t,/:(plac\w+)/,ie+"input-$1")]})],r)}return""}))}}],Ee=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,s=e.stylisPlugins||_e,a={},o=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;o.push(e)}));var l,c,u,h,p=[pe,(h=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],d=(c=[be,we].concat(s,p),u=R(c),function(e,t,n,r){for(var i="",s=0;s<u;s++)i+=c[s](e,t,n,r)||"";return i});i=function(e,t,n,r){l=n,he(de(e?e+"{"+t.styles+"}":t.styles),d),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new E({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return f.sheet.hydrate(o),f},Ce={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Te=/[A-Z]|^ms/g,Me=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ae=function(e){return 45===e.charCodeAt(1)},ke=function(e){return null!=e&&"boolean"!=typeof e},Pe=w((function(e){return Ae(e)?e:e.replace(Te,"-$&").toLowerCase()})),Le=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Me,(function(e,t,n){return Ne={name:t,styles:n,next:Ne},t}))}return 1===Ce[e]||Ae(e)||"number"!=typeof t||0===t?t:t+"px"};function De(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ne={name:n.name,styles:n.styles,next:Ne},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Ne={name:r.name,styles:r.styles,next:Ne},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=De(e,t,n[i])+";";else for(var s in n){var a=n[s];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=s+"{"+t[a]+"}":ke(a)&&(r+=Pe(s)+":"+Le(s,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var o=De(e,t,a);switch(s){case"animation":case"animationName":r+=Pe(s)+":"+o+";";break;default:r+=s+"{"+o+"}"}}else for(var l=0;l<a.length;l++)ke(a[l])&&(r+=Pe(s)+":"+Le(s,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Ne,s=n(e);return Ne=i,De(e,t,s)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var Ne,Re=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ie=!!n.useInsertionEffect&&n.useInsertionEffect,Oe=Ie||function(e){return e()},Fe=(Ie||t.useLayoutEffect,t.createContext("undefined"!=typeof HTMLElement?Ee({key:"css"}):null));Fe.Provider;var Be=t.createContext({}),Ue=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Ve=_,je=function(e){return"theme"!==e},ze=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Ve:je},He=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},We=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Ue(t,n,r),Oe((function(){return function(e,t,n){Ue(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},Ge=function e(n,r){var i,s,a=n.__emotion_real===n,o=a&&n.__emotion_base||n;void 0!==r&&(i=r.label,s=r.target);var l=He(n,r,a),c=l||ze(o),u=!c("as");return function(){var h=arguments,p=a&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&p.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)p.push.apply(p,h);else{p.push(h[0][0]);for(var d=h.length,f=1;f<d;f++)p.push(h[f],h[0][f])}var m,g=(m=function(e,n,r){var i,a,h,d,f=u&&e.as||o,m="",g=[],y=e;if(null==e.theme){for(var v in y={},e)y[v]=e[v];y.theme=t.useContext(Be)}"string"==typeof e.className?(i=n.registered,a=g,h=e.className,d="",h.split(" ").forEach((function(e){void 0!==i[e]?a.push(i[e]+";"):d+=e+" "})),m=d):null!=e.className&&(m=e.className+" ");var x=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Ne=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=De(n,t,s)):i+=s[0];for(var a=1;a<e.length;a++)i+=De(n,t,e[a]),r&&(i+=s[a]);Re.lastIndex=0;for(var o,l="";null!==(o=Re.exec(i));)l+="-"+o[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Ne}}(p.concat(g),n.registered,y);m+=n.key+"-"+x.name,void 0!==s&&(m+=" "+s);var b=u&&void 0===l?ze(f):c,w={};for(var S in e)u&&"as"===S||b(S)&&(w[S]=e[S]);return w.className=m,w.ref=r,t.createElement(t.Fragment,null,t.createElement(We,{cache:n,serialized:x,isStringTag:"string"==typeof f}),t.createElement(f,w))},(0,t.forwardRef)((function(e,n){var r=(0,t.useContext)(Fe);return m(e,r,n)})));return g.displayName=void 0!==i?i:"Styled("+("string"==typeof o?o:o.displayName||o.name||"Component")+")",g.defaultProps=n.defaultProps,g.__emotion_real=g,g.__emotion_base=o,g.__emotion_styles=p,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+s}}),g.withComponent=function(t,n){return e(t,b({},r,n,{shouldForwardProp:He(g,n,!0)})).apply(void 0,p)},g}}.bind();function Xe(e,t){return Ge(e,t)}function Ke(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function qe(e){if(!Ke(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=qe(e[n])})),t}function Je(e,t,n={clone:!0}){const r=n.clone?b({},e):e;return Ke(e)&&Ke(t)&&Object.keys(t).forEach((i=>{"__proto__"!==i&&(Ke(t[i])&&i in e&&Ke(e[i])?r[i]=Je(e[i],t[i],n):n.clone?r[i]=Ke(t[i])?qe(t[i]):t[i]:r[i]=t[i])})),r}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Ge[e]=Ge(e)}));const Ye=["values","unit","step"];var $e={borderRadius:4};const Ze={xs:0,sm:600,md:900,lg:1200,xl:1536},Qe={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ze[e]}px)`};function et(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||Qe;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"==typeof t){const e=r.breakpoints||Qe;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||Ze).indexOf(i))r[e.up(i)]=n(t[i],i);else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function tt({values:e,breakpoints:t,base:n}){const r=n||function(e,t){if("object"!=typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(e,t),i=Object.keys(r);if(0===i.length)return e;let s;return i.reduce(((t,n,r)=>(Array.isArray(e)?(t[n]=null!=e[r]?e[r]:e[s],s=r):"object"==typeof e?(t[n]=null!=e[n]?e[n]:e[s],s=n):t[n]=e,t)),{})}function nt(e){let t="https://mui.com/production-error/?code="+e;for(let e=1;e<arguments.length;e+=1)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function rt(e){if("string"!=typeof e)throw new Error(nt(7));return e.charAt(0).toUpperCase()+e.slice(1)}function it(e,t,n=!0){if(!t||"string"!=typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function st(e,t,n,r=n){let i;return i="function"==typeof e?e(n):Array.isArray(e)?e[n]||r:it(e,n)||r,t&&(i=t(i,r,e)),i}var at=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=e=>{if(null==e[t])return null;const s=e[t],a=it(e.theme,r)||{};return et(e,s,(e=>{let r=st(a,i,e);return e===r&&"string"==typeof e&&(r=st(a,i,`${t}${"default"===e?"":rt(e)}`,e)),!1===n?r:{[n]:r}}))};return s.propTypes={},s.filterProps=[t],s},ot=function(e,t){return t?Je(e,t,{clone:!1}):e};const lt={m:"margin",p:"padding"},ct={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ut={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ht=function(e){const t={};return e=>(void 0===t[e]&&(t[e]=(e=>{if(e.length>2){if(!ut[e])return[e];e=ut[e]}const[t,n]=e.split(""),r=lt[t],i=ct[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})(e)),t[e])}(),pt=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],dt=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],ft=[...pt,...dt];function mt(e,t,n,r){var i;const s=null!=(i=it(e,t,!1))?i:n;return"number"==typeof s?e=>"string"==typeof e?e:s*e:Array.isArray(s)?e=>"string"==typeof e?e:s[e]:"function"==typeof s?s:()=>{}}function gt(e){return mt(e,"spacing",8)}function yt(e,t){if("string"==typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:`-${n}`}function vt(e,t){const n=gt(e.theme);return Object.keys(e).map((r=>function(e,t,n,r){if(-1===t.indexOf(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=yt(t,n),e)),{})}(ht(n),r);return et(e,e[n],i)}(e,t,r,n))).reduce(ot,{})}function xt(e){return vt(e,pt)}function bt(e){return vt(e,dt)}function wt(e){return vt(e,ft)}xt.propTypes={},xt.filterProps=pt,bt.propTypes={},bt.filterProps=dt,wt.propTypes={},wt.filterProps=ft;var St=function(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),n=e=>Object.keys(e).reduce(((n,r)=>t[r]?ot(n,t[r](e)):n),{});return n.propTypes={},n.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),n};function _t(e){return"number"!=typeof e?e:`${e}px solid`}const Et=at({prop:"border",themeKey:"borders",transform:_t}),Ct=at({prop:"borderTop",themeKey:"borders",transform:_t}),Tt=at({prop:"borderRight",themeKey:"borders",transform:_t}),Mt=at({prop:"borderBottom",themeKey:"borders",transform:_t}),At=at({prop:"borderLeft",themeKey:"borders",transform:_t}),kt=at({prop:"borderColor",themeKey:"palette"}),Pt=at({prop:"borderTopColor",themeKey:"palette"}),Lt=at({prop:"borderRightColor",themeKey:"palette"}),Dt=at({prop:"borderBottomColor",themeKey:"palette"}),Nt=at({prop:"borderLeftColor",themeKey:"palette"}),Rt=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=mt(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:yt(t,e)});return et(e,e.borderRadius,n)}return null};Rt.propTypes={},Rt.filterProps=["borderRadius"],St(Et,Ct,Tt,Mt,At,kt,Pt,Lt,Dt,Nt,Rt);const It=e=>{if(void 0!==e.gap&&null!==e.gap){const t=mt(e.theme,"spacing",8),n=e=>({gap:yt(t,e)});return et(e,e.gap,n)}return null};It.propTypes={},It.filterProps=["gap"];const Ot=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=mt(e.theme,"spacing",8),n=e=>({columnGap:yt(t,e)});return et(e,e.columnGap,n)}return null};Ot.propTypes={},Ot.filterProps=["columnGap"];const Ft=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=mt(e.theme,"spacing",8),n=e=>({rowGap:yt(t,e)});return et(e,e.rowGap,n)}return null};function Bt(e,t){return"grey"===t?t:e}function Ut(e){return e<=1&&0!==e?100*e+"%":e}Ft.propTypes={},Ft.filterProps=["rowGap"],St(It,Ot,Ft,at({prop:"gridColumn"}),at({prop:"gridRow"}),at({prop:"gridAutoFlow"}),at({prop:"gridAutoColumns"}),at({prop:"gridAutoRows"}),at({prop:"gridTemplateColumns"}),at({prop:"gridTemplateRows"}),at({prop:"gridTemplateAreas"}),at({prop:"gridArea"})),St(at({prop:"color",themeKey:"palette",transform:Bt}),at({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Bt}),at({prop:"backgroundColor",themeKey:"palette",transform:Bt}));const Vt=at({prop:"width",transform:Ut}),jt=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||Ze[t]||Ut(t)}};return et(e,e.maxWidth,t)}return null};jt.filterProps=["maxWidth"];const zt=at({prop:"minWidth",transform:Ut}),Ht=at({prop:"height",transform:Ut}),Wt=at({prop:"maxHeight",transform:Ut}),Gt=at({prop:"minHeight",transform:Ut});at({prop:"size",cssProperty:"width",transform:Ut}),at({prop:"size",cssProperty:"height",transform:Ut}),St(Vt,jt,zt,Ht,Wt,Gt,at({prop:"boxSizing"}));var Xt={border:{themeKey:"borders",transform:_t},borderTop:{themeKey:"borders",transform:_t},borderRight:{themeKey:"borders",transform:_t},borderBottom:{themeKey:"borders",transform:_t},borderLeft:{themeKey:"borders",transform:_t},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Rt},color:{themeKey:"palette",transform:Bt},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Bt},backgroundColor:{themeKey:"palette",transform:Bt},p:{style:bt},pt:{style:bt},pr:{style:bt},pb:{style:bt},pl:{style:bt},px:{style:bt},py:{style:bt},padding:{style:bt},paddingTop:{style:bt},paddingRight:{style:bt},paddingBottom:{style:bt},paddingLeft:{style:bt},paddingX:{style:bt},paddingY:{style:bt},paddingInline:{style:bt},paddingInlineStart:{style:bt},paddingInlineEnd:{style:bt},paddingBlock:{style:bt},paddingBlockStart:{style:bt},paddingBlockEnd:{style:bt},m:{style:xt},mt:{style:xt},mr:{style:xt},mb:{style:xt},ml:{style:xt},mx:{style:xt},my:{style:xt},margin:{style:xt},marginTop:{style:xt},marginRight:{style:xt},marginBottom:{style:xt},marginLeft:{style:xt},marginX:{style:xt},marginY:{style:xt},marginInline:{style:xt},marginInlineStart:{style:xt},marginInlineEnd:{style:xt},marginBlock:{style:xt},marginBlockStart:{style:xt},marginBlockEnd:{style:xt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:It},rowGap:{style:Ft},columnGap:{style:Ot},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ut},maxWidth:{style:jt},minWidth:{transform:Ut},height:{transform:Ut},maxHeight:{transform:Ut},minHeight:{transform:Ut},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};const Kt=function(){function e(e,t,n,r){const i={[e]:t,theme:n},s=r[e];if(!s)return{[e]:t};const{cssProperty:a=e,themeKey:o,transform:l,style:c}=s;if(null==t)return null;if("typography"===o&&"inherit"===t)return{[e]:t};const u=it(n,o)||{};return c?c(i):et(i,t,(t=>{let n=st(u,l,t);return t===n&&"string"==typeof t&&(n=st(u,l,`${e}${"default"===t?"":rt(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const a=null!=(r=s.unstable_sxConfig)?r:Xt;function o(n){let r=n;if("function"==typeof n)r=n(s);else if("object"!=typeof n)return n;if(!r)return null;const i=function(e={}){var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}(s.breakpoints),o=Object.keys(i);let l=i;return Object.keys(r).forEach((n=>{const i="function"==typeof(o=r[n])?o(s):o;var o;if(null!=i)if("object"==typeof i)if(a[n])l=ot(l,e(n,i,s,a));else{const e=et({theme:s},i,(e=>({[n]:e})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),n=new Set(t);return e.every((e=>n.size===Object.keys(e).length))}(e,i)?l=ot(l,e):l[n]=t({sx:i,theme:s})}else l=ot(l,e(n,i,s,a))})),c=l,o.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),c);var c}return Array.isArray(i)?i.map(o):o(i)}}();Kt.filterProps=["sx"];var qt=Kt;const Jt=["breakpoints","palette","spacing","shape"];var Yt=function(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=e,a=x(e,Jt),o=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=x(e,Ye),s=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>b({},e,{[t.key]:t.val})),{})})(t),a=Object.keys(s);function o(e){return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"==typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const s=a.indexOf(i);return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==s&&"number"==typeof t[a[s]]?t[a[s]]:i)-r/100}${n})`}return b({keys:a,values:s,up:o,down:l,between:c,only:function(e){return a.indexOf(e)+1<a.length?c(e,a[a.indexOf(e)+1]):o(e)},not:function(e){const t=a.indexOf(e);return 0===t?o(a[1]):t===a.length-1?l(a[t]):c(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}(n),l=function(e=8){if(e.mui)return e;const t=gt({spacing:e}),n=(...e)=>(0===e.length?[1]:e).map((e=>{const n=t(e);return"number"==typeof n?`${n}px`:n})).join(" ");return n.mui=!0,n}(i);let c=Je({breakpoints:o,direction:"ltr",components:{},palette:b({mode:"light"},r),spacing:l,shape:b({},$e,s)},a);return c=t.reduce(((e,t)=>Je(e,t)),c),c.unstable_sxConfig=b({},Xt,null==a?void 0:a.unstable_sxConfig),c.unstable_sx=function(e){return qt({sx:e,theme:this})},c};const $t=["variant"];function Zt(e){return 0===e.length}function Qt(e){const{variant:t}=e,n=x(e,$t);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?Zt(r)?e[t]:rt(e[t]):`${Zt(r)?t:rt(t)}${rt(e[t].toString())}`})),r}const en=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function tn(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const nn=Yt();function rn({defaultTheme:e,theme:t,themeId:n}){return r=t,0===Object.keys(r).length?e:t[n]||t;var r}function sn(e={}){const{themeId:t,defaultTheme:n=nn,rootShouldForwardProp:r=tn,slotShouldForwardProp:i=tn}=e,s=e=>qt(b({},e,{theme:rn(b({},e,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,(e,a={})=>{((e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=e.__emotion_styles.filter((e=>!(null!=e&&e.__mui_systemSx))))})(e);const{name:o,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:h}=a,p=x(a,en),d=void 0!==c?c:l&&"Root"!==l||!1,f=u||!1;let m=tn;"Root"===l?m=r:l?m=i:function(e){return"string"==typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=Xe(e,b({shouldForwardProp:m,label:void 0},p)),y=(r,...i)=>{const a=i?i.map((e=>"function"==typeof e&&e.__emotion_real!==e?r=>e(b({},r,{theme:rn(b({},r,{defaultTheme:n,themeId:t}))})):e)):[];let l=r;o&&h&&a.push((e=>{const r=rn(b({},e,{defaultTheme:n,themeId:t})),i=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(o,r);if(i){const t={};return Object.entries(i).forEach((([n,i])=>{t[n]="function"==typeof i?i(b({},e,{theme:r})):i})),h(e,t)}return null})),o&&!d&&a.push((e=>{const r=rn(b({},e,{defaultTheme:n,themeId:t}));return((e,t,n,r)=>{var i,s;const{ownerState:a={}}=e,o=[],l=null==n||null==(i=n.components)||null==(s=i[r])?void 0:s.variants;return l&&l.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{a[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&o.push(t[Qt(n.props)])})),o})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=Qt(e.props);r[t]=e.style})),r})(o,r),r,o)})),f||a.push(s);const c=a.length-i.length;if(Array.isArray(r)&&c>0){const e=new Array(c).fill("");l=[...r,...e],l.raw=[...r.raw,...e]}else"function"==typeof r&&r.__emotion_real!==r&&(l=e=>r(b({},e,{theme:rn(b({},e,{defaultTheme:n,themeId:t}))})));const u=g(l,...a);return e.muiName&&(u.muiName=e.muiName),u};return g.withConfig&&(y.withConfig=g.withConfig),y}}function an(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function on(e){if(e.type)return e;if("#"===e.charAt(0))return on(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(nt(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(nt(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function ln(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function cn(e){let t="hsl"===(e=on(e)).type||"hsla"===e.type?on(function(e){e=on(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),a=(e,t=(e+n/30)%12)=>i-s*Math.max(Math.min(t-3,9-t,1),-1);let o="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(o+="a",l.push(t[3])),ln({type:o,values:l})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}var un={black:"#000",white:"#fff"},hn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},pn={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},dn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},fn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},mn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},gn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},yn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const vn=["mode","contrastThreshold","tonalOffset"],xn={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:un.white,default:un.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},bn={text:{primary:un.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:un.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function wn(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=function(e,t){if(e=on(e),t=an(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return ln(e)}(e.main,i):"dark"===t&&(e.dark=function(e,t){if(e=on(e),t=an(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return ln(e)}(e.main,s)))}const Sn=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"],_n={textTransform:"uppercase"},En='"Roboto", "Helvetica", "Arial", sans-serif';function Cn(e,t){const n="function"==typeof t?t(e):t,{fontFamily:r=En,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:h}=n,p=x(n,Sn),d=i/14,f=h||(e=>e/c*d+"rem"),m=(e,t,n,i,s)=>{return b({fontFamily:r,fontWeight:e,fontSize:f(t),lineHeight:n},r===En?{letterSpacing:(a=i/t,Math.round(1e5*a)/1e5+"em")}:{},s,u);var a},g={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(a,48,1.167,0),h4:m(a,34,1.235,.25),h5:m(a,24,1.334,0),h6:m(o,20,1.6,.15),subtitle1:m(a,16,1.75,.15),subtitle2:m(o,14,1.57,.1),body1:m(a,16,1.5,.15),body2:m(a,14,1.43,.15),button:m(o,14,1.75,.4,_n),caption:m(a,12,1.66,.4),overline:m(a,12,2.66,1,_n),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Je(b({htmlFontSize:c,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:l},g),p,{clone:!1})}function Tn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}var Mn=["none",Tn(0,2,1,-1,0,1,1,0,0,1,3,0),Tn(0,3,1,-2,0,2,2,0,0,1,5,0),Tn(0,3,3,-2,0,3,4,0,0,1,8,0),Tn(0,2,4,-1,0,4,5,0,0,1,10,0),Tn(0,3,5,-1,0,5,8,0,0,1,14,0),Tn(0,3,5,-1,0,6,10,0,0,1,18,0),Tn(0,4,5,-2,0,7,10,1,0,2,16,1),Tn(0,5,5,-3,0,8,10,1,0,3,14,2),Tn(0,5,6,-3,0,9,12,1,0,3,16,2),Tn(0,6,6,-3,0,10,14,1,0,4,18,3),Tn(0,6,7,-4,0,11,15,1,0,4,20,3),Tn(0,7,8,-4,0,12,17,2,0,5,22,4),Tn(0,7,8,-4,0,13,19,2,0,5,24,4),Tn(0,7,9,-4,0,14,21,2,0,5,26,4),Tn(0,8,9,-5,0,15,22,2,0,6,28,5),Tn(0,8,10,-5,0,16,24,2,0,6,30,5),Tn(0,8,11,-5,0,17,26,2,0,6,32,5),Tn(0,9,11,-5,0,18,28,2,0,7,34,6),Tn(0,9,12,-6,0,19,29,2,0,7,36,6),Tn(0,10,13,-6,0,20,31,3,0,8,38,7),Tn(0,10,13,-6,0,21,33,3,0,8,40,7),Tn(0,10,14,-6,0,22,35,3,0,8,42,7),Tn(0,11,14,-7,0,23,36,3,0,9,44,8),Tn(0,11,15,-7,0,24,38,3,0,9,46,8)];const An=["duration","easing","delay"],kn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Pn={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ln(e){return`${Math.round(e)}ms`}function Dn(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function Nn(e){const t=b({},kn,e.easing),n=b({},Pn,e.duration);return b({getAutoHeightDuration:Dn,create:(e=["all"],r={})=>{const{duration:i=n.standard,easing:s=t.easeInOut,delay:a=0}=r;return x(r,An),(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof i?i:Ln(i)} ${s} ${"string"==typeof a?a:Ln(a)}`)).join(",")}},e,{easing:t,duration:n})}var Rn={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const In=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];var On=function(e={},...t){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=e,a=x(e,In);if(e.vars)throw new Error(nt(18));const o=function(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=x(e,vn),s=e.primary||function(e="light"){return"dark"===e?{main:mn[200],light:mn[50],dark:mn[400]}:{main:mn[700],light:mn[400],dark:mn[800]}}(t),a=e.secondary||function(e="light"){return"dark"===e?{main:pn[200],light:pn[50],dark:pn[400]}:{main:pn[500],light:pn[300],dark:pn[700]}}(t),o=e.error||function(e="light"){return"dark"===e?{main:dn[500],light:dn[300],dark:dn[700]}:{main:dn[700],light:dn[400],dark:dn[800]}}(t),l=e.info||function(e="light"){return"dark"===e?{main:gn[400],light:gn[300],dark:gn[700]}:{main:gn[700],light:gn[500],dark:gn[900]}}(t),c=e.success||function(e="light"){return"dark"===e?{main:yn[400],light:yn[300],dark:yn[700]}:{main:yn[800],light:yn[500],dark:yn[900]}}(t),u=e.warning||function(e="light"){return"dark"===e?{main:fn[400],light:fn[300],dark:fn[700]}:{main:"#ed6c02",light:fn[500],dark:fn[900]}}(t);function h(e){const t=function(e,t){const n=cn(e),r=cn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,bn.text.primary)>=n?bn.text.primary:xn.text.primary;return t}const p=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:s=700})=>{if(!(e=b({},e)).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error(nt(11,t?` (${t})`:"",n));if("string"!=typeof e.main)throw new Error(nt(12,t?` (${t})`:"",JSON.stringify(e.main)));return wn(e,"light",i,r),wn(e,"dark",s,r),e.contrastText||(e.contrastText=h(e.main)),e},d={dark:bn,light:xn};return Je(b({common:b({},un),mode:t,primary:p({color:s,name:"primary"}),secondary:p({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:o,name:"error"}),warning:p({color:u,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:hn,contrastThreshold:n,getContrastText:h,augmentColor:p,tonalOffset:r},d[t]),i)}(r),l=Yt(e);let c=Je(l,{mixins:(u=l.breakpoints,h=n,b({toolbar:{minHeight:56,[u.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[u.up("sm")]:{minHeight:64}}},h)),palette:o,shadows:Mn.slice(),typography:Cn(o,s),transitions:Nn(i),zIndex:b({},Rn)});var u,h;return c=Je(c,a),c=t.reduce(((e,t)=>Je(e,t)),c),c.unstable_sxConfig=b({},Xt,null==a?void 0:a.unstable_sxConfig),c.unstable_sx=function(e){return qt({sx:e,theme:this})},c},Fn=On(),Bn="$$material",Un=sn({themeId:Bn,defaultTheme:Fn,rootShouldForwardProp:e=>tn(e)&&"classes"!==e});function Vn(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Vn(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var jn=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Vn(e))&&(r&&(r+=" "),r+=t);return r};const zn=["sx"];function Hn(e){const{sx:t}=e,n=x(e,zn),{systemProps:r,otherProps:i}=(e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:Xt;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r})(n);let s;return s=Array.isArray(t)?[r,...t]:"function"==typeof t?(...e)=>{const n=t(...e);return Ke(n)?b({},r,n):r}:b({},r,t),b({},i,{sx:s})}const Wn=Yt();var Gn=function(e=Wn){return function(e=null){const n=t.useContext(Be);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r}(e)},Xn=a(5893);const Kn=["className","component"],qn=e=>e;var Jn=(()=>{let e=qn;return{configure(t){e=t},generate(t){return e(t)},reset(){e=qn}}})();const Yn=On(),$n=function(e={}){const{themeId:n,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:s}=e,a=Xe("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(qt);return t.forwardRef((function(e,t){const o=Gn(r),l=Hn(e),{className:c,component:u="div"}=l,h=x(l,Kn);return(0,Xn.jsx)(a,b({as:u,ref:t,className:jn(c,s?s(i):i),theme:n&&o[n]||o},h))}))}({themeId:Bn,defaultTheme:Yn,defaultClassName:"MuiBox-root",generateClassName:Jn.generate});var Zn=$n;const Qn={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function er(e,t,n="Mui"){const r=Qn[t];return r?`${n}-${r}`:`${Jn.generate(e)}-${t}`}function tr(e,t,n=void 0){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function nr(e,t){const n=b({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=b({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},s=t[r];n[r]={},s&&Object.keys(s)?i&&Object.keys(i)?(n[r]=b({},s),Object.keys(i).forEach((e=>{n[r][e]=nr(i[e],s[e])}))):n[r]=s:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function rr(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?nr(t.components[n].defaultProps,r):r}function ir({props:e,name:t,defaultTheme:n,themeId:r}){let i=Gn(n);return r&&(i=i[r]||i),rr({theme:i,name:t,props:e})}var sr=sn();const ar=["className","component","disableGutters","fixed","maxWidth","classes"],or=Yt(),lr=sr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${rt(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),cr=e=>ir({props:e,name:"MuiContainer",defaultTheme:or});var ur=rt;function hr({props:e,name:t}){return ir({props:e,name:t,defaultTheme:Fn,themeId:Bn})}const pr=function(e={}){const{createStyledComponent:n=lr,useThemeProps:r=cr,componentName:i="MuiContainer"}=e,s=n((({theme:e,ownerState:t})=>b({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,n)=>{const r=n,i=e.breakpoints.values[r];return 0!==i&&(t[e.breakpoints.up(r)]={maxWidth:`${i}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>b({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}))),a=t.forwardRef((function(e,t){const n=r(e),{className:a,component:o="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=n,h=x(n,ar),p=b({},n,{component:o,disableGutters:l,fixed:c,maxWidth:u}),d=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:s}=e;return tr({root:["root",s&&`maxWidth${rt(String(s))}`,r&&"fixed",i&&"disableGutters"]},(e=>er(t,e)),n)})(p,i);return(0,Xn.jsx)(s,b({as:o,ownerState:p,className:jn(d.root,a),ref:t},h))}));return a}({createStyledComponent:Un("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${ur(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>hr({props:e,name:"MuiContainer"})});var dr=pr,fr=t.createContext();function mr(e){return er("MuiGrid",e)}const gr=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],yr=function(e,t,n="Mui"){const r={};return t.forEach((t=>{r[t]=er(e,t,n)})),r}("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...gr.map((e=>`grid-xs-${e}`)),...gr.map((e=>`grid-sm-${e}`)),...gr.map((e=>`grid-md-${e}`)),...gr.map((e=>`grid-lg-${e}`)),...gr.map((e=>`grid-xl-${e}`))]);var vr=yr;const xr=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function br(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function wr({breakpoints:e,values:t}){let n="";Object.keys(t).forEach((e=>{""===n&&0!==t[e]&&(n=e)}));const r=Object.keys(e).sort(((t,n)=>e[t]-e[n]));return r.slice(0,r.indexOf(n))}const Sr=Un("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:s,spacing:a,wrap:o,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t,n={}){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(a,c,t));const h=[];return c.forEach((e=>{const r=n[e];r&&h.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,s&&t.item,l&&t.zeroMinWidth,...u,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==o&&t[`wrap-xs-${String(o)}`],...h]}})((({ownerState:e})=>b({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap})),(function({theme:e,ownerState:t}){return et({theme:e},tt({values:t.direction,breakpoints:e.breakpoints.values}),(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t[`& > .${vr.item}`]={maxWidth:"none"}),t}))}),(function({theme:e,ownerState:t}){const{container:n,rowSpacing:r}=t;let i={};if(n&&0!==r){const t=tt({values:r,breakpoints:e.breakpoints.values});let n;"object"==typeof t&&(n=wr({breakpoints:e.breakpoints.values,values:t})),i=et({theme:e},t,((t,r)=>{var i;const s=e.spacing(t);return"0px"!==s?{marginTop:`-${br(s)}`,[`& > .${vr.item}`]:{paddingTop:br(s)}}:null!=(i=n)&&i.includes(r)?{}:{marginTop:0,[`& > .${vr.item}`]:{paddingTop:0}}}))}return i}),(function({theme:e,ownerState:t}){const{container:n,columnSpacing:r}=t;let i={};if(n&&0!==r){const t=tt({values:r,breakpoints:e.breakpoints.values});let n;"object"==typeof t&&(n=wr({breakpoints:e.breakpoints.values,values:t})),i=et({theme:e},t,((t,r)=>{var i;const s=e.spacing(t);return"0px"!==s?{width:`calc(100% + ${br(s)})`,marginLeft:`-${br(s)}`,[`& > .${vr.item}`]:{paddingLeft:br(s)}}:null!=(i=n)&&i.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${vr.item}`]:{paddingLeft:0}}}))}return i}),(function({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce(((r,i)=>{let s={};if(t[i]&&(n=t[i]),!n)return r;if(!0===n)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===n)s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=tt({values:t.columns,breakpoints:e.breakpoints.values}),o="object"==typeof a?a[i]:a;if(null==o)return r;const l=Math.round(n/o*1e8)/1e6+"%";let c={};if(t.container&&t.item&&0!==t.columnSpacing){const n=e.spacing(t.columnSpacing);if("0px"!==n){const e=`calc(${l} + ${br(n)})`;c={flexBasis:e,maxWidth:e}}}s=b({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===e.breakpoints.values[i]?Object.assign(r,s):r[e.breakpoints.up(i)]=s,r}),{})})),_r=t.forwardRef((function(e,n){const r=hr({props:e,name:"MuiGrid"}),{breakpoints:i}=function(){const e=Gn(Fn);return e[Bn]||e}(),s=Hn(r),{className:a,columns:o,columnSpacing:l,component:c="div",container:u=!1,direction:h="row",item:p=!1,rowSpacing:d,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=s,y=x(s,xr),v=d||f,w=l||f,S=t.useContext(fr),_=u?o||12:S,E={},C=b({},y);i.keys.forEach((e=>{null!=y[e]&&(E[e]=y[e],delete C[e])}));const T=b({},s,{columns:_,container:u,direction:h,item:p,rowSpacing:v,columnSpacing:w,wrap:m,zeroMinWidth:g,spacing:f},E,{breakpoints:i.keys}),M=(e=>{const{classes:t,container:n,direction:r,item:i,spacing:s,wrap:a,zeroMinWidth:o,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(s,l));const u=[];return l.forEach((t=>{const n=e[t];n&&u.push(`grid-${t}-${String(n)}`)})),tr({root:["root",n&&"container",i&&"item",o&&"zeroMinWidth",...c,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==a&&`wrap-xs-${String(a)}`,...u]},mr,t)})(T);return(0,Xn.jsx)(fr.Provider,{value:_,children:(0,Xn.jsx)(Sr,b({ownerState:T,className:jn(M.root,a),as:c,ref:n},C))})}));var Er=_r,Cr=a(9477);function Tr(){var e="threejs-editor",t={language:"en",autosave:!0,"project/title":"","project/editable":!1,"project/vr":!1,"project/renderer/antialias":!0,"project/renderer/shadows":!0,"project/renderer/shadowType":1,"project/renderer/useLegacyLights":!1,"project/renderer/toneMapping":0,"project/renderer/toneMappingExposure":1,"settings/history":!1,"settings/shortcuts/translate":"w","settings/shortcuts/rotate":"e","settings/shortcuts/scale":"r","settings/shortcuts/undo":"z","settings/shortcuts/focus":"f"};if(void 0===window.localStorage[e])window.localStorage[e]=JSON.stringify(t);else{var n=JSON.parse(window.localStorage[e]);for(var r in n)t[r]=n[r]}return{getKey:function(e){return t[e]},setKey:function(){for(var n=0,r=arguments.length;n<r;n+=2)t[arguments[n]]=arguments[n+1];window.localStorage[e]=JSON.stringify(t),console.log("["+/\d\d\:\d\d\:\d\d/.exec(new Date)[0]+"]","Saved config to LocalStorage.")},clear:function(){delete window.localStorage[e]}}}var Mr=a(650),Ar=a(5971);function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==kr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===kr(i)?i:String(i)),r)}var i}function Lr(){return Lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nr(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Lr.apply(this,arguments)}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nr(e)}var Rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nr(r);if(i){var n=Nr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=s.call(this,e)).type="AddObjectCommand",n.object=t,void 0!==t&&(n.name="Add Object: ".concat(t.name)),n}return t=a,(n=[{key:"execute",value:function(){this.editor.addObject(this.object),this.editor.select(this.object)}},{key:"undo",value:function(){this.editor.removeObject(this.object),this.editor.deselect()}},{key:"toJSON",value:function(){var e=Lr(Nr(a.prototype),"toJSON",this).call(this,this);return e.object=this.object.toJSON(),e}},{key:"fromJSON",value:function(e){if(Lr(Nr(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){var t=new Cr.Gql;this.object=t.parse(e.object)}}}])&&Pr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Ir(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ir(i)?i:String(i)),r)}var i}function Fr(){return Fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ur(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Fr.apply(this,arguments)}function Br(e,t){return Br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Br(e,t)}function Ur(e){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ur(e)}var Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Br(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ur(r);if(i){var n=Ur(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=s.call(this,e)).type="SetUuidCommand",r.name="Update UUID",r.object=t,r.oldUuid=void 0!==t?t.uuid:void 0,r.newUuid=n,r}return t=a,(n=[{key:"execute",value:function(){this.object.uuid=this.newUuid,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.object.uuid=this.oldUuid,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){var e=Fr(Ur(a.prototype),"toJSON",this).call(this,this);return e.oldUuid=this.oldUuid,e.newUuid=this.newUuid,e}},{key:"fromJSON",value:function(e){Fr(Ur(a.prototype),"fromJSON",this).call(this,e),this.oldUuid=e.oldUuid,this.newUuid=e.newUuid,this.object=this.editor.objectByUuid(e.oldUuid),void 0===this.object&&(this.object=this.editor.objectByUuid(e.newUuid))}}])&&Or(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==jr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===jr(i)?i:String(i)),r)}var i}function Hr(){return Hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gr(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Hr.apply(this,arguments)}function Wr(e,t){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wr(e,t)}function Gr(e){return Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gr(e)}var Xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wr(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gr(r);if(i){var n=Gr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e)).type="SetValueCommand",i.name="Set ".concat(n),i.updatable=!0,i.object=t,i.attributeName=n,i.oldValue=void 0!==t?t[n]:void 0,i.newValue=r,i}return t=a,(n=[{key:"execute",value:function(){this.object[this.attributeName]=this.newValue,this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object[this.attributeName]=this.oldValue,this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Hr(Gr(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Hr(Gr(a.prototype),"fromJSON",this).call(this,e),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue,this.object=this.editor.objectByUuid(e.objectUuid)}}])&&zr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Kr(e){return Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(e)}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Kr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Kr(i)?i:String(i)),r)}var i}function Jr(){return Jr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$r(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Jr.apply(this,arguments)}function Yr(e,t){return Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yr(e,t)}function $r(e){return $r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$r(e)}var Zr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yr(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$r(r);if(i){var n=$r(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=s.call(this,e)).type="SetSceneCommand",n.name="Set Scene",n.cmdArray=[],void 0!==t)for(n.cmdArray.push(new Vr(n.editor,n.editor.scene,t.uuid)),n.cmdArray.push(new Xr(n.editor,n.editor.scene,"name",t.name)),n.cmdArray.push(new Xr(n.editor,n.editor.scene,"userData",JSON.parse(JSON.stringify(t.userData))));t.children.length>0;){var r=t.children.pop();n.cmdArray.push(new Rr(n.editor,r))}return n}return t=a,(n=[{key:"execute",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=0;e<this.cmdArray.length;e++)this.cmdArray[e].execute();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=this.cmdArray.length-1;e>=0;e--)this.cmdArray[e].undo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){for(var e=Jr($r(a.prototype),"toJSON",this).call(this,this),t=[],n=0;n<this.cmdArray.length;n++)t.push(this.cmdArray[n].toJSON());return e.cmds=t,e}},{key:"fromJSON",value:function(e){Jr($r(a.prototype),"fromJSON",this).call(this,e);for(var t=e.cmds,n=0;n<t.length;n++){var r=new window[t[n].type];r.fromJSON(t[n]),this.cmdArray.push(r)}}}])&&qr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m),Qr={createFilesMap:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r.name]=r}return t},getFilesFromItemList:function(e,t){var n=0,r=0,i=[],s={};function a(){++n===r&&t(i,s)}function o(e){e.isDirectory?e.createReader().readEntries((function(e){for(var t=0;t<e.length;t++)o(e[t]);a()})):e.isFile&&e.file((function(t){i.push(t),s[e.fullPath.slice(1)]=t,a()})),r++}for(var l=0;l<e.length;l++){var c=e[l];"file"===c.kind&&o(c.webkitGetAsEntry())}}},ei=a(8646);function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}function ni(e){return function(e){if(Array.isArray(e))return ri(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ii(){ii=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof p?t:p,a=Object.create(s.prototype),o=new C(i||[]);return r(a,"_invoke",{value:w(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function p(){}function d(){}function f(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==ti(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,o)}))}o(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=S(a,n);if(o){if(o===h)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},x(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var a=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(v),l(v,o,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function si(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function ai(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){si(s,r,i,a,o,"next",e)}function o(e){si(s,r,i,a,o,"throw",e)}a(void 0)}))}}function oi(e){var t=this;function n(n){switch(void 0===n.metadata&&(n.metadata={type:"Geometry"}),void 0===n.metadata.type&&(n.metadata.type="Geometry"),void 0!==n.metadata.formatVersion&&(n.metadata.version=n.metadata.formatVersion),n.metadata.type.toLowerCase()){case"buffergeometry":var r=(new Cr.s4_).parse(n),i=new Cr.Kj0(r);e.execute(new Rr(e,i));break;case"geometry":console.error('Loader: "Geometry" is no longer supported.');break;case"object":var s=new Cr.Gql;s.setResourcePath(t.texturePath),s.parse(n,(function(t){t.isScene?e.execute(new Zr(e,t)):e.execute(new Rr(e,t))}));break;case"app":e.fromJSON(n)}}function r(){return r=ai(ii().mark((function t(n){var r,i,s,o,l,c,u,h,p;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=(0,ei.GZ)(new Uint8Array(n)))["model.obj"]||!r["materials.mtl"]){t.next=13;break}return t.next=4,a.e(23).then(a.bind(a,6023));case 4:return i=t.sent,s=i.MTLLoader,t.next=8,a.e(11).then(a.bind(a,7011));case 8:o=t.sent,l=o.OBJLoader,c=(new s).parse((0,ei.T8)(r["materials.mtl"])),u=(new l).setMaterials(c).parse((0,ei.T8)(r["model.obj"])),e.execute(new Rr(e,u));case 13:h=ii().mark((function t(){var n,i,s,o,l,c,u,h,d,f,m,g,y,v,x,b,w,S,_;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r[p],(i=new Cr.lLk).setURLModifier((function(e){var t=r[e];if(t){console.log("Loading",e);var n=new Blob([t.buffer],{type:"application/octet-stream"});return URL.createObjectURL(n)}return e})),s=p.split(".").pop().toLowerCase(),t.t0=s,t.next="fbx"===t.t0?7:"glb"===t.t0?15:"gltf"===t.t0?29:43;break;case 7:return t.next=9,a.e(452).then(a.bind(a,452));case 9:return o=t.sent,l=o.FBXLoader,c=new l(i),u=c.parse(n.buffer),e.execute(new Rr(e,u)),t.abrupt("break",43);case 15:return t.next=17,a.e(854).then(a.bind(a,2854));case 17:return h=t.sent,d=h.DRACOLoader,t.next=21,Promise.resolve().then(a.bind(a,3867));case 21:return f=t.sent,m=f.GLTFLoader,(g=new d).setDecoderPath("../examples/jsm/libs/draco/gltf/"),(y=new m).setDRACOLoader(g),y.parse(n.buffer,"",(function(t){var n,r=t.scene;(n=r.animations).push.apply(n,ni(t.animations)),e.execute(new Rr(e,r)),g.dispose()})),t.abrupt("break",43);case 29:return t.next=31,a.e(854).then(a.bind(a,2854));case 31:return v=t.sent,x=v.DRACOLoader,t.next=35,Promise.resolve().then(a.bind(a,3867));case 35:return b=t.sent,w=b.GLTFLoader,(S=new x).setDecoderPath("../examples/jsm/libs/draco/gltf/"),(_=new w(i)).setDRACOLoader(S),_.parse((0,ei.T8)(n),"",(function(t){var n,r=t.scene;(n=r.animations).push.apply(n,ni(t.animations)),e.execute(new Rr(e,r)),S.dispose()})),t.abrupt("break",43);case 43:case"end":return t.stop()}}),t)})),t.t0=ii().keys(r);case 15:if((t.t1=t.t0()).done){t.next=20;break}return p=t.t1.value,t.delegateYield(h(),"t2",18);case 18:t.next=15;break;case 20:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}this.texturePath="",this.loadItemList=function(e){Qr.getFilesFromItemList(e,(function(e,n){t.loadFiles(e,n)}))},this.loadFiles=function(e,n){if(e.length>0){n=n||Qr.createFilesMap(e);var r=new Cr.lLk;r.setURLModifier((function(e){e=e.replace(/^(\.?\/)/,"");var t=n[e];return t?(console.log("Loading",e),URL.createObjectURL(t)):e})),r.addHandler(/\.tga$/i,new Mr.U);for(var i=0;i<e.length;i++)t.loadFile(e[i],r)}},this.loadFile=function(t,i){var s=t.name,o=s.split(".").pop().toLowerCase(),l=new FileReader;switch(l.addEventListener("progress",(function(e){var t="("+Math.floor(e.total/1e3).toString()+" KB)",n=Math.floor(e.loaded/e.total*100)+"%";console.log("Loading",s,t,n)})),o){case"3dm":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,s,o;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(858).then(a.bind(a,9858));case 3:i=t.sent,s=i.Rhino3dmLoader,(o=new s).setLibraryPath("../examples/jsm/libs/rhino3dm/"),o.parse(r,(function(t){e.execute(new Rr(e,t))}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"3ds":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,s,o;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(842).then(a.bind(a,8842));case 2:r=t.sent,i=r.TDSLoader,s=new i,o=s.parse(n.target.result),e.execute(new Rr(e,o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"3mf":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,s,o;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(398).then(a.bind(a,2398));case 2:r=t.sent,i=r.ThreeMFLoader,s=new i,o=s.parse(n.target.result),e.execute(new Rr(e,o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"amf":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,s,o;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(996).then(a.bind(a,6996));case 2:r=t.sent,i=r.AMFLoader,s=new i,o=s.parse(n.target.result),e.execute(new Rr(e,o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"dae":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,o,l,c,u;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(706).then(a.bind(a,9706));case 3:o=t.sent,l=o.ColladaLoader,c=new l(i),(u=c.parse(r)).scene.name=s,e.execute(new Rr(e,u.scene));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsText(t);break;case"drc":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(854).then(a.bind(a,2854));case 3:i=t.sent,o=i.DRACOLoader,(l=new o).setDecoderPath("../examples/jsm/libs/draco/"),l.parse(r,(function(t){var n;if(null!==t.index){var r=new Cr.Wid;(n=new Cr.Kj0(t,r)).name=s}else{var i=new Cr.UY4({size:.01});i.vertexColors=t.hasAttribute("color"),(n=new Cr.woe(t,i)).name=s}l.dispose(),e.execute(new Rr(e,n))}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"fbx":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,s,o,l,c;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(452).then(a.bind(a,452));case 3:s=t.sent,o=s.FBXLoader,l=new o(i),c=l.parse(r),e.execute(new Rr(e,c));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"glb":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l,c,u,h,p,d,f,m,g;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,Promise.resolve().then(a.bind(a,3867));case 3:return i=t.sent,o=i.GLTFLoader,t.next=7,a.e(854).then(a.bind(a,2854));case 7:return l=t.sent,c=l.DRACOLoader,t.next=11,a.e(92).then(a.bind(a,4092));case 11:return u=t.sent,h=u.KTX2Loader,t.next=15,a.e(917).then(a.bind(a,4917));case 15:p=t.sent,d=p.MeshoptDecoder,(f=new c).setDecoderPath("../examples/jsm/libs/draco/gltf/"),(m=new h).setTranscoderPath("../examples/jsm/libs/basis/"),(g=new o).setDRACOLoader(f),g.setKTX2Loader(m),g.setMeshoptDecoder(d),g.parse(r,"",(function(t){var n,r=t.scene;r.name=s,(n=r.animations).push.apply(n,ni(t.animations)),e.execute(new Rr(e,r)),f.dispose()}));case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"gltf":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,o,l,c,u,h,p;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(854).then(a.bind(a,2854));case 3:return o=t.sent,l=o.DRACOLoader,t.next=7,Promise.resolve().then(a.bind(a,3867));case 7:c=t.sent,u=c.GLTFLoader,(h=new l).setDecoderPath("../examples/jsm/libs/draco/gltf/"),(p=new u(i)).setDRACOLoader(h),p.parse(r,"",(function(t){var n,r=t.scene;r.name=s,(n=r.animations).push.apply(n,ni(t.animations)),e.execute(new Rr(e,r)),h.dispose()}));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"js":case"json":l.addEventListener("load",(function(e){var t,r=e.target.result;if(-1!==r.indexOf("postMessage")){var i=new Blob([r],{type:"text/javascript"}),s=URL.createObjectURL(i),a=new Worker(s);return a.onmessage=function(e){e.data.metadata={version:2},n(e.data)},void a.postMessage(Date.now())}try{t=JSON.parse(r)}catch(e){return void alert(e)}n(t)}),!1),l.readAsText(t);break;case"kmz":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(667).then(a.bind(a,8667));case 2:r=t.sent,i=r.KMZLoader,o=new i,(l=o.parse(n.target.result)).scene.name=s,e.execute(new Rr(e,l.scene));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"ldr":case"mpd":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(221).then(a.bind(a,9221));case 2:r=t.sent,i=r.LDrawLoader,(o=new i).setPath("../../examples/models/ldraw/officialLibrary/"),o.parse(n.target.result,void 0,(function(t){t.name=s,t.rotation.x=Math.PI,e.execute(new Rr(e,t))}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsText(t);break;case"md2":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l,c,u,h;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.target.result,t.next=3,a.e(729).then(a.bind(a,3729));case 3:o=t.sent,l=o.MD2Loader,c=(new l).parse(i),u=new Cr.Wid,(h=new Cr.Kj0(c,u)).mixer=new Cr.Xcj(h),h.name=s,(r=h.animations).push.apply(r,ni(c.animations)),e.execute(new Rr(e,h));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"obj":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(11).then(a.bind(a,7011));case 3:i=t.sent,o=i.OBJLoader,(l=(new o).parse(r)).name=s,e.execute(new Rr(e,l));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsText(t);break;case"ply":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l,c,u,h;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(349).then(a.bind(a,1349));case 3:i=t.sent,o=i.PLYLoader,null!==(l=(new o).parse(r)).index?(u=new Cr.Wid,(c=new Cr.Kj0(l,u)).name=s):((h=new Cr.UY4({size:.01})).vertexColors=l.hasAttribute("color"),(c=new Cr.woe(l,h)).name=s),e.execute(new Rr(e,c));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"stl":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l,c,u;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(476).then(a.bind(a,8476));case 3:i=t.sent,o=i.STLLoader,l=(new o).parse(r),c=new Cr.Wid,(u=new Cr.Kj0(l,c)).name=s,e.execute(new Rr(e,u));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),void 0!==l.readAsBinaryString?l.readAsBinaryString(t):l.readAsArrayBuffer(t);break;case"svg":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,s,o,l,c,u,h,p,d,f,m,g,y;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(367).then(a.bind(a,1367));case 3:for(i=t.sent,s=i.SVGLoader,o=new s,l=o.parse(r).paths,(c=new Cr.ZAu).scale.multiplyScalar(.1),c.scale.y*=-1,u=0;u<l.length;u++)for(h=l[u],p=new Cr.vBJ({color:h.color,depthWrite:!1}),d=s.createShapes(h),f=0;f<d.length;f++)m=d[f],g=new Cr.oa8(m),y=new Cr.Kj0(g,p),c.add(y);e.execute(new Rr(e,c));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsText(t);break;case"vox":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l,c,u,h,p,d;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(33).then(a.bind(a,3033));case 3:for(i=t.sent,o=i.VOXLoader,l=i.VOXMesh,c=(new o).parse(r),(u=new Cr.ZAu).name=s,h=0;h<c.length;h++)p=c[h],d=new l(p),u.add(d);e.execute(new Rr(e,u));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"vtk":case"vtp":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l,c,u;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(546).then(a.bind(a,4546));case 3:i=t.sent,o=i.VTKLoader,l=(new o).parse(r),c=new Cr.Wid,(u=new Cr.Kj0(l,c)).name=s,e.execute(new Rr(e,u));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsArrayBuffer(t);break;case"wrl":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,s,o;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(65).then(a.bind(a,6065));case 3:i=t.sent,s=i.VRMLLoader,o=(new s).parse(r),e.execute(new Zr(e,o));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsText(t);break;case"xyz":l.addEventListener("load",function(){var t=ai(ii().mark((function t(n){var r,i,o,l,c,u;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.result,t.next=3,a.e(883).then(a.bind(a,9883));case 3:i=t.sent,o=i.XYZLoader,l=(new o).parse(r),(c=new Cr.UY4).vertexColors=l.hasAttribute("color"),(u=new Cr.woe(l,c)).name=s,e.execute(new Rr(e,u));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),l.readAsText(t);break;case"zip":l.addEventListener("load",(function(e){!function(e){r.apply(this,arguments)}(e.target.result)}),!1),l.readAsArrayBuffer(t);break;default:console.error("Unsupported file format ("+o+").")}}}function li(e){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},li(e)}function ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==li(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==li(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===li(i)?i:String(i)),r)}var i}function ui(){return ui="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ui.apply(this,arguments)}function hi(e,t){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hi(e,t)}function pi(e){return pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pi(e)}var di=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hi(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pi(r);if(i){var n=pi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=s.call(this,e)).type="AddScriptCommand",r.name="Add Script",r.object=t,r.script=n,r}return t=a,(n=[{key:"execute",value:function(){void 0===this.editor.scripts[this.object.uuid]&&(this.editor.scripts[this.object.uuid]=[]),this.editor.scripts[this.object.uuid].push(this.script),this.editor.signals.scriptAdded.dispatch(this.script)}},{key:"undo",value:function(){if(void 0!==this.editor.scripts[this.object.uuid]){var e=this.editor.scripts[this.object.uuid].indexOf(this.script);-1!==e&&this.editor.scripts[this.object.uuid].splice(e,1),this.editor.signals.scriptRemoved.dispatch(this.script)}}},{key:"toJSON",value:function(){var e=ui(pi(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.script=this.script,e}},{key:"fromJSON",value:function(e){ui(pi(a.prototype),"fromJSON",this).call(this,e),this.script=e.script,this.object=this.editor.objectByUuid(e.objectUuid)}}])&&ci(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m),fi=a(1171);function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==mi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===mi(i)?i:String(i)),r)}var i}function yi(){return yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},yi.apply(this,arguments)}function vi(e,t){return vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vi(e,t)}function xi(e){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xi(e)}var bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vi(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xi(r);if(i){var n=xi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=s.call(this,e)).type="MultiCmdsCommand",n.name="Multiple Changes",n.cmdArray=void 0!==t?t:[],n}return t=a,(n=[{key:"execute",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=0;e<this.cmdArray.length;e++)this.cmdArray[e].execute();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.editor.signals.sceneGraphChanged.active=!1;for(var e=this.cmdArray.length-1;e>=0;e--)this.cmdArray[e].undo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){for(var e=yi(xi(a.prototype),"toJSON",this).call(this,this),t=[],n=0;n<this.cmdArray.length;n++)t.push(this.cmdArray[n].toJSON());return e.cmds=t,e}},{key:"fromJSON",value:function(e){yi(xi(a.prototype),"fromJSON",this).call(this,e);for(var t=e.cmds,n=0;n<t.length;n++){var r=new window[t[n].type];r.fromJSON(t[n]),this.cmdArray.push(r)}}}])&&gi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==wi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==wi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===wi(i)?i:String(i)),r)}var i}function _i(){return _i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ci(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_i.apply(this,arguments)}function Ei(e,t){return Ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ei(e,t)}function Ci(e){return Ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ci(e)}var Ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ei(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ci(r);if(i){var n=Ci(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=s.call(this,e)).type="RemoveObjectCommand",n.name="Remove Object",n.object=t,n.parent=void 0!==t?t.parent:void 0,void 0!==n.parent&&(n.index=n.parent.children.indexOf(n.object)),n}return t=a,(n=[{key:"execute",value:function(){this.editor.removeObject(this.object),this.editor.deselect()}},{key:"undo",value:function(){this.editor.addObject(this.object,this.parent,this.index),this.editor.select(this.object)}},{key:"toJSON",value:function(){var e=_i(Ci(a.prototype),"toJSON",this).call(this,this);return e.object=this.object.toJSON(),e.index=this.index,e.parentUuid=this.parent.uuid,e}},{key:"fromJSON",value:function(e){if(_i(Ci(a.prototype),"fromJSON",this).call(this,e),this.parent=this.editor.objectByUuid(e.parentUuid),void 0===this.parent&&(this.parent=this.editor.scene),this.index=e.index,this.object=this.editor.objectByUuid(e.object.object.uuid),void 0===this.object){var t=new Cr.Gql;this.object=t.parse(e.object)}}}])&&Si(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Mi(e){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(e)}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Mi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Mi(i)?i:String(i)),r)}var i}function ki(){return ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Li(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ki.apply(this,arguments)}function Pi(e,t){return Pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pi(e,t)}function Li(e){return Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Li(e)}var Di=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pi(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Li(r);if(i){var n=Li(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=s.call(this,e)).type="RemoveScriptCommand",r.name="Remove Script",r.object=t,r.script=n,r.object&&r.script&&(r.index=r.editor.scripts[r.object.uuid].indexOf(r.script)),r}return t=a,(n=[{key:"execute",value:function(){void 0!==this.editor.scripts[this.object.uuid]&&(-1!==this.index&&this.editor.scripts[this.object.uuid].splice(this.index,1),this.editor.signals.scriptRemoved.dispatch(this.script))}},{key:"undo",value:function(){void 0===this.editor.scripts[this.object.uuid]&&(this.editor.scripts[this.object.uuid]=[]),this.editor.scripts[this.object.uuid].splice(this.index,0,this.script),this.editor.signals.scriptAdded.dispatch(this.script)}},{key:"toJSON",value:function(){var e=ki(Li(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.script=this.script,e.index=this.index,e}},{key:"fromJSON",value:function(e){ki(Li(a.prototype),"fromJSON",this).call(this,e),this.script=e.script,this.index=e.index,this.object=this.editor.objectByUuid(e.objectUuid)}}])&&Ai(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Ni(e){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(e)}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Ni(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ni(i)?i:String(i)),r)}var i}function Ii(){return Ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ii.apply(this,arguments)}function Oi(e,t){return Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oi(e,t)}function Fi(e){return Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fi(e)}var Bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oi(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fi(r);if(i){var n=Fi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e)).type="SetColorCommand",i.name="Set ".concat(n),i.updatable=!0,i.object=t,i.attributeName=n,i.oldValue=void 0!==t?i.object[i.attributeName].getHex():void 0,i.newValue=r,i}return t=a,(n=[{key:"execute",value:function(){this.object[this.attributeName].setHex(this.newValue),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object[this.attributeName].setHex(this.oldValue),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=Ii(Fi(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){Ii(Fi(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}])&&Ri(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m),Ui=a(7703);function Vi(e){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(e)}function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Vi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Vi(i)?i:String(i)),r)}var i}function zi(){return zi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},zi.apply(this,arguments)}function Hi(e,t){return Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hi(e,t)}function Wi(e){return Wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wi(e)}var Gi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hi(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wi(r);if(i){var n=Wi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e)).type="SetGeometryValueCommand",i.name="Set Geometry.".concat(n),i.object=t,i.attributeName=n,i.oldValue=void 0!==t?t.geometry[n]:void 0,i.newValue=r,i}return t=a,(n=[{key:"execute",value:function(){this.object.geometry[this.attributeName]=this.newValue,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.geometryChanged.dispatch(),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"undo",value:function(){this.object.geometry[this.attributeName]=this.oldValue,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.geometryChanged.dispatch(),this.editor.signals.sceneGraphChanged.dispatch()}},{key:"toJSON",value:function(){var e=zi(Wi(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){zi(Wi(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}])&&ji(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Xi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Xi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Xi(i)?i:String(i)),r)}var i}function qi(){return qi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qi.apply(this,arguments)}function Ji(e,t){return Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ji(e,t)}function Yi(e){return Yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yi(e)}var $i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ji(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yi(r);if(i){var n=Yi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,e)).type="SetMaterialColorCommand",o.name="Set Material.".concat(n),o.updatable=!0,o.object=t,o.material=void 0!==o.object?o.editor.getObjectMaterial(t,i):void 0,o.oldValue=void 0!==o.material?o.material[n].getHex():void 0,o.newValue=r,o.attributeName=n,o}return t=a,(n=[{key:"execute",value:function(){this.material[this.attributeName].setHex(this.newValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.attributeName].setHex(this.oldValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=qi(Yi(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){qi(Yi(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}])&&Ki(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Zi(e){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(e)}function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Zi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Zi(i)?i:String(i)),r)}var i}function es(){return es="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ns(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},es.apply(this,arguments)}function ts(e,t){return ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ts(e,t)}function ns(e){return ns=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ns(e)}var rs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ts(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ns(r);if(i){var n=ns(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e)).type="SetMaterialCommand",i.name="New Material",i.object=t,i.materialSlot=r,i.oldMaterial=i.editor.getObjectMaterial(t,r),i.newMaterial=n,i}return t=a,(n=[{key:"execute",value:function(){this.editor.setObjectMaterial(this.object,this.materialSlot,this.newMaterial),this.editor.signals.materialChanged.dispatch(this.newMaterial)}},{key:"undo",value:function(){this.editor.setObjectMaterial(this.object,this.materialSlot,this.oldMaterial),this.editor.signals.materialChanged.dispatch(this.oldMaterial)}},{key:"toJSON",value:function(){var e=es(ns(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldMaterial=this.oldMaterial.toJSON(),e.newMaterial=this.newMaterial.toJSON(),e}},{key:"fromJSON",value:function(e){function t(e){var t=new Cr.Gql,n=t.parseImages(e.images),r=t.parseTextures(e.textures,n);return t.parseMaterials([e],r)[e.uuid]}es(ns(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldMaterial=t(e.oldMaterial),this.newMaterial=t(e.newMaterial)}}])&&Qi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==is(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===is(i)?i:String(i)),r)}var i}function as(){return as="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ls(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},as.apply(this,arguments)}function os(e,t){return os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},os(e,t)}function ls(e){return ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ls(e)}var cs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&os(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ls(r);if(i){var n=ls(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,e)).type="SetMaterialMapCommand",o.name="Set Material.".concat(n),o.object=t,o.material=o.editor.getObjectMaterial(t,i),o.oldMap=void 0!==t?o.material[n]:void 0,o.newMap=r,o.mapName=n,o}return t=a,n=[{key:"execute",value:function(){null!==this.oldMap&&void 0!==this.oldMap&&this.oldMap.dispose(),this.material[this.mapName]=this.newMap,this.material.needsUpdate=!0,this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.mapName]=this.oldMap,this.material.needsUpdate=!0,this.editor.signals.materialChanged.dispatch(this.material)}},{key:"toJSON",value:function(){var e=as(ls(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.mapName=this.mapName,e.newMap=t(this.newMap),e.oldMap=t(this.oldMap),e;function t(e){if(null==e)return null;var t={geometries:{},materials:{},textures:{},images:{}},n=e.toJSON(t),r=function(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}(t.images);return r.length>0&&(n.images=r),n.sourceFile=e.sourceFile,n}}},{key:"fromJSON",value:function(e){function t(e){var t=null;if(null!==e){var n=new Cr.Gql,r=n.parseImages(e.images);(t=n.parseTextures([e],r)[e.uuid]).sourceFile=e.sourceFile}return t}as(ls(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.mapName=e.mapName,this.oldMap=t(e.oldMap),this.newMap=t(e.newMap)}}],n&&ss(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function us(e){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},us(e)}function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==us(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==us(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===us(i)?i:String(i)),r)}var i}function ps(){return ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fs(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ps.apply(this,arguments)}function ds(e,t){return ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ds(e,t)}function fs(e){return fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fs(e)}var ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ds(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fs(r);if(i){var n=fs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===us(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,e)).type="SetMaterialValueCommand",o.name="Set Material.".concat(n),o.updatable=!0,o.object=t,o.material=o.editor.getObjectMaterial(t,i),o.oldValue=void 0!==o.material?o.material[n]:void 0,o.newValue=r,o.attributeName=n,o}return t=a,(n=[{key:"execute",value:function(){this.material[this.attributeName]=this.newValue,this.material.needsUpdate=!0,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.attributeName]=this.oldValue,this.material.needsUpdate=!0,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=ps(fs(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){ps(fs(a.prototype),"fromJSON",this).call(this,e),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue,this.object=this.editor.objectByUuid(e.objectUuid)}}])&&hs(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function gs(e){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gs(e)}function ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==gs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==gs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===gs(i)?i:String(i)),r)}var i}function vs(){return vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bs(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},vs.apply(this,arguments)}function xs(e,t){return xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xs(e,t)}function bs(e){return bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bs(e)}var ws=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xs(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bs(r);if(i){var n=bs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,e)).type="SetMaterialColorCommand",o.name="Set Material.".concat(n),o.updatable=!0,o.object=t,o.material=o.editor.getObjectMaterial(t,i),o.oldValue=void 0!==o.material?o.material[n].toArray():void 0,o.newValue=r,o.attributeName=n,o}return t=a,(n=[{key:"execute",value:function(){this.material[this.attributeName].fromArray(this.newValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.attributeName].fromArray(this.oldValue),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=vs(bs(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){vs(bs(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.attributeName=e.attributeName,this.oldValue=e.oldValue,this.newValue=e.newValue}}])&&ys(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Ss(e){return Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(e)}function _s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Ss(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ss(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ss(i)?i:String(i)),r)}var i}function Es(){return Es="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ts(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Es.apply(this,arguments)}function Cs(e,t){return Cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cs(e,t)}function Ts(e){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ts(e)}var Ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cs(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ts(r);if(i){var n=Ts(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e)).type="SetPositionCommand",i.name="Set Position",i.updatable=!0,i.object=t,void 0!==t&&void 0!==n&&(i.oldPosition=t.position.clone(),i.newPosition=n.clone()),void 0!==r&&(i.oldPosition=r.clone()),i}return t=a,(n=[{key:"execute",value:function(){this.object.position.copy(this.newPosition),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object.position.copy(this.oldPosition),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newPosition.copy(e.newPosition)}},{key:"toJSON",value:function(){var e=Es(Ts(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldPosition=this.oldPosition.toArray(),e.newPosition=this.newPosition.toArray(),e}},{key:"fromJSON",value:function(e){Es(Ts(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldPosition=(new Cr.Pa4).fromArray(e.oldPosition),this.newPosition=(new Cr.Pa4).fromArray(e.newPosition)}}])&&_s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function As(e){return As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},As(e)}function ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==As(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==As(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===As(i)?i:String(i)),r)}var i}function Ps(){return Ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ds(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ps.apply(this,arguments)}function Ls(e,t){return Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ls(e,t)}function Ds(e){return Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ds(e)}var Ns=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ls(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ds(r);if(i){var n=Ds(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===As(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e)).type="SetRotationCommand",i.name="Set Rotation",i.updatable=!0,i.object=t,void 0!==t&&void 0!==n&&(i.oldRotation=t.rotation.clone(),i.newRotation=n.clone()),void 0!==r&&(i.oldRotation=r.clone()),i}return t=a,(n=[{key:"execute",value:function(){this.object.rotation.copy(this.newRotation),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object.rotation.copy(this.oldRotation),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newRotation.copy(e.newRotation)}},{key:"toJSON",value:function(){var e=Ps(Ds(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldRotation=this.oldRotation.toArray(),e.newRotation=this.newRotation.toArray(),e}},{key:"fromJSON",value:function(e){Ps(Ds(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldRotation=(new Cr.USm).fromArray(e.oldRotation),this.newRotation=(new Cr.USm).fromArray(e.newRotation)}}])&&ks(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Rs(e){return Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rs(e)}function Is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Rs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Rs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Rs(i)?i:String(i)),r)}var i}function Os(){return Os="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bs(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Os.apply(this,arguments)}function Fs(e,t){return Fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fs(e,t)}function Bs(e){return Bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bs(e)}var Us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fs(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bs(r);if(i){var n=Bs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Rs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e)).type="SetScaleCommand",i.name="Set Scale",i.updatable=!0,i.object=t,void 0!==t&&void 0!==n&&(i.oldScale=t.scale.clone(),i.newScale=n.clone()),void 0!==r&&(i.oldScale=r.clone()),i}return t=a,(n=[{key:"execute",value:function(){this.object.scale.copy(this.newScale),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"undo",value:function(){this.object.scale.copy(this.oldScale),this.object.updateMatrixWorld(!0),this.editor.signals.objectChanged.dispatch(this.object)}},{key:"update",value:function(e){this.newScale.copy(e.newScale)}},{key:"toJSON",value:function(){var e=Os(Bs(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.oldScale=this.oldScale.toArray(),e.newScale=this.newScale.toArray(),e}},{key:"fromJSON",value:function(e){Os(Bs(a.prototype),"fromJSON",this).call(this,e),this.object=this.editor.objectByUuid(e.objectUuid),this.oldScale=(new Cr.Pa4).fromArray(e.oldScale),this.newScale=(new Cr.Pa4).fromArray(e.newScale)}}])&&Is(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Vs(e){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(e)}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Vs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Vs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Vs(i)?i:String(i)),r)}var i}function zs(){return zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ws(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},zs.apply(this,arguments)}function Hs(e,t){return Hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hs(e,t)}function Ws(e){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ws(e)}var Gs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hs(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ws(r);if(i){var n=Ws(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Vs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=s.call(this,e)).type="SetScriptValueCommand",o.name="Set Script.".concat(r),o.updatable=!0,o.object=t,o.script=n,o.attributeName=r,o.oldValue=void 0!==n?n[o.attributeName]:void 0,o.newValue=i,o}return t=a,(n=[{key:"execute",value:function(){this.script[this.attributeName]=this.newValue,this.editor.signals.scriptChanged.dispatch()}},{key:"undo",value:function(){this.script[this.attributeName]=this.oldValue,this.editor.signals.scriptChanged.dispatch()}},{key:"update",value:function(e){this.newValue=e.newValue}},{key:"toJSON",value:function(){var e=zs(Ws(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.index=this.editor.scripts[this.object.uuid].indexOf(this.script),e.attributeName=this.attributeName,e.oldValue=this.oldValue,e.newValue=this.newValue,e}},{key:"fromJSON",value:function(e){zs(Ws(a.prototype),"fromJSON",this).call(this,e),this.oldValue=e.oldValue,this.newValue=e.newValue,this.attributeName=e.attributeName,this.object=this.editor.objectByUuid(e.objectUuid),this.script=this.editor.scripts[e.objectUuid][e.index]}}])&&js(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function Xs(e){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(e)}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Xs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Xs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Xs(i)?i:String(i)),r)}var i}var qs=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.undos=[],this.redos=[],this.lastCmdTime=Date.now(),this.idCounter=0,this.historyDisabled=!1,this.config=e.config;var n=this;this.editor.signals.startPlayer.add((function(){n.historyDisabled=!0})),this.editor.signals.stopPlayer.add((function(){n.historyDisabled=!1}))}var n,r;return n=t,(r=[{key:"execute",value:function(e,t){var n=this.undos[this.undos.length-1],r=Date.now()-this.lastCmdTime,i=n&&n.updatable&&e.updatable&&n.object===e.object&&n.type===e.type&&n.script===e.script&&n.attributeName===e.attributeName;i&&"SetScriptValueCommand"===e.type||i&&r<500?(n.update(e),e=n):(this.undos.push(e),e.id=++this.idCounter),e.name=void 0!==t?t:e.name,e.execute(),e.inMemory=!0,this.config.getKey("settings/history")&&(e.json=e.toJSON()),this.lastCmdTime=Date.now(),this.redos=[],this.editor.signals.historyChanged.dispatch(e)}},{key:"undo",value:function(){if(!this.historyDisabled){var e=void 0;return this.undos.length>0&&!1===(e=this.undos.pop()).inMemory&&e.fromJSON(e.json),void 0!==e&&(e.undo(),this.redos.push(e),this.editor.signals.historyChanged.dispatch(e)),e}alert("Undo/Redo disabled while scene is playing.")}},{key:"redo",value:function(){if(!this.historyDisabled){var e=void 0;return this.redos.length>0&&!1===(e=this.redos.pop()).inMemory&&e.fromJSON(e.json),void 0!==e&&(e.execute(),this.undos.push(e),this.editor.signals.historyChanged.dispatch(e)),e}alert("Undo/Redo disabled while scene is playing.")}},{key:"toJSON",value:function(){var e={undos:[],redos:[]};if(!this.config.getKey("settings/history"))return e;for(var t=0;t<this.undos.length;t++)this.undos[t].hasOwnProperty("json")&&e.undos.push(this.undos[t].json);for(var n=0;n<this.redos.length;n++)this.redos[n].hasOwnProperty("json")&&e.redos.push(this.redos[n].json);return e}},{key:"fromJSON",value:function(t){if(void 0!==t){for(var n=0;n<t.undos.length;n++){var r=t.undos[n],i=new e[r.type](this.editor);i.json=r,i.id=r.id,i.name=r.name,this.undos.push(i),this.idCounter=r.id>this.idCounter?r.id:this.idCounter}for(var s=0;s<t.redos.length;s++){var a=t.redos[s],o=new e[a.type](this.editor);o.json=a,o.id=a.id,o.name=a.name,this.redos.push(o),this.idCounter=a.id>this.idCounter?a.id:this.idCounter}this.editor.signals.historyChanged.dispatch(this.undos[this.undos.length-1])}}},{key:"clear",value:function(){this.undos=[],this.redos=[],this.idCounter=0,this.editor.signals.historyChanged.dispatch()}},{key:"goToState",value:function(e){if(this.historyDisabled)alert("Undo/Redo disabled while scene is playing.");else{this.editor.signals.sceneGraphChanged.active=!1,this.editor.signals.historyChanged.active=!1;var t=this.undos.length>0?this.undos[this.undos.length-1]:void 0;if(void 0===t||e>t.id)for(t=this.redo();void 0!==t&&e>t.id;)t=this.redo();else for(;void 0!==(t=this.undos[this.undos.length-1])&&e!==t.id;)this.undo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.historyChanged.active=!0,this.editor.signals.sceneGraphChanged.dispatch(),this.editor.signals.historyChanged.dispatch(t)}}},{key:"enableSerialization",value:function(e){this.goToState(-1),this.editor.signals.sceneGraphChanged.active=!1,this.editor.signals.historyChanged.active=!1;for(var t=this.redo();void 0!==t;)t.hasOwnProperty("json")||(t.json=t.toJSON()),t=this.redo();this.editor.signals.sceneGraphChanged.active=!0,this.editor.signals.historyChanged.active=!0,this.goToState(e)}}])&&Ks(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function Js(e){var t=e.getKey("language"),n={en:{"menubar/file":"File","menubar/file/new":"New","menubar/file/import":"Import","menubar/file/export/geometry":"Export Geometry","menubar/file/export/object":"Export Object","menubar/file/export/scene":"Export Scene","menubar/file/export/dae":"Export DAE","menubar/file/export/drc":"Export DRC","menubar/file/export/glb":"Export GLB","menubar/file/export/gltf":"Export GLTF","menubar/file/export/obj":"Export OBJ","menubar/file/export/ply":"Export PLY","menubar/file/export/ply_binary":"Export PLY (Binary)","menubar/file/export/stl":"Export STL","menubar/file/export/stl_binary":"Export STL (Binary)","menubar/file/export/usdz":"Export USDZ","menubar/file/publish":"Publish","menubar/file/send_to_controlnet_txt":"Send to ControlNet(txt2img)","menubar/file/send_to_controlnet_img":"Send to ControlNet(img2img)","menubar/edit":"Edit","menubar/edit/undo":"Undo (Ctrl+Z)","menubar/edit/redo":"Redo (Ctrl+Shift+Z)","menubar/edit/clear_history":"Clear History","menubar/edit/center":"Center","menubar/edit/clone":"Clone","menubar/edit/delete":"Delete (Del)","menubar/edit/fixcolormaps":"Fix Color Maps","menubar/add":"Add","menubar/add/group":"Group","menubar/add/plane":"Plane","menubar/add/box":"Box","menubar/add/capsule":"Capsule","menubar/add/circle":"Circle","menubar/add/cylinder":"Cylinder","menubar/add/ring":"Ring","menubar/add/sphere":"Sphere","menubar/add/dodecahedron":"Dodecahedron","menubar/add/icosahedron":"Icosahedron","menubar/add/octahedron":"Octahedron","menubar/add/tetrahedron":"Tetrahedron","menubar/add/torus":"Torus","menubar/add/tube":"Tube","menubar/add/torusknot":"TorusKnot","menubar/add/lathe":"Lathe","menubar/add/sprite":"Sprite","menubar/add/pointlight":"PointLight","menubar/add/spotlight":"SpotLight","menubar/add/directionallight":"DirectionalLight","menubar/add/hemispherelight":"HemisphereLight","menubar/add/ambientlight":"AmbientLight","menubar/add/perspectivecamera":"PerspectiveCamera","menubar/add/orthographiccamera":"OrthographicCamera","menubar/status/autosave":"autosave","menubar/play":"Play","menubar/play/stop":"Stop","menubar/play/play":"Play","menubar/examples":"Examples","menubar/examples/Arkanoid":"Arkanoid","menubar/examples/Camera":"Camera","menubar/examples/Particles":"Particles","menubar/examples/Pong":"Pong","menubar/examples/Shaders":"Shaders","menubar/view":"View","menubar/view/fullscreen":"Fullscreen","menubar/help":"Help","menubar/help/source_code":"Source Code","menubar/help/icons":"Icon Pack","menubar/help/about":"About","menubar/help/manual":"Manual","sidebar/animations":"Animations","sidebar/animations/play":"Play","sidebar/animations/stop":"Stop","sidebar/animations/timescale":"Time Scale","sidebar/scene":"Scene","sidebar/scene/background":"Background","sidebar/scene/environment":"Environment","sidebar/scene/fog":"Fog","sidebar/properties/object":"Object","sidebar/properties/geometry":"Geometry","sidebar/properties/material":"Material","sidebar/properties/script":"Script","sidebar/object/type":"Type","sidebar/object/new":"New","sidebar/object/uuid":"UUID","sidebar/object/name":"Name","sidebar/object/position":"Position","sidebar/object/rotation":"Rotation","sidebar/object/scale":"Scale","sidebar/object/fov":"Fov","sidebar/object/left":"Left","sidebar/object/right":"Right","sidebar/object/top":"Top","sidebar/object/bottom":"Bottom","sidebar/object/near":"Near","sidebar/object/far":"Far","sidebar/object/intensity":"Intensity","sidebar/object/color":"Color","sidebar/object/groundcolor":"Ground Color","sidebar/object/distance":"Distance","sidebar/object/angle":"Angle","sidebar/object/penumbra":"Penumbra","sidebar/object/decay":"Decay","sidebar/object/shadow":"Shadow","sidebar/object/shadowBias":"Shadow Bias","sidebar/object/shadowNormalBias":"Shadow Normal Bias","sidebar/object/shadowRadius":"Shadow Radius","sidebar/object/cast":"cast","sidebar/object/receive":"receive","sidebar/object/visible":"Visible","sidebar/object/frustumcull":"Frustum Cull","sidebar/object/renderorder":"Render Order","sidebar/object/userdata":"User data","sidebar/geometry/type":"Type","sidebar/geometry/new":"New","sidebar/geometry/uuid":"UUID","sidebar/geometry/name":"Name","sidebar/geometry/bounds":"Bounds","sidebar/geometry/show_vertex_normals":"Show Vertex Normals","sidebar/geometry/compute_vertex_normals":"Compute Vertex Normals","sidebar/geometry/center":"Center","sidebar/geometry/box_geometry/width":"Width","sidebar/geometry/box_geometry/height":"Height","sidebar/geometry/box_geometry/depth":"Depth","sidebar/geometry/box_geometry/widthseg":"Width Seg","sidebar/geometry/box_geometry/heightseg":"Height Seg","sidebar/geometry/box_geometry/depthseg":"Depth Seg","sidebar/geometry/buffer_geometry/attributes":"Attributes","sidebar/geometry/buffer_geometry/index":"index","sidebar/geometry/buffer_geometry/morphAttributes":"Morph Attributes","sidebar/geometry/buffer_geometry/morphRelative":"Morph Relative","sidebar/geometry/capsule_geometry/radius":"Radius","sidebar/geometry/capsule_geometry/length":"Length","sidebar/geometry/capsule_geometry/capseg":"Cap Seg","sidebar/geometry/capsule_geometry/radialseg":"Radial Seg","sidebar/geometry/circle_geometry/radius":"Radius","sidebar/geometry/circle_geometry/segments":"Segments","sidebar/geometry/circle_geometry/thetastart":"Theta start","sidebar/geometry/circle_geometry/thetalength":"Theta length","sidebar/geometry/cylinder_geometry/radiustop":"Radius top","sidebar/geometry/cylinder_geometry/radiusbottom":"Radius bottom","sidebar/geometry/cylinder_geometry/height":"Height","sidebar/geometry/cylinder_geometry/radialsegments":"Radial segments","sidebar/geometry/cylinder_geometry/heightsegments":"Height segments","sidebar/geometry/cylinder_geometry/openended":"Open ended","sidebar/geometry/extrude_geometry/curveSegments":"Curve Segments","sidebar/geometry/extrude_geometry/steps":"Steps","sidebar/geometry/extrude_geometry/depth":"Depth","sidebar/geometry/extrude_geometry/bevelEnabled":"Bevel?","sidebar/geometry/extrude_geometry/bevelThickness":"Thickness","sidebar/geometry/extrude_geometry/bevelSize":"Size","sidebar/geometry/extrude_geometry/bevelOffset":"Offset","sidebar/geometry/extrude_geometry/bevelSegments":"Segments","sidebar/geometry/extrude_geometry/shape":"Convert to Shape","sidebar/geometry/dodecahedron_geometry/radius":"Radius","sidebar/geometry/dodecahedron_geometry/detail":"Detail","sidebar/geometry/icosahedron_geometry/radius":"Radius","sidebar/geometry/icosahedron_geometry/detail":"Detail","sidebar/geometry/octahedron_geometry/radius":"Radius","sidebar/geometry/octahedron_geometry/detail":"Detail","sidebar/geometry/tetrahedron_geometry/radius":"Radius","sidebar/geometry/tetrahedron_geometry/detail":"Detail","sidebar/geometry/lathe_geometry/segments":"Segments","sidebar/geometry/lathe_geometry/phistart":"Phi start (°)","sidebar/geometry/lathe_geometry/philength":"Phi length (°)","sidebar/geometry/lathe_geometry/points":"Points","sidebar/geometry/plane_geometry/width":"Width","sidebar/geometry/plane_geometry/height":"Height","sidebar/geometry/plane_geometry/widthsegments":"Width segments","sidebar/geometry/plane_geometry/heightsegments":"Height segments","sidebar/geometry/ring_geometry/innerRadius":"Inner radius","sidebar/geometry/ring_geometry/outerRadius":"Outer radius","sidebar/geometry/ring_geometry/thetaSegments":"Theta segments","sidebar/geometry/ring_geometry/phiSegments":"Phi segments","sidebar/geometry/ring_geometry/thetastart":"Theta start","sidebar/geometry/ring_geometry/thetalength":"Theta length","sidebar/geometry/shape_geometry/curveSegments":"Curve Segments","sidebar/geometry/shape_geometry/extrude":"Extrude","sidebar/geometry/sphere_geometry/radius":"Radius","sidebar/geometry/sphere_geometry/widthsegments":"Width segments","sidebar/geometry/sphere_geometry/heightsegments":"Height segments","sidebar/geometry/sphere_geometry/phistart":"Phi start","sidebar/geometry/sphere_geometry/philength":"Phi length","sidebar/geometry/sphere_geometry/thetastart":"Theta start","sidebar/geometry/sphere_geometry/thetalength":"Theta length","sidebar/geometry/torus_geometry/radius":"Radius","sidebar/geometry/torus_geometry/tube":"Tube","sidebar/geometry/torus_geometry/radialsegments":"Radial segments","sidebar/geometry/torus_geometry/tubularsegments":"Tubular segments","sidebar/geometry/torus_geometry/arc":"Arc","sidebar/geometry/torusKnot_geometry/radius":"Radius","sidebar/geometry/torusKnot_geometry/tube":"Tube","sidebar/geometry/torusKnot_geometry/tubularsegments":"Tubular segments","sidebar/geometry/torusKnot_geometry/radialsegments":"Radial segments","sidebar/geometry/torusKnot_geometry/p":"P","sidebar/geometry/torusKnot_geometry/q":"Q","sidebar/geometry/tube_geometry/path":"Path","sidebar/geometry/tube_geometry/radius":"Radius","sidebar/geometry/tube_geometry/tube":"Tube","sidebar/geometry/tube_geometry/tubularsegments":"Tubular segments","sidebar/geometry/tube_geometry/radialsegments":"Radial segments","sidebar/geometry/tube_geometry/closed":"Closed","sidebar/geometry/tube_geometry/curvetype":"Curve Type","sidebar/geometry/tube_geometry/tension":"Tension","sidebar/material/new":"New","sidebar/material/copy":"Copy","sidebar/material/paste":"Paste","sidebar/material/slot":"Slot","sidebar/material/type":"Type","sidebar/material/uuid":"UUID","sidebar/material/name":"Name","sidebar/material/program":"Program","sidebar/material/info":"Info","sidebar/material/vertex":"Vert","sidebar/material/fragment":"Frag","sidebar/material/color":"Color","sidebar/material/depthPacking":"Depth Packing","sidebar/material/roughness":"Roughness","sidebar/material/metalness":"Metalness","sidebar/material/reflectivity":"Reflectivity","sidebar/material/emissive":"Emissive","sidebar/material/specular":"Specular","sidebar/material/shininess":"Shininess","sidebar/material/clearcoat":"Clearcoat","sidebar/material/clearcoatroughness":"Clearcoat Roughness","sidebar/material/iridescence":"Iridescence","sidebar/material/iridescenceIOR":"Thin-Film IOR","sidebar/material/iridescenceThicknessMax":"Thin-Film Thickness","sidebar/material/sheen":"Sheen","sidebar/material/sheenroughness":"Sheen Roughness","sidebar/material/sheencolor":"Sheen Color","sidebar/material/transmission":"Transmission","sidebar/material/attenuationDistance":"Attenuation Distance","sidebar/material/attenuationColor":"Attenuation Color","sidebar/material/thickness":"Thickness","sidebar/material/vertexcolors":"Vertex Colors","sidebar/material/matcap":"Matcap","sidebar/material/map":"Map","sidebar/material/alphamap":"Alpha Map","sidebar/material/bumpmap":"Bump Map","sidebar/material/normalmap":"Normal Map","sidebar/material/clearcoatnormalmap":"Clearcoat Normal Map","sidebar/material/displacementmap":"Displace Map","sidebar/material/roughnessmap":"Rough. Map","sidebar/material/metalnessmap":"Metal. Map","sidebar/material/specularmap":"Specular Map","sidebar/material/iridescencemap":"Irid. Map","sidebar/material/iridescencethicknessmap":"Thin-Film Thickness Map","sidebar/material/sheencolormap":"Sheen Color Map","sidebar/material/sheenroughnessmap":"Sheen Rough. Map","sidebar/material/envmap":"Env Map","sidebar/material/lightmap":"Light Map","sidebar/material/aomap":"AO Map","sidebar/material/emissivemap":"Emissive Map","sidebar/material/gradientmap":"Gradient Map","sidebar/material/transmissionmap":"Transmission Map","sidebar/material/thicknessmap":"Thickness Map","sidebar/material/side":"Side","sidebar/material/size":"Size","sidebar/material/sizeAttenuation":"Size Attenuation","sidebar/material/flatShading":"Flat Shading","sidebar/material/blending":"Blending","sidebar/material/opacity":"Opacity","sidebar/material/transparent":"Transparent","sidebar/material/forcesinglepass":"Force Single Pass","sidebar/material/alphatest":"Alpha Test","sidebar/material/depthtest":"Depth Test","sidebar/material/depthwrite":"Depth Write","sidebar/material/wireframe":"Wireframe","sidebar/material/userdata":"User data","sidebar/script":"Script","sidebar/script/new":"New","sidebar/script/edit":"Edit","sidebar/script/remove":"Remove","sidebar/project":"Project","sidebar/project/title":"Title","sidebar/project/editable":"Editable","sidebar/project/vr":"VR","sidebar/project/renderer":"Renderer","sidebar/project/antialias":"Antialias","sidebar/project/shadows":"Shadows","sidebar/project/useLegacyLights":"Use legacy lights","sidebar/project/toneMapping":"Tone mapping","sidebar/project/materials":"Materials","sidebar/project/Assign":"Assign","sidebar/project/video":"Video","sidebar/project/resolution":"Resolution","sidebar/project/duration":"Duration","sidebar/project/render":"Render","sidebar/settings":"Settings","sidebar/settings/language":"Language","sidebar/settings/shortcuts":"Shortcuts","sidebar/settings/shortcuts/translate":"Translate","sidebar/settings/shortcuts/rotate":"Rotate","sidebar/settings/shortcuts/scale":"Scale","sidebar/settings/shortcuts/undo":"Undo","sidebar/settings/shortcuts/focus":"Focus","sidebar/settings/viewport":"Viewport","sidebar/settings/viewport/grid":"Grid","sidebar/settings/viewport/helpers":"Helpers","sidebar/history":"History","sidebar/history/persistent":"persistent","toolbar/translate":"Translate","toolbar/rotate":"Rotate","toolbar/scale":"Scale","toolbar/local":"Local","viewport/info/objects":"Objects","viewport/info/vertices":"Vertices","viewport/info/triangles":"Triangles","viewport/info/frametime":"Frametime","menubar/controlNet":"ControlNet","menubar/controlNet/no_controlNet":"No ControlNet","menubar/controlNet/send_to_txt2img":"Send to txt2Img","menubar/controlNet/send_to_img2img":"Send to img2Img"},fr:{"menubar/file":"Fichier","menubar/file/new":"Nouveau","menubar/file/import":"Importer","menubar/file/export/geometry":"Exporter Geometrie","menubar/file/export/object":"Exporter Objet","menubar/file/export/scene":"Exporter Scene","menubar/file/export/dae":"Exporter DAE","menubar/file/export/drc":"Exporter DRC","menubar/file/export/glb":"Exporter GLB","menubar/file/export/gltf":"Exporter GLTF","menubar/file/export/obj":"Exporter OBJ","menubar/file/export/ply":"Exporer PLY","menubar/file/export/ply_binary":"Exporter PLY (Binaire)","menubar/file/export/stl":"Exporter STL","menubar/file/export/stl_binary":"Exporter STL (Binaire)","menubar/file/export/usdz":"Exporter USDZ","menubar/file/publish":"Publier","menubar/file/send_to_controlnet_txt":"Send to ControlNet(txt2img)","menubar/file/send_to_controlnet_img":"Send to ControlNet(img2img)","menubar/edit":"Edition","menubar/edit/undo":"Annuler (Ctrl+Z)","menubar/edit/redo":"Refaire (Ctrl+Shift+Z)","menubar/edit/clear_history":"Supprimer Historique","menubar/edit/center":"Center","menubar/edit/clone":"Cloner","menubar/edit/delete":"Supprimer (Supp)","menubar/edit/fixcolormaps":"Correction des couleurs","menubar/add":"Ajouter","menubar/add/group":"Groupe","menubar/add/plane":"Plan","menubar/add/box":"Cube","menubar/add/capsule":"Capsule","menubar/add/circle":"Cercle","menubar/add/cylinder":"Cylindre","menubar/add/ring":"Bague","menubar/add/sphere":"Sphère","menubar/add/dodecahedron":"Dodécaèdre","menubar/add/icosahedron":"Icosaèdre","menubar/add/octahedron":"Octaèdre","menubar/add/tetrahedron":"Tétraèdre","menubar/add/torus":"Torus","menubar/add/tube":"Tube","menubar/add/torusknot":"Noeud Torus","menubar/add/lathe":"Tour","menubar/add/sprite":"Sprite","menubar/add/pointlight":"Lumière ponctuelle","menubar/add/spotlight":"Projecteur","menubar/add/directionallight":"Lumière directionnelle","menubar/add/hemispherelight":"Lumière hémisphérique","menubar/add/ambientlight":"Lumière ambiante","menubar/add/perspectivecamera":"Caméra perspective","menubar/add/orthographiccamera":"Caméra orthographique","menubar/status/autosave":"enregistrement automatique","menubar/play":"Jouer","menubar/play/stop":"Arrêter","menubar/play/play":"Jouer","menubar/examples":"Exemples","menubar/examples/Arkanoid":"Arkanoid","menubar/examples/Camera":"Camera","menubar/examples/Particles":"Particles","menubar/examples/Pong":"Pong","menubar/examples/Shaders":"Shaders","menubar/view":"View","menubar/view/fullscreen":"Fullscreen","menubar/help":"Aide","menubar/help/source_code":"Code Source","menubar/help/icons":"Icon Pack","menubar/help/about":"A propos","menubar/help/manual":"Manual","sidebar/animations":"Animations","sidebar/animations/play":"Play","sidebar/animations/stop":"Stop","sidebar/animations/timescale":"Time Scale","sidebar/scene":"Scène","sidebar/scene/background":"Arrière Plan","sidebar/scene/environment":"Environment","sidebar/scene/fog":"Brouillard","sidebar/properties/object":"Objet","sidebar/properties/geometry":"Géométrie","sidebar/properties/material":"Matériaux","sidebar/properties/script":"Script","sidebar/object/type":"Type","sidebar/object/new":"Nouveau","sidebar/object/uuid":"UUID","sidebar/object/name":"Nom","sidebar/object/position":"Position","sidebar/object/rotation":"Rotation","sidebar/object/scale":"Échelle","sidebar/object/fov":"Champ de vision","sidebar/object/left":"Gauche","sidebar/object/right":"Droite","sidebar/object/top":"Haut","sidebar/object/bottom":"Bas","sidebar/object/near":"Près","sidebar/object/far":"Loin","sidebar/object/intensity":"Intensité","sidebar/object/color":"Couleur","sidebar/object/groundcolor":"Couleur de fond","sidebar/object/distance":"Distance","sidebar/object/angle":"Angle","sidebar/object/penumbra":"Pénombre","sidebar/object/decay":"Affaiblissement","sidebar/object/shadow":"Ombre","sidebar/object/shadowBias":"Biais directionnel des ombres","sidebar/object/shadowNormalBias":"Shadow Normal Bias","sidebar/object/shadowRadius":"Rayon de l'ombre","sidebar/object/cast":"Projète","sidebar/object/receive":"Reçoit","sidebar/object/visible":"Visible","sidebar/object/frustumcull":"Culling","sidebar/object/renderorder":"Ordre de rendus","sidebar/object/userdata":"Données utilisateur","sidebar/geometry/type":"Type","sidebar/geometry/new":"Nouveau","sidebar/geometry/uuid":"UUID","sidebar/geometry/name":"Nom","sidebar/geometry/bounds":"Limites","sidebar/geometry/show_vertex_normals":"Afficher normales","sidebar/geometry/compute_vertex_normals":"Compute Vertex Normals","sidebar/geometry/center":"Center","sidebar/geometry/box_geometry/width":"Largeur","sidebar/geometry/box_geometry/height":"Hauteur","sidebar/geometry/box_geometry/depth":"Profondeur","sidebar/geometry/box_geometry/widthseg":"Segments en Largeur","sidebar/geometry/box_geometry/heightseg":"Segments en Hauteur","sidebar/geometry/box_geometry/depthseg":"Segments en Profondeur","sidebar/geometry/buffer_geometry/attributes":"Attributs","sidebar/geometry/buffer_geometry/index":"index","sidebar/geometry/buffer_geometry/morphAttributes":"Morph Attributes","sidebar/geometry/buffer_geometry/morphRelative":"Morph Relative","sidebar/geometry/capsule_geometry/radius":"Radius","sidebar/geometry/capsule_geometry/length":"Length","sidebar/geometry/capsule_geometry/capseg":"Cap Seg","sidebar/geometry/capsule_geometry/radialseg":"Radial Seg","sidebar/geometry/circle_geometry/radius":"Rayon","sidebar/geometry/circle_geometry/segments":"Segments","sidebar/geometry/circle_geometry/thetastart":"Début Thêta (°)","sidebar/geometry/circle_geometry/thetalength":"Longueur Thêta (°)","sidebar/geometry/cylinder_geometry/radiustop":"Rayon supérieur","sidebar/geometry/cylinder_geometry/radiusbottom":"Rayon inférieur","sidebar/geometry/cylinder_geometry/height":"Hauteur","sidebar/geometry/cylinder_geometry/radialsegments":"Segments radiaux","sidebar/geometry/cylinder_geometry/heightsegments":"Segments en hauteur","sidebar/geometry/cylinder_geometry/openended":"Extrémités ouvertes","sidebar/geometry/extrude_geometry/curveSegments":"Segments de courbe","sidebar/geometry/extrude_geometry/steps":"Pas","sidebar/geometry/extrude_geometry/depth":"Profondeur","sidebar/geometry/extrude_geometry/bevelEnabled":"Biseau","sidebar/geometry/extrude_geometry/bevelThickness":"Épaisseur","sidebar/geometry/extrude_geometry/bevelSize":"Taille","sidebar/geometry/extrude_geometry/bevelOffset":"Décalage","sidebar/geometry/extrude_geometry/bevelSegments":"Segments","sidebar/geometry/extrude_geometry/shape":"Convertir en forme","sidebar/geometry/dodecahedron_geometry/radius":"Rayon","sidebar/geometry/dodecahedron_geometry/detail":"Détail","sidebar/geometry/icosahedron_geometry/radius":"Rayon","sidebar/geometry/icosahedron_geometry/detail":"Détail","sidebar/geometry/octahedron_geometry/radius":"Rayon","sidebar/geometry/octahedron_geometry/detail":"Détail","sidebar/geometry/tetrahedron_geometry/radius":"Rayon","sidebar/geometry/tetrahedron_geometry/detail":"Détail","sidebar/geometry/lathe_geometry/segments":"Segments","sidebar/geometry/lathe_geometry/phistart":"Début Phi (°)","sidebar/geometry/lathe_geometry/philength":"Longueur Phi (°)","sidebar/geometry/lathe_geometry/points":"Points","sidebar/geometry/plane_geometry/width":"Largeur","sidebar/geometry/plane_geometry/height":"Hauteur","sidebar/geometry/plane_geometry/widthsegments":"Segments en Largeur","sidebar/geometry/plane_geometry/heightsegments":"Segments en Hauteur","sidebar/geometry/ring_geometry/innerRadius":"Rayon intérieur","sidebar/geometry/ring_geometry/outerRadius":"Rayon extérieur","sidebar/geometry/ring_geometry/thetaSegments":"Segments Thêta","sidebar/geometry/ring_geometry/phiSegments":"Phi segments","sidebar/geometry/ring_geometry/thetastart":"Début Thêta","sidebar/geometry/ring_geometry/thetalength":"Longueur Thêta","sidebar/geometry/shape_geometry/curveSegments":"Segments de courbe","sidebar/geometry/shape_geometry/extrude":"Extruder","sidebar/geometry/sphere_geometry/radius":"Rayon","sidebar/geometry/sphere_geometry/widthsegments":"Segments en Largeur","sidebar/geometry/sphere_geometry/heightsegments":"Segments en Hauteur","sidebar/geometry/sphere_geometry/phistart":"Début Phi (°)","sidebar/geometry/sphere_geometry/philength":"Longueur Phi (°)","sidebar/geometry/sphere_geometry/thetastart":"Début Thêta","sidebar/geometry/sphere_geometry/thetalength":"Longueur Thêta","sidebar/geometry/torus_geometry/radius":"Rayon","sidebar/geometry/torus_geometry/tube":"Tube","sidebar/geometry/torus_geometry/radialsegments":"Segments radiaux","sidebar/geometry/torus_geometry/tubularsegments":"Segments tubulaires","sidebar/geometry/torus_geometry/arc":"Arc","sidebar/geometry/torusKnot_geometry/radius":"Rayon","sidebar/geometry/torusKnot_geometry/tube":"Tube","sidebar/geometry/torusKnot_geometry/tubularsegments":"Segments tubulaires","sidebar/geometry/torusKnot_geometry/radialsegments":"Segments radiaux","sidebar/geometry/torusKnot_geometry/p":"P","sidebar/geometry/torusKnot_geometry/q":"Q","sidebar/geometry/tube_geometry/path":"Chemin","sidebar/geometry/tube_geometry/radius":"Rayon","sidebar/geometry/tube_geometry/tube":"Tube","sidebar/geometry/tube_geometry/tubularsegments":"Segments tubulaires","sidebar/geometry/tube_geometry/radialsegments":"Segments radiaux","sidebar/geometry/tube_geometry/closed":"Fermé","sidebar/geometry/tube_geometry/curvetype":"Type de courbe","sidebar/geometry/tube_geometry/tension":"Tension","sidebar/material/new":"Nouveau","sidebar/material/copy":"Copier","sidebar/material/paste":"Coller","sidebar/material/slot":"Slot","sidebar/material/type":"Type","sidebar/material/uuid":"UUID","sidebar/material/name":"Nom","sidebar/material/program":"Programme","sidebar/material/info":"Info","sidebar/material/vertex":"Sommet","sidebar/material/fragment":"Fragment","sidebar/material/color":"Couleur","sidebar/material/depthPacking":"Encodage profondeur de couleur","sidebar/material/roughness":"Rugosité","sidebar/material/metalness":"Métal","sidebar/material/reflectivity":"Reflectivity","sidebar/material/emissive":"Émissif","sidebar/material/specular":"Spéculaire","sidebar/material/shininess":"Brillance","sidebar/material/clearcoat":"Vernis","sidebar/material/clearcoatroughness":"Rugosité du vernis","sidebar/material/iridescence":"Iridescence","sidebar/material/iridescenceIOR":"Thin-Film IOR","sidebar/material/iridescenceThicknessMax":"Thin-Film Thickness","sidebar/material/sheen":"Sheen","sidebar/material/sheenroughness":"Sheen Roughness","sidebar/material/sheencolor":"Sheen Color","sidebar/material/transmission":"Transmission","sidebar/material/attenuationDistance":"Attenuation Distance","sidebar/material/attenuationColor":"Attenuation Color","sidebar/material/thickness":"Thickness","sidebar/material/vertexcolors":"Couleurs aux Sommets","sidebar/material/matcap":"Matcap","sidebar/material/map":"Texture","sidebar/material/alphamap":"Texture de transparence","sidebar/material/bumpmap":"Texture de relief","sidebar/material/normalmap":"Texture de normales","sidebar/material/clearcoatnormalmap":"Texture des normales du vernis","sidebar/material/displacementmap":"Texture de déplacement","sidebar/material/roughnessmap":"Texture de rugosité","sidebar/material/metalnessmap":"Texture métallique","sidebar/material/specularmap":"Texture spéculaire","sidebar/material/iridescencemap":"Irid. Map","sidebar/material/iridescencethicknessmap":"Thin-Film Thickness Map","sidebar/material/sheencolormap":"Sheen Color Map","sidebar/material/sheenroughnessmap":"Sheen Rough. Map","sidebar/material/envmap":"Texture d'environnement","sidebar/material/lightmap":"Texture d'éclairage","sidebar/material/aomap":"Texture d'occlusion ambiante","sidebar/material/emissivemap":"Texture d'émission","sidebar/material/gradientmap":"Texture de gradient","sidebar/material/transmissionmap":"Transmission Map","sidebar/material/thicknessmap":"Thickness Map","sidebar/material/side":"Côté","sidebar/material/size":"Size","sidebar/material/sizeAttenuation":"Size Attenuation","sidebar/material/flatShading":"Flat Shading","sidebar/material/blending":"Mélange","sidebar/material/opacity":"Opacité","sidebar/material/transparent":"Transparence","sidebar/material/forcesinglepass":"Force Single Pass","sidebar/material/alphatest":"Test de transparence","sidebar/material/depthtest":"Depth Test","sidebar/material/depthwrite":"Depth Write","sidebar/material/wireframe":"Fil de fer","sidebar/material/userdata":"Données utilisateur","sidebar/script":"Script","sidebar/script/new":"Nouveau","sidebar/script/edit":"Editer","sidebar/script/remove":"Supprimer","sidebar/project":"Projet","sidebar/project/title":"Titre","sidebar/project/editable":"Modifiable","sidebar/project/vr":"VR","sidebar/project/renderer":"Rendus","sidebar/project/antialias":"Anticrénelage","sidebar/project/shadows":"Ombres","sidebar/project/useLegacyLights":"Use legacy lights","sidebar/project/toneMapping":"Mappage des nuances","sidebar/project/materials":"Matériaux","sidebar/project/Assign":"Attribuer","sidebar/project/video":"Video","sidebar/project/resolution":"Resolution","sidebar/project/duration":"Duration","sidebar/project/render":"Render","sidebar/settings":"Paramètres","sidebar/settings/language":"Langue","sidebar/settings/shortcuts":"Shortcuts","sidebar/settings/shortcuts/translate":"Position","sidebar/settings/shortcuts/rotate":"Rotation","sidebar/settings/shortcuts/scale":"Échelle","sidebar/settings/shortcuts/undo":"Annuler","sidebar/settings/shortcuts/focus":"Focus","sidebar/settings/viewport":"Viewport","sidebar/settings/viewport/grid":"Grille","sidebar/settings/viewport/helpers":"Helpers","sidebar/history":"Historique","sidebar/history/persistent":"permanent","toolbar/translate":"Position","toolbar/rotate":"Rotation","toolbar/scale":"Échelle","toolbar/local":"Local","viewport/info/objects":"Objets","viewport/info/vertices":"Sommets","viewport/info/triangles":"Triangles","viewport/info/frametime":"Temps de trame","menubar/controlNet":"ControlNet","menubar/controlNet/no_controlNet":"No ControlNet","menubar/controlNet/send_to_txt2img":"Send to txt2Img","menubar/controlNet/send_to_img2img":"Send to img2Img"},zh:{"menubar/file":"文件","menubar/file/new":"新建","menubar/file/import":"导入","menubar/file/export/geometry":"导出几何体","menubar/file/export/object":"导出物体","menubar/file/export/scene":"导出场景","menubar/file/export/dae":"导出DAE","menubar/file/export/drc":"导出DRC","menubar/file/export/glb":"导出GLB","menubar/file/export/gltf":"导出GLTF","menubar/file/export/obj":"导出OBJ","menubar/file/export/ply":"导出PLY","menubar/file/export/ply_binary":"导出PLY(二进制)","menubar/file/export/stl":"导出STL","menubar/file/export/stl_binary":"导出STL(二进制)","menubar/file/export/usdz":"导出USDZ","menubar/file/publish":"发布","menubar/file/send_to_controlnet_txt":"Send to ControlNet(txt2img)","menubar/file/send_to_controlnet_img":"Send to ControlNet(img2img)","menubar/edit":"编辑","menubar/edit/undo":"撤销 (Ctrl+Z)","menubar/edit/redo":"重做 (Ctrl+Shift+Z)","menubar/edit/clear_history":"清空历史记录","menubar/edit/center":"居中","menubar/edit/clone":"拷贝","menubar/edit/delete":"删除 (Del)","menubar/edit/fixcolormaps":"修复颜色贴图","menubar/add":"添加","menubar/add/group":"组","menubar/add/plane":"平面","menubar/add/box":"正方体","menubar/add/capsule":"胶囊","menubar/add/circle":"圆","menubar/add/cylinder":"圆柱体","menubar/add/ring":"环","menubar/add/sphere":"球体","menubar/add/dodecahedron":"十二面体","menubar/add/icosahedron":"二十面体","menubar/add/octahedron":"八面体","menubar/add/tetrahedron":"四面体","menubar/add/torus":"圆环体","menubar/add/torusknot":"环面纽结体","menubar/add/tube":"管","menubar/add/lathe":"酒杯","menubar/add/sprite":"精灵","menubar/add/pointlight":"点光源","menubar/add/spotlight":"聚光灯","menubar/add/directionallight":"平行光","menubar/add/hemispherelight":"半球光","menubar/add/ambientlight":"环境光","menubar/add/perspectivecamera":"透视相机","menubar/add/orthographiccamera":"正交相机","menubar/status/autosave":"自动保存","menubar/play":"启动","menubar/play/stop":"暂停","menubar/play/play":"启动","menubar/examples":"示例","menubar/examples/Arkanoid":"打砖块","menubar/examples/Camera":" 摄像机","menubar/examples/Particles":"粒子","menubar/examples/Pong":"乒乓球","menubar/examples/Shaders":"着色器","menubar/view":"视图","menubar/view/fullscreen":"全屏","menubar/help":"帮助","menubar/help/source_code":"源码","menubar/help/icons":"图标组件包","menubar/help/about":"关于","menubar/help/manual":"手册","sidebar/animations":"动画","sidebar/animations/play":"播放","sidebar/animations/stop":"暂停","sidebar/animations/timescale":"时间缩放","sidebar/scene":"场景","sidebar/scene/background":"背景","sidebar/scene/environment":"环境","sidebar/scene/fog":"雾","sidebar/properties/object":"属性","sidebar/properties/geometry":"几何组件","sidebar/properties/material":"材质组件","sidebar/properties/script":"脚本","sidebar/object/type":"类型","sidebar/object/new":"更新","sidebar/object/uuid":"识别码","sidebar/object/name":"名称","sidebar/object/position":"位置","sidebar/object/rotation":"旋转","sidebar/object/scale":"缩放","sidebar/object/fov":"视角","sidebar/object/left":"左","sidebar/object/right":"右","sidebar/object/top":"上","sidebar/object/bottom":"下","sidebar/object/near":"近点","sidebar/object/far":"远点","sidebar/object/intensity":"强度","sidebar/object/color":"颜色","sidebar/object/groundcolor":"基色","sidebar/object/distance":"距离","sidebar/object/angle":"角度","sidebar/object/penumbra":"边缘","sidebar/object/decay":"衰减","sidebar/object/shadow":"阴影","sidebar/object/shadowBias":"阴影偏移","sidebar/object/shadowNormalBias":"阴影法线偏移","sidebar/object/shadowRadius":"阴影半径","sidebar/object/cast":"产生","sidebar/object/receive":"接受","sidebar/object/visible":"可见性","sidebar/object/frustumcull":"视锥体裁剪","sidebar/object/renderorder":"渲染次序","sidebar/object/userdata":"自定义数据","sidebar/geometry/type":"类型","sidebar/geometry/new":"更新","sidebar/geometry/uuid":"识别码","sidebar/geometry/name":"名称","sidebar/geometry/bounds":"界限","sidebar/geometry/show_vertex_normals":"显示顶点法线","sidebar/geometry/compute_vertex_normals":"计算顶点法线","sidebar/geometry/center":"居中","sidebar/geometry/box_geometry/width":"宽度","sidebar/geometry/box_geometry/height":"高度","sidebar/geometry/box_geometry/depth":"深度","sidebar/geometry/box_geometry/widthseg":"宽度分段","sidebar/geometry/box_geometry/heightseg":"高度分段","sidebar/geometry/box_geometry/depthseg":"深度分段","sidebar/geometry/buffer_geometry/attributes":"属性","sidebar/geometry/buffer_geometry/index":"索引","sidebar/geometry/buffer_geometry/morphAttributes":"Morph Attributes","sidebar/geometry/buffer_geometry/morphRelative":"Morph Relative","sidebar/geometry/capsule_geometry/radius":"半径","sidebar/geometry/capsule_geometry/length":"长度","sidebar/geometry/capsule_geometry/capseg":"胶囊分段","sidebar/geometry/capsule_geometry/radialseg":"半径分段","sidebar/geometry/circle_geometry/radius":"半径","sidebar/geometry/circle_geometry/segments":"分段","sidebar/geometry/circle_geometry/thetastart":"弧度起点","sidebar/geometry/circle_geometry/thetalength":"弧度长度","sidebar/geometry/cylinder_geometry/radiustop":"顶部半径","sidebar/geometry/cylinder_geometry/radiusbottom":"底部半径","sidebar/geometry/cylinder_geometry/height":"高度","sidebar/geometry/cylinder_geometry/radialsegments":"径向分段","sidebar/geometry/cylinder_geometry/heightsegments":"高度分段","sidebar/geometry/cylinder_geometry/openended":"开端","sidebar/geometry/extrude_geometry/curveSegments":"曲线段","sidebar/geometry/extrude_geometry/steps":"细分点数","sidebar/geometry/extrude_geometry/depth":"深度","sidebar/geometry/extrude_geometry/bevelEnabled":"启用斜角","sidebar/geometry/extrude_geometry/bevelThickness":"斜角厚度","sidebar/geometry/extrude_geometry/bevelSize":"斜角大小","sidebar/geometry/extrude_geometry/bevelOffset":"斜角偏移量","sidebar/geometry/extrude_geometry/bevelSegments":"斜角分段","sidebar/geometry/extrude_geometry/shape":"转换图形","sidebar/geometry/dodecahedron_geometry/radius":"半径","sidebar/geometry/dodecahedron_geometry/detail":"面片分段","sidebar/geometry/icosahedron_geometry/radius":"半径","sidebar/geometry/icosahedron_geometry/detail":"面片分段","sidebar/geometry/octahedron_geometry/radius":"半径","sidebar/geometry/octahedron_geometry/detail":"面片分段","sidebar/geometry/tetrahedron_geometry/radius":"半径","sidebar/geometry/tetrahedron_geometry/detail":"面片分段","sidebar/geometry/lathe_geometry/segments":"分段","sidebar/geometry/lathe_geometry/phistart":"经度起点","sidebar/geometry/lathe_geometry/philength":"经度长度","sidebar/geometry/lathe_geometry/points":"点","sidebar/geometry/plane_geometry/width":"宽度","sidebar/geometry/plane_geometry/height":"长度","sidebar/geometry/plane_geometry/widthsegments":"宽度分段","sidebar/geometry/plane_geometry/heightsegments":"长度分段","sidebar/geometry/ring_geometry/innerRadius":"内半径","sidebar/geometry/ring_geometry/outerRadius":"外半径","sidebar/geometry/ring_geometry/thetaSegments":"弧度分段","sidebar/geometry/ring_geometry/phiSegments":"经度分段","sidebar/geometry/ring_geometry/thetastart":"弧度起点","sidebar/geometry/ring_geometry/thetalength":"弧度长度","sidebar/geometry/shape_geometry/curveSegments":"曲线段","sidebar/geometry/shape_geometry/extrude":"拉伸","sidebar/geometry/sphere_geometry/radius":"半径","sidebar/geometry/sphere_geometry/widthsegments":"宽度分段","sidebar/geometry/sphere_geometry/heightsegments":"长度分段","sidebar/geometry/sphere_geometry/phistart":"经度起点","sidebar/geometry/sphere_geometry/philength":"经度长度","sidebar/geometry/sphere_geometry/thetastart":"纬度起点","sidebar/geometry/sphere_geometry/thetalength":"纬度长度","sidebar/geometry/torus_geometry/radius":"半径","sidebar/geometry/torus_geometry/tube":"管厚","sidebar/geometry/torus_geometry/radialsegments":"半径分段","sidebar/geometry/torus_geometry/tubularsegments":"管厚分段","sidebar/geometry/torus_geometry/arc":"弧度","sidebar/geometry/torusKnot_geometry/radius":"半径","sidebar/geometry/torusKnot_geometry/tube":"管厚","sidebar/geometry/torusKnot_geometry/tubularsegments":"管厚分段","sidebar/geometry/torusKnot_geometry/radialsegments":"半径分段","sidebar/geometry/torusKnot_geometry/p":"管长弧度","sidebar/geometry/torusKnot_geometry/q":"扭曲弧度","sidebar/geometry/tube_geometry/path":"路径","sidebar/geometry/tube_geometry/radius":"半径","sidebar/geometry/tube_geometry/tube":"管厚","sidebar/geometry/tube_geometry/tubularsegments":"管厚分段","sidebar/geometry/tube_geometry/radialsegments":"半径分段","sidebar/geometry/tube_geometry/closed":"闭合","sidebar/geometry/tube_geometry/curvetype":"曲线类型","sidebar/geometry/tube_geometry/tension":"张力","sidebar/material/new":"更新","sidebar/material/copy":"复制","sidebar/material/paste":"粘贴","sidebar/material/slot":"插槽","sidebar/material/type":"类型","sidebar/material/uuid":"识别码","sidebar/material/name":"名称","sidebar/material/program":"程序","sidebar/material/info":"信息","sidebar/material/vertex":"顶点","sidebar/material/fragment":"片元","sidebar/material/color":"颜色","sidebar/material/depthPacking":"深度包装","sidebar/material/roughness":"粗糙度","sidebar/material/metalness":"金属度","sidebar/material/reflectivity":"反射率","sidebar/material/emissive":"自发光","sidebar/material/specular":"高光","sidebar/material/shininess":"高光大小","sidebar/material/clearcoat":"清漆","sidebar/material/clearcoatroughness":"清漆粗糙度","sidebar/material/iridescence":"彩虹色","sidebar/material/iridescenceIOR":"彩虹色折射率","sidebar/material/iridescenceThicknessMax":"彩虹色厚度","sidebar/material/sheen":"Sheen","sidebar/material/sheenroughness":"Sheen Roughness","sidebar/material/sheencolor":"Sheen Color","sidebar/material/transmission":"透光","sidebar/material/attenuationDistance":"衰减距离","sidebar/material/attenuationColor":"衰减色","sidebar/material/thickness":"厚度","sidebar/material/vertexcolors":"顶点颜色","sidebar/material/matcap":"材质捕获","sidebar/material/map":"贴图","sidebar/material/alphamap":"透明贴图","sidebar/material/bumpmap":"凹凸贴图","sidebar/material/normalmap":"法线贴图","sidebar/material/clearcoatnormalmap":"清漆法线贴图","sidebar/material/displacementmap":"置换贴图","sidebar/material/roughnessmap":"粗糙贴图","sidebar/material/metalnessmap":"金属贴图","sidebar/material/specularmap":"高光贴图","sidebar/material/iridescencemap":"彩虹色贴图","sidebar/material/iridescencethicknessmap":"彩虹色厚度贴图","sidebar/material/sheencolormap":"Sheen Color Map","sidebar/material/sheenroughnessmap":"Sheen Rough. Map","sidebar/material/envmap":"环境贴图","sidebar/material/lightmap":"光照贴图","sidebar/material/aomap":"环境光遮蔽贴图","sidebar/material/emissivemap":"自发光贴图","sidebar/material/gradientmap":"渐变贴图","sidebar/material/transmissionmap":"透光贴图","sidebar/material/thicknessmap":"厚度贴图","sidebar/material/side":"面","sidebar/material/size":"大小","sidebar/material/sizeAttenuation":"大小衰减","sidebar/material/flatShading":"平面着色","sidebar/material/blending":"混合","sidebar/material/opacity":"透明度","sidebar/material/transparent":"透明性","sidebar/material/forcesinglepass":"Force Single Pass","sidebar/material/alphatest":"α测试","sidebar/material/depthtest":"深度测试","sidebar/material/depthwrite":"深度缓冲","sidebar/material/wireframe":"线框","sidebar/material/userdata":"自定义数据","sidebar/script":"脚本","sidebar/script/new":"新建","sidebar/script/edit":"编辑","sidebar/script/remove":"删除","sidebar/project":"项目","sidebar/project/title":"标题","sidebar/project/editable":"编辑性","sidebar/project/vr":"虚拟现实","sidebar/project/renderer":"渲染器","sidebar/project/antialias":"抗锯齿","sidebar/project/shadows":"阴影","sidebar/project/useLegacyLights":"传统灯","sidebar/project/toneMapping":"色调映射","sidebar/project/materials":"材质","sidebar/project/Assign":"应用","sidebar/project/video":"视频","sidebar/project/resolution":"分辨率","sidebar/project/duration":"时长","sidebar/project/render":"渲染","sidebar/settings":"设置","sidebar/settings/language":"语言","sidebar/settings/shortcuts":"快捷键","sidebar/settings/shortcuts/translate":"移动","sidebar/settings/shortcuts/rotate":"旋转","sidebar/settings/shortcuts/scale":"缩放","sidebar/settings/shortcuts/undo":"撤销","sidebar/settings/shortcuts/focus":"聚焦","sidebar/settings/viewport":"视窗","sidebar/settings/viewport/grid":"网格","sidebar/settings/viewport/helpers":"辅助","sidebar/history":"历史记录","sidebar/history/persistent":"本地存储","toolbar/translate":"移动","toolbar/rotate":"旋转","toolbar/scale":"缩放","toolbar/local":"本地","viewport/info/objects":"物体","viewport/info/vertices":"顶点","viewport/info/triangles":"三角形","viewport/info/frametime":"帧时","menubar/controlNet":"ControlNet","menubar/controlNet/no_controlNet":"No ControlNet","menubar/controlNet/send_to_txt2img":"Send to txt2Img","menubar/controlNet/send_to_img2img":"Send to img2Img"}};return{getKey:function(e){var r=n[t][e]||"???";return"???"===r&&(r=e),r}}}function Ys(){var e,t=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;return void 0===t?(console.warn("Storage: IndexedDB not available."),{init:function(){},get:function(){},set:function(){},clear:function(){}}):{init:function(n){var r=t.open("threejs-editor",1);r.onupgradeneeded=function(e){var t=e.target.result;!1===t.objectStoreNames.contains("states")&&t.createObjectStore("states")},r.onsuccess=function(t){e=t.target.result,n()},r.onerror=function(e){console.error("IndexedDB",e)}},get:function(t){e.transaction(["states"],"readwrite").objectStore("states").get(0).onsuccess=function(e){t(e.target.result)}},set:function(t){var n=performance.now();e.transaction(["states"],"readwrite").objectStore("states").put(t,0).onsuccess=function(){console.log("["+/\d\d\:\d\d\:\d\d/.exec(new Date)[0]+"]","Saved state to IndexedDB. "+(performance.now()-n).toFixed(2)+"ms")}},clear:function(){void 0!==e&&(e.transaction(["states"],"readwrite").objectStore("states").clear().onsuccess=function(){console.log("["+/\d\d\:\d\d\:\d\d/.exec(new Date)[0]+"]","Cleared IndexedDB.")})}}}function $s(e){return $s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$s(e)}function Zs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==$s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===$s(i)?i:String(i)),r)}var i}var Qs=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.signals;this.editor=t,this.signals=r,r.intersectionsDetected.add((function(e){if(e.length>0){var t=e[0].object;void 0!==t.userData.object?n.select(t.userData.object):n.select(t)}else n.select(null)}))}var t,n;return t=e,(n=[{key:"select",value:function(e){if(this.editor.selected!==e){var t=null;null!==e&&(t=e.uuid),this.editor.selected=e,this.editor.config.setKey("selected",t),this.signals.objectSelected.dispatch(e)}}},{key:"deselect",value:function(){this.select(null)}}])&&Zs(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ea=a(3664);function ta(e){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(e)}function na(){na=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof p?t:p,a=Object.create(s.prototype),o=new C(i||[]);return r(a,"_invoke",{value:w(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function p(){}function d(){}function f(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==ta(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,o)}))}o(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=S(a,n);if(o){if(o===h)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},x(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var a=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(v),l(v,o,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function ra(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}window.signals=ea;var ia,sa,aa,oa,la=new Cr.cPb(50,1,.01,1e3);function ca(){var e=ea.Signal;this.signals={editScript:new e,startPlayer:new e,stopPlayer:new e,toggleVR:new e,exitedVR:new e,editorCleared:new e,savingStarted:new e,savingFinished:new e,transformModeChanged:new e,snapChanged:new e,spaceChanged:new e,rendererCreated:new e,rendererUpdated:new e,sceneBackgroundChanged:new e,sceneEnvironmentChanged:new e,sceneFogChanged:new e,sceneFogSettingsChanged:new e,sceneGraphChanged:new e,sceneRendered:new e,cameraChanged:new e,cameraResetted:new e,geometryChanged:new e,objectSelected:new e,objectFocused:new e,objectAdded:new e,objectChanged:new e,objectRemoved:new e,cameraAdded:new e,cameraRemoved:new e,helperAdded:new e,helperRemoved:new e,materialAdded:new e,materialChanged:new e,materialRemoved:new e,scriptAdded:new e,scriptChanged:new e,scriptRemoved:new e,windowResize:new e,showGridChanged:new e,showHelpersChanged:new e,refreshSidebarObject3D:new e,historyChanged:new e,viewportCameraChanged:new e,viewportShadingChanged:new e,intersectionsDetected:new e},this.config=new Tr,this.history=new qs(this),this.storage=new Ys,this.strings=new Js(this.config),this.selector=new Qs(this),this.loader=new oi(this),this.camera=la.clone(),this.scene=new Cr.xsS,this.scene.name="Scene",this.sceneHelpers=new Cr.xsS,this.object={},this.geometries={},this.materials={},this.textures={},this.scripts={},this.materialsRefCounter=new Map,this.mixer=new Cr.Xcj(this.scene),this.selected=null,this.helpers={},this.cameras={},this.currentRenderer=null,this.viewportCamera=this.camera,this.viewportShading="default",this.addCamera(this.camera)}la.name="Camera",la.position.set(0,5,10),la.lookAt(new Cr.Pa4),ca.prototype={setScene:function(e){for(this.scene.uuid=e.uuid,this.scene.name=e.name,this.scene.background=e.background,this.scene.environment=e.environment,this.scene.fog=e.fog,this.scene.backgroundBlurriness=e.backgroundBlurriness,this.scene.backgroundIntensity=e.backgroundIntensity,this.scene.userData=JSON.parse(JSON.stringify(e.userData)),this.signals.sceneGraphChanged.active=!1;e.children.length>0;)this.addObject(e.children[0]);this.signals.sceneGraphChanged.active=!0,this.signals.sceneGraphChanged.dispatch()},addObject:function(e,t,n){var r=this;e.traverse((function(e){void 0!==e.geometry&&r.addGeometry(e.geometry),void 0!==e.material&&r.addMaterial(e.material),r.addCamera(e),r.addHelper(e)})),void 0===t?this.scene.add(e):(t.children.splice(n,0,e),e.parent=t),this.signals.objectAdded.dispatch(e),this.signals.sceneGraphChanged.dispatch()},moveObject:function(e,t,n){if(void 0===t&&(t=this.scene),t.add(e),void 0!==n){var r=t.children.indexOf(n);t.children.splice(r,0,e),t.children.pop()}this.signals.sceneGraphChanged.dispatch()},nameObject:function(e,t){e.name=t,this.signals.sceneGraphChanged.dispatch()},removeObject:function(e){if(null!==e.parent){var t=this;e.traverse((function(e){t.removeCamera(e),t.removeHelper(e),void 0!==e.material&&t.removeMaterial(e.material)})),e.parent.remove(e),this.signals.objectRemoved.dispatch(e),this.signals.sceneGraphChanged.dispatch()}},addGeometry:function(e){this.geometries[e.uuid]=e},setGeometryName:function(e,t){e.name=t,this.signals.sceneGraphChanged.dispatch()},addMaterial:function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.addMaterialToRefCounter(e[t]);else this.addMaterialToRefCounter(e);this.signals.materialAdded.dispatch()},addMaterialToRefCounter:function(e){var t=this.materialsRefCounter,n=t.get(e);void 0===n?(t.set(e,1),this.materials[e.uuid]=e):(n++,t.set(e,n))},removeMaterial:function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.removeMaterialFromRefCounter(e[t]);else this.removeMaterialFromRefCounter(e);this.signals.materialRemoved.dispatch()},removeMaterialFromRefCounter:function(e){var t=this.materialsRefCounter,n=t.get(e);0==--n?(t.delete(e),delete this.materials[e.uuid]):t.set(e,n)},getMaterialById:function(e){for(var t,n=Object.values(this.materials),r=0;r<n.length;r++)if(n[r].id===e){t=n[r];break}return t},setMaterialName:function(e,t){e.name=t,this.signals.sceneGraphChanged.dispatch()},addTexture:function(e){this.textures[e.uuid]=e},addCamera:function(e){e.isCamera&&(this.cameras[e.uuid]=e,this.signals.cameraAdded.dispatch(e))},removeCamera:function(e){void 0!==this.cameras[e.uuid]&&(delete this.cameras[e.uuid],this.signals.cameraRemoved.dispatch(e))},addHelper:(aa=new Cr.xo$(2,4,2),oa=new Cr.vBJ({color:16711680,visible:!1}),function(e,t){if(void 0===t){var n;if(e.isCamera)t=new Cr.Rki(e);else if(e.isPointLight)t=new Cr.xG9(e,1);else if(e.isDirectionalLight)t=new Cr.cBI(e,1);else if(e.isSpotLight)t=new Cr.FvO(e);else if(e.isHemisphereLight)t=new Cr.Qpg(e,1);else if(e.isSkinnedMesh)t=new Cr._YX(e.skeleton.bones[0]);else{if(!0!==e.isBone||!0===(null===(n=e.parent)||void 0===n?void 0:n.isBone))return;t=new Cr._YX(e)}var r=new Cr.Kj0(aa,oa);r.name="picker",r.userData.object=e,t.add(r)}this.sceneHelpers.add(t),this.helpers[e.id]=t,this.signals.helperAdded.dispatch(t)}),removeHelper:function(e){if(void 0!==this.helpers[e.id]){var t=this.helpers[e.id];t.parent.remove(t),delete this.helpers[e.id],this.signals.helperRemoved.dispatch(t)}},addScript:function(e,t){void 0===this.scripts[e.uuid]&&(this.scripts[e.uuid]=[]),this.scripts[e.uuid].push(t),this.signals.scriptAdded.dispatch(t)},removeScript:function(e,t){if(void 0!==this.scripts[e.uuid]){var n=this.scripts[e.uuid].indexOf(t);-1!==n&&this.scripts[e.uuid].splice(n,1),this.signals.scriptRemoved.dispatch(t)}},getObjectMaterial:function(e,t){var n=e.material;return Array.isArray(n)&&void 0!==t&&(n=n[t]),n},setObjectMaterial:function(e,t,n){Array.isArray(e.material)&&void 0!==t?e.material[t]=n:e.material=n},setViewportCamera:function(e){this.viewportCamera=this.cameras[e],this.signals.viewportCameraChanged.dispatch()},setViewportShading:function(e){this.viewportShading=e,this.signals.viewportShadingChanged.dispatch()},select:function(e){this.selector.select(e)},selectById:function(e){e!==this.camera.id?this.select(this.scene.getObjectById(e)):this.select(this.camera)},selectByUuid:function(e){var t=this;this.scene.traverse((function(n){n.uuid===e&&t.select(n)}))},deselect:function(){this.selector.deselect()},focus:function(e){void 0!==e&&this.signals.objectFocused.dispatch(e)},focusById:function(e){this.focus(this.scene.getObjectById(e))},clear:function(){this.history.clear(),this.storage.clear(),this.camera.copy(la),this.signals.cameraResetted.dispatch(),this.scene.name="Scene",this.scene.userData={},this.scene.background=null,this.scene.environment=null,this.scene.fog=null;for(var e=this.scene.children;e.length>0;)this.removeObject(e[0]);this.geometries={},this.materials={},this.textures={},this.scripts={},this.materialsRefCounter.clear(),this.animations={},this.mixer.stopAllAction(),this.deselect(),this.signals.editorCleared.dispatch()},fromJSON:(ia=na().mark((function e(t){var n,r;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Cr.Gql,e.next=3,n.parseAsync(t.camera);case 3:return r=e.sent,this.camera.copy(r),this.signals.cameraResetted.dispatch(),this.history.fromJSON(t.history),this.scripts=t.scripts,e.t0=this,e.next=11,n.parseAsync(t.scene);case 11:e.t1=e.sent,e.t0.setScene.call(e.t0,e.t1);case 13:case"end":return e.stop()}}),e,this)})),sa=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=ia.apply(e,t);function s(e){ra(i,n,r,s,a,"next",e)}function a(e){ra(i,n,r,s,a,"throw",e)}s(void 0)}))},function(e){return sa.apply(this,arguments)}),toJSON:function(){var e=this.scene,t=this.scripts;for(var n in t)0!==t[n].length&&void 0!==e.getObjectByProperty("uuid",n)||delete t[n];return{metadata:{},project:{shadows:this.config.getKey("project/renderer/shadows"),shadowType:this.config.getKey("project/renderer/shadowType"),vr:this.config.getKey("project/vr"),useLegacyLights:this.config.getKey("project/renderer/useLegacyLights"),toneMapping:this.config.getKey("project/renderer/toneMapping"),toneMappingExposure:this.config.getKey("project/renderer/toneMappingExposure")},camera:this.viewportCamera.toJSON(),scene:this.scene.toJSON(),scripts:this.scripts,history:this.history.toJSON()}},objectByUuid:function(e){return this.scene.getObjectByProperty("uuid",e,!0)},execute:function(e,t){this.history.execute(e,t)},undo:function(){this.history.undo()},redo:function(){this.history.redo()}};const ua=new Cr.iMs,ha=new Cr.Pa4,pa=new Cr.Pa4,da=new Cr._fP,fa={X:new Cr.Pa4(1,0,0),Y:new Cr.Pa4(0,1,0),Z:new Cr.Pa4(0,0,1)},ma={type:"change"},ga={type:"mouseDown"},ya={type:"mouseUp",mode:null},va={type:"objectChange"};class xa extends Cr.Tme{constructor(e,t){super(),void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const n=new Va;this._gizmo=n,this.add(n);const r=new ja;this._plane=r,this.add(r);const i=this;function s(e,t){let s=t;Object.defineProperty(i,e,{get:function(){return void 0!==s?s:t},set:function(t){s!==t&&(s=t,r[e]=t,n[e]=t,i.dispatchEvent({type:e+"-changed",value:t}),i.dispatchEvent(ma))}}),i[e]=t,r[e]=t,n[e]=t}s("camera",e),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);const a=new Cr.Pa4,o=new Cr.Pa4,l=new Cr._fP,c=new Cr._fP,u=new Cr.Pa4,h=new Cr._fP,p=new Cr.Pa4,d=new Cr.Pa4,f=new Cr.Pa4,m=new Cr.Pa4;s("worldPosition",a),s("worldPositionStart",o),s("worldQuaternion",l),s("worldQuaternionStart",c),s("cameraPosition",u),s("cameraQuaternion",h),s("pointStart",p),s("pointEnd",d),s("rotationAxis",f),s("rotationAngle",0),s("eye",m),this._offset=new Cr.Pa4,this._startNorm=new Cr.Pa4,this._endNorm=new Cr.Pa4,this._cameraScale=new Cr.Pa4,this._parentPosition=new Cr.Pa4,this._parentQuaternion=new Cr._fP,this._parentQuaternionInv=new Cr._fP,this._parentScale=new Cr.Pa4,this._worldScaleStart=new Cr.Pa4,this._worldQuaternionInv=new Cr._fP,this._worldScale=new Cr.Pa4,this._positionStart=new Cr.Pa4,this._quaternionStart=new Cr._fP,this._scaleStart=new Cr.Pa4,this._getPointer=ba.bind(this),this._onPointerDown=Sa.bind(this),this._onPointerHover=wa.bind(this),this._onPointerMove=_a.bind(this),this._onPointerUp=Ea.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;ua.setFromCamera(e,this.camera);const t=Ca(this._gizmo.picker[this.mode],ua);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){ua.setFromCamera(e,this.camera);const t=Ca(this._plane,ua,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,ga.mode=this.mode,this.dispatchEvent(ga)}}pointerMove(e){const t=this.axis,n=this.mode,r=this.object;let i=this.space;if("scale"===n?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0===r||null===t||!1===this.dragging||-1!==e.button)return;ua.setFromCamera(e,this.camera);const s=Ca(this._plane,ua,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(r.position.applyQuaternion(da.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===i&&(r.parent&&r.position.add(ha.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(ha.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),pa.set(e,e,e)}else ha.copy(this.pointStart),pa.copy(this.pointEnd),ha.applyQuaternion(this._worldQuaternionInv),pa.applyQuaternion(this._worldQuaternionInv),pa.divide(ha),-1===t.search("X")&&(pa.x=1),-1===t.search("Y")&&(pa.y=1),-1===t.search("Z")&&(pa.z=1);r.scale.copy(this._scaleStart).multiply(pa),this.scaleSnap&&(-1!==t.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(ha.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(ha.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(fa[t]),ha.copy(fa[t]),"local"===i&&ha.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(ha.cross(this.eye).normalize())*e),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(da.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(da.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(ma),this.dispatchEvent(va)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&(ya.mode=this.mode,this.dispatchEvent(ya)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(ma),this.dispatchEvent(va),this.pointStart.copy(this.pointEnd))}getRaycaster(){return ua}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function ba(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};{const t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}}function wa(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function Sa(e){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function _a(e){this.enabled&&this.pointerMove(this._getPointer(e))}function Ea(e){this.enabled&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function Ca(e,t,n){const r=t.intersectObject(e,!0);for(let e=0;e<r.length;e++)if(r[e].object.visible||n)return r[e];return!1}const Ta=new Cr.USm,Ma=new Cr.Pa4(0,1,0),Aa=new Cr.Pa4(0,0,0),ka=new Cr.yGw,Pa=new Cr._fP,La=new Cr._fP,Da=new Cr.Pa4,Na=new Cr.yGw,Ra=new Cr.Pa4(1,0,0),Ia=new Cr.Pa4(0,1,0),Oa=new Cr.Pa4(0,0,1),Fa=new Cr.Pa4,Ba=new Cr.Pa4,Ua=new Cr.Pa4;class Va extends Cr.Tme{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new Cr.vBJ({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Cr.nls({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=e.clone();n.opacity=.15;const r=t.clone();r.opacity=.5;const i=e.clone();i.color.setHex(16711680);const s=e.clone();s.color.setHex(65280);const a=e.clone();a.color.setHex(255);const o=e.clone();o.color.setHex(16711680),o.opacity=.5;const l=e.clone();l.color.setHex(65280),l.opacity=.5;const c=e.clone();c.color.setHex(255),c.opacity=.5;const u=e.clone();u.opacity=.25;const h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);const p=e.clone();p.color.setHex(7895160);const d=new Cr.fHI(0,.04,.1,12);d.translate(0,.05,0);const f=new Cr.DvJ(.08,.08,.08);f.translate(0,.04,0);const m=new Cr.u9r;m.setAttribute("position",new Cr.a$l([0,0,0,1,0,0],3));const g=new Cr.fHI(.0075,.0075,.5,3);function y(e,t){const n=new Cr.XvJ(e,.0075,3,64,t*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}g.translate(0,.25,0);const v={X:[[new Cr.Kj0(d,i),[.5,0,0],[0,0,-Math.PI/2]],[new Cr.Kj0(d,i),[-.5,0,0],[0,0,Math.PI/2]],[new Cr.Kj0(g,i),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Cr.Kj0(d,s),[0,.5,0]],[new Cr.Kj0(d,s),[0,-.5,0],[Math.PI,0,0]],[new Cr.Kj0(g,s)]],Z:[[new Cr.Kj0(d,a),[0,0,.5],[Math.PI/2,0,0]],[new Cr.Kj0(d,a),[0,0,-.5],[-Math.PI/2,0,0]],[new Cr.Kj0(g,a),null,[Math.PI/2,0,0]]],XYZ:[[new Cr.Kj0(new Cr.pQR(.1,0),u.clone()),[0,0,0]]],XY:[[new Cr.Kj0(new Cr.DvJ(.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new Cr.Kj0(new Cr.DvJ(.15,.15,.01),o.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Cr.Kj0(new Cr.DvJ(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},x={X:[[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,.3,0]],[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Cr.Kj0(new Cr.pQR(.2,0),n)]],XY:[[new Cr.Kj0(new Cr.DvJ(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Cr.Kj0(new Cr.DvJ(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Cr.Kj0(new Cr.DvJ(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},b={START:[[new Cr.Kj0(new Cr.pQR(.01,2),r),null,null,null,"helper"]],END:[[new Cr.Kj0(new Cr.pQR(.01,2),r),null,null,null,"helper"]],DELTA:[[new Cr.x12(function(){const e=new Cr.u9r;return e.setAttribute("position",new Cr.a$l([0,0,0,1,1,1],3)),e}(),r),null,null,null,"helper"]],X:[[new Cr.x12(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Cr.x12(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Cr.x12(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},w={XYZE:[[new Cr.Kj0(y(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new Cr.Kj0(y(.5,.5),i)]],Y:[[new Cr.Kj0(y(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new Cr.Kj0(y(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new Cr.Kj0(y(.75,1),h),null,[0,Math.PI/2,0]]]},S={AXIS:[[new Cr.x12(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},_={XYZE:[[new Cr.Kj0(new Cr.xo$(.25,10,8),n)]],X:[[new Cr.Kj0(new Cr.XvJ(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Cr.Kj0(new Cr.XvJ(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Cr.Kj0(new Cr.XvJ(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Cr.Kj0(new Cr.XvJ(.75,.1,2,24),n)]]},E={X:[[new Cr.Kj0(f,i),[.5,0,0],[0,0,-Math.PI/2]],[new Cr.Kj0(g,i),[0,0,0],[0,0,-Math.PI/2]],[new Cr.Kj0(f,i),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Cr.Kj0(f,s),[0,.5,0]],[new Cr.Kj0(g,s)],[new Cr.Kj0(f,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Cr.Kj0(f,a),[0,0,.5],[Math.PI/2,0,0]],[new Cr.Kj0(g,a),[0,0,0],[Math.PI/2,0,0]],[new Cr.Kj0(f,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Cr.Kj0(new Cr.DvJ(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new Cr.Kj0(new Cr.DvJ(.15,.15,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Cr.Kj0(new Cr.DvJ(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Cr.Kj0(new Cr.DvJ(.1,.1,.1),u.clone())]]},C={X:[[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,.3,0]],[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new Cr.Kj0(new Cr.fHI(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Cr.Kj0(new Cr.DvJ(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new Cr.Kj0(new Cr.DvJ(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Cr.Kj0(new Cr.DvJ(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Cr.Kj0(new Cr.DvJ(.2,.2,.2),n),[0,0,0]]]},T={X:[[new Cr.x12(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Cr.x12(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Cr.x12(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function M(e){const t=new Cr.Tme;for(const n in e)for(let r=e[n].length;r--;){const i=e[n][r][0].clone(),s=e[n][r][1],a=e[n][r][2],o=e[n][r][3],l=e[n][r][4];i.name=n,i.tag=l,s&&i.position.set(s[0],s[1],s[2]),a&&i.rotation.set(a[0],a[1],a[2]),o&&i.scale.set(o[0],o[1],o[2]),i.updateMatrix();const c=i.geometry.clone();c.applyMatrix4(i.matrix),i.geometry=c,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=M(v)),this.add(this.gizmo.rotate=M(w)),this.add(this.gizmo.scale=M(E)),this.add(this.picker.translate=M(x)),this.add(this.picker.rotate=M(_)),this.add(this.picker.scale=M(C)),this.add(this.helper.translate=M(b)),this.add(this.helper.rotate=M(S)),this.add(this.helper.scale=M(T)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:La;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let e=0;e<n.length;e++){const r=n[e];let i;if(r.visible=!0,r.rotation.set(0,0,0),r.position.copy(this.worldPosition),i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),r.scale.set(1,1,1).multiplyScalar(i*this.size/4),"helper"!==r.tag){if(r.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){const e=.99,n=.2;"X"===r.name&&Math.abs(Ma.copy(Ra).applyQuaternion(t).dot(this.eye))>e&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"Y"===r.name&&Math.abs(Ma.copy(Ia).applyQuaternion(t).dot(this.eye))>e&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"Z"===r.name&&Math.abs(Ma.copy(Oa).applyQuaternion(t).dot(this.eye))>e&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"XY"===r.name&&Math.abs(Ma.copy(Oa).applyQuaternion(t).dot(this.eye))<n&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"YZ"===r.name&&Math.abs(Ma.copy(Ra).applyQuaternion(t).dot(this.eye))<n&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"XZ"===r.name&&Math.abs(Ma.copy(Ia).applyQuaternion(t).dot(this.eye))<n&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1)}else"rotate"===this.mode&&(Pa.copy(t),Ma.copy(this.eye).applyQuaternion(da.copy(t).invert()),-1!==r.name.search("E")&&r.quaternion.setFromRotationMatrix(ka.lookAt(this.eye,Aa,Ia)),"X"===r.name&&(da.setFromAxisAngle(Ra,Math.atan2(-Ma.y,Ma.z)),da.multiplyQuaternions(Pa,da),r.quaternion.copy(da)),"Y"===r.name&&(da.setFromAxisAngle(Ia,Math.atan2(Ma.x,Ma.z)),da.multiplyQuaternions(Pa,da),r.quaternion.copy(da)),"Z"===r.name&&(da.setFromAxisAngle(Oa,Math.atan2(Ma.y,Ma.x)),da.multiplyQuaternions(Pa,da),r.quaternion.copy(da)));r.visible=r.visible&&(-1===r.name.indexOf("X")||this.showX),r.visible=r.visible&&(-1===r.name.indexOf("Y")||this.showY),r.visible=r.visible&&(-1===r.name.indexOf("Z")||this.showZ),r.visible=r.visible&&(-1===r.name.indexOf("E")||this.showX&&this.showY&&this.showZ),r.material._color=r.material._color||r.material.color.clone(),r.material._opacity=r.material._opacity||r.material.opacity,r.material.color.copy(r.material._color),r.material.opacity=r.material._opacity,this.enabled&&this.axis&&(r.name===this.axis||this.axis.split("").some((function(e){return r.name===e})))&&(r.material.color.setHex(16776960),r.material.opacity=1)}else r.visible=!1,"AXIS"===r.name?(r.visible=!!this.axis,"X"===this.axis&&(da.setFromEuler(Ta.set(0,0,0)),r.quaternion.copy(t).multiply(da),Math.abs(Ma.copy(Ra).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),"Y"===this.axis&&(da.setFromEuler(Ta.set(0,0,Math.PI/2)),r.quaternion.copy(t).multiply(da),Math.abs(Ma.copy(Ia).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),"Z"===this.axis&&(da.setFromEuler(Ta.set(0,Math.PI/2,0)),r.quaternion.copy(t).multiply(da),Math.abs(Ma.copy(Oa).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),"XYZE"===this.axis&&(da.setFromEuler(Ta.set(0,Math.PI/2,0)),Ma.copy(this.rotationAxis),r.quaternion.setFromRotationMatrix(ka.lookAt(Aa,Ma,Ia)),r.quaternion.multiply(da),r.visible=this.dragging),"E"===this.axis&&(r.visible=!1)):"START"===r.name?(r.position.copy(this.worldPositionStart),r.visible=this.dragging):"END"===r.name?(r.position.copy(this.worldPosition),r.visible=this.dragging):"DELTA"===r.name?(r.position.copy(this.worldPositionStart),r.quaternion.copy(this.worldQuaternionStart),ha.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),ha.applyQuaternion(this.worldQuaternionStart.clone().invert()),r.scale.copy(ha),r.visible=this.dragging):(r.quaternion.copy(t),this.dragging?r.position.copy(this.worldPositionStart):r.position.copy(this.worldPosition),this.axis&&(r.visible=-1!==this.axis.search(r.name)))}super.updateMatrixWorld(e)}}class ja extends Cr.Kj0{constructor(){super(new Cr._12(1e5,1e5,2,2),new Cr.vBJ({visible:!1,wireframe:!0,side:Cr.ehD,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),Fa.copy(Ra).applyQuaternion("local"===t?this.worldQuaternion:La),Ba.copy(Ia).applyQuaternion("local"===t?this.worldQuaternion:La),Ua.copy(Oa).applyQuaternion("local"===t?this.worldQuaternion:La),Ma.copy(Ba),this.mode){case"translate":case"scale":switch(this.axis){case"X":Ma.copy(this.eye).cross(Fa),Da.copy(Fa).cross(Ma);break;case"Y":Ma.copy(this.eye).cross(Ba),Da.copy(Ba).cross(Ma);break;case"Z":Ma.copy(this.eye).cross(Ua),Da.copy(Ua).cross(Ma);break;case"XY":Da.copy(Ua);break;case"YZ":Da.copy(Fa);break;case"XZ":Ma.copy(Ua),Da.copy(Ba);break;case"XYZ":case"E":Da.set(0,0,0)}break;default:Da.set(0,0,0)}0===Da.length()?this.quaternion.copy(this.cameraQuaternion):(Na.lookAt(ha.set(0,0,0),Da,Ma),this.quaternion.setFromRotationMatrix(Na)),super.updateMatrixWorld(e)}}var za=a(49);function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ga(e,t){return Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ga(e,t)}function Xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ka(e){return Ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ka(e)}var qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ga(e,t)}(s,e);var t,n,r,i=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ka(n);if(r){var i=Ka(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xa(e)}(this,e)});function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=i.call(this)).enabled=!0,n.center=new Cr.Pa4,n.panSpeed=.002,n.zoomSpeed=.1,n.rotationSpeed=.005;var r=Xa(n),a=new Cr.Pa4,o=new Cr.Pa4,l=new Cr.ZzF,c={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},u=c.NONE,h=n.center,p=new Cr.Vkp,d=new Cr.FM8,f=new Cr.FM8,m=new Cr.$V,g=new Cr.aLr,y={type:"change"};function v(e){if(!1!==r.enabled){switch(e.pointerType){case"mouse":case"pen":!function(e){0===e.button?u=c.ROTATE:1===e.button?u=c.ZOOM:2===e.button&&(u=c.PAN),f.set(e.clientX,e.clientY)}(e)}t.ownerDocument.addEventListener("pointermove",x),t.ownerDocument.addEventListener("pointerup",b)}}function x(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){d.set(e.clientX,e.clientY);var t=d.x-f.x,n=d.y-f.y;u===c.ROTATE?r.rotate(o.set(-t,-n,0)):u===c.ZOOM?r.zoom(o.set(0,0,n)):u===c.PAN&&r.pan(o.set(-t,n,0)),f.set(e.clientX,e.clientY)}(e)}}function b(e){switch(e.pointerType){case"mouse":case"pen":w()}t.ownerDocument.removeEventListener("pointermove",x),t.ownerDocument.removeEventListener("pointerup",b)}function w(){u=c.NONE}function S(e){!1!==r.enabled&&(e.preventDefault(),r.zoom(o.set(0,0,e.deltaY>0?1:-1)))}function _(e){e.preventDefault()}n.focus=function(t){var n;l.setFromObject(t),!1===l.isEmpty()?(l.getCenter(h),n=l.getBoundingSphere(g).radius):(h.setFromMatrixPosition(t.matrixWorld),n=.1),o.set(0,0,1),o.applyQuaternion(e.quaternion),o.multiplyScalar(4*n),e.position.copy(h).add(o),r.dispatchEvent(y)},n.pan=function(t){var n=e.position.distanceTo(h);t.multiplyScalar(n*r.panSpeed),t.applyMatrix3(p.getNormalMatrix(e.matrix)),e.position.add(t),h.add(t),r.dispatchEvent(y)},n.zoom=function(t){var n=e.position.distanceTo(h);t.multiplyScalar(n*r.zoomSpeed),t.length()>n||(t.applyMatrix3(p.getNormalMatrix(e.matrix)),e.position.add(t),r.dispatchEvent(y))},n.rotate=function(t){a.copy(e.position).sub(h),m.setFromVector3(a),m.theta+=t.x*r.rotationSpeed,m.phi+=t.y*r.rotationSpeed,m.makeSafe(),a.setFromSpherical(m),e.position.copy(h).add(a),e.lookAt(h),r.dispatchEvent(y)},n.dispose=function(){t.removeEventListener("contextmenu",_),t.removeEventListener("dblclick",w),t.removeEventListener("wheel",S),t.removeEventListener("pointerdown",v),t.removeEventListener("touchstart",M),t.removeEventListener("touchmove",A)},t.addEventListener("contextmenu",_),t.addEventListener("dblclick",w),t.addEventListener("wheel",S,{passive:!1}),t.addEventListener("pointerdown",v);var E=[new Cr.Pa4,new Cr.Pa4,new Cr.Pa4],C=[new Cr.Pa4,new Cr.Pa4,new Cr.Pa4],T=null;function M(e){if(!1!==r.enabled){switch(e.touches.length){case 1:E[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),E[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio);break;case 2:E[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),E[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio),T=E[0].distanceTo(E[1])}C[0].copy(E[0]),C[1].copy(E[1])}}function A(e){if(!1!==r.enabled){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:E[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),E[1].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),r.rotate(E[0].sub(s(E[0],C)).multiplyScalar(-1));break;case 2:E[0].set(e.touches[0].pageX,e.touches[0].pageY,0).divideScalar(window.devicePixelRatio),E[1].set(e.touches[1].pageX,e.touches[1].pageY,0).divideScalar(window.devicePixelRatio);var t=E[0].distanceTo(E[1]);r.zoom(o.set(0,0,T-t)),T=t;var n=E[0].clone().sub(s(E[0],C)),i=E[1].clone().sub(s(E[1],C));n.x=-n.x,i.x=-i.x,r.pan(n.add(i))}C[0].copy(E[0]),C[1].copy(E[1])}function s(e,t){var n,r=t[0],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;r.distanceTo(e)>s.distanceTo(e)&&(r=s)}}catch(e){i.e(e)}finally{i.f()}return r}}return t.addEventListener("touchstart",M,{passive:!1}),t.addEventListener("touchmove",A,{passive:!1}),n}return t=s,Object.defineProperty(t,"prototype",{writable:!1}),t}(Cr.pBf);function Ja(e){var t=e.signals,n=new za.Cj;function r(){var t={},r=e.cameras;for(var i in r){var s=r[i];t[s.uuid]=s.name}n.setOptions(t),n.setValue(e.viewportCamera.uuid)}return n.setPosition("absolute"),n.setRight("120px"),n.setTop("10px"),n.onChange((function(){e.setViewportCamera(this.getValue())})),t.cameraAdded.add(r),t.cameraRemoved.add(r),r(),n}function Ya(e){var t=new za.Cj;return t.setPosition("absolute"),t.setRight("10px"),t.setTop("10px"),t.setOptions({default:"default",normals:"normals",wireframe:"wireframe"}),t.setValue("default"),t.onChange((function(){e.setViewportShading(this.getValue())})),t}function $a(e){var t=e.signals,n=e.strings,r=new za.sd;r.setId("info"),r.setPosition("absolute"),r.setLeft("10px"),r.setBottom("10px"),r.setFontSize("12px"),r.setColor("#fff");var i=new za.sm("0").setMarginLeft("6px"),s=new za.sm("0").setMarginLeft("6px"),a=new za.sm("0").setMarginLeft("6px"),o=new za.sm("0").setMarginLeft("6px");function l(){for(var t=e.scene,n=0,r=0,o=0,l=0,c=t.children.length;l<c;l++)t.children[l].traverseVisible((function(e){if(n++,e.isMesh||e.isPoints){var t=e.geometry;r+=t.attributes.position.count,e.isMesh&&(null!==t.index?o+=t.index.count/3:o+=t.attributes.position.count/3)}}));i.setValue(n.toString()),s.setValue(r.toString()),a.setValue(o.toString())}return r.add(new za.sm(n.getKey("viewport/info/objects")).setTextTransform("lowercase")),r.add(i,new za.MH),r.add(new za.sm(n.getKey("viewport/info/vertices")).setTextTransform("lowercase")),r.add(s,new za.MH),r.add(new za.sm(n.getKey("viewport/info/triangles")).setTextTransform("lowercase")),r.add(a,new za.MH),r.add(new za.sm(n.getKey("viewport/info/frametime")).setTextTransform("lowercase")),r.add(o,new za.MH),t.objectAdded.add(l),t.objectRemoved.add(l),t.geometryChanged.add(l),t.sceneRendered.add((function(e){o.setValue(Number(e).toFixed(2)+" ms")})),r}function Za(e){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(e)}function Qa(e,t){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qa(e,t)}function eo(e){return eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eo(e)}var to=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qa(e,t)}(s,e);var t,n,r,i=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=eo(n);if(r){var i=eo(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=i.call(this)).isViewHelper=!0,n.animating=!1,n.center=new Cr.Pa4;var r=new Cr.Ilk("#ff3653"),a=new Cr.Ilk("#8adb00"),o=new Cr.Ilk("#2c8fff"),l=[],c=new Cr.iMs,u=new Cr.FM8,h=new Cr.Tme,p=new Cr.iKG(-2,2,2,-2,0,4);p.position.set(0,0,2);var d=new Cr.DvJ(.8,.05,.05).translate(.4,0,0),f=new Cr.Kj0(d,D(r)),m=new Cr.Kj0(d,D(a)),g=new Cr.Kj0(d,D(o));m.rotation.z=Math.PI/2,g.rotation.y=-Math.PI/2,n.add(f),n.add(g),n.add(m);var y=new Cr.jyi(N(r,"X"));y.userData.type="posX";var v=new Cr.jyi(N(a,"Y"));v.userData.type="posY";var x=new Cr.jyi(N(o,"Z"));x.userData.type="posZ";var b=new Cr.jyi(N(r));b.userData.type="negX";var w=new Cr.jyi(N(a));w.userData.type="negY";var S=new Cr.jyi(N(o));S.userData.type="negZ",y.position.x=1,v.position.y=1,x.position.z=1,b.position.x=-1,b.scale.setScalar(.8),w.position.y=-1,w.scale.setScalar(.8),S.position.z=-1,S.scale.setScalar(.8),n.add(y),n.add(v),n.add(x),n.add(b),n.add(w),n.add(S),l.push(y),l.push(v),l.push(x),l.push(b),l.push(w),l.push(S);var _=new Cr.Pa4,E=128,C=2*Math.PI;n.render=function(n){this.quaternion.copy(e.quaternion).invert(),this.updateMatrixWorld(),_.set(0,0,1),_.applyQuaternion(e.quaternion),_.x>=0?(y.material.opacity=1,b.material.opacity=.5):(y.material.opacity=.5,b.material.opacity=1),_.y>=0?(v.material.opacity=1,w.material.opacity=.5):(v.material.opacity=.5,w.material.opacity=1),_.z>=0?(x.material.opacity=1,S.material.opacity=.5):(x.material.opacity=.5,S.material.opacity=1);var r=t.offsetWidth-E;n.clearDepth(),n.getViewport(P),n.setViewport(r,0,E,E),n.render(this,p),n.setViewport(P.x,P.y,P.z,P.w)};var T=new Cr.Pa4,M=new Cr._fP,A=new Cr._fP,k=new Cr._fP,P=new Cr.Ltg,L=0;function D(e){return new Cr.vBJ({color:e,toneMapped:!1})}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("canvas");n.width=64,n.height=64;var r=n.getContext("2d");r.beginPath(),r.arc(32,32,16,0,2*Math.PI),r.closePath(),r.fillStyle=e.getStyle(),r.fill(),null!==t&&(r.font="24px Arial",r.textAlign="center",r.fillStyle="#000000",r.fillText(t,32,41));var i=new Cr.ROQ(n);return new Cr.xeV({map:i,toneMapped:!1})}return n.handleClick=function(n){if(!0===this.animating)return!1;var r=t.getBoundingClientRect(),i=r.left+(t.offsetWidth-E),s=r.top+(t.offsetHeight-E);u.x=(n.clientX-i)/(r.right-i)*2-1,u.y=-(n.clientY-s)/(r.bottom-s)*2+1,c.setFromCamera(u,p);var a=c.intersectObjects(l);return a.length>0&&(function(t,n){switch(t.userData.type){case"posX":T.set(1,0,0),M.setFromEuler(new Cr.USm(0,.5*Math.PI,0));break;case"posY":T.set(0,1,0),M.setFromEuler(new Cr.USm(.5*-Math.PI,0,0));break;case"posZ":T.set(0,0,1),M.setFromEuler(new Cr.USm);break;case"negX":T.set(-1,0,0),M.setFromEuler(new Cr.USm(0,.5*-Math.PI,0));break;case"negY":T.set(0,-1,0),M.setFromEuler(new Cr.USm(.5*Math.PI,0,0));break;case"negZ":T.set(0,0,-1),M.setFromEuler(new Cr.USm(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}L=e.position.distanceTo(n),T.multiplyScalar(L).add(n),h.position.copy(n),h.lookAt(e.position),A.copy(h.quaternion),h.lookAt(T),k.copy(h.quaternion)}(a[0].object,this.center),this.animating=!0,!0)},n.update=function(t){var n=t*C;A.rotateTowards(k,n),e.position.set(0,0,1).applyQuaternion(A).multiplyScalar(L).add(this.center),e.quaternion.rotateTowards(M,n),0===A.angleTo(k)&&(this.animating=!1)},n.dispose=function(){d.dispose(),f.material.dispose(),m.material.dispose(),g.material.dispose(),y.material.map.dispose(),v.material.map.dispose(),x.material.map.dispose(),b.material.map.dispose(),w.material.map.dispose(),S.material.map.dispose(),y.material.dispose(),v.material.dispose(),x.material.dispose(),b.material.dispose(),w.material.dispose(),S.material.dispose()},n}return t=s,Object.defineProperty(t,"prototype",{writable:!1}),t}(Cr.Tme);function no(e){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},no(e)}function ro(e,t){return ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ro(e,t)}function io(e){return io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},io(e)}var so=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ro(e,t)}(s,e);var t,n,r,i=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=io(n);if(r){var i=io(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===no(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=i.call(this,e,t.dom);var r=new za.sd;return r.setId("viewHelper"),r.setPosition("absolute"),r.setRight("0px"),r.setBottom("0px"),r.setHeight("128px"),r.setWidth("128px"),r.dom.addEventListener("pointerup",(function(e){e.stopPropagation(),n.handleClick(e)})),r.dom.addEventListener("pointerdown",(function(e){e.stopPropagation()})),t.add(r),n}return t=s,Object.defineProperty(t,"prototype",{writable:!1}),t}(to);class ao extends Cr.Kj0{constructor(e){const t=new oo(e),n=new Cr._12(.001*t.image.width,.001*t.image.height),r=new Cr.vBJ({map:t,toneMapped:!1,transparent:!0});function i(e){r.map.dispatchDOMEvent(e)}super(n,r),this.addEventListener("mousedown",i),this.addEventListener("mousemove",i),this.addEventListener("mouseup",i),this.addEventListener("click",i),this.dispose=function(){n.dispose(),r.dispose(),r.map.dispose(),lo.delete(e),this.removeEventListener("mousedown",i),this.removeEventListener("mousemove",i),this.removeEventListener("mouseup",i),this.removeEventListener("click",i)}}}class oo extends Cr.ROQ{constructor(e){super(co(e)),this.dom=e,this.anisotropy=16,this.colorSpace=Cr.KI_,this.minFilter=Cr.wem,this.magFilter=Cr.wem;const t=new MutationObserver((()=>{this.scheduleUpdate||(this.scheduleUpdate=setTimeout((()=>this.update()),16))}));t.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),this.observer=t}dispatchDOMEvent(e){e.data&&function(e,t,n,r){const i={clientX:n*e.offsetWidth+e.offsetLeft,clientY:r*e.offsetHeight+e.offsetTop,view:e.ownerDocument.defaultView};window.dispatchEvent(new MouseEvent(t,i));const s=e.getBoundingClientRect();n=n*s.width+s.left,r=r*s.height+s.top,function e(s){if(s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.COMMENT_NODE){const a=s.getBoundingClientRect();if(n>a.left&&n<a.right&&r>a.top&&r<a.bottom&&(s.dispatchEvent(new MouseEvent(t,i)),s instanceof HTMLInputElement&&"range"===s.type&&("mousedown"===t||"click"===t))){const[e,t]=["min","max"].map((e=>parseFloat(s[e]))),r=a.width,i=(n-a.x)/r;s.value=e+(t-e)*i,s.dispatchEvent(new InputEvent("input",{bubbles:!0}))}for(let t=0;t<s.childNodes.length;t++)e(s.childNodes[t])}}(e)}(this.dom,e.type,e.data.x,e.data.y)}update(){this.image=co(this.dom),this.needsUpdate=!0,this.scheduleUpdate=null}dispose(){this.observer&&this.observer.disconnect(),this.scheduleUpdate=clearTimeout(this.scheduleUpdate),super.dispose()}}const lo=new WeakMap;function co(e){const t=document.createRange(),n=new Cr.Ilk;function r(e,t,n,r){""!==r&&("uppercase"===e.textTransform&&(r=r.toUpperCase()),l.font=e.fontWeight+" "+e.fontSize+" "+e.fontFamily,l.textBaseline="top",l.fillStyle=e.color,l.fillText(r,t,n+.1*parseFloat(e.fontSize)))}function i(e,t,n,r,i){n<2*i&&(i=n/2),r<2*i&&(i=r/2),l.beginPath(),l.moveTo(e+i,t),l.arcTo(e+n,t,e+n,t+r,i),l.arcTo(e+n,t+r,e,t+r,i),l.arcTo(e,t+r,e,t,i),l.arcTo(e,t,e+n,t,i),l.closePath()}function s(e,t,n,r,i,s){const a=e[t+"Width"],o=e[t+"Style"],c=e[t+"Color"];"0px"!==a&&"none"!==o&&"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c&&(l.strokeStyle=c,l.lineWidth=parseFloat(a),l.beginPath(),l.moveTo(n,r),l.lineTo(n+i,r+s),l.stroke())}const a=e.getBoundingClientRect();let o=lo.get(e);void 0===o&&(o=document.createElement("canvas"),o.width=a.width,o.height=a.height,lo.set(e,o));const l=o.getContext("2d"),c=new function(e){const t=[];let n=!1;function r(){if(n&&(n=!1,e.restore()),0===t.length)return;let r=-1/0,i=-1/0,s=1/0,a=1/0;for(let e=0;e<t.length;e++){const n=t[e];r=Math.max(r,n.x),i=Math.max(i,n.y),s=Math.min(s,n.x+n.width),a=Math.min(a,n.y+n.height)}e.save(),e.beginPath(),e.rect(r,i,s-r,a-i),e.clip(),n=!0}return{add:function(e){t.push(e),r()},remove:function(){t.pop(),r()}}}(l);return function e(o,u){let h=0,p=0,d=0,f=0;if(o.nodeType===Node.TEXT_NODE){t.selectNode(o);const e=t.getBoundingClientRect();h=e.left-a.left-.5,p=e.top-a.top-.5,d=e.width,f=e.height,r(u,h,p,o.nodeValue.trim())}else{if(o.nodeType===Node.COMMENT_NODE)return;if(o instanceof HTMLCanvasElement){if("none"===o.style.display)return;l.save();const e=window.devicePixelRatio;l.scale(1/e,1/e),l.drawImage(o,0,0),l.restore()}else if(o instanceof HTMLImageElement){if("none"===o.style.display)return;const e=o.getBoundingClientRect();h=e.left-a.left-.5,p=e.top-a.top-.5,d=e.width,f=e.height,l.drawImage(o,h,p,d,f)}else{if("none"===o.style.display)return;const e=o.getBoundingClientRect();h=e.left-a.left-.5,p=e.top-a.top-.5,d=e.width,f=e.height,u=window.getComputedStyle(o),i(h,p,d,f,parseFloat(u.borderRadius));const t=u.backgroundColor;"transparent"!==t&&"rgba(0, 0, 0, 0)"!==t&&(l.fillStyle=t,l.fill());const m=["borderTop","borderLeft","borderBottom","borderRight"];let g=!0,y=null;for(const e of m){if(null!==y&&(g=u[e+"Width"]===u[y+"Width"]&&u[e+"Color"]===u[y+"Color"]&&u[e+"Style"]===u[y+"Style"]),!1===g)break;y=e}if(!0===g){const e=parseFloat(u.borderTopWidth);"0px"!==u.borderTopWidth&&"none"!==u.borderTopStyle&&"transparent"!==u.borderTopColor&&"rgba(0, 0, 0, 0)"!==u.borderTopColor&&(l.strokeStyle=u.borderTopColor,l.lineWidth=e,l.stroke())}else s(u,"borderTop",h,p,d,0),s(u,"borderLeft",h,p,0,f),s(u,"borderBottom",h,p+f,d,0),s(u,"borderRight",h+d,p,0,f);if(o instanceof HTMLInputElement){let e=u.accentColor;void 0!==e&&"auto"!==e||(e=u.color),n.set(e);const t=Math.sqrt(.299*n.r**2+.587*n.g**2+.114*n.b**2)<.5?"white":"#111111";if("radio"===o.type&&(i(h,p,d,f,f),l.fillStyle="white",l.strokeStyle=e,l.lineWidth=1,l.fill(),l.stroke(),o.checked&&(i(h+2,p+2,d-4,f-4,f),l.fillStyle=e,l.strokeStyle=t,l.lineWidth=2,l.fill(),l.stroke())),"checkbox"===o.type&&(i(h,p,d,f,2),l.fillStyle=o.checked?e:"white",l.strokeStyle=o.checked?t:e,l.lineWidth=1,l.stroke(),l.fill(),o.checked)){const e=l.textAlign;l.textAlign="center",r({color:t,fontFamily:u.fontFamily,fontSize:f+"px",fontWeight:"bold"},h+d/2,p,"✔"),l.textAlign=e}if("range"===o.type){const[n,r,s]=["min","max","value"].map((e=>parseFloat(o[e]))),a=(s-n)/(r-n)*(d-f);i(h,p+f/4,d,f/2,f/4),l.fillStyle=t,l.strokeStyle=e,l.lineWidth=1,l.fill(),l.stroke(),i(h,p+f/4,a+f/2,f/2,f/4),l.fillStyle=e,l.fill(),i(h+a,p,f,f,f/2),l.fillStyle=e,l.fill()}"color"!==o.type&&"text"!==o.type&&"number"!==o.type||(c.add({x:h,y:p,width:d,height:f}),r(u,h+parseInt(u.paddingLeft),p+parseInt(u.paddingTop),o.value),c.remove())}}}const m="auto"===u.overflow||"hidden"===u.overflow;m&&c.add({x:h,y:p,width:d,height:f});for(let t=0;t<o.childNodes.length;t++)e(o.childNodes[t],u);m&&c.remove()}(e),o}const uo=new Cr.FM8,ho={type:"",data:uo};class po extends Cr.ZAu{constructor(e,t){super();const n=this,r=new Cr.iMs,i=new Cr.yGw,s=e.domElement;function a(i){i.stopPropagation();const s=e.domElement.getBoundingClientRect();uo.x=(i.clientX-s.left)/s.width*2-1,uo.y=-(i.clientY-s.top)/s.height*2+1,r.setFromCamera(uo,t);const a=r.intersectObjects(n.children,!1);if(a.length>0){const e=a[0],t=e.object,n=e.uv;ho.type=i.type,ho.data.set(n.x,1-n.y),t.dispatchEvent(ho)}}s.addEventListener("pointerdown",a),s.addEventListener("pointerup",a),s.addEventListener("pointermove",a),s.addEventListener("mousedown",a),s.addEventListener("mouseup",a),s.addEventListener("mousemove",a),s.addEventListener("click",a);const o={move:"mousemove",select:"click",selectstart:"mousedown",selectend:"mouseup"};function l(e){const t=e.target;i.identity().extractRotation(t.matrixWorld),r.ray.origin.setFromMatrixPosition(t.matrixWorld),r.ray.direction.set(0,0,-1).applyMatrix4(i);const s=r.intersectObjects(n.children,!1);if(s.length>0){const t=s[0],n=t.object,r=t.uv;ho.type=o[e.type],ho.data.set(r.x,1-r.y),n.dispatchEvent(ho)}}const c=e.xr.getController(0);c.addEventListener("move",l),c.addEventListener("select",l),c.addEventListener("selectstart",l),c.addEventListener("selectend",l);const u=e.xr.getController(1);u.addEventListener("move",l),u.addEventListener("select",l),u.addEventListener("selectstart",l),u.addEventListener("selectend",l)}}var fo=a(3867);const mo={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function go(e){const t=await fetch(e);if(t.ok)return t.json();throw new Error(t.statusText)}const yo={xAxis:0,yAxis:0,button:0,state:mo.ComponentState.DEFAULT};class vo{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===mo.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(yo)}updateFromComponent({xAxis:e,yAxis:t,button:n,state:r}){const{normalizedXAxis:i,normalizedYAxis:s}=function(e=0,t=0){let n=e,r=t;if(Math.sqrt(e*e+t*t)>1){const i=Math.atan2(t,e);n=Math.cos(i),r=Math.sin(i)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*r+.5}}(e,t);switch(this.componentProperty){case mo.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?i:.5;break;case mo.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?s:.5;break;case mo.ComponentProperty.BUTTON:this.value=this.states.includes(r)?n:0;break;case mo.ComponentProperty.STATE:this.valueNodeProperty===mo.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(r):this.value=this.states.includes(r)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class xo{constructor(e,t){if(!(e&&t&&t.visualResponses&&t.gamepadIndices&&0!==Object.keys(t.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach((e=>{const n=new vo(t.visualResponses[e]);this.visualResponses[e]=n})),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:mo.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=mo.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||1===this.values.button?this.values.state=mo.ComponentState.PRESSED:(t.touched||this.values.button>mo.ButtonTouchThreshold)&&(this.values.state=mo.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===mo.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>mo.AxisTouchThreshold&&(this.values.state=mo.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===mo.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>mo.AxisTouchThreshold&&(this.values.state=mo.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach((e=>{e.updateFromComponent(this.values)}))}}class bo{constructor(e,t,n){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=n,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach((e=>{const t=this.layoutDescription.components[e];this.components[e]=new xo(e,t)})),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach((t=>{e.push(t.data)})),e}updateFromGamepad(){Object.values(this.components).forEach((e=>{e.updateFromGamepad(this.xrInputSource.gamepad)}))}}class wo extends Cr.Tme{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e||(this.envMap=e,this.traverse((e=>{e.isMesh&&(e.material.envMap=this.envMap,e.material.needsUpdate=!0)}))),this}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach((e=>{Object.values(e.visualResponses).forEach((e=>{const{valueNode:t,minNode:n,maxNode:r,value:i,valueNodeProperty:s}=e;t&&(s===mo.VisualResponseProperty.VISIBILITY?t.visible=i:s===mo.VisualResponseProperty.TRANSFORM&&(t.quaternion.slerpQuaternions(n.quaternion,r.quaternion,i),t.position.lerpVectors(n.position,r.position,i)))}))})))}}function So(e,t){!function(e,t){Object.values(e.components).forEach((e=>{const{type:n,touchPointNodeName:r,visualResponses:i}=e;if(n===mo.ComponentType.TOUCHPAD)if(e.touchPointNode=t.getObjectByName(r),e.touchPointNode){const t=new Cr.xo$(.001),n=new Cr.vBJ({color:255}),r=new Cr.Kj0(t,n);e.touchPointNode.add(r)}else console.warn(`Could not find touch dot, ${e.touchPointNodeName}, in touchpad component ${e.id}`);Object.values(i).forEach((e=>{const{valueNodeName:n,minNodeName:r,maxNodeName:i,valueNodeProperty:s}=e;if(s===mo.VisualResponseProperty.TRANSFORM){if(e.minNode=t.getObjectByName(r),e.maxNode=t.getObjectByName(i),!e.minNode)return void console.warn(`Could not find ${r} in the model`);if(!e.maxNode)return void console.warn(`Could not find ${i} in the model`)}e.valueNode=t.getObjectByName(n),e.valueNode||console.warn(`Could not find ${n} in the model`)}))}))}(e.motionController,t),e.envMap&&t.traverse((t=>{t.isMesh&&(t.material.envMap=e.envMap,t.material.needsUpdate=!0)})),e.add(t)}class _o{constructor(e=null){this.gltfLoader=e,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new fo.GLTFLoader)}createControllerModel(e){const t=new wo;let n=null;return e.addEventListener("connected",(e=>{const r=e.data;"tracked-pointer"===r.targetRayMode&&r.gamepad&&async function(e,t,n=null,r=!0){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No basePath supplied");const i=await async function(e){if(!e)throw new Error("No basePath supplied");return await go(`${e}/profilesList.json`)}(t);let s;if(e.profiles.some((e=>{const n=i[e];return n&&(s={profileId:e,profilePath:`${t}/${n.path}`,deprecated:!!n.deprecated}),!!s})),!s){if(!n)throw new Error("No matching profile name found");const e=i[n];if(!e)throw new Error(`No matching profile name found and default profile "${n}" missing.`);s={profileId:n,profilePath:`${t}/${e.path}`,deprecated:!!e.deprecated}}const a=await go(s.profilePath);let o;if(r){let t;if(t="any"===e.handedness?a.layouts[Object.keys(a.layouts)[0]]:a.layouts[e.handedness],!t)throw new Error(`No matching handedness, ${e.handedness}, in profile ${s.profileId}`);t.assetPath&&(o=s.profilePath.replace("profile.json",t.assetPath))}return{profile:a,assetPath:o}}(r,this.path,"generic-trigger").then((({profile:e,assetPath:i})=>{t.motionController=new bo(r,e,i);const s=this._assetCache[t.motionController.assetUrl];if(s)n=s.scene.clone(),So(t,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,(e=>{this._assetCache[t.motionController.assetUrl]=e,n=e.scene.clone(),So(t,n)}),null,(()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)}))}})).catch((e=>{console.warn(e)}))})),e.addEventListener("disconnected",(()=>{t.motionController=null,t.remove(n),n=null})),t}}function Eo(e){return Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eo(e)}function Co(){Co=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof p?t:p,a=Object.create(s.prototype),o=new C(i||[]);return r(a,"_invoke",{value:w(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function p(){}function d(){}function f(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==Eo(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,o)}))}o(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=S(a,n);if(o){if(o===h)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},x(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var a=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(v),l(v,o,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function To(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function Mo(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){To(s,r,i,a,o,"next",e)}function o(e){To(s,r,i,a,o,"throw",e)}a(void 0)}))}}function Ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Eo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Eo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Eo(i)?i:String(i)),r)}var i}function ko(e,t,n){return t&&Ao(e.prototype,t),n&&Ao(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Po=ko((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.signals,i=null,s=null,a=null,o=[];this.currentSession=null;var l=function(){var e=Mo(Co().mark((function e(r){var l,u,h,p,d,f,m,g;return Co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=document.getElementById("sidebar")).style.width="300px",l.style.height="700px",null===i&&(i=new po(a),t.sceneHelpers.add(i),(u=new ao(l)).position.set(1,1.5,-.5),u.rotation.y=-.5,u.scale.setScalar(2),i.add(u),o.push(u),(h=new Cr.u9r).setFromPoints([new Cr.Pa4(0,0,0),new Cr.Pa4(0,0,-5)]),(p=a.xr.getController(0)).add(new Cr.x12(h)),i.add(p),(d=a.xr.getController(1)).add(new Cr.x12(h)),i.add(d),f=new _o,(m=a.xr.getControllerGrip(0)).add(f.createControllerModel(m)),i.add(m),(g=a.xr.getControllerGrip(1)).add(f.createControllerModel(g)),i.add(g)),s=t.camera.clone(),i.visible=!0,n.currentSession=r,n.currentSession.addEventListener("end",c),e.next=10,a.xr.setSession(n.currentSession);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Mo(Co().mark((function e(){var o;return Co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=document.getElementById("sidebar")).style.width="",o.style.height="",t.camera.copy(s),i.visible=!1,n.currentSession.removeEventListener("end",c),n.currentSession=null,e.next=9,a.xr.setSession(null);case 9:r.exitedVR.dispatch();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r.toggleVR.add((function(){null===n.currentSession?navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(l):n.currentSession.end()})),r.rendererCreated.add((function(e){(a=e).xr.enabled=!0}))}));class Lo extends Cr.xsS{constructor(){super();const e=new Cr.DvJ;e.deleteAttribute("uv");const t=new Cr.Wid({side:Cr._Li}),n=new Cr.Wid,r=new Cr.cek(16777215,5,28,2);r.position.set(.418,16.199,.3),this.add(r);const i=new Cr.Kj0(e,t);i.position.set(-.757,13.219,.717),i.scale.set(31.713,28.305,28.591),this.add(i);const s=new Cr.Kj0(e,n);s.position.set(-10.906,2.009,1.846),s.rotation.set(0,-.195,0),s.scale.set(2.328,7.905,4.651),this.add(s);const a=new Cr.Kj0(e,n);a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a);const o=new Cr.Kj0(e,n);o.position.set(6.167,.857,7.803),o.rotation.set(0,.561,0),o.scale.set(3.927,6.285,3.687),this.add(o);const l=new Cr.Kj0(e,n);l.position.set(-2.017,.018,6.124),l.rotation.set(0,.333,0),l.scale.set(2.002,4.566,2.064),this.add(l);const c=new Cr.Kj0(e,n);c.position.set(2.291,-.756,-2.621),c.rotation.set(0,-.286,0),c.scale.set(1.546,1.552,1.496),this.add(c);const u=new Cr.Kj0(e,n);u.position.set(-2.193,-.369,-5.547),u.rotation.set(0,.516,0),u.scale.set(3.875,3.487,2.986),this.add(u);const h=new Cr.Kj0(e,Do(50));h.position.set(-16.116,14.37,8.208),h.scale.set(.1,2.428,2.739),this.add(h);const p=new Cr.Kj0(e,Do(50));p.position.set(-16.109,18.021,-8.207),p.scale.set(.1,2.425,2.751),this.add(p);const d=new Cr.Kj0(e,Do(17));d.position.set(14.904,12.198,-1.832),d.scale.set(.15,4.265,6.331),this.add(d);const f=new Cr.Kj0(e,Do(43));f.position.set(-.462,8.89,14.52),f.scale.set(4.38,5.441,.088),this.add(f);const m=new Cr.Kj0(e,Do(20));m.position.set(3.235,11.486,-12.541),m.scale.set(2.5,2,.1),this.add(m);const g=new Cr.Kj0(e,Do(100));g.position.set(0,20,0),g.scale.set(1,.1,1),this.add(g)}dispose(){const e=new Set;this.traverse((t=>{t.isMesh&&(e.add(t.geometry),e.add(t.material))}));for(const t of e)t.dispose()}}function Do(e){const t=new Cr.vBJ;return t.color.setScalar(e),t}function No(e){var t=e.signals,n=new za.sd;n.setId("viewport"),n.setPosition("absolute"),n.add(new Ja(e)),n.add(new Ya(e)),n.add(new $a(e));var r=null,i=null,s=e.camera,a=e.scene,o=e.sceneHelpers,l=!0,c=new Cr.ZAu;o.add(c);var u=new Cr.VLJ(30,30,8947848);u.material.color.setHex(8947848),u.material.vertexColors=!1,c.add(u);var h=new Cr.VLJ(30,6,2236962);h.material.color.setHex(2236962),h.material.vertexColors=!1,c.add(h);var p=new so(s,n),d=new Po(e),f=new Cr.ZzF,m=new Cr.GQ(f);m.material.depthTest=!1,m.material.transparent=!0,m.visible=!1,o.add(m);var g=null,y=null,v=null,x=new xa(s,n.dom);x.addEventListener("change",(function(){var n=x.object;if(void 0!==n){f.setFromObject(n,!0);var r=e.helpers[n.id];void 0!==r&&!0!==r.isSkeletonHelper&&r.update(),t.refreshSidebarObject3D.dispatch(n)}F()})),x.addEventListener("mouseDown",(function(){var e=x.object;g=e.position.clone(),y=e.rotation.clone(),v=e.scale.clone(),L.enabled=!1})),x.addEventListener("mouseUp",(function(){var t=x.object;if(void 0!==t)switch(x.getMode()){case"translate":g.equals(t.position)||e.execute(new Ms(e,t,t.position,g));break;case"rotate":y.equals(t.rotation)||e.execute(new Ns(e,t,t.rotation,y));break;case"scale":v.equals(t.scale)||e.execute(new Us(e,t,t.scale,v))}L.enabled=!0})),o.add(x);var b=new Cr.iMs,w=new Cr.FM8;function S(){s.aspect=n.dom.offsetWidth/n.dom.offsetHeight,s.updateProjectionMatrix()}function _(e){w.set(2*e.x-1,-2*e.y+1),b.setFromCamera(w,s);var t=[];return a.traverseVisible((function(e){t.push(e)})),o.traverseVisible((function(e){"picker"===e.name&&t.push(e)})),b.intersectObjects(t,!1)}var E=new Cr.FM8,C=new Cr.FM8,T=new Cr.FM8;function M(e,t,n){var r=e.getBoundingClientRect();return[(t-r.left)/r.width,(n-r.top)/r.height]}function A(){if(0===E.distanceTo(C)){var e=_(C);t.intersectionsDetected.dispatch(e),F()}}function k(e){var t=M(n.dom,e.clientX,e.clientY);C.fromArray(t),A(),document.removeEventListener("mouseup",k)}function P(e){var t=e.changedTouches[0],r=M(n.dom,t.clientX,t.clientY);C.fromArray(r),A(),document.removeEventListener("touchend",P)}n.dom.addEventListener("mousedown",(function(e){if(e.target===r.domElement){var t=M(n.dom,e.clientX,e.clientY);E.fromArray(t),document.addEventListener("mouseup",k)}})),n.dom.addEventListener("touchstart",(function(e){var t=e.changedTouches[0],r=M(n.dom,t.clientX,t.clientY);E.fromArray(r),document.addEventListener("touchend",P)}),{passive:!1}),n.dom.addEventListener("dblclick",(function(e){var r=M(n.dom,e.clientX,e.clientY);T.fromArray(r);var i=_(T);if(i.length>0){var s=i[0];t.objectFocused.dispatch(s.object)}}));var L=new qa(s,n.dom);L.addEventListener("change",(function(){t.cameraChanged.dispatch(s),t.refreshSidebarObject3D.dispatch(s)})),p.center=L.center,t.editorCleared.add((function(){L.center.set(0,0,0),F()})),t.transformModeChanged.add((function(e){x.setMode(e)})),t.snapChanged.add((function(e){x.setTranslationSnap(e)})),t.spaceChanged.add((function(e){x.setSpace(e)})),t.rendererUpdated.add((function(){a.traverse((function(e){void 0!==e.material&&(e.material.needsUpdate=!0)})),F()})),t.rendererCreated.add((function(t){if(null!==r&&(r.setAnimationLoop(null),r.dispose(),i.dispose(),n.dom.removeChild(r.domElement)),(r=t).setAnimationLoop(R),r.setClearColor(11184810),window.matchMedia){var s=window.matchMedia("(prefers-color-scheme: dark)");s.addEventListener("change",(function(e){r.setClearColor(e.matches?3355443:11184810),Ro(u,h,e.matches?[2236962,8947848]:[8947848,2631720]),F()})),r.setClearColor(s.matches?3355443:11184810),Ro(u,h,s.matches?[2236962,8947848]:[8947848,2631720])}r.setPixelRatio(window.devicePixelRatio),r.setSize(n.dom.offsetWidth,n.dom.offsetHeight),(i=new Cr.anP(r)).compileEquirectangularShader(),n.dom.appendChild(r.domElement),e.currentRenderer=r,F()})),t.sceneGraphChanged.add((function(){F()})),t.cameraChanged.add((function(){F()})),t.objectSelected.add((function(e){m.visible=!1,x.detach(),null!==e&&e!==a&&e!==s&&(f.setFromObject(e,!0),!1===f.isEmpty()&&(m.visible=!0),x.attach(e)),F()})),t.objectFocused.add((function(e){L.focus(e)})),t.geometryChanged.add((function(e){void 0!==e&&f.setFromObject(e,!0),F()})),t.objectChanged.add((function(t){e.selected===t&&f.setFromObject(t,!0),t.isPerspectiveCamera&&t.updateProjectionMatrix();var n=e.helpers[t.id];void 0!==n&&!0!==n.isSkeletonHelper&&n.update(),F()})),t.objectRemoved.add((function(e){L.enabled=!0,e===x.object&&x.detach()})),t.materialChanged.add((function(){F()})),t.sceneBackgroundChanged.add((function(e,t,n,r,i,s){switch(e){case"None":a.background=null;break;case"Color":a.background=new Cr.Ilk(t);break;case"Texture":n&&(a.background=n);break;case"Equirectangular":r&&(r.mapping=Cr.dSO,a.background=r,a.backgroundBlurriness=i,a.backgroundIntensity=s)}F()})),t.sceneEnvironmentChanged.add((function(e,t){switch(e){case"None":a.environment=null;break;case"Equirectangular":a.environment=null,t&&(t.mapping=Cr.dSO,a.environment=t);break;case"ModelViewer":a.environment=i.fromScene(new Lo,.04).texture}F()})),t.sceneFogChanged.add((function(e,t,n,r,i){switch(e){case"None":a.fog=null;break;case"Fog":a.fog=new Cr.ybr(t,n,r);break;case"FogExp2":a.fog=new Cr.yo9(t,i)}F()})),t.sceneFogSettingsChanged.add((function(e,t,n,r,i){switch(e){case"Fog":a.fog.color.setHex(t),a.fog.near=n,a.fog.far=r;break;case"FogExp2":a.fog.color.setHex(t),a.fog.density=i}F()})),t.viewportCameraChanged.add((function(){var t=e.viewportCamera;t.isPerspectiveCamera?(t.aspect=e.camera.aspect,t.projectionMatrix.copy(e.camera.projectionMatrix)):t.isOrthographicCamera,L.enabled=t===e.camera,F()})),t.viewportShadingChanged.add((function(){switch(e.viewportShading){case"default":a.overrideMaterial=null;break;case"normals":a.overrideMaterial=new Cr.RSm;break;case"wireframe":a.overrideMaterial=new Cr.vBJ({color:0,wireframe:!0})}F()})),t.exitedVR.add(F),t.windowResize.add((function(){S(),r.setSize(n.dom.offsetWidth,n.dom.offsetHeight),F()})),t.showGridChanged.add((function(e){c.visible=e,F()})),t.showHelpersChanged.add((function(e){l=e,x.enabled=e,F()})),t.cameraResetted.add(S);var D=0,N=new Cr.SUY;function R(){var t=e.mixer,n=N.getDelta(),r=!1,i=t.stats.actions;(i.inUse>0||D>0)&&(D=i.inUse,t.update(n),r=!0),!0===p.animating&&(p.update(n),r=!0),null!==d.currentSession&&(r=!0),!0===r&&F()}var I=0,O=0;function F(){I=performance.now(),r.setViewport(0,0,n.dom.offsetWidth,n.dom.offsetHeight),r.render(a,e.viewportCamera),s===e.viewportCamera&&(r.autoClear=!1,!0===l&&r.render(o,s),null===d.currentSession&&p.render(r),r.autoClear=!0),O=performance.now(),e.signals.sceneRendered.dispatch(O-I)}return n}function Ro(e,t,n){e.material.color.setHex(n[0]),t.material.color.setHex(n[1])}var Io=a.p+"d6ee454aa9e9f9234769b5b936224227.svg",Oo=a.p+"b6f238a093e0e137d7f9124d253c9123.svg",Fo=a.p+"ac954a9bdf552ab0fb86d5a9b726caf5.svg";function Bo(e){var t=e.signals,n=e.strings,r=new za.sd;r.setId("toolbar");var i=document.createElement("img");i.title=n.getKey("toolbar/translate"),i.src=Oo;var s=new za.y3;s.dom.className="Button selected",s.dom.appendChild(i),s.onClick((function(){t.transformModeChanged.dispatch("translate")})),r.add(s);var a=document.createElement("img");a.title=n.getKey("toolbar/rotate"),a.src=Io;var o=new za.y3;o.dom.appendChild(a),o.onClick((function(){t.transformModeChanged.dispatch("rotate")})),r.add(o);var l=document.createElement("img");l.title=n.getKey("toolbar/scale"),l.src=Fo;var c=new za.y3;c.dom.appendChild(l),c.onClick((function(){t.transformModeChanged.dispatch("scale")})),r.add(c);var u=new za.mA(!1);return u.dom.title=n.getKey("toolbar/local"),u.onChange((function(){t.spaceChanged.dispatch(!0===this.getValue()?"local":"world")})),r.add(u),t.transformModeChanged.add((function(e){switch(s.dom.classList.remove("selected"),o.dom.classList.remove("selected"),c.dom.classList.remove("selected"),e){case"translate":s.dom.classList.add("selected");break;case"rotate":o.dom.classList.add("selected");break;case"scale":c.dom.classList.add("selected")}})),r}var Uo=a(1072),Vo=a.n(Uo),jo=a(9592),zo=a.n(jo),Ho=a(4631),Wo=a.n(Ho),Go=a(1240),Xo={};Xo.styleTagTransform=g(),Xo.setAttributes=p(),Xo.insert=u().bind(null,"head"),Xo.domAPI=l(),Xo.insertStyleElement=f(),s()(Go.Z,Xo),Go.Z&&Go.Z.locals&&Go.Z.locals,a(6876),a(2977);var Ko=a(4834),qo={};qo.styleTagTransform=g(),qo.setAttributes=p(),qo.insert=u().bind(null,"head"),qo.domAPI=l(),qo.insertStyleElement=f(),s()(Ko.Z,qo),Ko.Z&&Ko.Z.locals&&Ko.Z.locals;var Jo=a(2274);function Yo(e){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(e)}function $o(e){var t=e.signals,n=new za.sd;n.setId("script"),n.setPosition("absolute"),n.setBackgroundColor("#272822"),n.setDisplay("none");var r=new za.sd;r.setPadding("10px"),n.add(r);var i=(new za.sm).setColor("#fff");r.add(i);var s,a,o,l,c,u=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",32),e.setAttribute("height",32);var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M 12,12 L 22,22 M 22,12 12,22"),t.setAttribute("stroke","#fff"),e.appendChild(t),e}(),h=new za.u1(u);h.setPosition("absolute"),h.setTop("3px"),h.setRight("1px"),h.setCursor("pointer"),h.onClick((function(){n.setDisplay("none")})),r.add(h),t.rendererCreated.add((function(e){s=e}));var p=Wo()(n.dom,{value:"",lineNumbers:!0,matchBrackets:!0,indentWithTabs:!0,tabSize:4,indentUnit:4,hintOptions:{completeSingle:!1}});p.setOption("theme","monokai"),p.on("change",(function(){!1!==p.state.focused&&(clearTimeout(a),a=setTimeout((function(){var t=p.getValue();if(m(t))if("object"!==Yo(l)){if("programInfo"===l){var n=JSON.parse(t);if(JSON.stringify(c.material.defines)!==JSON.stringify(n.defines)){var r=new ms(e,c,"defines",n.defines);r.updatable=!1,e.execute(r)}if(JSON.stringify(c.material.uniforms)!==JSON.stringify(n.uniforms)){var i=new ms(e,c,"uniforms",n.uniforms);i.updatable=!1,e.execute(i)}if(JSON.stringify(c.material.attributes)!==JSON.stringify(n.attributes)){var s=new ms(e,c,"attributes",n.attributes);s.updatable=!1,e.execute(s)}}}else t!==l.source&&e.execute(new Gs(e,c,l,"source",t))}),300))})),p.getWrapperElement().addEventListener("keydown",(function(e){e.stopPropagation()}));var d=[],f=[],m=function(e){var n,r=[];return p.operation((function(){for(;d.length>0;)p.removeLineClass(d.shift(),"background","errorLine");for(;f.length>0;)p.removeLineWidget(f.shift());switch(o){case"javascript":try{var i=Vo().parse(e,{tolerant:!0});r=i.errors}catch(u){r.push({lineNumber:u.lineNumber-1,message:u.message})}for(var a=0;a<r.length;a++){var u=r[a];u.message=u.message.replace(/Line [0-9]+: /,"")}break;case"json":r=[],zo().parseError=function(e,t){e=e.split("\n")[3],r.push({lineNumber:t.loc.first_line-1,message:e})};try{zo().parse(e)}catch(u){}break;case"glsl":c.material[l]=e,c.material.needsUpdate=!0,t.materialChanged.dispatch(c.material);var h=s.info.programs;n=!0;for(var m=/^(?:ERROR|WARNING): \d+:(\d+): (.*)/g,g=0,y=h.length;g!==y;++g){var v=h[g].diagnostics;if(void 0!==v&&v.material===c.material){v.runnable||(n=!1);for(var x=v[l],b=x.prefix.split(/\r\n|\r|\n/).length;;){var w=m.exec(x.log);if(null===w)break;r.push({lineNumber:w[1]-b,message:w[2]})}break}}}for(var S=0;S<r.length;S++){var _=r[S],E=document.createElement("div");E.className="esprima-error",E.textContent=_.message;var C=Math.max(_.lineNumber,0);d.push(C),p.addLineClass(C,"background","errorLine");var T=p.addLineWidget(C,E);f.push(T)}return void 0!==n?n:0===r.length}))},g=new(Wo().TernServer)({caseInsensitive:!0,plugins:{threejs:null}});return p.setOption("extraKeys",{"Ctrl-Space":function(e){g.complete(e)},"Ctrl-I":function(e){g.showType(e)},"Ctrl-O":function(e){g.showDocs(e)},"Alt-.":function(e){g.jumpToDef(e)},"Alt-,":function(e){g.jumpBack(e)},"Ctrl-Q":function(e){g.rename(e)},"Ctrl-.":function(e){g.selectName(e)}}),p.on("cursorActivity",(function(e){"javascript"===o&&g.updateArgHints(e)})),p.on("keypress",(function(e,t){if("javascript"===o){var n=String.fromCharCode(t.which||t.keyCode);/[\w\.]/.exec(n)&&g.complete(e)}})),t.editorCleared.add((function(){n.setDisplay("none")})),t.editScript.add((function(e,t){var r,s,a;if("object"===Yo(t))r="javascript",s=t.name,a=t.source,i.setValue(e.name+" / "+s);else{switch(t){case"vertexShader":r="glsl",s="Vertex Shader",a=e.material.vertexShader||"";break;case"fragmentShader":r="glsl",s="Fragment Shader",a=e.material.fragmentShader||"";break;case"programInfo":r="json",s="Program Properties";var u={defines:e.material.defines,uniforms:e.material.uniforms,attributes:e.material.attributes};a=JSON.stringify(u,null,"\t")}i.setValue(e.material.name+" / "+s)}o=r,l=t,c=e,n.setDisplay(""),p.setValue(a),p.clearHistory(),"json"===r&&(r={name:"javascript",json:!0}),p.setOption("mode",r)})),t.scriptRemoved.add((function(e){l===e&&n.setDisplay("none")})),n}window.tern=Jo;var Zo={Player:function(){var e=new Cr.CP7({antialias:!0});e.setPixelRatio(window.devicePixelRatio);var t,n,r,i,s,a=new Cr.Gql,o=VRButton.createButton(e),l={},c=document.createElement("div");function u(e,t){for(var n=0,r=e.length;n<r;n++)e[n](t)}function h(){r=performance.now();try{u(l.update,{time:r-i,delta:r-s})}catch(e){console.error(e.message||e,e.stack||"")}e.render(n,t),s=r}function p(e){u(l.keydown,e)}function d(e){u(l.keyup,e)}function f(e){u(l.pointerdown,e)}function m(e){u(l.pointerup,e)}function g(e){u(l.pointermove,e)}c.appendChild(e.domElement),this.dom=c,this.width=500,this.height=500,this.load=function(r){var i=r.project;void 0!==i.vr&&(e.xr.enabled=i.vr),void 0!==i.shadows&&(e.shadowMap.enabled=i.shadows),void 0!==i.shadowType&&(e.shadowMap.type=i.shadowType),void 0!==i.toneMapping&&(e.toneMapping=i.toneMapping),void 0!==i.toneMappingExposure&&(e.toneMappingExposure=i.toneMappingExposure),void 0!==i.useLegacyLights&&(e.useLegacyLights=i.useLegacyLights),this.setScene(a.parse(r.scene)),this.setCamera(a.parse(r.camera)),l={init:[],start:[],stop:[],keydown:[],keyup:[],pointerdown:[],pointerup:[],pointermove:[],update:[]};var s="player,renderer,scene,camera",o={};for(var c in l)s+=","+c,o[c]=c;var h=JSON.stringify(o).replace(/\"/g,"");for(var p in r.scripts){var d=n.getObjectByProperty("uuid",p,!0);if(void 0!==d)for(var f=r.scripts[p],m=0;m<f.length;m++){var g=f[m],y=new Function(s,g.source+"\nreturn "+h+";").bind(d)(this,e,n,t);for(var v in y)void 0!==y[v]&&(void 0!==l[v]?l[v].push(y[v].bind(d)):console.warn("APP.Player: Event type not supported (",v,")"))}else console.warn("APP.Player: Script without object.",p)}u(l.init,arguments)},this.setCamera=function(e){(t=e).aspect=this.width/this.height,t.updateProjectionMatrix()},this.setScene=function(e){n=e},this.setPixelRatio=function(t){e.setPixelRatio(t)},this.setSize=function(n,r){this.width=n,this.height=r,t&&(t.aspect=this.width/this.height,t.updateProjectionMatrix()),e.setSize(n,r)},this.play=function(){e.xr.enabled&&c.append(o),i=s=performance.now(),document.addEventListener("keydown",p),document.addEventListener("keyup",d),document.addEventListener("pointerdown",f),document.addEventListener("pointerup",m),document.addEventListener("pointermove",g),u(l.start,arguments),e.setAnimationLoop(h)},this.stop=function(){e.xr.enabled&&o.remove(),document.removeEventListener("keydown",p),document.removeEventListener("keyup",d),document.removeEventListener("pointerdown",f),document.removeEventListener("pointerup",m),document.removeEventListener("pointermove",g),u(l.stop,arguments),e.setAnimationLoop(null)},this.render=function(r){u(l.update,{time:1e3*r,delta:0}),e.render(n,t)},this.dispose=function(){e.dispose(),t=void 0,n=void 0}}},Qo=a(1098);function el(e){var t=e.signals,n=e.strings,r=new za.sd;r.setBorderTop("0"),r.setPaddingTop("20px");var i=new WeakMap;function s(t,n){var r=document.createElement("div");if(r.draggable=n,r.innerHTML=function(t){var n,r='<span class="type '.concat(function(e){return e.isScene?"Scene":e.isCamera?"Camera":e.isLight?"Light":e.isMesh?"Mesh":e.isLine?"Line":e.isPoints?"Points":"Object3D"}(t),'"></span> ').concat(a(t.name));if(t.isMesh){var i=t.geometry,s=t.material;r+=' <span class="type Geometry"></span> '.concat(a(i.name)),r+=' <span class="type Material"></span> '.concat(a(function(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(e[n].name);return t.join(",")}return e.name}(s)))}return r+=(n=t.uuid,void 0!==e.scripts[n]?' <span class="type Script"></span>':"")}(t),r.value=t.id,i.has(t)){var s=i.get(t),o=document.createElement("span");o.classList.add("opener"),t.children.length>0&&o.classList.add(s?"open":"closed"),o.addEventListener("click",(function(){i.set(t,!1===i.get(t)),D()})),r.insertBefore(o,r.firstChild)}return r}function a(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var o=!1,l=new Qo.gg(e);l.setId("outliner"),l.onChange((function(){o=!0,e.selectById(parseInt(l.getValue())),o=!1})),l.onDblClick((function(){e.focusById(parseInt(l.getValue()))})),r.add(l),r.add(new za.MH);var c=new za.Bb,u=(new za.Cj).setOptions({None:"",Color:"Color",Texture:"Texture",Equirectangular:"Equirect"}).setWidth("150px");u.onChange((function(){y(),v()})),c.add(new za.sm(n.getKey("sidebar/scene/background")).setWidth("90px")),c.add(u);var h=(new za.Wo).setValue("#000000").setMarginLeft("8px").onInput(y);c.add(h);var p=(new Qo.XM).setMarginLeft("8px").onChange(y);p.setDisplay("none"),c.add(p);var d=(new Qo.XM).setMarginLeft("8px").onChange(y);d.setDisplay("none"),c.add(d),r.add(c);var f=new za.Bb;f.setDisplay("none"),f.setMarginLeft("90px");var m=new za.KP(0).setWidth("40px").setRange(0,1).onChange(y);f.add(m);var g=new za.KP(1).setWidth("40px").setRange(0,1/0).onChange(y);function y(){t.sceneBackgroundChanged.dispatch(u.getValue(),h.getHexValue(),p.getValue(),d.getValue(),m.getValue(),g.getValue())}function v(){var e=u.getValue();u.setWidth("None"===e?"150px":"110px"),h.setDisplay("Color"===e?"":"none"),p.setDisplay("Texture"===e?"":"none"),d.setDisplay("Equirectangular"===e?"":"none"),f.setDisplay("Equirectangular"===e?"":"none")}f.add(g),r.add(f);var x=new za.Bb,b=(new za.Cj).setOptions({None:"",Equirectangular:"Equirect",ModelViewer:"ModelViewer"}).setWidth("150px");b.setValue("None"),b.onChange((function(){S(),_()})),x.add(new za.sm(n.getKey("sidebar/scene/environment")).setWidth("90px")),x.add(b);var w=(new Qo.XM).setMarginLeft("8px").onChange(S);function S(){t.sceneEnvironmentChanged.dispatch(b.getValue(),w.getValue())}function _(){var e=b.getValue();b.setWidth("Equirectangular"!==e?"150px":"110px"),w.setDisplay("Equirectangular"===e?"":"none")}function E(){t.sceneFogSettingsChanged.dispatch(T.getValue(),A.getHexValue(),k.getValue(),P.getValue(),L.getValue())}w.setDisplay("none"),x.add(w),r.add(x);var C=new za.Bb,T=(new za.Cj).setOptions({None:"",Fog:"Linear",FogExp2:"Exponential"}).setWidth("150px");T.onChange((function(){t.sceneFogChanged.dispatch(T.getValue(),A.getHexValue(),k.getValue(),P.getValue(),L.getValue()),N()})),C.add(new za.sm(n.getKey("sidebar/scene/fog")).setWidth("90px")),C.add(T),r.add(C);var M=new za.Bb;M.setDisplay("none"),M.setMarginLeft("90px"),r.add(M);var A=(new za.Wo).setValue("#aaaaaa");A.onInput(E),M.add(A);var k=new za.KP(.1).setWidth("40px").setRange(0,1/0).onChange(E);M.add(k);var P=new za.KP(50).setWidth("40px").setRange(0,1/0).onChange(E);M.add(P);var L=new za.KP(.05).setWidth("40px").setRange(0,.1).setStep(.001).setPrecision(3).onChange(E);function D(){var t=e.camera,n=e.scene,r=[];r.push(s(t,!1)),r.push(s(n,!1)),function e(t,n){for(var a=0,o=t.length;a<o;a++){var l=t[a];!1===i.has(l)&&i.set(l,!1);var c=s(l,!0);c.style.paddingLeft=18*n+"px",r.push(c),!0===i.get(l)&&e(l.children,n+1)}}(n.children,0),l.setOptions(r),null!==e.selected&&l.setValue(e.selected.id),n.background?n.background.isColor?(u.setValue("Color"),h.setHexValue(n.background.getHex())):n.background.isTexture&&(n.background.mapping===Cr.dSO?(u.setValue("Equirectangular"),d.setValue(n.background),m.setValue(n.backgroundBlurriness),g.setValue(n.backgroundIntensity)):(u.setValue("Texture"),p.setValue(n.background))):u.setValue("None"),n.environment?n.environment.mapping===Cr.dSO&&(b.setValue("Equirectangular"),w.setValue(n.environment)):b.setValue("None"),n.fog?(A.setHexValue(n.fog.color.getHex()),n.fog.isFog?(T.setValue("Fog"),k.setValue(n.fog.near),P.setValue(n.fog.far)):n.fog.isFogExp2&&(T.setValue("FogExp2"),L.setValue(n.fog.density))):T.setValue("None"),v(),_(),N()}function N(){var e=T.getValue();M.setDisplay("None"===e?"none":""),k.setDisplay("Fog"===e?"":"none"),P.setDisplay("Fog"===e?"":"none"),L.setDisplay("FogExp2"===e?"":"none")}return M.add(L),D(),t.editorCleared.add(D),t.sceneGraphChanged.add(D),t.objectSelected.add((function(t){if(!0!==o)if(null!==t&&null!==t.parent){for(var n=!1,r=t.parent;r!==e.scene;)!0!==i.get(r)&&(i.set(r,!0),n=!0),r=r.parent;n&&D(),l.setValue(t.id)}else l.setValue(null)})),r}function tl(e){var t=e.strings,n=e.signals,r=new za.sd;r.setBorderTop("0"),r.setPaddingTop("20px"),r.setDisplay("none");var i=new za.Bb,s=new za.sm;i.add(new za.sm(t.getKey("sidebar/object/type")).setWidth("90px")),i.add(s),r.add(i);var a=new za.Bb,o=(new za.u3).setWidth("102px").setFontSize("12px").setDisabled(!0),l=new za.y3(t.getKey("sidebar/object/new")).setMarginLeft("7px").onClick((function(){o.setValue(Cr.M8C.generateUUID()),e.execute(new Vr(e,e.selected,o.getValue()))}));a.add(new za.sm(t.getKey("sidebar/object/uuid")).setWidth("90px")),a.add(o),a.add(l),r.add(a);var c=new za.Bb,u=(new za.u3).setWidth("150px").setFontSize("12px").onChange((function(){e.execute(new Xr(e,e.selected,"name",u.getValue()))}));c.add(new za.sm(t.getKey("sidebar/object/name")).setWidth("90px")),c.add(u),r.add(c);var h=new za.Bb,p=(new za.KP).setPrecision(3).setWidth("50px").onChange(fe),d=(new za.KP).setPrecision(3).setWidth("50px").onChange(fe),f=(new za.KP).setPrecision(3).setWidth("50px").onChange(fe);h.add(new za.sm(t.getKey("sidebar/object/position")).setWidth("90px")),h.add(p,d,f),r.add(h);var m=new za.Bb,g=(new za.KP).setStep(10).setNudge(.1).setUnit("°").setWidth("50px").onChange(fe),y=(new za.KP).setStep(10).setNudge(.1).setUnit("°").setWidth("50px").onChange(fe),v=(new za.KP).setStep(10).setNudge(.1).setUnit("°").setWidth("50px").onChange(fe);m.add(new za.sm(t.getKey("sidebar/object/rotation")).setWidth("90px")),m.add(g,y,v),r.add(m);var x=new za.Bb,b=new za.KP(1).setPrecision(3).setWidth("50px").onChange(fe),w=new za.KP(1).setPrecision(3).setWidth("50px").onChange(fe),S=new za.KP(1).setPrecision(3).setWidth("50px").onChange(fe);x.add(new za.sm(t.getKey("sidebar/object/scale")).setWidth("90px")),x.add(b,w,S),r.add(x);var _=new za.Bb,E=(new za.KP).onChange(fe);_.add(new za.sm(t.getKey("sidebar/object/fov")).setWidth("90px")),_.add(E),r.add(_);var C=new za.Bb,T=(new za.KP).onChange(fe);C.add(new za.sm(t.getKey("sidebar/object/left")).setWidth("90px")),C.add(T),r.add(C);var M=new za.Bb,A=(new za.KP).onChange(fe);M.add(new za.sm(t.getKey("sidebar/object/right")).setWidth("90px")),M.add(A),r.add(M);var k=new za.Bb,P=(new za.KP).onChange(fe);k.add(new za.sm(t.getKey("sidebar/object/top")).setWidth("90px")),k.add(P),r.add(k);var L=new za.Bb,D=(new za.KP).onChange(fe);L.add(new za.sm(t.getKey("sidebar/object/bottom")).setWidth("90px")),L.add(D),r.add(L);var N=new za.Bb,R=(new za.KP).onChange(fe);N.add(new za.sm(t.getKey("sidebar/object/near")).setWidth("90px")),N.add(R),r.add(N);var I=new za.Bb,O=(new za.KP).onChange(fe);I.add(new za.sm(t.getKey("sidebar/object/far")).setWidth("90px")),I.add(O),r.add(I);var F=new za.Bb,B=(new za.KP).onChange(fe);F.add(new za.sm(t.getKey("sidebar/object/intensity")).setWidth("90px")),F.add(B),r.add(F);var U=new za.Bb,V=(new za.Wo).onInput(fe);U.add(new za.sm(t.getKey("sidebar/object/color")).setWidth("90px")),U.add(V),r.add(U);var j=new za.Bb,z=(new za.Wo).onInput(fe);j.add(new za.sm(t.getKey("sidebar/object/groundcolor")).setWidth("90px")),j.add(z),r.add(j);var H=new za.Bb,W=(new za.KP).setRange(0,1/0).onChange(fe);H.add(new za.sm(t.getKey("sidebar/object/distance")).setWidth("90px")),H.add(W),r.add(H);var G=new za.Bb,X=(new za.KP).setPrecision(3).setRange(0,Math.PI/2).onChange(fe);G.add(new za.sm(t.getKey("sidebar/object/angle")).setWidth("90px")),G.add(X),r.add(G);var K=new za.Bb,q=(new za.KP).setRange(0,1).onChange(fe);K.add(new za.sm(t.getKey("sidebar/object/penumbra")).setWidth("90px")),K.add(q),r.add(K);var J=new za.Bb,Y=(new za.KP).setRange(0,1/0).onChange(fe);J.add(new za.sm(t.getKey("sidebar/object/decay")).setWidth("90px")),J.add(Y),r.add(J);var $=new za.Bb;$.add(new za.sm(t.getKey("sidebar/object/shadow")).setWidth("90px"));var Z=new Qo.hO(!1,t.getKey("sidebar/object/cast")).onChange(fe);$.add(Z);var Q=new Qo.hO(!1,t.getKey("sidebar/object/receive")).onChange(fe);$.add(Q),r.add($);var ee=new za.Bb;ee.add(new za.sm(t.getKey("sidebar/object/shadowBias")).setWidth("90px"));var te=new za.KP(0).setPrecision(5).setStep(1e-4).setNudge(1e-5).onChange(fe);ee.add(te),r.add(ee);var ne=new za.Bb;ne.add(new za.sm(t.getKey("sidebar/object/shadowNormalBias")).setWidth("90px"));var re=new za.KP(0).onChange(fe);ne.add(re),r.add(ne);var ie=new za.Bb;ie.add(new za.sm(t.getKey("sidebar/object/shadowRadius")).setWidth("90px"));var se=new za.KP(1).onChange(fe);ie.add(se),r.add(ie);var ae=new za.Bb,oe=(new za.mA).onChange(fe);ae.add(new za.sm(t.getKey("sidebar/object/visible")).setWidth("90px")),ae.add(oe),r.add(ae);var le=new za.Bb,ce=(new za.mA).onChange(fe);le.add(new za.sm(t.getKey("sidebar/object/frustumcull")).setWidth("90px")),le.add(ce),r.add(le);var ue=new za.Bb,he=(new za.sN).setWidth("50px").onChange(fe);ue.add(new za.sm(t.getKey("sidebar/object/renderorder")).setWidth("90px")),ue.add(he),r.add(ue);var pe=new za.Bb,de=(new za.GJ).setWidth("150px").setHeight("40px").setFontSize("12px").onChange(fe);function fe(){var t=e.selected;if(null!==t){var n=new Cr.Pa4(p.getValue(),d.getValue(),f.getValue());t.position.distanceTo(n)>=.01&&e.execute(new Ms(e,t,n));var r=new Cr.USm(g.getValue()*Cr.M8C.DEG2RAD,y.getValue()*Cr.M8C.DEG2RAD,v.getValue()*Cr.M8C.DEG2RAD);(new Cr.Pa4).setFromEuler(t.rotation).distanceTo((new Cr.Pa4).setFromEuler(r))>=.01&&e.execute(new Ns(e,t,r));var i=new Cr.Pa4(b.getValue(),w.getValue(),S.getValue());t.scale.distanceTo(i)>=.01&&e.execute(new Us(e,t,i)),void 0!==t.fov&&Math.abs(t.fov-E.getValue())>=.01&&(e.execute(new Xr(e,t,"fov",E.getValue())),t.updateProjectionMatrix()),void 0!==t.left&&Math.abs(t.left-T.getValue())>=.01&&(e.execute(new Xr(e,t,"left",T.getValue())),t.updateProjectionMatrix()),void 0!==t.right&&Math.abs(t.right-A.getValue())>=.01&&(e.execute(new Xr(e,t,"right",A.getValue())),t.updateProjectionMatrix()),void 0!==t.top&&Math.abs(t.top-P.getValue())>=.01&&(e.execute(new Xr(e,t,"top",P.getValue())),t.updateProjectionMatrix()),void 0!==t.bottom&&Math.abs(t.bottom-D.getValue())>=.01&&(e.execute(new Xr(e,t,"bottom",D.getValue())),t.updateProjectionMatrix()),void 0!==t.near&&Math.abs(t.near-R.getValue())>=.01&&(e.execute(new Xr(e,t,"near",R.getValue())),t.isOrthographicCamera&&t.updateProjectionMatrix()),void 0!==t.far&&Math.abs(t.far-O.getValue())>=.01&&(e.execute(new Xr(e,t,"far",O.getValue())),t.isOrthographicCamera&&t.updateProjectionMatrix()),void 0!==t.intensity&&Math.abs(t.intensity-B.getValue())>=.01&&e.execute(new Xr(e,t,"intensity",B.getValue())),void 0!==t.color&&t.color.getHex()!==V.getHexValue()&&e.execute(new Bi(e,t,"color",V.getHexValue())),void 0!==t.groundColor&&t.groundColor.getHex()!==z.getHexValue()&&e.execute(new Bi(e,t,"groundColor",z.getHexValue())),void 0!==t.distance&&Math.abs(t.distance-W.getValue())>=.01&&e.execute(new Xr(e,t,"distance",W.getValue())),void 0!==t.angle&&Math.abs(t.angle-X.getValue())>=.01&&e.execute(new Xr(e,t,"angle",X.getValue())),void 0!==t.penumbra&&Math.abs(t.penumbra-q.getValue())>=.01&&e.execute(new Xr(e,t,"penumbra",q.getValue())),void 0!==t.decay&&Math.abs(t.decay-Y.getValue())>=.01&&e.execute(new Xr(e,t,"decay",Y.getValue())),t.visible!==oe.getValue()&&e.execute(new Xr(e,t,"visible",oe.getValue())),t.frustumCulled!==ce.getValue()&&e.execute(new Xr(e,t,"frustumCulled",ce.getValue())),t.renderOrder!==he.getValue()&&e.execute(new Xr(e,t,"renderOrder",he.getValue())),void 0!==t.castShadow&&t.castShadow!==Z.getValue()&&e.execute(new Xr(e,t,"castShadow",Z.getValue())),t.receiveShadow!==Q.getValue()&&(void 0!==t.material&&(t.material.needsUpdate=!0),e.execute(new Xr(e,t,"receiveShadow",Q.getValue()))),void 0!==t.shadow&&(t.shadow.bias!==te.getValue()&&e.execute(new Xr(e,t.shadow,"bias",te.getValue())),t.shadow.normalBias!==re.getValue()&&e.execute(new Xr(e,t.shadow,"normalBias",re.getValue())),t.shadow.radius!==se.getValue()&&e.execute(new Xr(e,t.shadow,"radius",se.getValue())));try{var s=JSON.parse(de.getValue());JSON.stringify(t.userData)!=JSON.stringify(s)&&e.execute(new Xr(e,t,"userData",s))}catch(e){console.warn(e)}}}function me(e){s.setValue(e.type),o.setValue(e.uuid),u.setValue(e.name),p.setValue(e.position.x),d.setValue(e.position.y),f.setValue(e.position.z),g.setValue(e.rotation.x*Cr.M8C.RAD2DEG),y.setValue(e.rotation.y*Cr.M8C.RAD2DEG),v.setValue(e.rotation.z*Cr.M8C.RAD2DEG),b.setValue(e.scale.x),w.setValue(e.scale.y),S.setValue(e.scale.z),void 0!==e.fov&&E.setValue(e.fov),void 0!==e.left&&T.setValue(e.left),void 0!==e.right&&A.setValue(e.right),void 0!==e.top&&P.setValue(e.top),void 0!==e.bottom&&D.setValue(e.bottom),void 0!==e.near&&R.setValue(e.near),void 0!==e.far&&O.setValue(e.far),void 0!==e.intensity&&B.setValue(e.intensity),void 0!==e.color&&V.setHexValue(e.color.getHexString()),void 0!==e.groundColor&&z.setHexValue(e.groundColor.getHexString()),void 0!==e.distance&&W.setValue(e.distance),void 0!==e.angle&&X.setValue(e.angle),void 0!==e.penumbra&&q.setValue(e.penumbra),void 0!==e.decay&&Y.setValue(e.decay),void 0!==e.castShadow&&Z.setValue(e.castShadow),void 0!==e.receiveShadow&&Q.setValue(e.receiveShadow),void 0!==e.shadow&&(te.setValue(e.shadow.bias),re.setValue(e.shadow.normalBias),se.setValue(e.shadow.radius)),oe.setValue(e.visible),ce.setValue(e.frustumCulled),he.setValue(e.renderOrder);try{de.setValue(JSON.stringify(e.userData,null,"  "))}catch(e){console.log(e)}de.setBorderColor("transparent"),de.setBackgroundColor(""),function(e){e.isLight||e.isObject3D&&e.userData.targetInverse?(m.setDisplay("none"),x.setDisplay("none")):(m.setDisplay(""),x.setDisplay(""))}(e)}return de.onKeyUp((function(){try{JSON.parse(de.getValue()),de.dom.classList.add("success"),de.dom.classList.remove("fail")}catch(e){de.dom.classList.remove("success"),de.dom.classList.add("fail")}})),pe.add(new za.sm(t.getKey("sidebar/object/userdata")).setWidth("90px")),pe.add(de),r.add(pe),n.objectSelected.add((function(e){null!==e?(r.setDisplay("block"),function(e){var t={fov:_,left:C,right:M,top:k,bottom:L,near:N,far:I,intensity:F,color:U,groundColor:j,distance:H,angle:G,penumbra:K,decay:J,castShadow:$,receiveShadow:Q,shadow:[ee,ne,ie]};for(var n in t){var r=t[n];if(!0===Array.isArray(r))for(var i=0;i<r.length;i++)r[i].setDisplay(void 0!==e[n]?"":"none");else r.setDisplay(void 0!==e[n]?"":"none")}e.isLight&&Q.setDisplay("none"),(e.isAmbientLight||e.isHemisphereLight)&&$.setDisplay("none")}(e),me(e)):r.setDisplay("none")})),n.objectChanged.add((function(t){t===e.selected&&me(t)})),n.refreshSidebarObject3D.add((function(t){t===e.selected&&me(t)})),r}var nl=a(5972),rl=a(7606);const il=new Cr.Pa4,sl=new Cr.Pa4,al=new Cr.Vkp;class ol extends Cr.ejS{constructor(e,t=1,n=16711680){const r=new Cr.u9r,i=e.geometry.attributes.normal.count,s=new Cr.a$l(2*i*3,3);r.setAttribute("position",s),super(r,new Cr.nls({color:n,toneMapped:!1})),this.object=e,this.size=t,this.type="VertexNormalsHelper",this.matrixAutoUpdate=!1,this.update()}update(){this.object.updateMatrixWorld(!0),al.getNormalMatrix(this.object.matrixWorld);const e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n){const r=n.attributes.position,i=n.attributes.normal;let s=0;for(let n=0,a=r.count;n<a;n++)il.fromBufferAttribute(r,n).applyMatrix4(e),sl.fromBufferAttribute(i,n),sl.applyMatrix3(al).normalize().multiplyScalar(this.size).add(il),t.setXYZ(s,il.x,il.y,il.z),s+=1,t.setXYZ(s,sl.x,sl.y,sl.z),s+=1}t.needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ll(e){return ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(e)}function cl(){cl=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof p?t:p,a=Object.create(s.prototype),o=new C(i||[]);return r(a,"_invoke",{value:w(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function p(){}function d(){}function f(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==ll(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,o)}))}o(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=S(a,n);if(o){if(o===h)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},x(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var a=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(v),l(v,o,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function ul(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function hl(e){var t=e.strings,n=e.signals,r=new za.sd;r.setBorderTop("0"),r.setDisplay("none"),r.setPaddingTop("20px");var i=null,s=new za.Bb,o=new za.sm;s.add(new za.sm(t.getKey("sidebar/geometry/type")).setWidth("90px")),s.add(o),r.add(s);var l=new za.Bb,c=(new za.u3).setWidth("102px").setFontSize("12px").setDisabled(!0),u=new za.y3(t.getKey("sidebar/geometry/new")).setMarginLeft("7px").onClick((function(){c.setValue(Cr.M8C.generateUUID()),e.execute(new Gi(e,e.selected,"uuid",c.getValue()))}));l.add(new za.sm(t.getKey("sidebar/geometry/uuid")).setWidth("90px")),l.add(c),l.add(u),r.add(l);var h=new za.Bb,p=(new za.u3).setWidth("150px").setFontSize("12px").onChange((function(){e.execute(new Gi(e,e.selected,"name",p.getValue()))}));h.add(new za.sm(t.getKey("sidebar/geometry/name")).setWidth("90px")),h.add(p),r.add(h);var d=new za.vF;r.add(d),r.add(new nl.SidebarGeometryBufferGeometry(e));var f=(new za.sm).setFontSize("12px"),m=new za.Bb;m.add(new za.sm(t.getKey("sidebar/geometry/bounds")).setWidth("90px")),m.add(f),r.add(m);var g=(new za.Bb).setPaddingLeft("90px");r.add(g);var y=new za.y3(t.getKey("sidebar/geometry/show_vertex_normals"));function v(){return x.apply(this,arguments)}function x(){return x=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){ul(s,r,i,a,o,"next",e)}function o(e){ul(s,r,i,a,o,"throw",e)}a(void 0)}))}}(cl().mark((function t(){var n,s,l,u,h,m,y,v;return cl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.selected)||!n.geometry){t.next=28;break}if(s=n.geometry,r.setDisplay("block"),o.setValue(s.type),c.setValue(s.uuid),p.setValue(s.name),i===s.type){t.next=19;break}if(d.clear(),"BufferGeometry"!==s.type){t.next=13;break}d.add(new rl.SidebarGeometryModifiers(e,n)),t.next=18;break;case 13:return t.next=15,a(7761)("./Sidebar.Geometry.".concat(s.type,".js"));case 15:l=t.sent,u=l.GeometryParametersPanel,d.add(new u(e,n));case 18:i=s.type;case 19:null===s.boundingBox&&s.computeBoundingBox(),h=s.boundingBox,m=Math.floor(1e3*(h.max.x-h.min.x))/1e3,y=Math.floor(1e3*(h.max.y-h.min.y))/1e3,v=Math.floor(1e3*(h.max.z-h.min.z))/1e3,f.setInnerHTML("".concat(m,"<br/>").concat(y,"<br/>").concat(v)),g.setDisplay(s.hasAttribute("normal")?"":"none"),t.next=29;break;case 28:r.setDisplay("none");case 29:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}return y.onClick((function(){var t=e.selected;void 0===e.helpers[t.id]?e.addHelper(t,new ol(t)):e.removeHelper(t),n.sceneGraphChanged.dispatch()})),g.add(y),n.objectSelected.add((function(){i=null,v()})),n.geometryChanged.add(v),r}function pl(e,t,n){var r=e.signals,i=new za.Bb;i.add(new za.sm(n).setWidth("90px"));var s=(new za.mA).setLeft("100px").onChange((function(){o[t]!==s.getValue()&&e.execute(new ms(e,a,t,s.getValue(),0))}));i.add(s);var a=null,o=null;function l(){null!==a&&void 0!==a.material&&(o=a.material,t in o?(s.setValue(o[t]),i.setDisplay("")):i.setDisplay("none"))}return r.objectSelected.add((function(e){a=e,l()})),r.materialChanged.add(l),i}function dl(e,t,n){var r=e.signals,i=new za.Bb;i.add(new za.sm(n).setWidth("90px"));var s,a=(new za.Wo).onInput(c);i.add(a),"emissive"===t&&(s=new za.KP(1).setWidth("30px").setRange(0,1/0).onChange(c),i.add(s));var o=null,l=null;function c(){l[t].getHex()!==a.getHexValue()&&e.execute(new $i(e,o,t,a.getHexValue(),0)),void 0!==s&&l["".concat(t,"Intensity")]!==s.getValue()&&e.execute(new ms(e,o,"".concat(t,"Intensity"),s.getValue(),0))}function u(){null!==o&&void 0!==o.material&&(l=o.material,t in l?(a.setHexValue(l[t].getHexString()),void 0!==s&&s.setValue(l["".concat(t,"Intensity")]),i.setDisplay("")):i.setDisplay("none"))}return r.objectSelected.add((function(e){o=e,u()})),r.materialChanged.add(u),i}function fl(e,t,n,r){var i=e.signals,s=new za.Bb;s.add(new za.sm(n).setWidth("90px"));var a=(new za.Cj).setOptions(r).onChange((function(){var n=parseInt(a.getValue());l[t]!==n&&e.execute(new ms(e,o,t,n,0))}));s.add(a);var o=null,l=null;function c(){null!==o&&void 0!==o.material&&(l=o.material,t in l?(a.setValue(l[t]),s.setDisplay("")):s.setDisplay("none"))}return i.objectSelected.add((function(e){o=e,c()})),i.materialChanged.add(c),s}function ml(e){return ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(e)}function gl(e){return function(e){if(Array.isArray(e))return yl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yl(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==ml(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ml(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ml(i)?i:String(i)),r)}var i}function xl(){return xl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},xl.apply(this,arguments)}function bl(e,t){return bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bl(e,t)}function wl(e){return wl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wl(e)}var Sl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bl(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wl(r);if(i){var n=wl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ml(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t,n,r,i,o){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(l=s.call(this,e)).type="SetMaterialRangeCommand",l.name="Set Material.".concat(n),l.updatable=!0,l.object=t,l.material=l.editor.getObjectMaterial(t,o),l.oldRange=void 0!==l.material&&void 0!==l.material[n]?gl(l.material[n]):void 0,l.newRange=[r,i],l.attributeName=n,l}return t=a,(n=[{key:"execute",value:function(){this.material[this.attributeName]=gl(this.newRange),this.material.needsUpdate=!0,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"undo",value:function(){this.material[this.attributeName]=gl(this.oldRange),this.material.needsUpdate=!0,this.editor.signals.objectChanged.dispatch(this.object),this.editor.signals.materialChanged.dispatch(this.material)}},{key:"update",value:function(e){this.newRange=gl(e.newRange)}},{key:"toJSON",value:function(){var e=xl(wl(a.prototype),"toJSON",this).call(this,this);return e.objectUuid=this.object.uuid,e.attributeName=this.attributeName,e.oldRange=gl(this.oldRange),e.newRange=gl(this.newRange),e}},{key:"fromJSON",value:function(e){xl(wl(a.prototype),"fromJSON",this).call(this,e),this.attributeName=e.attributeName,this.oldRange=gl(e.oldRange),this.newRange=gl(e.newRange),this.object=this.editor.objectByUuid(e.objectUuid)}}])&&vl(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ar.m);function _l(e,t,n){var r=e.signals,i=new za.Bb;i.add(new za.sm(n).setWidth("90px"));var s=new za.mA(!1).setMarginRight("8px").onChange(x);i.add(s);var a=(new Qo.XM).onChange((function(e){null!==e&&!0!==e.isDataTexture&&e.colorSpace!==Cr.KI_&&(e.colorSpace=Cr.KI_,v.needsUpdate=!0),s.setDisabled(!1),x()}));i.add(a);var o,l,c,u,h,p,d=t.replace("Map","");if("aoMap"===t&&(o=new za.KP(1).setWidth("30px").setRange(0,1).onChange((function(){v["".concat(t,"Intensity")]!==o.getValue()&&e.execute(new ms(e,y,"".concat(t,"Intensity"),o.getValue(),0))})),i.add(o)),"bumpMap"!==t&&"displacementMap"!==t||(l=(new za.KP).setWidth("30px").onChange((function(){v["".concat(d,"Scale")]!==l.getValue()&&e.execute(new ms(e,y,"".concat(d,"Scale"),l.getValue(),0))})),i.add(l)),"normalMap"!==t&&"clearcoatNormalMap"!==t||(c=(new za.KP).setWidth("30px").onChange(b),i.add(c),u=(new za.KP).setWidth("30px").onChange(b),i.add(u)),"iridescenceThicknessMap"===t){var f=(new za.po).setMarginLeft("3px");i.add(f);var m=(new za.Bb).setMarginBottom("0px").setStyle("min-height","0px");f.add(m),m.add(new za.sm("min:").setWidth("35px")),h=(new za.KP).setWidth("40px").onChange(w),m.add(h);var g=(new za.Bb).setMarginBottom("6px").setStyle("min-height","0px");f.add(g),g.add(new za.sm("max:").setWidth("35px")),p=(new za.KP).setWidth("40px").onChange(w),g.add(p),h.setPrecision(0).setRange(0,1/0).setNudge(1).setStep(10).setUnit("nm"),p.setPrecision(0).setRange(0,1/0).setNudge(1).setStep(10).setUnit("nm")}var y=null,v=null;function x(){var n=s.getValue()?a.getValue():null;if(v[t]!==n){if(null!==n){var r=y.geometry;!1===r.hasAttribute("uv")&&console.warn("Geometry doesn't have uvs:",r),"envMap"===t&&(n.mapping=Cr.dSO)}e.execute(new cs(e,y,t,n,0))}}function b(){var t=[c.getValue(),u.getValue()];v["".concat(d,"Scale")].x===t[0]&&v["".concat(d,"Scale")].y===t[1]||e.execute(new ws(e,y,"".concat(d,"Scale"),t,0))}function w(){var t=[h.getValue(),p.getValue()];v["".concat(d,"Range")][0]===t[0]&&v["".concat(d,"Range")][1]===t[1]||e.execute(new Sl(e,y,"".concat(d,"Range"),t[0],t[1],0))}function S(){null!==y&&void 0!==y.material&&(v=y.material,t in v?(null!==v[t]&&a.setValue(v[t]),s.setValue(null!==v[t]),s.setDisabled(null===a.getValue()),void 0!==o&&o.setValue(v["".concat(t,"Intensity")]),void 0!==l&&l.setValue(v["".concat(d,"Scale")]),void 0!==c&&(c.setValue(v["".concat(d,"Scale")].x),u.setValue(v["".concat(d,"Scale")].y)),void 0!==h&&(h.setValue(v["".concat(d,"Range")][0]),p.setValue(v["".concat(d,"Range")][1])),i.setDisplay("")):i.setDisplay("none"))}return r.objectSelected.add((function(e){y=e,a.setValue(null),S()})),r.materialChanged.add(S),i}function El(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-1/0,1/0],i=e.signals,s=new za.Bb;s.add(new za.sm(n).setWidth("90px"));var a=(new za.KP).setWidth("60px").setRange(r[0],r[1]).onChange((function(){l[t]!==a.getValue()&&e.execute(new ms(e,o,t,a.getValue(),0))}));s.add(a);var o=null,l=null;function c(){null!==o&&void 0!==o.material&&(l=o.material,t in l?(a.setValue(l[t]),s.setDisplay("")):s.setDisplay("none"))}return i.objectSelected.add((function(e){o=e,c()})),i.materialChanged.add(c),s}function Cl(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[-1/0,1/0],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.01,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",c=e.signals,u=new za.Bb;u.add(new za.sm(n).setWidth("90px"));var h=(new za.KP).setWidth("60px").setRange(i[0],i[1]).setPrecision(s).setStep(a).setNudge(o).setUnit(l).onChange((function(){if(d[t][r?0:1]!==h.getValue()){var n=r?h.getValue():d[t][0],i=r?d[t][1]:h.getValue();e.execute(new Sl(e,p,t,n,i,0))}}));u.add(h);var p=null,d=null;function f(){null!==p&&void 0!==p.material&&(d=p.material,t in d?(h.setValue(d[t][r?0:1]),u.setDisplay("")):u.setDisplay("none"))}return c.objectSelected.add((function(e){p=e,f()})),c.materialChanged.add(f),u}function Tl(e,t){var n=e.signals,r=e.strings,i=null,s=null,a=new za.Bb;a.add(new za.sm(r.getKey("sidebar/material/program")).setWidth("90px"));var o=new za.y3(r.getKey("sidebar/material/info"));o.setMarginRight("4px"),o.onClick((function(){n.editScript.dispatch(i,"programInfo")})),a.add(o);var l=new za.y3(r.getKey("sidebar/material/vertex"));l.setMarginRight("4px"),l.onClick((function(){n.editScript.dispatch(i,"vertexShader")})),a.add(l);var c=new za.y3(r.getKey("sidebar/material/fragment"));function u(){null!==i&&void 0!==i.material&&(s=i.material,t in s?a.setDisplay(""):a.setDisplay("none"))}return c.setMarginRight("4px"),c.onClick((function(){n.editScript.dispatch(i,"fragmentShader")})),a.add(c),n.objectSelected.add((function(e){i=e,u()})),n.materialChanged.add(u),a}function Ml(e){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(e)}function Al(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ml(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ml(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ml(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kl(e){var t,n,r=e.signals,i=e.strings,s=0,a=new za.sd;a.setBorderTop("0"),a.setDisplay("none"),a.setPaddingTop("20px");var o=new za.Bb;o.add(new za.sm(i.getKey("sidebar/material/slot")).setWidth("90px"));var l=(new za.Cj).setWidth("170px").setFontSize("12px").onChange(be);l.setOptions({0:""}).setValue(0),o.add(l),a.add(o);var c=new za.Bb,u=(new za.Cj).setWidth("150px").setFontSize("12px").onChange(be);c.add(new za.sm(i.getKey("sidebar/material/type")).setWidth("90px")),c.add(u),a.add(c);var h=new za.Bb,p=(new za.u3).setWidth("102px").setFontSize("12px").setDisabled(!0),d=new za.y3(i.getKey("sidebar/material/new")).setMarginLeft("7px");d.onClick((function(){p.setValue(Cr.M8C.generateUUID()),be()})),h.add(new za.sm(i.getKey("sidebar/material/uuid")).setWidth("90px")),h.add(p),h.add(d),a.add(h);var f=new za.Bb,m=(new za.u3).setWidth("150px").setFontSize("12px").onChange((function(){e.execute(new ms(e,e.selected,"name",m.getValue(),s))}));f.add(new za.sm(i.getKey("sidebar/material/name")).setWidth("90px")),f.add(m),a.add(f);var g=new Tl(e,"vertexShader");a.add(g);var y=new dl(e,"color",i.getKey("sidebar/material/color"));a.add(y);var v=new dl(e,"specular",i.getKey("sidebar/material/specular"));a.add(v);var x=new El(e,"shininess",i.getKey("sidebar/material/shininess"));a.add(x);var b=new dl(e,"emissive",i.getKey("sidebar/material/emissive"));a.add(b);var w=new El(e,"reflectivity",i.getKey("sidebar/material/reflectivity"));a.add(w);var S=new El(e,"roughness",i.getKey("sidebar/material/roughness"),[0,1]);a.add(S);var _=new El(e,"metalness",i.getKey("sidebar/material/metalness"),[0,1]);a.add(_);var E=new El(e,"clearcoat",i.getKey("sidebar/material/clearcoat"),[0,1]);a.add(E);var C=new El(e,"clearcoatRoughness",i.getKey("sidebar/material/clearcoatroughness"),[0,1]);a.add(C);var T=new El(e,"iridescence",i.getKey("sidebar/material/iridescence"),[0,1]);a.add(T);var M=new El(e,"iridescenceIOR",i.getKey("sidebar/material/iridescenceIOR"),[1,5]);a.add(M);var A=new Cl(e,"iridescenceThicknessRange",i.getKey("sidebar/material/iridescenceThicknessMax"),!1,[0,1/0],0,10,1,"nm");a.add(A);var k=new El(e,"sheen",i.getKey("sidebar/material/sheen"),[0,1]);a.add(k);var P=new El(e,"sheenRoughness",i.getKey("sidebar/material/sheenroughness"),[0,1]);a.add(P);var L=new dl(e,"sheenColor",i.getKey("sidebar/material/sheencolor"));a.add(L);var D=new El(e,"transmission",i.getKey("sidebar/material/transmission"),[0,1]);a.add(D);var N=new El(e,"attenuationDistance",i.getKey("sidebar/material/attenuationDistance"));a.add(N);var R=new dl(e,"attenuationColor",i.getKey("sidebar/material/attenuationColor"));a.add(R);var I=new El(e,"thickness",i.getKey("sidebar/material/thickness"));a.add(I);var O=new pl(e,"vertexColors",i.getKey("sidebar/material/vertexcolors"));a.add(O);var F=(Al(t={},Cr.z81,"Basic"),Al(t,Cr.mSO,"RGBA"),t),B=new fl(e,"depthPacking",i.getKey("sidebar/material/depthPacking"),F);a.add(B);var U=new _l(e,"map",i.getKey("sidebar/material/map"));a.add(U);var V=new _l(e,"specularMap",i.getKey("sidebar/material/specularmap"));a.add(V);var j=new _l(e,"emissiveMap",i.getKey("sidebar/material/emissivemap"));a.add(j);var z=new _l(e,"matcap",i.getKey("sidebar/material/matcap"));a.add(z);var H=new _l(e,"alphaMap",i.getKey("sidebar/material/alphamap"));a.add(H);var W=new _l(e,"bumpMap",i.getKey("sidebar/material/bumpmap"));a.add(W);var G=new _l(e,"normalMap",i.getKey("sidebar/material/normalmap"));a.add(G);var X=new _l(e,"clearcoatNormalMap",i.getKey("sidebar/material/clearcoatnormalmap"));a.add(X);var K=new _l(e,"displacementMap",i.getKey("sidebar/material/displacementmap"));a.add(K);var q=new _l(e,"roughnessMap",i.getKey("sidebar/material/roughnessmap"));a.add(q);var J=new _l(e,"metalnessMap",i.getKey("sidebar/material/metalnessmap"));a.add(J);var Y=new _l(e,"iridescenceMap",i.getKey("sidebar/material/iridescencemap"));a.add(Y);var $=new _l(e,"sheenColorMap",i.getKey("sidebar/material/sheencolormap"));a.add($);var Z=new _l(e,"sheenRoughnessMap",i.getKey("sidebar/material/sheenroughnessmap"));a.add(Z);var Q=new _l(e,"iridescenceThicknessMap",i.getKey("sidebar/material/iridescencethicknessmap"));a.add(Q);var ee=new _l(e,"envMap",i.getKey("sidebar/material/envmap"));a.add(ee);var te=new _l(e,"lightMap",i.getKey("sidebar/material/lightmap"));a.add(te);var ne=new _l(e,"aoMap",i.getKey("sidebar/material/aomap"));a.add(ne);var re=new _l(e,"gradientMap",i.getKey("sidebar/material/gradientmap"));a.add(re);var ie=new _l(e,"transmissionMap",i.getKey("sidebar/material/transmissionmap"));a.add(ie);var se=new _l(e,"thicknessMap",i.getKey("sidebar/material/thicknessmap"));a.add(se);var ae=new fl(e,"side",i.getKey("sidebar/material/side"),{0:"Front",1:"Back",2:"Double"});a.add(ae);var oe=new El(e,"size",i.getKey("sidebar/material/size"),[0,1/0]);a.add(oe);var le=new pl(e,"sizeAttenuation",i.getKey("sidebar/material/sizeAttenuation"));a.add(le);var ce=new pl(e,"flatShading",i.getKey("sidebar/material/flatShading"));a.add(ce);var ue=new fl(e,"blending",i.getKey("sidebar/material/blending"),{0:"No",1:"Normal",2:"Additive",3:"Subtractive",4:"Multiply",5:"Custom"});a.add(ue);var he=new El(e,"opacity",i.getKey("sidebar/material/opacity"),[0,1]);a.add(he);var pe=new pl(e,"transparent",i.getKey("sidebar/material/transparent"));a.add(pe);var de=new pl(e,"forceSinglePass",i.getKey("sidebar/material/forcesinglepass"));a.add(de);var fe=new El(e,"alphaTest",i.getKey("sidebar/material/alphatest"),[0,1]);a.add(fe);var me=new pl(e,"depthTest",i.getKey("sidebar/material/depthtest"));a.add(me);var ge=new pl(e,"depthWrite",i.getKey("sidebar/material/depthwrite"));a.add(ge);var ye=new pl(e,"wireframe",i.getKey("sidebar/material/wireframe"));a.add(ye);var ve=new za.Bb,xe=(new za.GJ).setWidth("150px").setHeight("40px").setFontSize("12px").onChange(be);function be(){var t=s;(s=parseInt(l.getValue()))!==t&&we();var r=e.getObjectMaterial(n,s);if(r){void 0!==r.uuid&&r.uuid!==p.getValue()&&e.execute(new ms(e,n,"uuid",p.getValue(),s)),r.type!==u.getValue()&&("RawShaderMaterial"===(r=new(Pl[u.getValue()])).type&&(r.vertexShader=Ll+r.vertexShader),Array.isArray(n.material)?e.removeMaterial(n.material[s]):e.removeMaterial(n.material),e.execute(new rs(e,n,r,s),"New Material: "+u.getValue()),e.addMaterial(r));try{var i=JSON.parse(xe.getValue());JSON.stringify(r.userData)!=JSON.stringify(i)&&e.execute(new ms(e,n,"userData",i,s))}catch(e){console.warn(e)}we()}}function we(){if(n){var t=n.material;if(Array.isArray(t)){var r={};s=Math.max(0,Math.min(t.length,s));for(var i=0;i<t.length;i++)r[i]=String(i+1)+": "+t[i].name;l.setOptions(r).setValue(s)}void 0!==(t=e.getObjectMaterial(n,s)).uuid&&p.setValue(t.uuid),void 0!==t.name&&m.setValue(t.name),n.isMesh?u.setOptions(Dl):n.isSprite?u.setOptions(Rl):n.isPoints?u.setOptions(Il):n.isLine&&u.setOptions(Nl),u.setValue(t.type),function(){var e=n.material;Array.isArray(e)?o.setDisplay(""):o.setDisplay("none")}();try{xe.setValue(JSON.stringify(t.userData,null,"  "))}catch(e){console.log(e)}xe.setBorderColor("transparent"),xe.setBackgroundColor("")}}return xe.onKeyUp((function(){try{JSON.parse(xe.getValue()),xe.dom.classList.add("success"),xe.dom.classList.remove("fail")}catch(e){xe.dom.classList.remove("success"),xe.dom.classList.add("fail")}})),ve.add(new za.sm(i.getKey("sidebar/material/userdata")).setWidth("90px")),ve.add(xe),a.add(ve),r.objectSelected.add((function(e){var t=!1;e&&e.material&&(t=!0,Array.isArray(e.material)&&0===e.material.length&&(t=!1)),t?(n=e,we(),a.setDisplay("")):(n=null,a.setDisplay("none"))})),r.materialChanged.add(we),a}var Pl={LineBasicMaterial:Cr.nls,LineDashedMaterial:Cr.FT0,MeshBasicMaterial:Cr.vBJ,MeshDepthMaterial:Cr.lRF,MeshNormalMaterial:Cr.RSm,MeshLambertMaterial:Cr.YBo,MeshMatcapMaterial:Cr.kaV,MeshPhongMaterial:Cr.xoR,MeshToonMaterial:Cr.IKL,MeshStandardMaterial:Cr.Wid,MeshPhysicalMaterial:Cr.EJi,RawShaderMaterial:Cr.FIo,ShaderMaterial:Cr.jyz,ShadowMaterial:Cr.Tn7,SpriteMaterial:Cr.xeV,PointsMaterial:Cr.UY4},Ll=["uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;\n","attribute vec3 position;\n\n"].join("\n"),Dl={MeshBasicMaterial:"MeshBasicMaterial",MeshDepthMaterial:"MeshDepthMaterial",MeshNormalMaterial:"MeshNormalMaterial",MeshLambertMaterial:"MeshLambertMaterial",MeshMatcapMaterial:"MeshMatcapMaterial",MeshPhongMaterial:"MeshPhongMaterial",MeshToonMaterial:"MeshToonMaterial",MeshStandardMaterial:"MeshStandardMaterial",MeshPhysicalMaterial:"MeshPhysicalMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial",ShadowMaterial:"ShadowMaterial"},Nl={LineBasicMaterial:"LineBasicMaterial",LineDashedMaterial:"LineDashedMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial"},Rl={SpriteMaterial:"SpriteMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial"},Il={PointsMaterial:"PointsMaterial",RawShaderMaterial:"RawShaderMaterial",ShaderMaterial:"ShaderMaterial"};function Ol(e){var t=e.strings,n=new za.Rg;return n.setId("properties"),n.addTab("object",t.getKey("sidebar/properties/object"),new tl(e)),n.addTab("geometry",t.getKey("sidebar/properties/geometry"),new hl(e)),n.addTab("material",t.getKey("sidebar/properties/material"),new kl(e)),n.select("object"),n}function Fl(e){var t=e.strings,n=e.signals,r=new za.sd;r.setDisplay("none"),r.add(new za.sm(t.getKey("sidebar/script")).setTextTransform("uppercase")),r.add(new za.MH),r.add(new za.MH);var i=new za.Bb;r.add(i);var s=new za.y3(t.getKey("sidebar/script/new"));function a(){i.clear(),i.setDisplay("none");var r=e.selected;if(null!==r){var s=e.scripts[r.uuid];if(void 0!==s&&s.length>0){i.setDisplay("block");for(var a=0;a<s.length;a++)!function(r,s){var a=new za.u3(s.name).setWidth("130px").setFontSize("12px");a.onChange((function(){e.execute(new Gs(e,e.selected,s,"name",this.getValue()))})),i.add(a);var o=new za.y3(t.getKey("sidebar/script/edit"));o.setMarginLeft("4px"),o.onClick((function(){n.editScript.dispatch(r,s)})),i.add(o);var l=new za.y3(t.getKey("sidebar/script/remove"));l.setMarginLeft("4px"),l.onClick((function(){window.confirm("Are you sure?")&&e.execute(new Di(e,e.selected,s))})),i.add(l),i.add(new za.MH)}(r,s[a])}}}return s.onClick((function(){e.execute(new di(e,e.selected,{name:"",source:"function update( event ) {}"}))})),r.add(s),n.objectSelected.add((function(t){null!==t&&e.camera!==t?(r.setDisplay("block"),a()):r.setDisplay("none")})),n.scriptAdded.add(a),n.scriptRemoved.add(a),n.scriptChanged.add(a),r}function Bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ul(e){var t=e.strings,n=e.signals,r=e.mixer;function i(e){return e.isRunning()?t.getKey("sidebar/animations/stop"):t.getKey("sidebar/animations/play")}function s(e,t){var n=r.clipAction(e,t),s=new za.Bb,a=new za.sm(e.name).setWidth("200px");s.add(a);var o=new za.y3(i(n));return o.onClick((function(){n.isRunning()?n.stop():n.play(),o.setTextContent(i(n))})),s.add(o),s}n.objectSelected.add((function(e){if(null!==e&&e.animations.length>0){o.clear();var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}(e.animations);try{for(n.s();!(t=n.n()).done;){var r=t.value;o.add(new s(r,e))}}catch(e){n.e(e)}finally{n.f()}a.setDisplay("")}else a.setDisplay("none")})),n.objectRemoved.add((function(e){null!==e&&e.animations.length>0&&r.uncacheRoot(e)}));var a=new za.sd;a.setDisplay("none"),a.add(new za.sm(t.getKey("sidebar/animations")).setTextTransform("uppercase")),a.add(new za.MH),a.add(new za.MH);var o=new za.po;a.add(o);var l=new za.Bb,c=new za.KP(.5).setWidth("60px").setRange(-10,10);return c.onChange((function(){r.timeScale=c.getValue()})),l.add(new za.sm(t.getKey("sidebar/animations/timescale")).setWidth("90px")),l.add(c),a.add(l),a}function Vl(e){var t=e.config,n=e.signals,r=e.strings,i=null,s=new za.sd,a=new za.Bb;a.add(new za.sm(r.getKey("sidebar/project/renderer").toUpperCase())),s.add(a);var o=new za.Bb;s.add(o),o.add(new za.sm(r.getKey("sidebar/project/antialias")).setWidth("90px"));var l=new Qo.hO(t.getKey("project/renderer/antialias")).onChange(x);o.add(l);var c=new za.Bb;s.add(c),c.add(new za.sm(r.getKey("sidebar/project/useLegacyLights")).setWidth("90px"));var u=new Qo.hO(t.getKey("project/renderer/useLegacyLights")).onChange((function(){i.useLegacyLights=this.getValue(),n.rendererUpdated.dispatch()}));c.add(u);var h=new za.Bb;s.add(h),h.add(new za.sm(r.getKey("sidebar/project/shadows")).setWidth("90px"));var p=new Qo.hO(t.getKey("project/renderer/shadows")).onChange(f);h.add(p);var d=(new za.Cj).setOptions({0:"Basic",1:"PCF",2:"PCF Soft"}).setWidth("125px").onChange(f);function f(){i.shadowMap.enabled=p.getValue(),i.shadowMap.type=parseFloat(d.getValue()),n.rendererUpdated.dispatch()}d.setValue(t.getKey("project/renderer/shadowType")),h.add(d);var m=new za.Bb;s.add(m),m.add(new za.sm(r.getKey("sidebar/project/toneMapping")).setWidth("90px"));var g=(new za.Cj).setOptions({0:"No",1:"Linear",2:"Reinhard",3:"Cineon",4:"ACESFilmic"}).setWidth("120px").onChange(v);g.setValue(t.getKey("project/renderer/toneMapping")),m.add(g);var y=new za.KP(t.getKey("project/renderer/toneMappingExposure"));function v(){y.setDisplay("0"===g.getValue()?"none":""),i.toneMapping=parseFloat(g.getValue()),i.toneMappingExposure=y.getValue(),n.rendererUpdated.dispatch()}function x(){(i=new Cr.CP7({antialias:l.getValue()})).useLegacyLights=u.getValue(),i.shadowMap.enabled=p.getValue(),i.shadowMap.type=parseFloat(d.getValue()),i.toneMapping=parseFloat(g.getValue()),i.toneMappingExposure=y.getValue(),n.rendererCreated.dispatch(i),n.rendererUpdated.dispatch()}return y.setDisplay("0"===g.getValue()?"none":""),y.setWidth("30px").setMarginLeft("10px"),y.setRange(0,10),y.onChange(v),m.add(y),x(),n.editorCleared.add((function(){i.useLegacyLights=!1,i.shadowMap.enabled=!0,i.shadowMap.type=Cr._iA,i.toneMapping=Cr.uL9,i.toneMappingExposure=1,u.setValue(i.useLegacyLights),p.setValue(i.shadowMap.enabled),d.setValue(i.shadowMap.type),g.setValue(i.toneMapping),y.setValue(i.toneMappingExposure),y.setDisplay(0===i.toneMapping?"none":""),n.rendererUpdated.dispatch()})),n.rendererUpdated.add((function(){t.setKey("project/renderer/antialias",l.getValue(),"project/renderer/useLegacyLights",u.getValue(),"project/renderer/shadows",p.getValue(),"project/renderer/shadowType",parseFloat(d.getValue()),"project/renderer/toneMapping",parseFloat(g.getValue()),"project/renderer/toneMappingExposure",y.getValue())})),s}function jl(e){return jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(e)}function zl(){zl=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof p?t:p,a=Object.create(s.prototype),o=new C(i||[]);return r(a,"_invoke",{value:w(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function p(){}function d(){}function f(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==jl(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,o)}))}o(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=S(a,n);if(o){if(o===h)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},x(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var a=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(v),l(v,o,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Hl(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function Wl(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){Hl(s,r,i,a,o,"next",e)}function o(e){Hl(s,r,i,a,o,"throw",e)}a(void 0)}))}}function Gl(e){var t=e.strings,n=new za.sd;n.setId("render"),n.add(new za.sm(t.getKey("sidebar/project/video")).setTextTransform("uppercase")),n.add(new za.MH,new za.MH);var r=new za.Bb;n.add(r),r.add(new za.sm(t.getKey("sidebar/project/resolution")).setWidth("90px"));var i=new za.sN(1024).setTextAlign("center").setWidth("28px");r.add(i),r.add(new za.sm("×").setTextAlign("center").setFontSize("12px").setWidth("12px"));var s=new za.sN(1024).setTextAlign("center").setWidth("28px");r.add(s);var a=new za.sN(30).setTextAlign("center").setWidth("20px");r.add(a),r.add(new za.sm("fps").setFontSize("12px"));var o=new za.Bb;o.add(new za.sm(t.getKey("sidebar/project/duration")).setWidth("90px"));var l=new za.sN(10);o.add(l),n.add(o),n.add(new za.sm("").setWidth("90px"));var c=new za.ug(0);c.setDisplay("none"),c.setWidth("170px"),n.add(c);var u=new za.y3(t.getKey("sidebar/project/render")).setTextTransform("uppercase");u.setWidth("170px"),u.onClick(Wl(zl().mark((function t(){var n,r,o,p,d,f,m,g,y,v,x,b,w,S,_;return zl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.setDisplay("none"),c.setDisplay(""),c.setValue(0),(n=new Zo.Player).load(e.toJSON()),n.setPixelRatio(1),n.setSize(i.getValue(),s.getValue()),r=n.dom.firstElementChild,o=FFmpeg,p=o.createFFmpeg,d=o.fetchFile,f=p({log:!0}),t.next=12,f.load();case 12:f.setProgress((function(e){var t=e.ratio;c.setValue(.5*t+.5)})),m=a.getValue(),g=l.getValue(),y=g*m,v=0,x=0;case 18:if(!(x<y)){t.next=32;break}return n.render(v),b=x.toString().padStart(5,"0"),t.t0=f,t.t1="tmp.".concat(b,".png"),t.next=25,d(r.toDataURL());case 25:t.t2=t.sent,t.t0.FS.call(t.t0,"writeFile",t.t1,t.t2),v+=1/m,c.setValue(x/y*.5);case 29:x++,t.next=18;break;case 32:return t.next=34,f.run("-framerate",String(m),"-pattern_type","glob","-i","*.png","-c:v","libx264","-pix_fmt","yuv420p","-preset","slow","-crf",String(5),"out.mp4");case 34:for(w=f.FS("readFile","out.mp4"),S=0;S<y;S++)_=S.toString().padStart(5,"0"),f.FS("unlink","tmp.".concat(_,".png"));E=new Blob([w.buffer],{type:"video/mp4"}),C="out.mp4",h.href&&URL.revokeObjectURL(h.href),h.href=URL.createObjectURL(E),h.download=C,h.dispatchEvent(new MouseEvent("click")),n.dispose(),u.setDisplay(""),c.setDisplay("none");case 40:case"end":return t.stop()}var E,C}),t)})))),n.add(u);var h=document.createElement("a");return n}function Xl(e){var t=e.config,n=e.signals,r=e.strings,i=new za.vF,s=new za.sd;s.setBorderTop("0"),s.setPaddingTop("20px"),i.add(s);var a=new za.Bb,o=new za.u3(t.getKey("project/title")).setLeft("100px").setWidth("150px").onChange((function(){t.setKey("project/title",this.getValue())}));a.add(new za.sm(r.getKey("sidebar/project/title")).setWidth("90px")),a.add(o),s.add(a);var l=new za.Bb,c=new za.mA(t.getKey("project/editable")).setLeft("100px").onChange((function(){t.setKey("project/editable",this.getValue())}));l.add(new za.sm(r.getKey("sidebar/project/editable")).setWidth("90px")),l.add(c),s.add(l);var u=new za.Bb,h=new za.mA(t.getKey("project/vr")).setLeft("100px").onChange((function(){t.setKey("project/vr",this.getValue())}));return u.add(new za.sm(r.getKey("sidebar/project/vr")).setWidth("90px")),u.add(h),s.add(u),i.add(new Vl(e)),"SharedArrayBuffer"in window&&i.add(new Gl(e)),n.editorCleared.add((function(){o.setValue(""),t.setKey("project/title","")})),i}function Kl(e){var t=e.signals,n=e.strings,r=new za.sd,i=new za.Bb;i.add(new za.sm(n.getKey("sidebar/settings/viewport").toUpperCase())),r.add(i);var s=new za.Bb;s.add(new za.sm(n.getKey("sidebar/settings/viewport/grid")).setWidth("90px"));var a=new Qo.hO(!0).onChange((function(){t.showGridChanged.dispatch(a.getValue())}));s.add(a),r.add(s);var o=new za.Bb;o.add(new za.sm(n.getKey("sidebar/settings/viewport/helpers")).setWidth("90px"));var l=new Qo.hO(!0).onChange((function(){t.showHelpersChanged.dispatch(l.getValue())}));return o.add(l),r.add(o),r}function ql(e){var t=e.strings,n=navigator.platform.toUpperCase().indexOf("MAC")>=0;function r(e){return e.match(/^[A-Za-z0-9]$/i)}var i=e.config,s=e.signals,a=new za.sd,o=new za.Bb;o.add(new za.sm(t.getKey("sidebar/settings/shortcuts").toUpperCase())),a.add(o);var l=["translate","rotate","scale","undo","focus"];function c(e){var n="settings/shortcuts/"+e,s=new za.Bb,o=(new za.u3).setWidth("15px").setFontSize("12px");o.setTextAlign("center"),o.setTextTransform("lowercase"),o.onChange((function(){var e=o.getValue().toLowerCase();r(e)&&i.setKey(n,e)})),o.dom.addEventListener("click",(function(){o.dom.select()})),o.dom.addEventListener("blur",(function(){r(o.getValue())||o.setValue(i.getKey(n))})),o.dom.addEventListener("keyup",(function(e){r(e.key)&&o.dom.blur()})),void 0!==i.getKey(n)&&o.setValue(i.getKey(n)),o.dom.maxLength=1,s.add(new za.sm(t.getKey("sidebar/settings/shortcuts/"+e)).setTextTransform("capitalize").setWidth("90px")),s.add(o),a.add(s)}for(var u=0;u<l.length;u++)c(l[u]);return document.addEventListener("keydown",(function(t){switch(t.key.toLowerCase()){case"backspace":case"delete":var r=e.selected;if(null===r)return;null!==r.parent&&e.execute(new Ti(e,r));break;case i.getKey("settings/shortcuts/translate"):s.transformModeChanged.dispatch("translate");break;case i.getKey("settings/shortcuts/rotate"):s.transformModeChanged.dispatch("rotate");break;case i.getKey("settings/shortcuts/scale"):s.transformModeChanged.dispatch("scale");break;case i.getKey("settings/shortcuts/undo"):(n?t.metaKey:t.ctrlKey)&&(t.preventDefault(),t.shiftKey?e.redo():e.undo());break;case i.getKey("settings/shortcuts/focus"):null!==e.selected&&e.focus(e.selected)}})),a}function Jl(e){var t=e.strings,n=e.signals,r=e.config,i=e.history,s=new za.sd;s.add(new za.sm(t.getKey("sidebar/history").toUpperCase()));var a=new Qo.hO(r.getKey("settings/history"),t.getKey("sidebar/history/persistent"));a.setPosition("absolute").setRight("8px"),a.onChange((function(){var t=this.getValue();if(r.setKey("settings/history",t),t){alert("The history will be preserved across sessions.\nThis can have an impact on performance when working with textures.");var s=i.undos[i.undos.length-1],a=void 0!==s?s.id:0;e.history.enableSerialization(a)}else n.historyChanged.dispatch()})),s.add(a),s.add(new za.MH,new za.MH);var o=!1,l=new Qo.gg(e);l.onChange((function(){o=!0,e.history.goToState(parseInt(l.getValue())),o=!1})),s.add(l);var c=function(){var e=[];function t(e){var t=document.createElement("div");return t.value=e.id,t}!function(n){for(var r=0,i=n.length;r<i;r++){var s=n[r],a=t(s);a.innerHTML="&nbsp;"+s.name,e.push(a)}}(i.undos),function(n){for(var r=n.length-1;r>=0;r--){var i=n[r],s=t(i);s.innerHTML="&nbsp;"+i.name,s.style.opacity=.3,e.push(s)}}(i.redos),l.setOptions(e)};return c(),n.editorCleared.add(c),n.historyChanged.add(c),n.historyChanged.add((function(e){!0!==o&&l.setValue(void 0!==e?e.id:null)})),s}function Yl(e){var t=e.config,n=e.strings,r=new za.vF,i=new za.sd;i.setBorderTop("0"),i.setPaddingTop("20px"),r.add(i);var s=new za.Bb,a=(new za.Cj).setWidth("150px");return a.setOptions({en:"English",fr:"Français",zh:"中文"}),void 0!==t.getKey("language")&&a.setValue(t.getKey("language")),a.onChange((function(){var t=this.getValue();e.config.setKey("language",t)})),s.add(new za.sm(n.getKey("sidebar/settings/language")).setWidth("90px")),s.add(a),i.add(s),r.add(new Kl(e)),r.add(new ql(e)),r.add(new Jl(e)),r}function $l(e){var t=e.strings,n=new za.Rg;n.setId("sidebar");var r=(new za.vF).add(new el(e),new Ol(e),new Ul(e),new Fl(e)),i=new Xl(e),s=new Yl(e);return n.addTab("scene",t.getKey("sidebar/scene"),r),n.addTab("project",t.getKey("sidebar/project"),i),n.addTab("settings",t.getKey("sidebar/settings"),s),n.select("scene"),n}function Zl(e){var t=e.strings,n=new za.sd;n.setClass("menu");var r=new za.sd;r.setClass("title"),r.setTextContent(t.getKey("menubar/add")),n.add(r);var i=new za.sd;i.setClass("options"),n.add(i);var s=new za.Bb;return s.setClass("option"),s.setTextContent(t.getKey("menubar/add/group")),s.onClick((function(){var t=new Cr.ZAu;t.name="Group",e.execute(new Rr(e,t))})),i.add(s),i.add(new za.OS),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/box")),s.onClick((function(){var t=new Cr.DvJ(1,1,1,1,1,1),n=new Cr.Kj0(t,new Cr.Wid);n.name="Box",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/capsule")),s.onClick((function(){var t=new Cr.BVQ(1,1,4,8),n=new Cr.Wid,r=new Cr.Kj0(t,n);r.name="Capsule",e.execute(new Rr(e,r))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/circle")),s.onClick((function(){var t=new Cr.zf8(1,32,0,2*Math.PI),n=new Cr.Kj0(t,new Cr.Wid);n.name="Circle",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/cylinder")),s.onClick((function(){var t=new Cr.fHI(1,1,1,32,1,!1,0,2*Math.PI),n=new Cr.Kj0(t,new Cr.Wid);n.name="Cylinder",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/dodecahedron")),s.onClick((function(){var t=new Cr.Kgo(1,0),n=new Cr.Kj0(t,new Cr.Wid);n.name="Dodecahedron",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/icosahedron")),s.onClick((function(){var t=new Cr.cJO(1,0),n=new Cr.Kj0(t,new Cr.Wid);n.name="Icosahedron",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/lathe")),s.onClick((function(){var t=new Cr.p7y,n=new Cr.Kj0(t,new Cr.Wid({side:Cr.ehD}));n.name="Lathe",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/octahedron")),s.onClick((function(){var t=new Cr.pQR(1,0),n=new Cr.Kj0(t,new Cr.Wid);n.name="Octahedron",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/plane")),s.onClick((function(){var t=new Cr._12(1,1,1,1),n=new Cr.Wid,r=new Cr.Kj0(t,n);r.name="Plane",e.execute(new Rr(e,r))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/ring")),s.onClick((function(){var t=new Cr.o8S(.5,1,32,1,0,2*Math.PI),n=new Cr.Kj0(t,new Cr.Wid);n.name="Ring",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/sphere")),s.onClick((function(){var t=new Cr.xo$(1,32,16,0,2*Math.PI,0,Math.PI),n=new Cr.Kj0(t,new Cr.Wid);n.name="Sphere",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/sprite")),s.onClick((function(){var t=new Cr.jyi(new Cr.xeV);t.name="Sprite",e.execute(new Rr(e,t))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/tetrahedron")),s.onClick((function(){var t=new Cr.H$k(1,0),n=new Cr.Kj0(t,new Cr.Wid);n.name="Tetrahedron",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/torus")),s.onClick((function(){var t=new Cr.XvJ(1,.4,12,48,2*Math.PI),n=new Cr.Kj0(t,new Cr.Wid);n.name="Torus",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/torusknot")),s.onClick((function(){var t=new Cr.FE5(1,.4,64,8,2,3),n=new Cr.Kj0(t,new Cr.Wid);n.name="TorusKnot",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/tube")),s.onClick((function(){var t=new Cr.YT8([new Cr.Pa4(2,2,-2),new Cr.Pa4(2,-2,-.6666666666666667),new Cr.Pa4(-2,-2,.6666666666666667),new Cr.Pa4(-2,2,2)]),n=new Cr.WXh(t,64,1,8,!1),r=new Cr.Kj0(n,new Cr.Wid);r.name="Tube",e.execute(new Rr(e,r))})),i.add(s),i.add(new za.OS),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/ambientlight")),s.onClick((function(){var t=new Cr.Mig(2236962);t.name="AmbientLight",e.execute(new Rr(e,t))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/directionallight")),s.onClick((function(){var t=new Cr.Ox3(16777215,1);t.name="DirectionalLight",t.target.name="DirectionalLight Target",t.position.set(5,10,7.5),e.execute(new Rr(e,t))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/hemispherelight")),s.onClick((function(){var t=new Cr.vmT(43775,16755200,1);t.name="HemisphereLight",t.position.set(0,10,0),e.execute(new Rr(e,t))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/pointlight")),s.onClick((function(){var t=new Cr.cek(16777215,1,0);t.name="PointLight",e.execute(new Rr(e,t))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/spotlight")),s.onClick((function(){var t=.1*Math.PI,n=new Cr.PMe(16777215,1,0,t,0);n.name="SpotLight",n.target.name="SpotLight Target",n.position.set(5,10,7.5),e.execute(new Rr(e,n))})),i.add(s),i.add(new za.OS),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/orthographiccamera")),s.onClick((function(){var t=e.camera.aspect,n=new Cr.iKG(-t,t);n.name="OrthographicCamera",e.execute(new Rr(e,n))})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/add/perspectivecamera")),s.onClick((function(){var t=new Cr.cPb;t.name="PerspectiveCamera",e.execute(new Rr(e,t))})),i.add(s),n}function Ql(e){const t=new Map,n=new Map,r=e.clone();return ec(e,r,(function(e,r){t.set(r,e),n.set(e,r)})),r.traverse((function(e){if(!e.isSkinnedMesh)return;const r=e,i=t.get(e),s=i.skeleton.bones;r.skeleton=i.skeleton.clone(),r.bindMatrix.copy(i.bindMatrix),r.skeleton.bones=s.map((function(e){return n.get(e)})),r.bind(r.skeleton,r.bindMatrix)})),r}function ec(e,t,n){n(e,t);for(let r=0;r<e.children.length;r++)ec(e.children[r],t.children[r],n)}function tc(e){var t=e.strings,n=new za.sd;n.setClass("menu");var r=new za.sd;r.setClass("title"),r.setTextContent(t.getKey("menubar/edit")),n.add(r);var i=new za.sd;i.setClass("options"),n.add(i);var s=new za.Bb;s.setClass("option"),s.setTextContent(t.getKey("menubar/edit/undo")),s.onClick((function(){e.undo()})),i.add(s);var a=new za.Bb;a.setClass("option"),a.setTextContent(t.getKey("menubar/edit/redo")),a.onClick((function(){e.redo()})),i.add(a);var o=new za.Bb;o.setClass("option"),o.setTextContent(t.getKey("menubar/edit/clear_history")),o.onClick((function(){window.confirm("The Undo/Redo History will be cleared. Are you sure?")&&e.history.clear()})),i.add(o),e.signals.historyChanged.add((function(){var t=e.history;s.setClass("option"),a.setClass("option"),0==t.undos.length&&s.setClass("inactive"),0==t.redos.length&&a.setClass("inactive")})),i.add(new za.OS),(o=new za.Bb).setClass("option"),o.setTextContent(t.getKey("menubar/edit/center")),o.onClick((function(){var t=e.selected;if(null!==t&&null!==t.parent){var n=(new Cr.ZzF).setFromObject(t).getCenter(new Cr.Pa4),r=new Cr.Pa4;r.x=t.position.x+(t.position.x-n.x),r.y=t.position.y+(t.position.y-n.y),r.z=t.position.z+(t.position.z-n.z),e.execute(new Ms(e,t,r))}})),i.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(t.getKey("menubar/edit/clone")),o.onClick((function(){var t=e.selected;null!==t&&null!==t.parent&&(t=Ql(t),e.execute(new Rr(e,t)))})),i.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(t.getKey("menubar/edit/delete")),o.onClick((function(){var t=e.selected;null!==t&&null!==t.parent&&e.execute(new Ti(e,t))})),i.add(o),i.add(new za.OS),(o=new za.Bb).setClass("option"),o.setTextContent(t.getKey("menubar/edit/fixcolormaps")),o.onClick((function(){e.scene.traverse(c)})),i.add(o);var l=["map","envMap","emissiveMap"];function c(t){var n=t.material;if(void 0!==n){if(!0===Array.isArray(n))for(var r=0;r<n.length;r++)u(n[r]);else u(n);e.signals.sceneGraphChanged.dispatch()}}function u(e){for(var t=e.needsUpdate,n=0;n<l.length;n++){var r=e[l[n]];r&&(r.colorSpace=Cr.KI_,t=!0)}e.needsUpdate=t}return n}function nc(e){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nc(e)}function rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ic(){ic=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof p?t:p,a=Object.create(s.prototype),o=new C(i||[]);return r(a,"_invoke",{value:w(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function p(){}function d(){}function f(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(T([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=f.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==nc(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,o)}))}o(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var a=n.delegate;if(a){var o=S(a,n);if(o){if(o===h)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return d.prototype=f,r(v,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:d,configurable:!0}),d.displayName=l(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},x(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var a=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(v),l(v,o,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function sc(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function ac(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){sc(s,r,i,a,o,"next",e)}function o(e){sc(s,r,i,a,o,"throw",e)}a(void 0)}))}}function oc(e){var t=e.config,n=e.strings,r=new za.sd;r.setClass("menu");var i=new za.sd;i.setClass("title"),i.setTextContent(n.getKey("menubar/file")),r.add(i);var s=new za.sd;s.setClass("options"),r.add(s);var o=new za.Bb;o.setClass("option"),o.setTextContent(n.getKey("menubar/file/new")),o.onClick((function(){window.confirm("Any unsaved data will be lost. Are you sure?")&&e.clear()})),s.add(o),s.add(new za.OS);var l=document.createElement("form");l.style.display="none",document.body.appendChild(l);var c=document.createElement("input");c.multiple=!0,c.type="file",c.addEventListener("change",(function(){e.loader.loadFiles(c.files),l.reset()})),l.appendChild(c),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/import")),o.onClick((function(){c.click()})),s.add(o),s.add(new za.OS),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/geometry")),o.onClick((function(){var t=e.selected;if(null!==t){var n=t.geometry;if(void 0!==n){var r=n.toJSON();try{r=(r=JSON.stringify(r,null,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1")}catch(e){r=JSON.stringify(r)}d(r,"geometry.json")}else alert("The selected object doesn't have geometry.")}else alert("No object selected.")})),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/object")),o.onClick((function(){var t=e.selected;if(null!==t){var n=t.toJSON();try{n=(n=JSON.stringify(n,null,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1")}catch(e){n=JSON.stringify(n)}d(n,"model.json")}else alert("No object selected")})),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/scene")),o.onClick((function(){var t=e.scene.toJSON();try{t=(t=JSON.stringify(t,null,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1")}catch(e){t=JSON.stringify(t)}d(t,"scene.json")})),s.add(o),s.add(new za.OS),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/dae")),o.onClick(ac(ic().mark((function t(){var n;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(940).then(a.bind(a,1940));case 2:n=t.sent,(new(0,n.ColladaExporter)).parse(e.scene,(function(e){d(e.data,"scene.dae")}));case 6:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/drc")),o.onClick(ac(ic().mark((function t(){var n,r,i,s,o;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=e.selected)&&void 0!==n.isMesh){t.next=4;break}return alert("No mesh selected"),t.abrupt("return");case 4:return t.next=6,a.e(817).then(a.bind(a,5817));case 6:r=t.sent,i=r.DRACOExporter,s=new i,o={decodeSpeed:5,encodeSpeed:5,encoderMethod:i.MESH_EDGEBREAKER_ENCODING,quantization:[16,8,8,8,8],exportUvs:!0,exportNormals:!0,exportColor:n.geometry.hasAttribute("color")},p(s.parse(n,o),"model.drc");case 12:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/glb")),o.onClick(ac(ic().mark((function t(){var n,r,i;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.scene,r=f(n),t.next=4,a.e(646).then(a.bind(a,2646));case 4:i=t.sent,(new(0,i.GLTFExporter)).parse(n,(function(e){p(e,"scene.glb")}),void 0,{binary:!0,animations:r});case 8:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/gltf")),o.onClick(ac(ic().mark((function t(){var n,r,i;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.scene,r=f(n),t.next=4,a.e(646).then(a.bind(a,2646));case 4:i=t.sent,(new(0,i.GLTFExporter)).parse(n,(function(e){d(JSON.stringify(e,null,2),"scene.gltf")}),void 0,{animations:r});case 8:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/obj")),o.onClick(ac(ic().mark((function t(){var n,r;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=e.selected)){t.next=4;break}return alert("No object selected."),t.abrupt("return");case 4:return t.next=6,a.e(53).then(a.bind(a,3053));case 6:r=t.sent,d((new(0,r.OBJExporter)).parse(n),"model.obj");case 10:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/ply")),o.onClick(ac(ic().mark((function t(){var n;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(321).then(a.bind(a,3321));case 2:n=t.sent,(new(0,n.PLYExporter)).parse(e.scene,(function(e){p(e,"model.ply")}));case 6:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/ply_binary")),o.onClick(ac(ic().mark((function t(){var n;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(321).then(a.bind(a,3321));case 2:n=t.sent,(new(0,n.PLYExporter)).parse(e.scene,(function(e){p(e,"model-binary.ply")}),{binary:!0});case 6:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/stl")),o.onClick(ac(ic().mark((function t(){var n;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(301).then(a.bind(a,6301));case 2:n=t.sent,d((new(0,n.STLExporter)).parse(e.scene),"model.stl");case 6:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/stl_binary")),o.onClick(ac(ic().mark((function t(){var n;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(301).then(a.bind(a,6301));case 2:n=t.sent,p((new(0,n.STLExporter)).parse(e.scene,{binary:!0}),"model-binary.stl");case 6:case"end":return t.stop()}}),t)})))),s.add(o),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/export/usdz")),o.onClick(ac(ic().mark((function t(){var n,r,i;return ic().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(440).then(a.bind(a,4440));case 2:return n=t.sent,r=n.USDZExporter,i=new r,t.t0=p,t.next=8,i.parse(e.scene);case 8:t.t1=t.sent,(0,t.t0)(t.t1,"model.usdz");case 10:case"end":return t.stop()}}),t)})))),s.add(o),s.add(new za.OS),(o=new za.Bb).setClass("option"),o.setTextContent(n.getKey("menubar/file/publish")),o.onClick((function(){var n={},r=e.toJSON();r.metadata.type="App",delete r.history,r=(r=JSON.stringify(r,null,"\t")).replace(/[\n\t]+([\d\.e\-\[\]]+)/g,"$1"),n["app.json"]=(0,ei.TD)(r);var i=t.getKey("project/title"),s=new Cr.lLk((function(){var e=(0,ei.Xo)(n,{level:9});h(new Blob([e.buffer],{type:"application/zip"}),(""!==i?i:"untitled")+".zip")})),a=new Cr.hH6(s);a.load("js/libs/app/index.html",(function(e){e=(e=e.replace("\x3c!-- title --\x3e",i)).replace("\x3c!-- includes --\x3e",[].join("\n\t\t"));var r="";t.getKey("project/editable")&&(r=["\t\t\tlet button = document.createElement( 'a' );","\t\t\tbutton.href = 'https://threejs.org/editor/#file=' + location.href.split( '/' ).slice( 0, - 1 ).join( '/' ) + '/app.json';","\t\t\tbutton.style.cssText = 'position: absolute; bottom: 20px; right: 20px; padding: 10px 16px; color: #fff; border: 1px solid #fff; border-radius: 20px; text-decoration: none;';","\t\t\tbutton.target = '_blank';","\t\t\tbutton.textContent = 'EDIT';","\t\t\tdocument.body.appendChild( button );"].join("\n")),e=e.replace("\t\t\t/* edit button */",r),n["index.html"]=(0,ei.TD)(e)})),a.load("js/libs/app.js",(function(e){n["js/app.js"]=(0,ei.TD)(e)})),a.load("../build/three.module.js",(function(e){n["js/three.module.js"]=(0,ei.TD)(e)})),a.load("../examples/jsm/webxr/VRButton.js",(function(e){n["js/VRButton.js"]=(0,ei.TD)(e)}))})),s.add(o);var u=document.createElement("a");function h(e,t){u.href&&URL.revokeObjectURL(u.href),u.href=URL.createObjectURL(e),u.download=t||"data.json",u.dispatchEvent(new MouseEvent("click"))}function p(e,t){h(new Blob([e],{type:"application/octet-stream"}),t)}function d(e,t){h(new Blob([e],{type:"text/plain"}),t)}function f(e){var t=[];return e.traverse((function(e){var n;t.push.apply(t,function(e){if(Array.isArray(e))return rc(e)}(n=e.animations)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rc(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),t}return r}function lc(e){var t=e.strings,n=new za.sd;n.setClass("menu");var r=new za.sd;r.setClass("title"),r.setTextContent(t.getKey("menubar/view")),n.add(r);var i=new za.sd;i.setClass("options"),n.add(i);var s=new za.Bb;return s.setClass("option"),s.setTextContent(t.getKey("menubar/view/fullscreen")),s.onClick((function(){null===document.fullscreenElement?document.documentElement.requestFullscreen():document.exitFullscreen&&document.exitFullscreen(),null===document.webkitFullscreenElement?document.documentElement.webkitRequestFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()})),i.add(s),"xr"in navigator&&navigator.xr.isSessionSupported("immersive-vr").then((function(t){if(t){var n=new za.Bb;n.setClass("option"),n.setTextContent("VR"),n.onClick((function(){e.signals.toggleVR.dispatch()})),i.add(n)}})),n}function cc(e){var t=e.strings,n=new za.sd;n.setClass("menu");var r=new za.sd;r.setClass("title"),r.setTextContent(t.getKey("menubar/help")),n.add(r);var i=new za.sd;i.setClass("options"),n.add(i);var s=new za.Bb;return s.setClass("option"),s.setTextContent(t.getKey("menubar/help/source_code")),s.onClick((function(){window.open("https://github.com/mrdoob/three.js/tree/master/editor","_blank")})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/help/about")),s.onClick((function(){window.open("https://threejs.org","_blank")})),i.add(s),(s=new za.Bb).setClass("option"),s.setTextContent(t.getKey("menubar/help/manual")),s.onClick((function(){window.open("https://github.com/mrdoob/three.js/wiki/Editor-Manual","_blank")})),i.add(s),n}function uc(e){var t=e.strings,n=new za.sd;n.setClass("menu right");var r=new Qo.hO(e.config.getKey("autosave"),t.getKey("menubar/status/autosave"));r.text.setColor("#888"),r.onChange((function(){var t=this.getValue();e.config.setKey("autosave",t),!0===t&&e.signals.sceneGraphChanged.dispatch()})),n.add(r),e.signals.savingStarted.add((function(){r.text.setTextDecoration("underline")})),e.signals.savingFinished.add((function(){r.text.setTextDecoration("none")}));var i=new za.sm("r"+Cr.UZH);return i.setClass("title"),i.setOpacity(.5),n.add(i),n}function hc(e,t){e.signals;var n=e.strings,r=new za.sd;r.setClass("menu");var i=new za.sd;i.setClass("title"),i.setTextContent(n.getKey("menubar/controlNet")),r.add(i);var s=new za.sd;s.setClass("options"),r.add(s);var a=new za.Bb,o=0;if(t&&t.controlNetNum&&(o=Number(t.controlNetNum)),0===o)a.setClass("option"),a.setTextContent(n.getKey("menubar/controlNet/no_controlNet"));else{for(var l=function(t){(a=new za.Bb).setClass("option"),a.setTextContent(n.getKey("menubar/controlNet/send_to_txt2img")+" - "+t.toString()),a.onClick((function(){var n=e.currentRenderer;n.render(e.scene,e.viewportCamera);var r=p(n.domElement.toDataURL("image/png"),"image.png"),i=new DataTransfer;i.items.add(r),window.sendImageFunc3DEditor("txt2img",2*t,i)})),s.add(a)},c=0;c<o;c++)l(c);for(var u=function(t){(a=new za.Bb).setClass("option"),a.setTextContent(n.getKey("menubar/controlNet/send_to_img2img")+" - "+t.toString()),a.onClick((function(){var n=e.currentRenderer;n.render(e.scene,e.viewportCamera);var r=p(n.domElement.toDataURL("image/png"),"image.png"),i=new DataTransfer;i.items.add(r),window.sendImageFunc3DEditor("img2img",2*t,i)})),s.add(a)},h=0;h<o;h++)u(h)}function p(e,t){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),s=i.length,a=new Uint8Array(s);s--;)a[s]=i.charCodeAt(s);return new File([a],t,{type:r})}return r}function pc(e,t){var n=new za.sd;return n.setId("menubar"),n.add(new oc(e)),n.add(new tc(e)),n.add(new Zl(e)),n.add(new lc(e)),n.add(new cc(e)),n.add(new hc(e,t)),n.add(new uc(e)),n}function dc(e){var t=e.signals,n=document.createElement("div");function r(e){!1!==e.isPrimary&&(n.ownerDocument.removeEventListener("pointermove",i),n.ownerDocument.removeEventListener("pointerup",r))}function i(e){if(!1!==e.isPrimary){var r=document.body.offsetWidth,i=e.clientX,s=r-(i<0?0:i>r?r:i);n.style.right=s+"px",document.getElementById("sidebar").style.width=s+"px",document.getElementById("player").style.right=s+"px",document.getElementById("script").style.right=s+"px",document.getElementById("viewport").style.right=s+"px",t.windowResize.dispatch()}}return n.id="resizer",n.addEventListener("pointerdown",(function(e){!1!==e.isPrimary&&(n.ownerDocument.addEventListener("pointermove",i),n.ownerDocument.addEventListener("pointerup",r))})),new za.u1(n)}class fc{static createButton(e){const t=document.createElement("button");function n(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function r(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",r(t),navigator.xr.isSessionSupported("immersive-vr").then((function(r){r?function(){let n=null;async function r(r){r.addEventListener("end",i),await e.xr.setSession(r),t.textContent="EXIT VR",n=r}function i(){n.removeEventListener("end",i),t.textContent="ENTER VR",n=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(null===n){const e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",e).then(r)}else n.end()}}():(n(),t.textContent="VR NOT SUPPORTED"),r&&fc.xrSessionIsGranted&&t.click()})).catch((function(e){n(),console.warn("Exception when trying to call xr.isSessionSupported",e),t.textContent="VR NOT ALLOWED"})),t;{const e=document.createElement("a");return!1===window.isSecureContext?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",r(e),e}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",(()=>{fc.xrSessionIsGranted=!0}))}}}fc.xrSessionIsGranted=!1,fc.registerSessionGrantedListener(),window.VRButton=fc;var mc=function(e){var n=(0,t.useRef)();return(0,t.useEffect)((function(){var t=new ca,r=new No(t);n.current.appendChild(r.dom);var i=new Bo(t);n.current.appendChild(i.dom);var s=new $o(t);n.current.appendChild(s.dom);var a=new $l(t);n.current.appendChild(a.dom);var o=new pc(t,e);n.current.appendChild(o.dom),new dc(t),n.current.appendChild(o.dom);var l=!1;function c(){t.signals.windowResize.dispatch()}t.storage.init((function(){var e;function n(){!1!==t.config.getKey("autosave")&&(clearTimeout(e),e=setTimeout((function(){t.signals.savingStarted.dispatch(),e=setTimeout((function(){t.storage.set(t.toJSON()),t.signals.savingFinished.dispatch()}),100)}),1e3))}t.storage.get((function(e){if(!l){void 0!==e&&t.fromJSON(e);var n=t.config.getKey("selected");void 0!==n&&t.selectByUuid(n)}}));var r=t.signals;r.geometryChanged.add(n),r.objectAdded.add(n),r.objectChanged.add(n),r.objectRemoved.add(n),r.materialChanged.add(n),r.sceneBackgroundChanged.add(n),r.sceneEnvironmentChanged.add(n),r.sceneFogChanged.add(n),r.sceneGraphChanged.add(n),r.scriptChanged.add(n),r.historyChanged.add(n)})),document.addEventListener("dragover",(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"})),document.addEventListener("drop",(function(e){e.preventDefault(),"text/plain"!==e.dataTransfer.types[0]&&(e.dataTransfer.items?t.loader.loadItemList(e.dataTransfer.items):t.loader.loadFiles(e.dataTransfer.files))})),window.addEventListener("resize",c),c();var u=window.location.hash;if("file="===u.slice(1,6)){var h=u.slice(6);if(window.confirm("Any unsaved data will be lost. Are you sure?")){var p=new Cr.hH6;p.crossOrigin="",p.load(h,(function(e){t.clear(),t.fromJSON(JSON.parse(e))})),l=!0}}}),[]),t.createElement("div",{ref:n,id:"threeEditorContainer",style:{width:"100%",height:"100%",position:"relative"}})},gc=a(1642),yc={};yc.styleTagTransform=g(),yc.setAttributes=p(),yc.insert=u().bind(null,"head"),yc.domAPI=l(),yc.insertStyleElement=f(),s()(gc.Z,yc),gc.Z&&gc.Z.locals&&gc.Z.locals;var vc=Un(Zn)({margin:0,padding:0});function xc(e){var n=e.controlNetNum;return t.createElement(t.Fragment,null,t.createElement(vc,null,t.createElement(dr,{maxWidth:"none"},t.createElement(Er,{container:!0,spacing:3},t.createElement(Er,{item:!0,xs:12,style:{height:"80vh"}},t.createElement(mc,{controlNetNum:n}))))))}window.create3DEditorApp=function(e){var n=e.container,i=e.controlNetNum;n&&r.createRoot(n).render(t.createElement(xc,{controlNetNum:i}))}}()}();