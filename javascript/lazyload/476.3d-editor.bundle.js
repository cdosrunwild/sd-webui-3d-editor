"use strict";(self.webpackChunksd_webui_3d_editor=self.webpackChunksd_webui_3d_editor||[]).push([[476],{8476:function(e,t,r){r.r(t),r.d(t,{STLLoader:function(){return o}});var n=r(9477);class o extends n.aNw{constructor(e){super(e)}load(e,t,r,o){const s=this,a=new n.hH6(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(r){try{t(s.parse(r))}catch(t){o?o(t):console.error(t),s.manager.itemError(e)}}),r,o)}parse(e){function t(e,t,r){for(let n=0,o=e.length;n<o;n++)if(e[n]!==t.getUint8(r+n))return!1;return!0}const r=function(e){if("string"==typeof e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer||t}return e}(e);return function(e){const r=new DataView(e);if(84+50*r.getUint32(80,!0)===r.byteLength)return!0;const n=[115,111,108,105,100];for(let e=0;e<5;e++)if(t(n,r,e))return!1;return!0}(r)?function(e){const t=new DataView(e),r=t.getUint32(80,!0);let o,s,a,i,l,c,u,f,g=!1;for(let e=0;e<70;e++)1129270351==t.getUint32(e,!1)&&82==t.getUint8(e+4)&&61==t.getUint8(e+5)&&(g=!0,i=new Float32Array(3*r*3),l=t.getUint8(e+6)/255,c=t.getUint8(e+7)/255,u=t.getUint8(e+8)/255,f=t.getUint8(e+9)/255);const h=new n.u9r,d=new Float32Array(3*r*3),w=new Float32Array(3*r*3),p=new n.Ilk;for(let e=0;e<r;e++){const r=84+50*e,n=t.getFloat32(r,!0),f=t.getFloat32(r+4,!0),h=t.getFloat32(r+8,!0);if(g){const e=t.getUint16(r+48,!0);0==(32768&e)?(o=(31&e)/31,s=(e>>5&31)/31,a=(e>>10&31)/31):(o=l,s=c,a=u)}for(let l=1;l<=3;l++){const c=r+12*l,u=3*e*3+3*(l-1);d[u]=t.getFloat32(c,!0),d[u+1]=t.getFloat32(c+4,!0),d[u+2]=t.getFloat32(c+8,!0),w[u]=n,w[u+1]=f,w[u+2]=h,g&&(p.set(o,s,a).convertSRGBToLinear(),i[u]=p.r,i[u+1]=p.g,i[u+2]=p.b)}}return h.setAttribute("position",new n.TlE(d,3)),h.setAttribute("normal",new n.TlE(w,3)),g&&(h.setAttribute("color",new n.TlE(i,3)),h.hasColors=!0,h.alpha=f),h}(r):function(e){const t=new n.u9r,r=/solid([\s\S]*?)endsolid/g,o=/facet([\s\S]*?)endfacet/g;let s=0;const a=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,i=new RegExp("vertex"+a+a+a,"g"),l=new RegExp("normal"+a+a+a,"g"),c=[],u=[],f=new n.Pa4;let g,h=0,d=0,w=0;for(;null!==(g=r.exec(e));){d=w;const e=g[0];for(;null!==(g=o.exec(e));){let e=0,t=0;const r=g[0];for(;null!==(g=l.exec(r));)f.x=parseFloat(g[1]),f.y=parseFloat(g[2]),f.z=parseFloat(g[3]),t++;for(;null!==(g=i.exec(r));)c.push(parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])),u.push(f.x,f.y,f.z),e++,w++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+s),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+s),s++}const r=d,n=w-d;t.addGroup(r,n,h),h++}return t.setAttribute("position",new n.a$l(c,3)),t.setAttribute("normal",new n.a$l(u,3)),t}("string"!=typeof(o=e)?(new TextDecoder).decode(o):o);var o}}}}]);